const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-tJMCbgXi.js","assets/webworkerAll-c6Yd9zOx.js","assets/colorToUniform-BXaCBwVl.js","assets/index-CbqYK5_x.js","assets/index-OUYH55s0.css","assets/connection-BGh2YSnO.js","assets/create-split-props-u5h9OPvL.js","assets/slider-BFfK9nJF.js","assets/WebGPURenderer-C04EaElU.js","assets/SharedSystems-ButK0guq.js","assets/WebGLRenderer-txu-J7Yj.js"])))=>i.map(i=>d[i]);
import{a9 as wC,av as Bj,aw as Lj,ax as Fj,ay as sr,az as Hj,aA as Uj,aB as Eg,aC as Qh,r as A,h as Wn,e as Ht,g as Yn,u as fi,aD as Gj,aE as Vj,n as pi,m as Q,j as y,f as K,aF as Wj,aG as Yj,aH as qj,aI as Xj,ad as bc,aJ as $j,aK as Qj,aL as Kj,aM as Zj,aN as Jj,aO as tk,aP as ek,aQ as nk,aR as ik,aS as sk,aT as rk,aU as wc,aV as ak,aW as ok,aX as lk,aY as ck,aZ as uk,a_ as hk,a$ as dk,b0 as fk,b1 as pk,b2 as mk,b3 as gk,b4 as xk,b5 as yk,b6 as vk,b7 as _k,b8 as bk,b9 as Au,ba as wk,aa as Vr,bb as Sk,bc as Ck,bd as Mk,be as Pk,bf as Ak,bg as Tk,bh as Ek,bi as Rk,bj as jk,bk as kk,l as ki,bl as Xx,bm as Nk,bn as Ok,c as Sc,bo as $x,bp as zk,bq as Dk,br as mr,S as kt,bs as SC,bt as Ik,bu as Bk,a as Lk,bv as Fk,bw as p1,B as fe,bx as Hk,by as ph,bz as Eo,bA as Uk,au as Gk,bB as CC,t as Wi,H as ht,b as Fn,bC as Cc,bD as Vk,bE as Tu,bF as Wk,bG as Yk,bH as qk,bI as Xk,bJ as $k,bK as Qx,bL as m1,bM as Qk,bN as Kk,bO as Zk,bP as Jk}from"./index-CbqYK5_x.js";import{e as es,H as Qi,T as ut,F as Kx,b as Zx,f as Kh,u as g1,a as tN,d as x1,p as eN,g as nN,B as iN,I as Jx}from"./connection-BGh2YSnO.js";import{F as ty,S as Rg}from"./slider-BFfK9nJF.js";import{c as St}from"./create-split-props-u5h9OPvL.js";const{withContext:sN}=wC({key:"mark"}),MC=sN("mark");MC.displayName="Mark";const Sr=n=>St()(n,["immediate","lazyMount","onExitComplete","present","skipAnimationOnMount","unmountOnExit"]);function rN(n,t){const{state:e,send:i,context:s}=n,r=e.matches("mounted","unmountSuspended");return{skip:!s.get("initial"),present:r,setNode(a){a&&i({type:"NODE.SET",node:a})},unmount(){i({type:"UNMOUNT"})}}}var aN=Bj({props({props:n}){return{...n,present:!!n.present}},initialState({prop:n}){return n("present")?"mounted":"unmounted"},refs(){return{node:null,styles:null}},context({bindable:n}){return{unmountAnimationName:n(()=>({defaultValue:null})),prevAnimationName:n(()=>({defaultValue:null})),present:n(()=>({defaultValue:!1})),initial:n(()=>({sync:!0,defaultValue:!1}))}},exit:["clearInitial","cleanupNode"],watch({track:n,prop:t,send:e}){n([()=>t("present")],()=>{e({type:"PRESENCE.CHANGED"})})},on:{"NODE.SET":{actions:["setupNode"]},"PRESENCE.CHANGED":{actions:["setInitial","syncPresence"]}},states:{mounted:{on:{UNMOUNT:{target:"unmounted",actions:["clearPrevAnimationName","invokeOnExitComplete"]},"UNMOUNT.SUSPEND":{target:"unmountSuspended"}}},unmountSuspended:{effects:["trackAnimationEvents"],on:{MOUNT:{target:"mounted",actions:["setPrevAnimationName"]},UNMOUNT:{target:"unmounted",actions:["clearPrevAnimationName","invokeOnExitComplete"]}}},unmounted:{on:{MOUNT:{target:"mounted",actions:["setPrevAnimationName"]}}}},implementations:{actions:{setInitial:({context:n})=>{n.get("initial")||queueMicrotask(()=>{n.set("initial",!0)})},clearInitial:({context:n})=>{n.set("initial",!1)},invokeOnExitComplete:({prop:n,refs:t})=>{n("onExitComplete")?.();const e=t.get("node");if(!e)return;const i=Uj(e),s=new i.CustomEvent("exitcomplete",{bubbles:!1});e.dispatchEvent(s)},setupNode:({refs:n,event:t})=>{n.get("node")!==t.node&&(n.set("node",t.node),n.set("styles",Hj(t.node)))},cleanupNode:({refs:n})=>{n.set("node",null),n.set("styles",null)},syncPresence:({context:n,refs:t,send:e,prop:i})=>{const s=i("present");if(s)return e({type:"MOUNT",src:"presence.changed"});const r=t.get("node");if(!s&&r?.ownerDocument.visibilityState==="hidden")return e({type:"UNMOUNT",src:"visibilitychange"});sr(()=>{const a=Eu(t.get("styles"));n.set("unmountAnimationName",a),a==="none"||a===n.get("prevAnimationName")||t.get("styles")?.display==="none"||t.get("styles")?.animationDuration==="0s"?e({type:"UNMOUNT",src:"presence.changed"}):e({type:"UNMOUNT.SUSPEND"})})},setPrevAnimationName:({context:n,refs:t})=>{sr(()=>{n.set("prevAnimationName",Eu(t.get("styles")))})},clearPrevAnimationName:({context:n})=>{n.set("prevAnimationName",null)}},effects:{trackAnimationEvents:({context:n,refs:t,send:e,prop:i})=>{const s=t.get("node");if(!s)return;const r=h=>{(h.composedPath?.()?.[0]??h.target)===s&&n.set("prevAnimationName",Eu(t.get("styles")))},a=h=>{const f=Eu(t.get("styles"));Eg(h)===s&&f===n.get("unmountAnimationName")&&!i("present")&&e({type:"UNMOUNT",src:"animationend"})},l=h=>{Eg(h)===s&&!i("present")&&e({type:"UNMOUNT",src:"animationcancel"})};s.addEventListener("animationstart",r),s.addEventListener("animationcancel",l),s.addEventListener("animationend",a);const u=Lj(s,{animationFillMode:"forwards"});return()=>{s.removeEventListener("animationstart",r),s.removeEventListener("animationcancel",l),s.removeEventListener("animationend",a),Fj(()=>u())}}}}});function Eu(n){return n?.animationName||"none"}Qh()(["onExitComplete","present","immediate"]);function oN(n,t={}){const{sync:e=!1}=t,i=lN(n);return A.useCallback((...s)=>e?queueMicrotask(()=>i.current?.(...s)):i.current?.(...s),[e,i])}function lN(n){const t=A.useRef(n);return t.current=n,t}const Os=(n={})=>{const{lazyMount:t,unmountOnExit:e,present:i,skipAnimationOnMount:s=!1,...r}=n,a=A.useRef(!1),l={...r,present:i,onExitComplete:oN(n.onExitComplete)},u=Wn(aN,l),h=rN(u);h.present&&(a.current=!0);const f=!h.present&&!a.current&&t||e&&!h.present&&a.current,p=()=>({"data-state":h.skip&&s?void 0:i?"open":"closed",hidden:!h.present});return{ref:h.setNode,getPresenceProps:p,present:h.present,unmounted:f}},[zs,Ds]=Ht({name:"PresenceContext",hookName:"usePresenceContext",providerName:"<PresenceProvider />"}),[PC,Zh]=Ht({name:"AccordionContext",hookName:"useAccordionContext",providerName:"<AccordionProvider />"}),[cN]=Ht({name:"AccordionItemContext",hookName:"useAccordionItemContext",providerName:"<AccordionItemProvider />"}),uN=n=>St()(n,["collapsedHeight","collapsedWidth","defaultOpen","disabled","id","ids","lazyMount","onExitComplete","onOpenChange","open","unmountOnExit"]),hN=(n={})=>{const{lazyMount:t,unmountOnExit:e,...i}=n,s=A.useId(),r=A.useRef(!1),{dir:a}=Yn(),{getRootNode:l}=fi(),u={id:s,dir:a,getRootNode:l,...i},h=Wn(Gj,u),f=Vj(h,pi);f.visible&&(r.current=!0);const p=!f.visible&&!r.current&&t||e&&!f.visible&&r.current;return{...f,isUnmounted:p}},[dN,AC]=Ht({name:"CollapsibleContext",hookName:"useCollapsibleContext",providerName:"<CollapsibleProvider />"}),TC=A.forwardRef((n,t)=>{const[e,i]=uN(n),s=hN(e),r=Q(s.getRootProps(),i);return y.jsx(dN,{value:s,children:y.jsx(K.div,{...r,ref:t})})});TC.displayName="CollapsibleRoot";const[Jh,EC]=Ht({name:"RenderStrategyContext",hookName:"useRenderStrategyContext",providerName:"<RenderStrategyPropsProvider />"}),td=n=>St()(n,["lazyMount","unmountOnExit"]),[fN,ey]=Ht({name:"AccordionItemPropsContext",hookName:"useAccordionItemPropsContext",providerName:"<AccordionItemPropsProvider />"}),pN=St(),RC=A.forwardRef((n,t)=>{const[e,i]=pN(n,["value","disabled"]),s=Zh(),r=EC(),a=Q(s.getItemProps(e),i),l=s.getItemState(e),u=s.getItemContentProps(e);return y.jsx(fN,{value:e,children:y.jsx(cN,{value:l,children:y.jsx(TC,{ref:t,open:l.expanded,ids:{content:u.id},...r,...a})})})});RC.displayName="AccordionItem";const jC=A.forwardRef((n,t)=>{const e=AC();if(e.isUnmounted)return null;const i=Q(e.getContentProps(),n);return y.jsx(K.div,{...i,ref:t})});jC.displayName="CollapsibleContent";const mN=St(),kC=A.forwardRef((n,t)=>{const e=Zh(),i=ey(),s=e.getItemContentProps(i),[,r]=mN(s,["hidden","data-state"]),a=Q(r,n);return y.jsx(jC,{ref:t,...a})});kC.displayName="AccordionItemContent";const NC=A.forwardRef((n,t)=>{const e=Zh(),i=ey(),s=Q(e.getItemIndicatorProps(i),n);return y.jsx(K.div,{...s,ref:t})});NC.displayName="AccordionItemIndicator";const OC=A.forwardRef((n,t)=>{const e=Zh(),i=ey(),s=AC(),r=e.getItemTriggerProps(i),a=Q({...r,"aria-controls":s.isUnmounted?void 0:r["aria-controls"]},n);return y.jsx(K.button,{...a,ref:t})});OC.displayName="AccordionItemTrigger";const gN=n=>{const t=A.useId(),{getRootNode:e}=fi(),{dir:i}=Yn(),s={id:t,dir:i,getRootNode:e,...n},r=Wn(Wj,s);return Yj(r,pi)},xN=St(),zC=A.forwardRef((n,t)=>{const[e,i]=td(n),[s,r]=xN(i,["collapsible","defaultValue","disabled","id","ids","multiple","onFocusChange","onValueChange","orientation","value"]),a=gN(s),l=Q(a.getRootProps(),r);return y.jsx(PC,{value:a,children:y.jsx(Jh,{value:e,children:y.jsx(K.div,{...l,ref:t})})})});zC.displayName="AccordionRoot";const yN=St(),DC=A.forwardRef((n,t)=>{const[e,i]=td(n),[{value:s},r]=yN(i,["value"]),a=Q(s.getRootProps(),r);return y.jsx(PC,{value:s,children:y.jsx(Jh,{value:e,children:y.jsx(K.div,{...a,ref:t})})})});DC.displayName="AccordionRootProvider";const[IC,Mc]=Ht({name:"CheckboxContext",hookName:"useCheckboxContext",providerName:"<CheckboxProvider />"}),BC=A.forwardRef((n,t)=>{const e=Mc(),i=Q(e.getControlProps(),n);return y.jsx(K.div,{...i,ref:t})});BC.displayName="CheckboxControl";const[x9,vN]=Ht({name:"CheckboxGroupContext",hookName:"useCheckboxGroupContext",providerName:"<CheckboxGroupProvider />",strict:!1}),LC=A.forwardRef((n,t)=>{const e=Mc(),i=Q(e.getHiddenInputProps(),n),s=es();return y.jsx(K.input,{"aria-describedby":s?.ariaDescribedby,...i,ref:t})});LC.displayName="CheckboxHiddenInput";const FC=A.forwardRef((n,t)=>{const e=Mc(),i=Q(e.getLabelProps(),n);return y.jsx(K.span,{...i,ref:t})});FC.displayName="CheckboxLabel";const _N=(n={})=>{const t=vN(),e=es(),i=A.useMemo(()=>Q(n,t?.getItemProps({value:n.value})??{}),[n,t]),s=A.useId(),{getRootNode:r}=fi(),{dir:a}=Yn(),l={id:s,ids:{label:e?.ids.label,hiddenInput:e?.ids.control},dir:a,disabled:e?.disabled,readOnly:e?.readOnly,invalid:e?.invalid,required:e?.required,getRootNode:r,...i},u=Wn(qj,l);return Xj(u,pi)},bN=St(),HC=A.forwardRef((n,t)=>{const[e,i]=bN(n,["checked","defaultChecked","disabled","form","id","ids","invalid","name","onCheckedChange","readOnly","required","value"]),s=_N(e),r=Q(s.getRootProps(),i);return y.jsx(IC,{value:s,children:y.jsx(K.label,{...r,ref:t})})});HC.displayName="CheckboxRoot";const wN=St(),UC=A.forwardRef((n,t)=>{const[{value:e},i]=wN(n,["value"]),s=Q(e.getRootProps(),i);return y.jsx(IC,{value:e,children:y.jsx(K.label,{...s,ref:t})})});UC.displayName="CheckboxRootProvider";const[SN,GC]=Ht({name:"ColorPickerAreaContext",hookName:"useColorPickerAreaContext",providerName:"<ColorPickerAreaProvider />"}),[VC,Qt]=Ht({name:"ColorPickerContext",hookName:"useColorPickerContext",providerName:"<ColorPickerProvider />"}),CN=St(),WC=A.forwardRef((n,t)=>{const[e,i]=CN(n,["xChannel","yChannel"]),s=Qt(),r=Q(s.getAreaProps(e),i);return y.jsx(SN,{value:e,children:y.jsx(K.div,{...r,ref:t})})});WC.displayName="ColorPickerArea";const YC=A.forwardRef((n,t)=>{const e=Qt(),i=GC(),s=Q(e.getAreaBackgroundProps(i),n);return y.jsx(K.div,{...s,ref:t})});YC.displayName="ColorPickerAreaBackground";const qC=A.forwardRef((n,t)=>{const e=Qt(),i=GC(),s=Q(e.getAreaThumbProps(i),n);return y.jsx(K.div,{...s,ref:t})});qC.displayName="ColorPickerAreaThumb";const MN=St(),XC=A.forwardRef((n,t)=>{const[e,i]=MN(n,["channel","orientation"]),s=Qt(),r=Q(s.getChannelInputProps(e),i);return y.jsx(K.input,{...r,ref:t})});XC.displayName="ColorPickerChannelInput";const[PN,ed]=Ht({name:"ColorPickerChannelSliderContext",hookName:"useColorPickerChannelSliderContext",providerName:"<ColorPickerChannelSliderProvider />"}),[AN,ny]=Ht({name:"ColorPickerFormatContext",hookName:"useColorPickerFormatPropsContext",providerName:"<ColorPickerFormatPropsProvider />",strict:!1}),TN=St(),$C=A.forwardRef((n,t)=>{const[e,i]=TN(n,["channel","orientation"]),s=Qt(),r=ny(),a={...e,...r},l=Q(s.getChannelSliderProps(a),i);return y.jsx(PN,{value:e,children:y.jsx(K.div,{...l,ref:t})})});$C.displayName="ColorPickerChannelSlider";const QC=A.forwardRef((n,t)=>{const e=Qt(),i=ed(),s=Q(e.getChannelSliderLabelProps(i),n);return y.jsx(K.label,{...s,ref:t})});QC.displayName="ColorPickerChannelSliderLabel";const KC=A.forwardRef((n,t)=>{const e=Qt(),i=ed(),s=ny(),r={...i,...s},a=Q(e.getChannelSliderThumbProps(r),n);return y.jsx(K.div,{...a,ref:t})});KC.displayName="ColorPickerChannelSliderThumb";const ZC=A.forwardRef((n,t)=>{const e=Qt(),i=ed(),s=ny(),r={...i,...s},a=Q(e.getChannelSliderTrackProps(r),n);return y.jsx(K.div,{...a,ref:t})});ZC.displayName="ColorPickerChannelSliderTrack";const JC=A.forwardRef((n,t)=>{const{locale:e}=Yn(),i=Qt(),s=ed(),r=Q(i.getChannelSliderValueTextProps(s),n);return y.jsx(K.span,{...r,ref:t,children:n.children||i.getChannelValueText(s.channel,e)})});JC.displayName="ColorPickerChannelSliderValueText";const tM=A.forwardRef((n,t)=>{const e=Qt(),i=Ds(),s=Q(e.getContentProps(),i.getPresenceProps(),n);return i.unmounted?null:y.jsx(K.div,{...s,ref:bc(i.ref,t)})});tM.displayName="ColorPickerContent";const eM=A.forwardRef((n,t)=>{const e=Qt(),i=Q(e.getControlProps(),n);return y.jsx(K.div,{...i,ref:t})});eM.displayName="ColorPickerControl";const nM=A.forwardRef((n,t)=>{const e=Qt(),i=Q(e.getEyeDropperTriggerProps(),n);return y.jsx(K.button,{...i,ref:t})});nM.displayName="ColorPickerEyeDropperTrigger";const iM=A.forwardRef((n,t)=>{const e=Qt(),i=Q(e.getFormatSelectProps(),n);return y.jsx(K.select,{...i,ref:t,children:["rgba","hsla","hsba"].map(s=>y.jsx(K.option,{value:s,children:s},s))})});iM.displayName="ColorPickerFormatSelect";const sM=A.forwardRef((n,t)=>{const e=Qt(),i=Q(e.getFormatTriggerProps(),n);return y.jsx(K.button,{...i,ref:t})});sM.displayName="ColorPickerFormatTrigger";const rM=A.forwardRef((n,t)=>{const e=Qt(),i=Q(e.getHiddenInputProps(),n),s=es();return y.jsx(K.input,{"aria-describedby":s?.ariaDescribedby,...i,ref:t})});rM.displayName="ColorPickerHiddenInput";const aM=A.forwardRef((n,t)=>{const e=Qt(),i=Q(e.getLabelProps(),n);return y.jsx(K.label,{...i,ref:t})});aM.displayName="ColorPickerLabel";const oM=A.forwardRef((n,t)=>{const e=Qt(),i=Q(e.getPositionerProps(),n);return Ds().unmounted?null:y.jsx(K.div,{...i,ref:t})});oM.displayName="ColorPickerPositioner";const EN=n=>{const t=A.useId(),{getRootNode:e}=fi(),{dir:i}=Yn(),s=es(),r={id:t,ids:{label:s?.ids.label,input:s?.ids.control},dir:i,disabled:s?.disabled,invalid:s?.invalid,readOnly:s?.readOnly,required:s?.required,getRootNode:e,...n},a=Wn($j,r);return Qj(a,pi)},RN=St(),lM=A.forwardRef((n,t)=>{const[e,i]=Sr(n),[s,r]=RN(i,["closeOnSelect","defaultOpen","defaultValue","defaultFormat","disabled","format","id","ids","initialFocusEl","invalid","name","name","onFocusOutside","onFormatChange","onInteractOutside","onOpenChange","onPointerDownOutside","onValueChange","onValueChangeEnd","open","openAutoFocus","positioning","readOnly","required","inline","value"]),a=EN(s),l=Os(Q({present:a.open},e)),u=Q(a.getRootProps(),r);return y.jsx(VC,{value:a,children:y.jsx(zs,{value:l,children:y.jsx(K.div,{...u,ref:t})})})});lM.displayName="ColorPickerRoot";const jN=St(),cM=A.forwardRef((n,t)=>{const[e,i]=Sr(n),[{value:s},r]=jN(i,["value"]),a=Os(Q({present:s.open},e)),l=Q(s.getRootProps(),r);return y.jsx(VC,{value:s,children:y.jsx(zs,{value:a,children:y.jsx(K.div,{...l,ref:t})})})});cM.displayName="ColorPickerRootProvider";const[uM,kN]=Ht({name:"ColorPickerSwatchContext",hookName:"useColorPickerSwatchContext",providerName:"<ColorPickerSwatchProvider />"}),NN=St(),hM=A.forwardRef((n,t)=>{const[e,i]=NN(n,["respectAlpha","value"]),s=Qt(),r=Q(s.getSwatchProps(e),i);return y.jsx(uM,{value:e,children:y.jsx(K.div,{...r,ref:t})})});hM.displayName="ColorPickerSwatch";const dM=A.forwardRef((n,t)=>{const e=Qt(),i=Q(e.getSwatchGroupProps(),n);return y.jsx(K.div,{...i,ref:t})});dM.displayName="ColorPickerSwatchGroup";const fM=A.forwardRef((n,t)=>{const e=Qt(),i=kN(),s=Q(e.getSwatchIndicatorProps(i),n);return y.jsx(K.div,{...s,ref:t})});fM.displayName="ColorPickerSwatchIndicator";const ON=St(),pM=A.forwardRef((n,t)=>{const[e,i]=ON(n,["value","disabled"]),s=Qt(),r=Q(s.getSwatchTriggerProps(e),i);return y.jsx(K.button,{...r,ref:t})});pM.displayName="ColorPickerSwatchTrigger";const zN=St(),mM=A.forwardRef((n,t)=>{const[e,i]=zN(n,["size"]),s=Qt(),r=Q(s.getTransparencyGridProps(e),i);return y.jsx(K.div,{...r,ref:t})});mM.displayName="ColorPickerTransparencyGrid";const gM=A.forwardRef((n,t)=>{const e=Qt(),i=Q(e.getTriggerProps(),n);return y.jsx(K.button,{...i,ref:t})});gM.displayName="ColorPickerTrigger";const DN=St(),xM=A.forwardRef((n,t)=>{const[{respectAlpha:e},i]=DN(n,["respectAlpha"]),s=Qt(),r={respectAlpha:e,value:s.valueAsString},a=Q(s.getSwatchProps(r),i);return y.jsx(uM,{value:r,children:y.jsx(K.div,{...a,ref:t})})});xM.displayName="ColorPickerValueSwatch";const yM=A.forwardRef((n,t)=>{const{children:e,format:i,...s}=n,r=Qt(),a=Q(r.getValueTextProps(),s),l=i?r.value.toString(i):r.valueAsString;return y.jsx(K.span,{...a,ref:t,children:e||l})});yM.displayName="ColorPickerValueText";const IN=St(),vM=A.forwardRef((n,t)=>{const e=Qt(),[i,s]=IN(n,["format"]);return e.format!==i.format?null:y.jsx(AN,{value:i,children:y.jsx(K.div,{ref:t,"data-format":n.format,...Kj.build().view.attrs,...s})})});vM.displayName="ColorPickerView";const nd=n=>new Zj(n);var jg=(n,t)=>{const e=[],i=(s,r,a)=>{r-s>0&&e.push({start:s,end:r,match:a})};if(n.length===0)i(0,t,!1);else{let s=0;for(const r of n)i(s,r.start,!1),i(r.start,r.end,!0),s=r.end;i(s,t,!1)}return e},_M=n=>n.replace(/[|\\{}()[\]^$+*?.-]/g,t=>`\\${t}`);function BN(n){const{text:t,query:e,ignoreCase:i,exactMatch:s}=n;if(s){const f=_M(e),p=new RegExp(`\\b(${f})\\b`,i?"i":""),g=t.match(p);if(!g||g.index===void 0)return[{text:t,match:!1}];const x=g.index,w=x+g[0].length;return jg([{start:x,end:w}],t.length).map(b=>({text:t.slice(b.start,b.end),match:!!b.match}))}const r=i?t.toLowerCase():t,a=i&&typeof e=="string"?e.toLowerCase():e,l=typeof r=="string"?r.indexOf(a):-1;if(l===-1)return[{text:t,match:!1}];const u=l+a.length;return jg([{start:l,end:u}],t.length).map(f=>({text:t.slice(f.start,f.end),match:!!f.match}))}var LN=(n,t,e)=>{const i=n.filter(Boolean).map(r=>_M(r)),s=e?`\\b(${i.join("|")})\\b`:`(${i.join("|")})`;return new RegExp(s,t)},FN=(n,t=!0)=>`${n?"i":""}${t?"g":""}`;function HN(n){const{text:t,query:e,ignoreCase:i,matchAll:s,exactMatch:r}=n;if(e.length===0)return[{text:t,match:!1}];const a=FN(i,s),l=LN(Array.isArray(e)?e:[e],a,r),u=[...t.matchAll(l)].map(h=>({start:h.index||0,end:(h.index||0)+h[0].length}));return jg(u,n.text.length).map(h=>({text:n.text.slice(h.start,h.end),match:!!h.match}))}var UN=n=>{if(n.matchAll==null&&(n.matchAll=Array.isArray(n.query)),!n.matchAll&&Array.isArray(n.query))throw new Error("matchAll must be true when using multiple queries");return n.matchAll?HN(n):BN(n)};const GN=n=>A.useMemo(()=>UN(n),[n]),[bM,ns]=Ht({name:"ListboxContext",hookName:"useListboxContext",providerName:"<ListboxProvider />"}),wM=A.forwardRef((n,t)=>{const e=ns(),i=Q(e.getContentProps(),n);return y.jsx(K.div,{...i,ref:t})});wM.displayName="ListboxContent";const VN=Jj.build(),SM=A.forwardRef((n,t)=>ns().collection.size!==0?null:y.jsx(K.div,{...VN.empty.attrs,...n,role:"presentation",ref:t}));SM.displayName="ListboxEmpty";const WN=St(),CM=A.forwardRef((n,t)=>{const[e,i]=WN(n,["autoHighlight"]),s=ns(),r=Q(s.getInputProps(e),i);return y.jsx(K.input,{...r,ref:t})});CM.displayName="ListboxInput";const[YN]=Ht({name:"ListboxItemContext",hookName:"useListboxItemContext",providerName:"<ListboxItemProvider />"}),[qN,MM]=Ht({name:"ListboxItemPropsContext",hookName:"useListboxItemPropsContext",providerName:"<ListboxItemPropsProvider />"}),XN=St(),PM=A.forwardRef((n,t)=>{const[e,i]=XN(n,["item","highlightOnHover"]),s=ns(),r=Q(s.getItemProps(e),i),a=s.getItemState(e);return y.jsx(qN,{value:e,children:y.jsx(YN,{value:a,children:y.jsx(K.div,{...r,ref:t})})})});PM.displayName="ListboxItem";const[$N,QN]=Ht({name:"ListboxItemGroupPropsContext",hookName:"useListboxItemGroupPropsContext",providerName:"<ListboxItemGroupPropsProvider />"}),KN=St(),AM=A.forwardRef((n,t)=>{const e=A.useId(),[i,s]=KN(n,["id"]),r={id:e,...i},a=ns(),l=Q(a.getItemGroupProps(r),s);return y.jsx($N,{value:r,children:y.jsx(K.div,{...l,ref:t})})});AM.displayName="ListboxItemGroup";const TM=A.forwardRef((n,t)=>{const e=ns(),i=QN(),s=Q(e.getItemGroupLabelProps({htmlFor:i.id}),n);return y.jsx(K.div,{...s,ref:t})});TM.displayName="ListboxItemGroupLabel";const EM=A.forwardRef((n,t)=>{const e=ns(),i=MM(),s=Q(e.getItemIndicatorProps(i),n);return y.jsx(K.div,{...s,ref:t})});EM.displayName="ListboxItemIndicator";const RM=A.forwardRef((n,t)=>{const e=ns(),i=MM(),s=Q(e.getItemTextProps(i),n);return y.jsx(K.div,{...s,ref:t})});RM.displayName="ListboxItemText";const jM=A.forwardRef((n,t)=>{const e=ns(),i=Q(e.getLabelProps(),n);return y.jsx(K.label,{...i,ref:t})});jM.displayName="ListboxLabel";const ZN=n=>{const t=A.useId(),{dir:e}=Yn(),{getRootNode:i}=fi(),s={id:t,dir:e,getRootNode:i,...n},r=Wn(tk,s);return ek(r,pi)},JN=(n,t)=>{const[e,i]=St()(n,["collection","defaultHighlightedValue","defaultValue","deselectable","disabled","disallowSelectAll","highlightedValue","id","ids","loopFocus","onHighlightChange","onSelect","onValueChange","orientation","scrollToIndexFn","selectionMode","selectOnHighlight","typeahead","value"]),s=ZN(e),r=Q(s.getRootProps(),i);return y.jsx(bM,{value:s,children:y.jsx(K.div,{...r,ref:t})})},t5=A.forwardRef(JN),e5=(n,t)=>{const[{value:e},i]=St()(n,["value"]),s=Q(e.getRootProps(),i);return y.jsx(bM,{value:e,children:y.jsx(K.div,{...s,ref:t})})},n5=A.forwardRef(e5),kM=A.forwardRef((n,t)=>{const{children:e,placeholder:i,...s}=n,r=ns(),a=Q(r.getValueTextProps(),s);return y.jsx(K.span,{...a,ref:t,children:e||r.valueAsString||i})});kM.displayName="ListboxValueText";const[NM,ma]=Ht({name:"NumberInputContext",hookName:"useNumberInputContext",providerName:"<NumberInputProvider />"}),OM=A.forwardRef((n,t)=>{const e=ma(),i=Q(e.getControlProps(),n);return y.jsx(K.div,{...i,ref:t})});OM.displayName="NumberInputControl";const zM=A.forwardRef((n,t)=>{const e=ma(),i=Q(e.getDecrementTriggerProps(),n);return y.jsx(K.button,{...i,ref:t})});zM.displayName="NumberInputDecrementTrigger";const DM=A.forwardRef((n,t)=>{const e=ma(),i=Q(e.getIncrementTriggerProps(),n);return y.jsx(K.button,{...i,ref:t})});DM.displayName="NumberInputIncrementTrigger";const IM=A.forwardRef((n,t)=>{const e=ma(),i=Q(e.getInputProps(),n),s=es();return y.jsx(K.input,{"aria-describedby":s?.ariaDescribedby,...i,ref:t})});IM.displayName="NumberInputInput";const BM=A.forwardRef((n,t)=>{const e=ma(),i=Q(e.getLabelProps(),n);return y.jsx(K.label,{...i,ref:t})});BM.displayName="NumberInputLabel";const i5=n=>{const t=A.useId(),{getRootNode:e}=fi(),{dir:i,locale:s}=Yn(),r=es(),a={id:t,ids:{label:r?.ids.label,input:r?.ids.control},disabled:r?.disabled,readOnly:r?.readOnly,required:r?.required,invalid:r?.invalid,dir:i,locale:s,getRootNode:e,...n},l=Wn(nk,a);return ik(l,pi)},s5=St(),LM=A.forwardRef((n,t)=>{const[e,i]=s5(n,["allowMouseWheel","allowOverflow","clampValueOnBlur","defaultValue","disabled","focusInputOnChange","form","formatOptions","id","ids","inputMode","invalid","locale","max","min","name","onFocusChange","onValueChange","onValueInvalid","pattern","readOnly","required","spinOnPress","step","translations","value"]),s=i5(e),r=Q(s.getRootProps(),i);return y.jsx(NM,{value:s,children:y.jsx(K.div,{...r,ref:t})})});LM.displayName="NumberInputRoot";const r5=St(),FM=A.forwardRef((n,t)=>{const[{value:e},i]=r5(n,["value"]),s=Q(e.getRootProps(),i);return y.jsx(NM,{value:e,children:y.jsx(K.div,{...s,ref:t})})});FM.displayName="NumberInputRootProvider";const HM=A.forwardRef((n,t)=>{const e=ma(),i=Q(e.getScrubberProps(),n);return y.jsx(K.div,{...i,ref:t})});HM.displayName="NumberInputScrubber";const UM=A.forwardRef((n,t)=>{const{children:e,...i}=n,s=ma(),r=Q(s.getValueTextProps(),i);return y.jsx(K.span,{...r,ref:t,children:e||s.value})});UM.displayName="NumberInputValueText";const[GM,is]=Ht({name:"PopoverContext",hookName:"usePopoverContext",providerName:"<PopoverProvider />"}),VM=A.forwardRef((n,t)=>{const e=is(),i=Q(e.getAnchorProps(),n);return y.jsx(K.div,{...i,ref:t})});VM.displayName="PopoverAnchor";const WM=A.forwardRef((n,t)=>{const e=is(),i=Q(e.getArrowProps(),n);return y.jsx(K.div,{...i,ref:t})});WM.displayName="PopoverArrow";const YM=A.forwardRef((n,t)=>{const e=is(),i=Q(e.getArrowTipProps(),n);return y.jsx(K.div,{...i,ref:t})});YM.displayName="PopoverArrowTip";const qM=A.forwardRef((n,t)=>{const e=is(),i=Q(e.getCloseTriggerProps(),n);return y.jsx(K.button,{...i,ref:t})});qM.displayName="PopoverCloseTrigger";const XM=A.forwardRef((n,t)=>{const e=is(),i=Ds(),s=Q(e.getContentProps(),i.getPresenceProps(),n);return i.unmounted?null:y.jsx(K.div,{...s,ref:bc(i.ref,t)})});XM.displayName="PopoverContent";const $M=A.forwardRef((n,t)=>{const e=is(),i=Q(e.getDescriptionProps(),n);return y.jsx(K.div,{...i,ref:t})});$M.displayName="PopoverDescription";const QM=A.forwardRef((n,t)=>{const e=is(),i=Q(e.getIndicatorProps(),n);return y.jsx(K.div,{...i,ref:t})});QM.displayName="PopoverIndicator";const KM=A.forwardRef((n,t)=>{const e=is(),i=Ds(),s=Q(e.getPositionerProps(),n);return i.unmounted?null:y.jsx(K.div,{...s,ref:t})});KM.displayName="PopoverPositioner";const a5=n=>{const t=A.useId(),{getRootNode:e}=fi(),{dir:i}=Yn(),s={id:t,dir:i,getRootNode:e,...n},r=Wn(sk,s);return rk(r,pi)},o5=n=>{const[t,{children:e,...i}]=Sr(n),s=a5(i),r=Os(Q({present:s.open},t));return y.jsx(GM,{value:s,children:y.jsx(zs,{value:r,children:e})})},l5=n=>{const[t,{value:e,children:i}]=Sr(n),s=Os(Q({present:e.open},t));return y.jsx(GM,{value:e,children:y.jsx(zs,{value:s,children:i})})},ZM=A.forwardRef((n,t)=>{const e=is(),i=Q(e.getTitleProps(),n);return y.jsx(K.div,{...i,ref:t})});ZM.displayName="PopoverTitle";const JM=A.forwardRef((n,t)=>{const e=is(),i=Ds(),s=Q({...e.getTriggerProps(),"aria-controls":i.unmounted?void 0:e.getTriggerProps()["aria-controls"]},n);return y.jsx(K.button,{...s,ref:t})});JM.displayName="PopoverTrigger";const[t2,id]=Ht({name:"SegmentGroupContext",hookName:"useSegmentGroupContext",providerName:"<SegmentGroupProvider />"}),e2=A.forwardRef((n,t)=>{const e=id(),i=Q(e.getIndicatorProps(),wc.indicator.attrs,n);return y.jsx(K.div,{...i,ref:t})});e2.displayName="SegmentGroupIndicator";const[c5]=Ht({name:"SegmentGroupItemContext",hookName:"useSegmentGroupItemContext",providerName:"<SegmentGroupItemProvider />"}),[u5,n2]=Ht({name:"SegmentGroupItemPropsContext",hookName:"useSegmentGroupItemPropsContext",providerName:"<SegmentGroupItemPropsProvider />"}),h5=St(),i2=A.forwardRef((n,t)=>{const[e,i]=h5(n,["value","disabled","invalid"]),s=id(),r=Q(s.getItemProps(e),wc.item.attrs,i),a=s.getItemState(e);return y.jsx(u5,{value:e,children:y.jsx(c5,{value:a,children:y.jsx(K.label,{...r,ref:t})})})});i2.displayName="SegmentGroupItem";const s2=A.forwardRef((n,t)=>{const e=id(),i=n2(),s=Q(e.getItemHiddenInputProps(i),n);return y.jsx(K.input,{...s,ref:t})});s2.displayName="SegmentGroupItemHiddenInput";const r2=A.forwardRef((n,t)=>{const e=id(),i=n2(),s=Q(e.getItemTextProps(i),wc.itemText.attrs,n);return y.jsx(K.span,{...s,ref:t})});r2.displayName="SegmentGroupItemText";const d5=n=>{const t=A.useId(),{getRootNode:e}=fi(),{dir:i}=Yn(),s={id:t,dir:i,getRootNode:e,...n},r=Wn(ak,s);return ok(r,pi)},f5=St(),a2=A.forwardRef((n,t)=>{const[e,i]=f5(n,["defaultValue","disabled","form","id","ids","name","onValueChange","orientation","readOnly","value"]),s=d5(e),r=Q(s.getRootProps(),wc.root.attrs,i);return y.jsx(t2,{value:s,children:y.jsx(K.div,{...r,ref:t})})});a2.displayName="SegmentGroupRoot";const p5=St(),o2=A.forwardRef((n,t)=>{const[{value:e},i]=p5(n,["value"]),s=Q(e.getRootProps(),wc.root.attrs,i);return y.jsx(t2,{value:e,children:y.jsx(K.div,{...s,ref:t})})});o2.displayName="SegmentGroupRootProvider";const[l2,vn]=Ht({name:"SelectContext",hookName:"useSelectContext",providerName:"<SelectProvider />"}),c2=A.forwardRef((n,t)=>{const e=vn(),i=Q(e.getClearTriggerProps(),n);return y.jsx(K.button,{...i,ref:t})});c2.displayName="SelectClearTrigger";const u2=A.forwardRef((n,t)=>{const e=vn(),i=Ds(),s=Q(e.getContentProps(),i.getPresenceProps(),n);return i.unmounted?null:y.jsx(K.div,{...s,ref:bc(i.ref,t)})});u2.displayName="SelectContent";const h2=A.forwardRef((n,t)=>{const e=vn(),i=Q(e.getControlProps(),n);return y.jsx(K.div,{...i,ref:t})});h2.displayName="SelectControl";const d2=A.forwardRef((n,t)=>{const e=vn(),i=Q(e.getHiddenSelectProps(),n),s=e.value.length===0,r=es();return y.jsxs(K.select,{"aria-describedby":r?.ariaDescribedby,...i,ref:t,children:[s&&y.jsx("option",{value:""}),e.collection.items.map((a,l)=>y.jsx("option",{value:e.collection.getItemValue(a)??"",disabled:e.collection.getItemDisabled(a),children:e.collection.stringifyItem(a)},l))]})});d2.displayName="SelectHiddenSelect";const f2=A.forwardRef((n,t)=>{const e=vn(),i=Q(e.getIndicatorProps(),n);return y.jsx(K.div,{...i,ref:t})});f2.displayName="SelectIndicator";const[m5]=Ht({name:"SelectItemContext",hookName:"useSelectItemContext",providerName:"<SelectItemProvider />"}),[g5,p2]=Ht({name:"SelectItemPropsContext",hookName:"useSelectItemPropsContext",providerName:"<SelectItemPropsProvider />"}),x5=St(),m2=A.forwardRef((n,t)=>{const[e,i]=x5(n,["item","persistFocus"]),s=vn(),r=Q(s.getItemProps(e),i),a=s.getItemState(e);return y.jsx(g5,{value:e,children:y.jsx(m5,{value:a,children:y.jsx(K.div,{...r,ref:t})})})});m2.displayName="SelectItem";const[y5,v5]=Ht({name:"SelectItemGroupPropsContext",hookName:"useSelectItemGroupPropsContext",providerName:"<SelectItemGroupPropsProvider />"}),_5=St(),g2=A.forwardRef((n,t)=>{const e=A.useId(),[i,s]=_5(n,["id"]),r={id:e,...i},a=vn(),l=Q(a.getItemGroupProps(r),s);return y.jsx(y5,{value:r,children:y.jsx(K.div,{...l,ref:t})})});g2.displayName="SelectItemGroup";const x2=A.forwardRef((n,t)=>{const e=vn(),i=v5(),s=Q(e.getItemGroupLabelProps({htmlFor:i.id}),n);return y.jsx(K.div,{...s,ref:t})});x2.displayName="SelectItemGroupLabel";const y2=A.forwardRef((n,t)=>{const e=vn(),i=p2(),s=Q(e.getItemIndicatorProps(i),n);return y.jsx(K.div,{...s,ref:t})});y2.displayName="SelectItemIndicator";const v2=A.forwardRef((n,t)=>{const e=vn(),i=p2(),s=Q(e.getItemTextProps(i),n);return y.jsx(K.span,{...s,ref:t})});v2.displayName="SelectItemText";const _2=A.forwardRef((n,t)=>{const e=vn(),i=Q(e.getLabelProps(),n);return y.jsx(K.label,{...i,ref:t})});_2.displayName="SelectLabel";const b2=A.forwardRef((n,t)=>{const e=vn(),i=Q(e.getPositionerProps(),n);return Ds().unmounted?null:y.jsx(K.div,{...i,ref:t})});b2.displayName="SelectPositioner";const b5=n=>{const t=A.useId(),{dir:e}=Yn(),{getRootNode:i}=fi(),s=es(),r={id:t,ids:{label:s?.ids.label,hiddenSelect:s?.ids.control},disabled:s?.disabled,readOnly:s?.readOnly,invalid:s?.invalid,required:s?.required,dir:e,getRootNode:i,...n},a=Wn(lk,r);return ck(a,pi)},w5=(n,t)=>{const[e,i]=Sr(n),[s,r]=St()(i,["closeOnSelect","collection","composite","defaultHighlightedValue","defaultOpen","defaultValue","deselectable","disabled","form","highlightedValue","id","ids","invalid","loopFocus","multiple","name","onFocusOutside","onHighlightChange","onInteractOutside","onOpenChange","onPointerDownOutside","onSelect","onValueChange","open","positioning","readOnly","required","scrollToIndexFn","value"]),a=b5(s),l=Os(Q({present:a.open},e)),u=Q(a.getRootProps(),r);return y.jsx(l2,{value:a,children:y.jsx(zs,{value:l,children:y.jsx(K.div,{...u,ref:t})})})},S5=A.forwardRef(w5),C5=(n,t)=>{const[e,i]=Sr(n),[{value:s},r]=St()(i,["value"]),a=Os(Q({present:s.open},e)),l=Q(s.getRootProps(),r);return y.jsx(l2,{value:s,children:y.jsx(zs,{value:a,children:y.jsx(K.div,{...l,ref:t})})})},M5=A.forwardRef(C5),w2=A.forwardRef((n,t)=>{const e=vn(),i=Q(e.getTriggerProps(),n);return y.jsx(K.button,{...i,ref:t})});w2.displayName="SelectTrigger";const S2=A.forwardRef((n,t)=>{const{children:e,placeholder:i,...s}=n,r=vn(),a=Q(r.getValueTextProps(),s);return y.jsx(K.span,{...a,ref:t,children:e||r.valueAsString||i})});S2.displayName="SelectValueText";const[C2,Ro]=Ht({name:"SwitchContext",hookName:"useSwitchContext",providerName:"<SwitchProvider />"}),M2=A.forwardRef((n,t)=>{const e=Ro(),i=Q(e.getControlProps(),n);return y.jsx(K.span,{...i,ref:t})});M2.displayName="SwitchControl";const P2=A.forwardRef((n,t)=>{const e=Ro(),i=Q(e.getHiddenInputProps(),n),s=es();return y.jsx(K.input,{"aria-describedby":s?.ariaDescribedby,...i,ref:t})});P2.displayName="SwitchHiddenInput";const A2=A.forwardRef((n,t)=>{const e=Ro(),i=Q(e.getLabelProps(),n);return y.jsx(K.span,{...i,ref:t})});A2.displayName="SwitchLabel";const P5=n=>{const t=A.useId(),{getRootNode:e}=fi(),{dir:i}=Yn(),s=es(),r={id:t,ids:{label:s?.ids.label,hiddenInput:s?.ids.control},dir:i,disabled:s?.disabled,readOnly:s?.readOnly,invalid:s?.invalid,required:s?.required,getRootNode:e,...n},a=Wn(uk,r);return hk(a,pi)},A5=St(),T2=A.forwardRef((n,t)=>{const[e,i]=A5(n,["checked","defaultChecked","disabled","form","id","ids","invalid","label","name","onCheckedChange","readOnly","required","value"]),s=P5(e),r=Q(s.getRootProps(),i);return y.jsx(C2,{value:s,children:y.jsx(K.label,{...r,ref:t})})});T2.displayName="SwitchRoot";const T5=St(),E2=A.forwardRef((n,t)=>{const[{value:e},i]=T5(n,["value"]),s=Q(e.getRootProps(),i);return y.jsx(C2,{value:e,children:y.jsx(K.label,{...s,ref:t})})});E2.displayName="SwitchRootProvider";const R2=A.forwardRef((n,t)=>{const e=Ro(),i=Q(e.getThumbProps(),n);return y.jsx(K.span,{...i,ref:t})});R2.displayName="SwitchThumb";const[j2,sd]=Ht({name:"TabsContext",hookName:"useTabsContext",providerName:"<TabsProvider />"}),E5=St(),k2=A.forwardRef((n,t)=>{const[e,i]=E5(n,["value"]),s=sd(),r=EC(),a=Os({...r,present:s.value===n.value,immediate:!0}),l=Q(s.getContentProps(e),a.getPresenceProps(),i);return y.jsx(zs,{value:a,children:a.unmounted?null:y.jsx(K.div,{...l,ref:bc(a.ref,t)})})});k2.displayName="TabContent";const N2=A.forwardRef((n,t)=>{const e=sd(),i=Q(e.getIndicatorProps(),n);return y.jsx(K.div,{...i,ref:t})});N2.displayName="TabIndicator";const O2=A.forwardRef((n,t)=>{const e=sd(),i=Q(e.getListProps(),n);return y.jsx(K.div,{...i,ref:t})});O2.displayName="TabList";const R5=St(),z2=A.forwardRef((n,t)=>{const[e,i]=R5(n,["disabled","value"]),s=sd(),r=Q(s.getTriggerProps(e),i);return y.jsx(K.button,{...r,ref:t})});z2.displayName="TabTrigger";var j5=wk("tabs").parts("root","list","trigger","content","indicator"),hl=j5.build(),k5=n=>n.ids?.root??`tabs:${n.id}`,zl=n=>n.ids?.list??`tabs:${n.id}:list`,kg=(n,t)=>n.ids?.content?.(t)??`tabs:${n.id}:content-${t}`,sa=(n,t)=>n.ids?.trigger?.(t)??`tabs:${n.id}:trigger-${t}`,D2=n=>n.ids?.indicator??`tabs:${n.id}:indicator`,N5=n=>n.getById(zl(n)),O5=(n,t)=>n.getById(kg(n,t)),nh=(n,t)=>t!=null?n.getById(sa(n,t)):null,y1=n=>n.getById(D2(n)),jo=n=>{const e=`[role=tab][data-ownedby='${CSS.escape(zl(n))}']:not([disabled])`;return Ek(N5(n),e)},z5=n=>_k(jo(n)),D5=n=>vk(jo(n)),I5=(n,t)=>yk(jo(n),sa(n,t.value),t.loopFocus),B5=(n,t)=>xk(jo(n),sa(n,t.value),t.loopFocus),I2=n=>({x:n?.offsetLeft??0,y:n?.offsetTop??0,width:n?.offsetWidth??0,height:n?.offsetHeight??0}),L5=(n,t)=>{const e=Rk(jo(n),sa(n,t));return I2(e)};function F5(n,t){const{state:e,send:i,context:s,prop:r,scope:a}=n,l=r("translations"),u=e.matches("focused"),h=r("orientation")==="vertical",f=r("orientation")==="horizontal",p=r("composite");function g(x){return{selected:s.get("value")===x.value,focused:s.get("focusedValue")===x.value,disabled:!!x.disabled}}return{value:s.get("value"),focusedValue:s.get("focusedValue"),setValue(x){i({type:"SET_VALUE",value:x})},clearValue(){i({type:"CLEAR_VALUE"})},setIndicatorRect(x){const w=sa(a,x);i({type:"SET_INDICATOR_RECT",id:w})},syncTabIndex(){i({type:"SYNC_TAB_INDEX"})},selectNext(x){i({type:"TAB_FOCUS",value:x,src:"selectNext"}),i({type:"ARROW_NEXT",src:"selectNext"})},selectPrev(x){i({type:"TAB_FOCUS",value:x,src:"selectPrev"}),i({type:"ARROW_PREV",src:"selectPrev"})},focus(){const x=s.get("value");x&&nh(a,x)?.focus()},getRootProps(){return t.element({...hl.root.attrs,id:k5(a),"data-orientation":r("orientation"),"data-focus":Vr(u),dir:r("dir")})},getListProps(){return t.element({...hl.list.attrs,id:zl(a),role:"tablist",dir:r("dir"),"data-focus":Vr(u),"aria-orientation":r("orientation"),"data-orientation":r("orientation"),"aria-label":l?.listLabel,onKeyDown(x){if(x.defaultPrevented||Mk(x)||!Pk(x.currentTarget,Eg(x)))return;const w={ArrowDown(){f||i({type:"ARROW_NEXT",key:"ArrowDown"})},ArrowUp(){f||i({type:"ARROW_PREV",key:"ArrowUp"})},ArrowLeft(){h||i({type:"ARROW_PREV",key:"ArrowLeft"})},ArrowRight(){h||i({type:"ARROW_NEXT",key:"ArrowRight"})},Home(){i({type:"HOME"})},End(){i({type:"END"})}};let _=Ak(x,{dir:r("dir"),orientation:r("orientation")});const b=w[_];if(b){x.preventDefault(),b(x);return}}})},getTriggerState:g,getTriggerProps(x){const{value:w,disabled:_}=x,b=g(x);return t.button({...hl.trigger.attrs,role:"tab",type:"button",disabled:_,dir:r("dir"),"data-orientation":r("orientation"),"data-disabled":Vr(_),"aria-disabled":_,"data-value":w,"aria-selected":b.selected,"data-selected":Vr(b.selected),"data-focus":Vr(b.focused),"aria-controls":b.selected?kg(a,w):void 0,"data-ownedby":zl(a),"data-ssr":Vr(s.get("ssr")),id:sa(a,w),tabIndex:b.selected&&p?0:-1,onFocus(){i({type:"TAB_FOCUS",value:w})},onBlur(C){C.relatedTarget?.getAttribute("role")!=="tab"&&i({type:"TAB_BLUR"})},onClick(C){C.defaultPrevented||Sk(C)||_||(Ck()&&C.currentTarget.focus(),i({type:"TAB_CLICK",value:w}))}})},getContentProps(x){const{value:w}=x,_=s.get("value")===w;return t.element({...hl.content.attrs,dir:r("dir"),id:kg(a,w),tabIndex:p?0:-1,"aria-labelledby":sa(a,w),role:"tabpanel","data-ownedby":zl(a),"data-selected":Vr(_),"data-orientation":r("orientation"),hidden:!_})},getIndicatorProps(){const x=s.get("indicatorRect");return t.element({id:D2(a),...hl.indicator.attrs,dir:r("dir"),"data-orientation":r("orientation"),hidden:x==null,style:{"--transition-property":"left, right, top, bottom, width, height","--left":Au(x?.x),"--top":Au(x?.y),"--width":Au(x?.width),"--height":Au(x?.height),position:"absolute",willChange:"var(--transition-property)",transitionProperty:"var(--transition-property)",transitionDuration:"var(--transition-duration, 150ms)",transitionTimingFunction:"var(--transition-timing-function)",[f?"left":"top"]:f?"var(--left)":"var(--top)"}})}}}var{createMachine:H5}=dk(),U5=H5({props({props:n}){return{dir:"ltr",orientation:"horizontal",activationMode:"automatic",loopFocus:!0,composite:!0,navigate(t){bk(t.node)},defaultValue:null,...n}},initialState(){return"idle"},context({prop:n,bindable:t}){return{value:t(()=>({defaultValue:n("defaultValue"),value:n("value"),onChange(e){n("onValueChange")?.({value:e})}})),focusedValue:t(()=>({defaultValue:n("value")||n("defaultValue"),sync:!0,onChange(e){n("onFocusChange")?.({focusedValue:e})}})),ssr:t(()=>({defaultValue:!0})),indicatorRect:t(()=>({defaultValue:null}))}},watch({context:n,prop:t,track:e,action:i}){e([()=>n.get("value")],()=>{i(["syncIndicatorRect","syncTabIndex","navigateIfNeeded"])}),e([()=>t("dir"),()=>t("orientation")],()=>{i(["syncIndicatorRect"])})},on:{SET_VALUE:{actions:["setValue"]},CLEAR_VALUE:{actions:["clearValue"]},SET_INDICATOR_RECT:{actions:["setIndicatorRect"]},SYNC_TAB_INDEX:{actions:["syncTabIndex"]}},entry:["syncIndicatorRect","syncTabIndex","syncSsr"],exit:["cleanupObserver"],states:{idle:{on:{TAB_FOCUS:{target:"focused",actions:["setFocusedValue"]},TAB_CLICK:{target:"focused",actions:["setFocusedValue","setValue"]}}},focused:{on:{TAB_CLICK:{actions:["setFocusedValue","setValue"]},ARROW_PREV:[{guard:"selectOnFocus",actions:["focusPrevTab","selectFocusedTab"]},{actions:["focusPrevTab"]}],ARROW_NEXT:[{guard:"selectOnFocus",actions:["focusNextTab","selectFocusedTab"]},{actions:["focusNextTab"]}],HOME:[{guard:"selectOnFocus",actions:["focusFirstTab","selectFocusedTab"]},{actions:["focusFirstTab"]}],END:[{guard:"selectOnFocus",actions:["focusLastTab","selectFocusedTab"]},{actions:["focusLastTab"]}],TAB_FOCUS:{actions:["setFocusedValue"]},TAB_BLUR:{target:"idle",actions:["clearFocusedValue"]}}}},implementations:{guards:{selectOnFocus:({prop:n})=>n("activationMode")==="automatic"},actions:{selectFocusedTab({context:n,prop:t}){sr(()=>{const e=n.get("focusedValue");if(!e)return;const s=t("deselectable")&&n.get("value")===e?null:e;n.set("value",s)})},setFocusedValue({context:n,event:t,flush:e}){t.value!=null&&e(()=>{n.set("focusedValue",t.value)})},clearFocusedValue({context:n}){n.set("focusedValue",null)},setValue({context:n,event:t,prop:e}){const i=e("deselectable")&&n.get("value")===n.get("focusedValue");n.set("value",i?null:t.value)},clearValue({context:n}){n.set("value",null)},focusFirstTab({scope:n}){sr(()=>{z5(n)?.focus()})},focusLastTab({scope:n}){sr(()=>{D5(n)?.focus()})},focusNextTab({context:n,prop:t,scope:e,event:i}){const s=i.value??n.get("focusedValue");if(!s)return;const r=I5(e,{value:s,loopFocus:t("loopFocus")});sr(()=>{t("composite")?r?.focus():r?.dataset.value!=null&&n.set("focusedValue",r.dataset.value)})},focusPrevTab({context:n,prop:t,scope:e,event:i}){const s=i.value??n.get("focusedValue");if(!s)return;const r=B5(e,{value:s,loopFocus:t("loopFocus")});sr(()=>{t("composite")?r?.focus():r?.dataset.value!=null&&n.set("focusedValue",r.dataset.value)})},syncTabIndex({context:n,scope:t}){sr(()=>{const e=n.get("value");if(!e)return;const i=O5(t,e);if(!i)return;gk(i).length>0?i.removeAttribute("tabindex"):i.setAttribute("tabindex","0")})},cleanupObserver({refs:n}){const t=n.get("indicatorCleanup");t&&t()},setIndicatorRect({context:n,event:t,scope:e}){const i=t.id??n.get("value");!y1(e)||!i||!nh(e,i)||n.set("indicatorRect",L5(e,i))},syncSsr({context:n}){n.set("ssr",!1)},syncIndicatorRect({context:n,refs:t,scope:e}){const i=t.get("indicatorCleanup");if(i&&i(),!y1(e))return;const r=()=>{const u=nh(e,n.get("value"));if(!u)return;const h=I2(u);n.set("indicatorRect",f=>Tk(f,h)?f:h)};r();const a=jo(e),l=pk(...a.map(u=>mk.observe(u,r)));t.set("indicatorCleanup",l)},navigateIfNeeded({context:n,prop:t,scope:e}){const i=n.get("value");if(!i)return;const s=nh(e,i);fk(s)&&t("navigate")?.({value:i,node:s,href:s.href})}}}});Qh()(["activationMode","composite","deselectable","dir","getRootNode","id","ids","loopFocus","navigate","onFocusChange","onValueChange","orientation","translations","value","defaultValue"]);Qh()(["disabled","value"]);Qh()(["value"]);const G5=n=>{const t=A.useId(),{getRootNode:e}=fi(),{dir:i}=Yn(),s={id:t,dir:i,getRootNode:e,...n},r=Wn(U5,s);return F5(r,pi)},V5=St(),B2=A.forwardRef((n,t)=>{const[e,i]=td(n),[s,r]=V5(i,["activationMode","composite","defaultValue","deselectable","id","ids","loopFocus","navigate","onFocusChange","onValueChange","orientation","translations","value"]),a=G5(s),l=Q(a.getRootProps(),r);return y.jsx(j2,{value:a,children:y.jsx(Jh,{value:e,children:y.jsx(K.div,{...l,ref:t})})})});B2.displayName="TabsRoot";const W5=St(),L2=A.forwardRef((n,t)=>{const[e,i]=td(n),[{value:s},r]=W5(i,["value"]),a=Q(s.getRootProps(),r);return y.jsx(j2,{value:s,children:y.jsx(Jh,{value:e,children:y.jsx(K.div,{...a,ref:t})})})});L2.displayName="TabsRootProvider";const[F2,Pc]=Ht({name:"TooltipContext",hookName:"useTooltipContext",providerName:"<TooltipProvider />"}),H2=A.forwardRef((n,t)=>{const e=Pc(),i=Q(e.getArrowProps(),n);return y.jsx(K.div,{...i,ref:t})});H2.displayName="TooltipArrow";const U2=A.forwardRef((n,t)=>{const e=Pc(),i=Q(e.getArrowTipProps(),n);return y.jsx(K.div,{...i,ref:t})});U2.displayName="TooltipArrowTip";const G2=A.forwardRef((n,t)=>{const e=Pc(),i=Ds(),s=Q(e.getContentProps(),i.getPresenceProps(),n);return i.unmounted?null:y.jsx(K.div,{...s,ref:bc(i.ref,t)})});G2.displayName="TooltipContent";const V2=A.forwardRef((n,t)=>{const e=Pc(),i=Q(e.getPositionerProps(),n);return Ds().unmounted?null:y.jsx(K.div,{...i,ref:t})});V2.displayName="TooltipPositioner";const Y5=n=>{const t=A.useId(),{getRootNode:e}=fi(),{dir:i}=Yn(),s={id:t,dir:i,getRootNode:e,...n},r=Wn(jk,s);return kk(r,pi)},q5=n=>{const[t,{children:e,...i}]=Sr(n),s=Y5(i),r=Os(Q({present:s.open},t));return y.jsx(F2,{value:s,children:y.jsx(zs,{value:r,children:e})})},X5=n=>{const[t,{value:e,children:i}]=Sr(n),s=Os(Q({present:e.open},t));return y.jsx(F2,{value:e,children:y.jsx(zs,{value:s,children:i})})},W2=A.forwardRef((n,t)=>{const e=Pc(),i=Q(e.getTriggerProps(),n);return y.jsx(K.button,{...i,ref:t})});W2.displayName="TooltipTrigger";const{withProvider:Y2,withContext:Ac}=ki({key:"accordion"});Y2(DC,"root",{forwardAsChild:!0});const $5=Y2(zC,"root",{forwardAsChild:!0}),Q5=Ac(RC,"item",{forwardAsChild:!0}),K5=Ac(kC,"itemContent",{forwardAsChild:!0}),Z5=Ac("div","itemBody"),J5=Ac(OC,"itemTrigger",{forwardAsChild:!0}),tO=Ac(NC,"itemIndicator",{forwardAsChild:!0,defaultProps:{children:y.jsx(Xx,{})}}),q2=A.forwardRef(function(t,e){const i=Nk({key:"checkmark",recipe:t.recipe}),[s,r]=i.splitVariantProps(t),{checked:a,indeterminate:l,disabled:u,unstyled:h,children:f,...p}=r,g=h?Ok:i(s);return y.jsx(Sc.svg,{ref:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3px",strokeLinecap:"round",strokeLinejoin:"round","data-state":l?"indeterminate":a?"checked":"unchecked","data-disabled":$x(u),css:[g,t.css],...p,children:l?y.jsx("path",{d:"M5 12h14"}):a?y.jsx("polyline",{points:"20 6 9 17 4 12"}):null})});q2.displayName="Checkmark";const{withProvider:X2,withContext:rd,useStyles:$2}=ki({key:"checkboxCard"});X2(UC,"root",{forwardAsChild:!0});const eO=X2(HC,"root",{forwardAsChild:!0}),nO=rd(FC,"label",{forwardAsChild:!0}),iO=A.forwardRef(function(t,e){const i=$2(),s=Mc();return y.jsx(Sc.div,{ref:e,"data-scope":"checkbox-card","data-part":"description",...t,css:[i.description,t.css],"data-disabled":s.disabled?"":void 0,"data-state":s.checked?"checked":"unchecked"})}),sO=rd(BC,"control",{forwardAsChild:!0}),rO=rd("div","content"),aO=A.forwardRef(function(t,e){const i=Mc(),s=$2();return y.jsx(q2,{ref:e,checked:i.checked,indeterminate:i.indeterminate,disabled:i.disabled,unstyled:!0,"data-scope":"checkbox-card","data-part":"indicator",...t,css:[s.indicator,t.css]})});rd("div","addon");const oO=LC,{withProvider:Q2,withContext:ie}=ki({key:"colorPicker"});Q2(cM,"root",{forwardAsChild:!0});const lO=Q2(lM,"root",{forwardAsChild:!0});ie(aM,"label",{forwardAsChild:!0});const cO=ie(eM,"control",{forwardAsChild:!0}),K2=ie(xM,"swatch",{forwardAsChild:!0}),uO=ie(gM,"trigger",{forwardAsChild:!0,defaultProps:{children:y.jsx(K2,{})}}),hO=ie(oM,"positioner",{forwardAsChild:!0}),dO=ie(tM,"content",{forwardAsChild:!0}),fO=ie(YC,"areaBackground",{forwardAsChild:!0}),pO=ie(qC,"areaThumb",{forwardAsChild:!0}),mO=ie(WC,"area",{forwardAsChild:!0,defaultProps:{children:y.jsxs(y.Fragment,{children:[y.jsx(fO,{}),y.jsx(pO,{})]})}}),gO=ie(ZC,"channelSliderTrack",{forwardAsChild:!0}),xO=ie(KC,"channelSliderThumb",{forwardAsChild:!0}),yO=ie(mM,"transparencyGrid",{forwardAsChild:!0}),Ng=ie($C,"channelSlider",{forwardAsChild:!0,defaultProps:{children:y.jsxs(y.Fragment,{children:[y.jsx(yO,{size:"0.6rem"}),y.jsx(gO,{}),y.jsx(xO,{})]})}}),vO=A.forwardRef(function(t,e){return y.jsxs(kt,{gap:"1",flex:"1",px:"1",ref:e,...t,children:[y.jsx(Ng,{channel:"hue"}),y.jsx(Ng,{channel:"alpha"})]})}),Z2=ie(XC,"channelInput",{forwardAsChild:!0});A.forwardRef(function(t,e){return y.jsx(Z2,{channel:"hex",ref:e,...t})});const _O=ie(dM,"swatchGroup",{forwardAsChild:!0}),bO=ie(pM,"swatchTrigger",{forwardAsChild:!0}),wO=ie(hM,"swatch",{forwardAsChild:!0}),SO=ie(fM,"swatchIndicator",{forwardAsChild:!0});ie(yM,"valueText",{forwardAsChild:!0});const CO=ie(vM,"view",{forwardAsChild:!0});ie(sM,"formatTrigger",{forwardAsChild:!0});const MO=ie(iM,"formatSelect",{forwardAsChild:!0});ie(nM,"eyeDropperTrigger",{forwardAsChild:!0});const PO=A.forwardRef(function(t,e){const{children:i=y.jsx(zk,{}),...s}=t,r=Qt(),a=Dk(r.getEyeDropperTriggerProps(),s);return y.jsx(mr,{ref:e,...a,children:i})});ie(JC,"channelSliderValueText",{forwardAsChild:!0});ie(QC,"channelSliderLabel",{forwardAsChild:!0});const AO=A.forwardRef(function(t,e){return y.jsx(rM,{tabIndex:-1,ref:e,...t})}),TO=ie("span","channelText",{forwardAsChild:!0}),EO={rgba:["red","green","blue","alpha"],hsla:["hue","saturation","lightness","alpha"],hsba:["hue","saturation","brightness","alpha"],hexa:["hex","alpha"]},RO=n=>EO[n];function jO(n){const{children:t,query:e,ignoreCase:i,matchAll:s,styles:r}=n;if(typeof t!="string")throw new Error("The children prop of Highlight must be a string");const a=GN({query:e,text:t,matchAll:s,ignoreCase:i});return y.jsx(ty,{each:a,children:(l,u)=>l.match?y.jsx(MC,{css:r,children:l.text},u):y.jsx(A.Fragment,{children:l.text},u)})}const{withProvider:J2,withContext:ss}=ki({key:"listbox"});J2(n5,"root",{forwardAsChild:!0});const kO=J2(t5,"root",{forwardAsChild:!0});ss(CM,"input",{forwardAsChild:!0});const NO=ss(wM,"content",{forwardAsChild:!0});ss(kM,"valueText",{forwardAsChild:!0});const OO=ss(AM,"itemGroup",{forwardAsChild:!0}),zO=ss(TM,"itemGroupLabel",{forwardAsChild:!0}),DO=ss(PM,"item",{forwardAsChild:!0}),IO=ss(RM,"itemText",{forwardAsChild:!0}),BO=ss(EM,"itemIndicator",{forwardAsChild:!0,defaultProps:{children:y.jsx(SC,{})}}),LO=ss(jM,"label",{forwardAsChild:!0});ss(SM,"empty",{forwardAsChild:!0});const{withProvider:tP,withContext:ga}=ki({key:"numberInput"});tP(FM,"root",{forwardAsChild:!0});const ce=tP(LM,"root",{forwardAsChild:!0});ga(BM,"label",{forwardAsChild:!0});const ue=ga(IM,"input",{forwardAsChild:!0}),eP=ga(DM,"incrementTrigger",{forwardAsChild:!0,defaultProps:{children:y.jsx(Ik,{})}}),nP=ga(zM,"decrementTrigger",{forwardAsChild:!0,defaultProps:{children:y.jsx(Xx,{})}}),Ci=ga(OM,"control",{forwardAsChild:!0,defaultProps:{children:y.jsxs(y.Fragment,{children:[y.jsx(eP,{}),y.jsx(nP,{})]})}});ga(HM,"scrubber",{forwardAsChild:!0});ga(UM,"valueText",{forwardAsChild:!0});const{withRootProvider:iP,withContext:qn}=ki({key:"popover"});iP(l5);const sP=iP(o5),rP=qn(JM,"trigger",{forwardAsChild:!0}),aP=qn(KM,"positioner",{forwardAsChild:!0}),oP=qn(XM,"content",{forwardAsChild:!0}),lP=qn(YM,"arrowTip",{forwardAsChild:!0}),FO=qn(WM,"arrow",{forwardAsChild:!0,defaultProps:{children:y.jsx(lP,{})}});qn(qM,"closeTrigger",{forwardAsChild:!0});qn(QM,"indicator",{forwardAsChild:!0});qn(ZM,"title",{forwardAsChild:!0});qn($M,"description",{forwardAsChild:!0});qn("footer","footer");qn("header","header");const HO=qn("div","body");qn(VM,void 0,{forwardAsChild:!0});const{withProvider:cP,withContext:iy}=ki({key:"segmentGroup"});cP(o2,"root",{forwardAsChild:!0});const v1=cP(a2,"root",{forwardAsChild:!0,forwardProps:["orientation"],defaultProps:{orientation:"horizontal"}}),UO=iy(i2,"item",{forwardAsChild:!0}),GO=iy(r2,"itemText",{forwardAsChild:!0}),_1=iy(e2,"indicator",{forwardAsChild:!0});function VO(n){return n.map(t=>typeof t=="string"?{value:t,label:t}:t)}const b1=n=>{const{items:t,...e}=n,i=A.useMemo(()=>VO(t),[t]);return y.jsx(ty,{each:i,children:s=>y.jsxs(UO,{value:s.value,disabled:s.disabled,...e,children:[y.jsx(GO,{children:s.label}),y.jsx(WO,{})]},s.value)})},WO=s2,{withProvider:uP,withContext:_n}=ki({key:"select"});uP(M5,"root",{forwardAsChild:!0});const sy=uP(S5,"root",{forwardAsChild:!0,defaultProps:{positioning:{sameWidth:!0}}}),ry=_n(w2,"trigger",{forwardAsChild:!0}),ay=_n(b2,"positioner",{forwardAsChild:!0}),oy=_n(u2,"content",{forwardAsChild:!0}),ly=_n(S2,"valueText",{forwardAsChild:!0});_n(c2,"clearTrigger",{forwardAsChild:!0,defaultProps:{children:y.jsx(Bk,{boxSize:"1em"})}});_n(g2,"itemGroup",{forwardAsChild:!0});_n(x2,"itemGroupLabel",{forwardAsChild:!0});const cy=_n(m2,"item",{forwardAsChild:!0}),YO=_n(v2,"itemText",{forwardAsChild:!0}),uy=_n(y2,"itemIndicator",{forwardAsChild:!0,defaultProps:{children:y.jsx(SC,{})}}),hP=_n("div","indicatorGroup"),hy=_n(f2,"indicator",{forwardAsChild:!0,defaultProps:{children:y.jsx(Xx,{})}}),dy=_n(h2,"control",{forwardAsChild:!0}),qO=_n(_2,"label",{forwardAsChild:!0}),fy=d2,{useRecipeResult:XO}=wC({key:"separator"}),gr=A.forwardRef(function(t,e){const{styles:i,className:s,props:r}=XO(t),a=t.orientation||"horizontal";return y.jsx(Sc.span,{ref:e,role:p1(a)?"separator":"presentation","aria-orientation":p1(a)?a:void 0,...Fk(r,["orientation"]),className:Lk(s,t.className),css:[i,t.css]})});gr.displayName="Separator";const py=A.forwardRef(function(t,e){return y.jsx(kt,{align:"center",...t,direction:"column",ref:e})});py.displayName="VStack";const{withProvider:dP,withContext:my,useStyles:$O}=ki({key:"switch"});dP(E2,"root",{forwardAsChild:!0});const ad=dP(T2,"root",{forwardAsChild:!0}),gy=my(A2,"label",{forwardAsChild:!0}),fP=my(R2,"thumb",{forwardAsChild:!0}),od=my(M2,"control",{forwardAsChild:!0,defaultProps:{children:y.jsx(fP,{})}});A.forwardRef(function(t,e){const i=Ro(),s=$O(),{fallback:r,children:a,unstyled:l,...u}=t;return y.jsx(Sc.span,{ref:e,"data-checked":$x(i.checked),...u,css:[l?void 0:s.indicator,t.css],children:i.checked?a:r})});A.forwardRef(function(t,e){const i=Ro(),{fallback:s,children:r,...a}=t;return y.jsx(Sc.span,{ref:e,"data-checked":$x(i.checked),...a,children:i.checked?r:s})});const ld=P2,{withProvider:pP,withContext:Tc}=ki({key:"tabs"});pP(L2,"root",{forwardAsChild:!0});const mP=pP(B2,"root",{forwardAsChild:!0}),mh=Tc(z2,"trigger",{forwardAsChild:!0}),gh=Tc(k2,"content",{forwardAsChild:!0});Tc("div","contentGroup");const gP=Tc(O2,"list",{forwardAsChild:!0}),QO=Tc(N2,"indicator",{forwardAsChild:!0}),{withRootProvider:xP,withContext:Ec}=ki({key:"tooltip"});xP(X5);const KO=xP(q5,{defaultProps:{lazyMount:!0,unmountOnExit:!0}}),ZO=Ec(W2,"trigger",{forwardAsChild:!0}),JO=Ec(V2,"positioner",{forwardAsChild:!0}),tz=Ec(G2,"content",{forwardAsChild:!0}),yP=Ec(U2,"arrowTip",{forwardAsChild:!0}),ez=Ec(H2,"arrow",{forwardAsChild:!0,defaultProps:{children:y.jsx(yP,{})}});function nz(){return y.jsxs(fe,{children:[y.jsx(Qi,{lineHeight:1.2,size:"5xl",fontWeight:"medium",children:y.jsx(jO,{query:["N","O","Browser"],styles:{color:"black.600",fontSize:"6xl",fontWeight:"bold"},children:"Not Only Observation Browser"})}),y.jsx(gr,{size:"lg"}),y.jsx(ut,{fontSize:"lg",fontWeight:"medium",my:3,children:"A web-based platform for visualizing and analyzing WFSS data"})]})}function Og(n){const{collapsedSize:t="40px",buttonPosition:e="left",initialExpanded:i=!0,children:s,...r}=n,[a,l]=A.useState(i),u=e==="top-left"?"column":"row";return y.jsx(fe,{...r,children:y.jsxs(kt,{direction:u,alignItems:"flex-start",gapY:0,p:0,m:0,overflow:"hidden",borderWidth:"1px",borderRadius:"md",bg:"bg",height:a?"auto":t,width:a?"auto":t,transition:"width 500ms ease, height 500ms ease",children:[y.jsx(mr,{"aria-label":a?"Collapse":"Expand",size:"sm",variant:"ghost",m:0,p:0,width:t,height:t,onClick:()=>l(h=>!h),zIndex:1,children:y.jsx(fe,{p:0,m:0,as:Hk,transform:a?"rotate(45deg)":"rotate(0deg)",transition:"transform 500ms ease"})}),y.jsx(fe,{opacity:a?1:0,pointerEvents:a?"auto":"none",transform:a?"translateY(0)":"translateY(4px)",transition:"opacity 500ms ease",zIndex:0,children:s})]})})}function xh({label:n,value:t,onValueChange:e,width:i,orientation:s="vertical"}){return y.jsxs(Kx,{orientation:s,children:[y.jsx(Zx,{children:n}),y.jsxs(ce,{value:t.toString(),step:.1,min:0,max:100,onValueChange:r=>{const a=r.valueAsNumber;Number.isNaN(a)||e(a)},width:i,children:[y.jsxs(Ci,{children:[y.jsx(eP,{}),y.jsx(nP,{})]}),y.jsx(ue,{})]})]})}function vP(n,t,e){if(!n)return;if(e(n)===!0)return n;let i=n.child;for(;i;){const s=vP(i,t,e);if(s)return s;i=i.sibling}}function _P(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const xy=_P(A.createContext(null));let bP=class extends A.Component{render(){return A.createElement(xy.Provider,{value:this._reactInternals},this.props.children)}};function iz(){const n=A.useContext(xy);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=A.useId();return A.useMemo(()=>{for(const e of[n,n?.alternate]){if(!e)continue;const i=vP(e,!1,s=>{let r=s.memoizedState;for(;r;){if(r.memoizedState===t)return!0;r=r.next}});if(i)return i}},[n,t])}const sz=Symbol.for("react.context"),rz=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===sz;function az(){const n=iz(),[t]=A.useState(()=>new Map);t.clear();let e=n;for(;e;){const i=e.type;rz(i)&&i!==xy&&!t.has(i)&&t.set(i,A.use(_P(i))),e=e.return}return t}function oz(){const n=az();return A.useMemo(()=>Array.from(n.keys()).reduce((t,e)=>i=>A.createElement(t,null,A.createElement(e.Provider,{...i,value:n.get(e)})),t=>A.createElement(bP,{...t})),[n])}var lt=(n=>(n.Application="application",n.WebGLPipes="webgl-pipes",n.WebGLPipesAdaptor="webgl-pipes-adaptor",n.WebGLSystem="webgl-system",n.WebGPUPipes="webgpu-pipes",n.WebGPUPipesAdaptor="webgpu-pipes-adaptor",n.WebGPUSystem="webgpu-system",n.CanvasSystem="canvas-system",n.CanvasPipesAdaptor="canvas-pipes-adaptor",n.CanvasPipes="canvas-pipes",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n.MaskEffect="mask-effect",n.BlendMode="blend-mode",n.TextureSource="texture-source",n.Environment="environment",n.ShapeBuilder="shape-builder",n.Batcher="batcher",n))(lt||{});const zg=n=>{if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={...typeof n.extension!="object"?{type:n.extension}:n.extension,ref:n}}if(typeof n=="object")n={...n};else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},Ru=(n,t)=>zg(n).priority??t,Ne={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map(zg).forEach(t=>{t.type.forEach(e=>this._removeHandlers[e]?.(t))}),this},add(...n){return n.map(zg).forEach(t=>{t.type.forEach(e=>{const i=this._addHandlers,s=this._queue;i[e]?i[e]?.(t):(s[e]=s[e]||[],s[e]?.push(t))})}),this},handle(n,t,e){const i=this._addHandlers,s=this._removeHandlers;if(i[n]||s[n])throw new Error(`Extension type ${n} already has a handler`);i[n]=t,s[n]=e;const r=this._queue;return r[n]&&(r[n]?.forEach(a=>t(a)),delete r[n]),this},handleByMap(n,t){return this.handle(n,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByNamedList(n,t,e=-1){return this.handle(n,i=>{t.findIndex(r=>r.name===i.name)>=0||(t.push({name:i.name,value:i.ref}),t.sort((r,a)=>Ru(a.value,e)-Ru(r.value,e)))},i=>{const s=t.findIndex(r=>r.name===i.name);s!==-1&&t.splice(s,1)})},handleByList(n,t,e=-1){return this.handle(n,i=>{t.includes(i.ref)||(t.push(i.ref),t.sort((s,r)=>Ru(r,e)-Ru(s,e)))},i=>{const s=t.indexOf(i.ref);s!==-1&&t.splice(s,1)})},mixin(n,...t){for(const e of t)Object.defineProperties(n.prototype,Object.getOwnPropertyDescriptors(e))}},lz={extension:{type:lt.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await ph(()=>import("./browserAll-tJMCbgXi.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))}},cz={extension:{type:lt.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await ph(()=>import("./webworkerAll-c6Yd9zOx.js"),__vite__mapDeps([1,2,3,4,5,6,7]))}};class Ge{constructor(t,e,i){this._x=e||0,this._y=i||0,this._observer=t}clone(t){return new Ge(t??this._observer,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this._observer._onUpdate(this)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}var Sp={exports:{}},w1;function uz(){return w1||(w1=1,(function(n){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function s(u,h,f){this.fn=u,this.context=h,this.once=f||!1}function r(u,h,f,p,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new s(f,p||u,g),w=e?e+h:h;return u._events[w]?u._events[w].fn?u._events[w]=[u._events[w],x]:u._events[w].push(x):(u._events[w]=x,u._eventsCount++),u}function a(u,h){--u._eventsCount===0?u._events=new i:delete u._events[h]}function l(){this._events=new i,this._eventsCount=0}l.prototype.eventNames=function(){var h=[],f,p;if(this._eventsCount===0)return h;for(p in f=this._events)t.call(f,p)&&h.push(e?p.slice(1):p);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(f)):h},l.prototype.listeners=function(h){var f=e?e+h:h,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,x=p.length,w=new Array(x);g<x;g++)w[g]=p[g].fn;return w},l.prototype.listenerCount=function(h){var f=e?e+h:h,p=this._events[f];return p?p.fn?1:p.length:0},l.prototype.emit=function(h,f,p,g,x,w){var _=e?e+h:h;if(!this._events[_])return!1;var b=this._events[_],C=arguments.length,M,P;if(b.fn){switch(b.once&&this.removeListener(h,b.fn,void 0,!0),C){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,f),!0;case 3:return b.fn.call(b.context,f,p),!0;case 4:return b.fn.call(b.context,f,p,g),!0;case 5:return b.fn.call(b.context,f,p,g,x),!0;case 6:return b.fn.call(b.context,f,p,g,x,w),!0}for(P=1,M=new Array(C-1);P<C;P++)M[P-1]=arguments[P];b.fn.apply(b.context,M)}else{var T=b.length,E;for(P=0;P<T;P++)switch(b[P].once&&this.removeListener(h,b[P].fn,void 0,!0),C){case 1:b[P].fn.call(b[P].context);break;case 2:b[P].fn.call(b[P].context,f);break;case 3:b[P].fn.call(b[P].context,f,p);break;case 4:b[P].fn.call(b[P].context,f,p,g);break;default:if(!M)for(E=1,M=new Array(C-1);E<C;E++)M[E-1]=arguments[E];b[P].fn.apply(b[P].context,M)}}return!0},l.prototype.on=function(h,f,p){return r(this,h,f,p,!1)},l.prototype.once=function(h,f,p){return r(this,h,f,p,!0)},l.prototype.removeListener=function(h,f,p,g){var x=e?e+h:h;if(!this._events[x])return this;if(!f)return a(this,x),this;var w=this._events[x];if(w.fn)w.fn===f&&(!g||w.once)&&(!p||w.context===p)&&a(this,x);else{for(var _=0,b=[],C=w.length;_<C;_++)(w[_].fn!==f||g&&!w[_].once||p&&w[_].context!==p)&&b.push(w[_]);b.length?this._events[x]=b.length===1?b[0]:b:a(this,x)}return this},l.prototype.removeAllListeners=function(h){var f;return h?(f=e?e+h:h,this._events[f]&&a(this,f)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=e,l.EventEmitter=l,n.exports=l})(Sp)),Sp.exports}var hz=uz();const Ni=Eo(hz),dz=Math.PI*2,fz=180/Math.PI,pz=Math.PI/180;let Dt=class wP{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new wP(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Cp.x=0,Cp.y=0,Cp}};const Cp=new Dt;class Tt{constructor(t=1,e=0,i=0,s=1,r=0,a=0){this.array=null,this.a=t,this.b=e,this.c=i,this.d=s,this.tx=r,this.ty=a}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,i,s,r,a){return this.a=t,this.b=e,this.c=i,this.d=s,this.tx=r,this.ty=a,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,e){e=e||new Dt;const i=t.x,s=t.y;return e.x=this.a*i+this.c*s+this.tx,e.y=this.b*i+this.d*s+this.ty,e}applyInverse(t,e){e=e||new Dt;const i=this.a,s=this.b,r=this.c,a=this.d,l=this.tx,u=this.ty,h=1/(i*a+r*-s),f=t.x,p=t.y;return e.x=a*h*f+-r*h*p+(u*r-l*a)*h,e.y=i*h*p+-s*h*f+(-u*i+l*s)*h,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),s=this.a,r=this.c,a=this.tx;return this.a=s*e-this.b*i,this.b=s*i+this.b*e,this.c=r*e-this.d*i,this.d=r*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this}append(t){const e=this.a,i=this.b,s=this.c,r=this.d;return this.a=t.a*e+t.b*s,this.b=t.a*i+t.b*r,this.c=t.c*e+t.d*s,this.d=t.c*i+t.d*r,this.tx=t.tx*e+t.ty*s+this.tx,this.ty=t.tx*i+t.ty*r+this.ty,this}appendFrom(t,e){const i=t.a,s=t.b,r=t.c,a=t.d,l=t.tx,u=t.ty,h=e.a,f=e.b,p=e.c,g=e.d;return this.a=i*h+s*p,this.b=i*f+s*g,this.c=r*h+a*p,this.d=r*f+a*g,this.tx=l*h+u*p+e.tx,this.ty=l*f+u*g+e.ty,this}setTransform(t,e,i,s,r,a,l,u,h){return this.a=Math.cos(l+h)*r,this.b=Math.sin(l+h)*r,this.c=-Math.sin(l-u)*a,this.d=Math.cos(l-u)*a,this.tx=t-(i*this.a+s*this.c),this.ty=e-(i*this.b+s*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const i=this.a,s=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=s*t.a+this.d*t.c,this.d=s*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,i=this.b,s=this.c,r=this.d,a=t.pivot,l=-Math.atan2(-s,r),u=Math.atan2(i,e),h=Math.abs(l+u);return h<1e-5||Math.abs(dz-h)<1e-5?(t.rotation=u,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=l,t.skew.y=u),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(s*s+r*r),t.position.x=this.tx+(a.x*e+a.y*s),t.position.y=this.ty+(a.x*i+a.y*r),t}invert(){const t=this.a,e=this.b,i=this.c,s=this.d,r=this.tx,a=t*s-e*i;return this.a=s/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-s*r)/a,this.ty=-(t*this.ty-e*r)/a,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Tt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return gz.identity()}static get shared(){return mz.identity()}}const mz=new Tt,gz=new Tt,$r=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Qr=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Kr=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Zr=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Dg=[],SP=[],ju=Math.sign;function xz(){for(let n=0;n<16;n++){const t=[];Dg.push(t);for(let e=0;e<16;e++){const i=ju($r[n]*$r[e]+Kr[n]*Qr[e]),s=ju(Qr[n]*$r[e]+Zr[n]*Qr[e]),r=ju($r[n]*Kr[e]+Kr[n]*Zr[e]),a=ju(Qr[n]*Kr[e]+Zr[n]*Zr[e]);for(let l=0;l<16;l++)if($r[l]===i&&Qr[l]===s&&Kr[l]===r&&Zr[l]===a){t.push(l);break}}}for(let n=0;n<16;n++){const t=new Tt;t.set($r[n],Qr[n],Kr[n],Zr[n],0,0),SP.push(t)}}xz();const Vt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>$r[n],uY:n=>Qr[n],vX:n=>Kr[n],vY:n=>Zr[n],inv:n=>n&8?n&15:-n&7,add:(n,t)=>Dg[n][t],sub:(n,t)=>Dg[n][Vt.inv(t)],rotate180:n=>n^4,isVertical:n=>(n&3)===2,byDirection:(n,t)=>Math.abs(n)*2<=Math.abs(t)?t>=0?Vt.S:Vt.N:Math.abs(t)*2<=Math.abs(n)?n>0?Vt.E:Vt.W:t>0?n>0?Vt.SE:Vt.SW:n>0?Vt.NE:Vt.NW,matrixAppendRotationInv:(n,t,e=0,i=0)=>{const s=SP[Vt.inv(t)];s.tx=e,s.ty=i,n.append(s)},transformRectCoords:(n,t,e,i)=>{const{x:s,y:r,width:a,height:l}=n,{x:u,y:h,width:f,height:p}=t;return e===Vt.E?(i.set(s+u,r+h,a,l),i):e===Vt.S?i.set(f-r-l+u,s+h,l,a):e===Vt.W?i.set(f-s-a+u,p-r-l+h,a,l):e===Vt.N?i.set(r+u,p-s-a+h,l,a):i.set(s+u,r+h,a,l)}},ku=[new Dt,new Dt,new Dt,new Dt];class Yt{constructor(t=0,e=0,i=0,s=0){this.type="rectangle",this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(s)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new Yt(0,0,0,0)}clone(){return new Yt(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}strokeContains(t,e,i,s=.5){const{width:r,height:a}=this;if(r<=0||a<=0)return!1;const l=this.x,u=this.y,h=i*(1-s),f=i-h,p=l-h,g=l+r+h,x=u-h,w=u+a+h,_=l+f,b=l+r-f,C=u+f,M=u+a-f;return t>=p&&t<=g&&e>=x&&e<=w&&!(t>_&&t<b&&e>C&&e<M)}intersects(t,e){if(!e){const O=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=O)return!1;const B=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>B}const i=this.left,s=this.right,r=this.top,a=this.bottom;if(s<=i||a<=r)return!1;const l=ku[0].set(t.left,t.top),u=ku[1].set(t.left,t.bottom),h=ku[2].set(t.right,t.top),f=ku[3].set(t.right,t.bottom);if(h.x<=l.x||u.y<=l.y)return!1;const p=Math.sign(e.a*e.d-e.b*e.c);if(p===0||(e.apply(l,l),e.apply(u,u),e.apply(h,h),e.apply(f,f),Math.max(l.x,u.x,h.x,f.x)<=i||Math.min(l.x,u.x,h.x,f.x)>=s||Math.max(l.y,u.y,h.y,f.y)<=r||Math.min(l.y,u.y,h.y,f.y)>=a))return!1;const g=p*(u.y-l.y),x=p*(l.x-u.x),w=g*i+x*r,_=g*s+x*r,b=g*i+x*a,C=g*s+x*a;if(Math.max(w,_,b,C)<=g*l.x+x*l.y||Math.min(w,_,b,C)>=g*f.x+x*f.y)return!1;const M=p*(l.y-h.y),P=p*(h.x-l.x),T=M*i+P*r,E=M*s+P*r,R=M*i+P*a,N=M*s+P*a;return!(Math.max(T,E,R,N)<=M*l.x+P*l.y||Math.min(T,E,R,N)>=M*f.x+P*f.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),s=Math.max(this.y,t.y),r=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=s,this.height=Math.max(r-s,0),this}ceil(t=1,e=.001){const i=Math.ceil((this.x+this.width-e)*t)/t,s=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=s-this.y,this}scale(t,e=t){return this.x*=t,this.y*=e,this.width*=t,this.height*=e,this}enlarge(t){const e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),s=Math.min(this.y,t.y),r=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=s,this.height=r-s,this}getBounds(t){return t||(t=new Yt),t.copyFrom(this),t}containsRect(t){if(this.width<=0||this.height<=0)return!1;const e=t.x,i=t.y,s=t.x+t.width,r=t.y+t.height;return e>=this.x&&e<this.x+this.width&&i>=this.y&&i<this.y+this.height&&s>=this.x&&s<this.x+this.width&&r>=this.y&&r<this.y+this.height}set(t,e,i,s){return this.x=t,this.y=e,this.width=i,this.height=s,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const Mp={default:-1};function ve(n="default"){return Mp[n]===void 0&&(Mp[n]=-1),++Mp[n]}const S1=new Set,Lt="8.0.0",yz="8.3.4",Za={quiet:!1,noColor:!1},Ct=(n,t,e=3)=>{if(Za.quiet||S1.has(t))return;let i=new Error().stack;const s=`${t}
Deprecated since v${n}`,r=typeof console.groupCollapsed=="function"&&!Za.noColor;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",s):(i=i.split(`
`).splice(e).join(`
`),r?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",s),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",s),console.warn(i))),S1.add(t)};Object.defineProperties(Ct,{quiet:{get:()=>Za.quiet,set:n=>{Za.quiet=n},enumerable:!0,configurable:!1},noColor:{get:()=>Za.noColor,set:n=>{Za.noColor=n},enumerable:!0,configurable:!1}});const CP=()=>{};function po(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function C1(n){return!(n&n-1)&&!!n}function MP(n){const t={};for(const e in n)n[e]!==void 0&&(t[e]=n[e]);return t}const M1=Object.create(null);function vz(n){const t=M1[n];return t===void 0&&(M1[n]=ve("resource")),t}const PP=class AP extends Ni{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...AP.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){Ct(Lt,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=vz(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};PP.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let mo=PP;const TP=class EP extends Ni{constructor(t={}){super(),this.options=t,this.uid=ve("textureSource"),this._resourceType="textureSource",this._resourceId=ve("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...EP.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new mo(MP(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){this.style!==t&&(this._style?.off("change",this._onStyleChange,this),this._style=t,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(t){this._style.maxAnisotropy=t}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=ve("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,e,i){i||(i=this._resolution),t||(t=this.width),e||(e=this.height);const s=Math.round(t*i),r=Math.round(e*i);return this.width=s/i,this.height=r/i,this._resolution=i,this.pixelWidth===s&&this.pixelHeight===r?!1:(this._refreshPOT(),this.pixelWidth=s,this.pixelHeight=r,this.emit("resize",this),this._resourceId=ve("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=C1(this.pixelWidth)&&C1(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};TP.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let Oi=TP;class yy extends Oi{constructor(t){const e=t.resource||new Float32Array(t.width*t.height*4);let i=t.format;i||(e instanceof Float32Array?i="rgba32float":e instanceof Int32Array||e instanceof Uint32Array?i="rgba32uint":e instanceof Int16Array||e instanceof Uint16Array?i="rgba16uint":(e instanceof Int8Array,i="bgra8unorm")),super({...t,resource:e,format:i}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}yy.extension=lt.TextureSource;const P1=new Tt;class _z{constructor(t,e){this.mapCoord=new Tt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof e>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=e,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){this.texture!==t&&(this._texture?.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,e){e===void 0&&(e=t);const i=this.mapCoord;for(let s=0;s<t.length;s+=2){const r=t[s],a=t[s+1];e[s]=r*i.a+a*i.c+i.tx,e[s+1]=r*i.b+a*i.d+i.ty}return e}update(){const t=this._texture;this._updateID++;const e=t.uvs;this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0);const i=t.orig,s=t.trim;s&&(P1.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(P1));const r=t.source,a=this.uClampFrame,l=this.clampMargin/r._resolution,u=this.clampOffset/r._resolution;return a[0]=(t.frame.x+l+u)/r.width,a[1]=(t.frame.y+l+u)/r.height,a[2]=(t.frame.x+t.frame.width-l+u)/r.width,a[3]=(t.frame.y+t.frame.height-l+u)/r.height,this.uClampOffset[0]=this.clampOffset/r.pixelWidth,this.uClampOffset[1]=this.clampOffset/r.pixelHeight,this.isSimple=t.frame.width===r.width&&t.frame.height===r.height&&t.rotate===0,!0}}class dt extends Ni{constructor({source:t,label:e,frame:i,orig:s,trim:r,defaultAnchor:a,defaultBorders:l,rotate:u,dynamic:h}={}){if(super(),this.uid=ve("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new Yt,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=e,this.source=t?.source??new Oi,this.noFrame=!i,i)this.frame.copyFrom(i);else{const{width:f,height:p}=this._source;this.frame.width=f,this.frame.height=p}this.orig=s||this.frame,this.trim=r,this.rotate=u??0,this.defaultAnchor=a,this.defaultBorders=l,this.destroyed=!1,this.dynamic=h||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new _z(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:e}=this,{width:i,height:s}=this._source,r=e.x/i,a=e.y/s,l=e.width/i,u=e.height/s;let h=this.rotate;if(h){const f=l/2,p=u/2,g=r+f,x=a+p;h=Vt.add(h,Vt.NW),t.x0=g+f*Vt.uX(h),t.y0=x+p*Vt.uY(h),h=Vt.add(h,2),t.x1=g+f*Vt.uX(h),t.y1=x+p*Vt.uY(h),h=Vt.add(h,2),t.x2=g+f*Vt.uX(h),t.y2=x+p*Vt.uY(h),h=Vt.add(h,2),t.x3=g+f*Vt.uX(h),t.y3=x+p*Vt.uY(h)}else t.x0=r,t.y0=a,t.x1=r+l,t.y1=a,t.x2=r+l,t.y2=a+u,t.x3=r,t.y3=a+u}destroy(t=!1){this._source&&(this._source.off("resize",this.update,this),t&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Ct(Lt,"Texture.baseTexture is now Texture.source"),this._source}}dt.EMPTY=new dt({label:"EMPTY",source:new Oi({label:"EMPTY"})});dt.EMPTY.destroy=CP;dt.WHITE=new dt({source:new yy({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});dt.WHITE.destroy=CP;function bz(n,t,e){const{width:i,height:s}=e.orig,r=e.trim;if(r){const a=r.width,l=r.height;n.minX=r.x-t._x*i,n.maxX=n.minX+a,n.minY=r.y-t._y*s,n.maxY=n.minY+l}else n.minX=-t._x*i,n.maxX=n.minX+i,n.minY=-t._y*s,n.maxY=n.minY+s}const A1=new Tt;class Ei{constructor(t=1/0,e=1/0,i=-1/0,s=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=A1,this.minX=t,this.minY=e,this.maxX=i,this.maxY=s}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new Yt);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=A1,this}set(t,e,i,s){this.minX=t,this.minY=e,this.maxX=i,this.maxY=s}addFrame(t,e,i,s,r){r||(r=this.matrix);const a=r.a,l=r.b,u=r.c,h=r.d,f=r.tx,p=r.ty;let g=this.minX,x=this.minY,w=this.maxX,_=this.maxY,b=a*t+u*e+f,C=l*t+h*e+p;b<g&&(g=b),C<x&&(x=C),b>w&&(w=b),C>_&&(_=C),b=a*i+u*e+f,C=l*i+h*e+p,b<g&&(g=b),C<x&&(x=C),b>w&&(w=b),C>_&&(_=C),b=a*t+u*s+f,C=l*t+h*s+p,b<g&&(g=b),C<x&&(x=C),b>w&&(w=b),C>_&&(_=C),b=a*i+u*s+f,C=l*i+h*s+p,b<g&&(g=b),C<x&&(x=C),b>w&&(w=b),C>_&&(_=C),this.minX=g,this.minY=x,this.maxX=w,this.maxY=_}addRect(t,e){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,e)}addBounds(t,e){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,e)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const e=this.minX,i=this.minY,s=this.maxX,r=this.maxY,{a,b:l,c:u,d:h,tx:f,ty:p}=t;let g=a*e+u*i+f,x=l*e+h*i+p;this.minX=g,this.minY=x,this.maxX=g,this.maxY=x,g=a*s+u*i+f,x=l*s+h*i+p,this.minX=g<this.minX?g:this.minX,this.minY=x<this.minY?x:this.minY,this.maxX=g>this.maxX?g:this.maxX,this.maxY=x>this.maxY?x:this.maxY,g=a*e+u*r+f,x=l*e+h*r+p,this.minX=g<this.minX?g:this.minX,this.minY=x<this.minY?x:this.minY,this.maxX=g>this.maxX?g:this.maxX,this.maxY=x>this.maxY?x:this.maxY,g=a*s+u*r+f,x=l*s+h*r+p,this.minX=g<this.minX?g:this.minX,this.minY=x<this.minY?x:this.minY,this.maxX=g>this.maxX?g:this.maxX,this.maxY=x>this.maxY?x:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,e,i,s){return this.minX<t&&(this.minX=t),this.maxX>e&&(this.maxX=e),this.minY<i&&(this.minY=i),this.maxY>s&&(this.maxY=s),this}pad(t,e=t){return this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Ei(this.minX,this.minY,this.maxX,this.maxY)}scale(t,e=t){return this.minX*=t,this.minY*=e,this.maxX*=t,this.maxY*=e,this}get x(){return this.minX}set x(t){const e=this.maxX-this.minX;this.minX=t,this.maxX=t+e}get y(){return this.minY}set y(t){const e=this.maxY-this.minY;this.minY=t,this.maxY=t+e}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,e,i,s){let r=this.minX,a=this.minY,l=this.maxX,u=this.maxY;s||(s=this.matrix);const h=s.a,f=s.b,p=s.c,g=s.d,x=s.tx,w=s.ty;for(let _=e;_<i;_+=2){const b=t[_],C=t[_+1],M=h*b+p*C+x,P=f*b+g*C+w;r=M<r?M:r,a=P<a?P:a,l=M>l?M:l,u=P>u?P:u}this.minX=r,this.minY=a,this.maxX=l,this.maxY=u}containsPoint(t,e){return this.minX<=t&&this.minY<=e&&this.maxX>=t&&this.maxY>=e}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(t){return this.minX=t.minX,this.minY=t.minY,this.maxX=t.maxX,this.maxY=t.maxY,this}}var wz={grad:.9,turn:360,rad:360/(2*Math.PI)},vs=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Le=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*n)/e+0},oi=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),n>e?e:n>t?n:t},RP=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},T1=function(n){return{r:oi(n.r,0,255),g:oi(n.g,0,255),b:oi(n.b,0,255),a:oi(n.a)}},Pp=function(n){return{r:Le(n.r),g:Le(n.g),b:Le(n.b),a:Le(n.a,3)}},Sz=/^#([0-9a-f]{3,8})$/i,Nu=function(n){var t=n.toString(16);return t.length<2?"0"+t:t},jP=function(n){var t=n.r,e=n.g,i=n.b,s=n.a,r=Math.max(t,e,i),a=r-Math.min(t,e,i),l=a?r===t?(e-i)/a:r===e?2+(i-t)/a:4+(t-e)/a:0;return{h:60*(l<0?l+6:l),s:r?a/r*100:0,v:r/255*100,a:s}},kP=function(n){var t=n.h,e=n.s,i=n.v,s=n.a;t=t/360*6,e/=100,i/=100;var r=Math.floor(t),a=i*(1-e),l=i*(1-(t-r)*e),u=i*(1-(1-t+r)*e),h=r%6;return{r:255*[i,l,a,a,u,i][h],g:255*[u,i,i,l,a,a][h],b:255*[a,a,u,i,i,l][h],a:s}},E1=function(n){return{h:RP(n.h),s:oi(n.s,0,100),l:oi(n.l,0,100),a:oi(n.a)}},R1=function(n){return{h:Le(n.h),s:Le(n.s),l:Le(n.l),a:Le(n.a,3)}},j1=function(n){return kP((e=(t=n).s,{h:t.h,s:(e*=((i=t.l)<50?i:100-i)/100)>0?2*e/(i+e)*100:0,v:i+e,a:t.a}));var t,e,i},Dl=function(n){return{h:(t=jP(n)).h,s:(s=(200-(e=t.s))*(i=t.v)/100)>0&&s<200?e*i/100/(s<=100?s:200-s)*100:0,l:s/2,a:t.a};var t,e,i,s},Cz=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Mz=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Pz=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Az=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ig={string:[[function(n){var t=Sz.exec(n);return t?(n=t[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?Le(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?Le(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var t=Pz.exec(n)||Az.exec(n);return t?t[2]!==t[4]||t[4]!==t[6]?null:T1({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(n){var t=Cz.exec(n)||Mz.exec(n);if(!t)return null;var e,i,s=E1({h:(e=t[1],i=t[2],i===void 0&&(i="deg"),Number(e)*(wz[i]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return j1(s)},"hsl"]],object:[[function(n){var t=n.r,e=n.g,i=n.b,s=n.a,r=s===void 0?1:s;return vs(t)&&vs(e)&&vs(i)?T1({r:Number(t),g:Number(e),b:Number(i),a:Number(r)}):null},"rgb"],[function(n){var t=n.h,e=n.s,i=n.l,s=n.a,r=s===void 0?1:s;if(!vs(t)||!vs(e)||!vs(i))return null;var a=E1({h:Number(t),s:Number(e),l:Number(i),a:Number(r)});return j1(a)},"hsl"],[function(n){var t=n.h,e=n.s,i=n.v,s=n.a,r=s===void 0?1:s;if(!vs(t)||!vs(e)||!vs(i))return null;var a=(function(l){return{h:RP(l.h),s:oi(l.s,0,100),v:oi(l.v,0,100),a:oi(l.a)}})({h:Number(t),s:Number(e),v:Number(i),a:Number(r)});return kP(a)},"hsv"]]},k1=function(n,t){for(var e=0;e<t.length;e++){var i=t[e][0](n);if(i)return[i,t[e][1]]}return[null,void 0]},Tz=function(n){return typeof n=="string"?k1(n.trim(),Ig.string):typeof n=="object"&&n!==null?k1(n,Ig.object):[null,void 0]},Ap=function(n,t){var e=Dl(n);return{h:e.h,s:oi(e.s+100*t,0,100),l:e.l,a:e.a}},Tp=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},N1=function(n,t){var e=Dl(n);return{h:e.h,s:e.s,l:oi(e.l+100*t,0,100),a:e.a}},Bg=(function(){function n(t){this.parsed=Tz(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return Le(Tp(this.rgba),2)},n.prototype.isDark=function(){return Tp(this.rgba)<.5},n.prototype.isLight=function(){return Tp(this.rgba)>=.5},n.prototype.toHex=function(){return t=Pp(this.rgba),e=t.r,i=t.g,s=t.b,a=(r=t.a)<1?Nu(Le(255*r)):"","#"+Nu(e)+Nu(i)+Nu(s)+a;var t,e,i,s,r,a},n.prototype.toRgb=function(){return Pp(this.rgba)},n.prototype.toRgbString=function(){return t=Pp(this.rgba),e=t.r,i=t.g,s=t.b,(r=t.a)<1?"rgba("+e+", "+i+", "+s+", "+r+")":"rgb("+e+", "+i+", "+s+")";var t,e,i,s,r},n.prototype.toHsl=function(){return R1(Dl(this.rgba))},n.prototype.toHslString=function(){return t=R1(Dl(this.rgba)),e=t.h,i=t.s,s=t.l,(r=t.a)<1?"hsla("+e+", "+i+"%, "+s+"%, "+r+")":"hsl("+e+", "+i+"%, "+s+"%)";var t,e,i,s,r},n.prototype.toHsv=function(){return t=jP(this.rgba),{h:Le(t.h),s:Le(t.s),v:Le(t.v),a:Le(t.a,3)};var t},n.prototype.invert=function(){return Hi({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},n.prototype.saturate=function(t){return t===void 0&&(t=.1),Hi(Ap(this.rgba,t))},n.prototype.desaturate=function(t){return t===void 0&&(t=.1),Hi(Ap(this.rgba,-t))},n.prototype.grayscale=function(){return Hi(Ap(this.rgba,-1))},n.prototype.lighten=function(t){return t===void 0&&(t=.1),Hi(N1(this.rgba,t))},n.prototype.darken=function(t){return t===void 0&&(t=.1),Hi(N1(this.rgba,-t))},n.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},n.prototype.alpha=function(t){return typeof t=="number"?Hi({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):Le(this.rgba.a,3);var e},n.prototype.hue=function(t){var e=Dl(this.rgba);return typeof t=="number"?Hi({h:t,s:e.s,l:e.l,a:e.a}):Le(e.h)},n.prototype.isEqual=function(t){return this.toHex()===Hi(t).toHex()},n})(),Hi=function(n){return n instanceof Bg?n:new Bg(n)},O1=[],Ez=function(n){n.forEach(function(t){O1.indexOf(t)<0&&(t(Bg,Ig),O1.push(t))})};function Rz(n,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var s in e)i[e[s]]=s;var r={};n.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var l,u,h=i[this.toHex()];if(h)return h;if(a?.closest){var f=this.toRgb(),p=1/0,g="black";if(!r.length)for(var x in e)r[x]=new n(e[x]).toRgb();for(var w in e){var _=(l=f,u=r[w],Math.pow(l.r-u.r,2)+Math.pow(l.g-u.g,2)+Math.pow(l.b-u.b,2));_<p&&(p=_,g=w)}return g}},t.string.push([function(a){var l=a.toLowerCase(),u=l==="transparent"?"#0000":e[l];return u?new n(u).toRgb():null},"name"])}Ez([Rz]);const go=class Cl{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof Cl)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,t))&&(this._value=this._cloneSource(t),this._normalize(this._value))}}get value(){return this._value}_cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}_isSourceEqual(t,e){const i=typeof t;if(i!==typeof e)return!1;if(i==="number"||i==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((r,a)=>r===e[a]);if(t!==null&&e!==null){const r=Object.keys(t),a=Object.keys(e);return r.length!==a.length?!1:r.every(l=>t[l]===e[l])}return t===e}toRgba(){const[t,e,i,s]=this._components;return{r:t,g:e,b:i,a:s}}toRgb(){const[t,e,i]=this._components;return{r:t,g:e,b:i}}toRgbaString(){const[t,e,i]=this.toUint8RgbArray();return`rgba(${t},${e},${i},${this.alpha})`}toUint8RgbArray(t){const[e,i,s]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb),t[0]=Math.round(e*255),t[1]=Math.round(i*255),t[2]=Math.round(s*255),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t||(t=this._arrayRgba);const[e,i,s,r]=this._components;return t[0]=e,t[1]=i,t[2]=s,t[3]=r,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb);const[e,i,s]=this._components;return t[0]=e,t[1]=i,t[2]=s,t}toNumber(){return this._int}toBgrNumber(){const[t,e,i]=this.toUint8RgbArray();return(i<<16)+(e<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,i,s,r]=Cl._temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=i,this._components[2]*=s,this._components[3]*=r,this._refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let i=this._int>>16&255,s=this._int>>8&255,r=this._int&255;return e&&(i=i*t+.5|0,s=s*t+.5|0,r=r*t+.5|0),(t*255<<24)+(i<<16)+(s<<8)+r}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(t){let e,i,s,r;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const a=t;e=(a>>16&255)/255,i=(a>>8&255)/255,s=(a&255)/255,r=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,i,s,r=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,i,s,r=255]=t,e/=255,i/=255,s/=255,r/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const l=Cl.HEX_PATTERN.exec(t);l&&(t=`#${l[2]}`)}const a=Hi(t);a.isValid()&&({r:e,g:i,b:s,a:r}=a.rgba,e/=255,i/=255,s/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=i,this._components[2]=s,this._components[3]=r,this._refreshInt();else throw new Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);const[t,e,i]=this._components;this._int=(t*255<<16)+(e*255<<8)+(i*255|0)}_clamp(t,e=0,i=1){return typeof t=="number"?Math.min(Math.max(t,e),i):(t.forEach((s,r)=>{t[r]=Math.min(Math.max(s,e),i)}),t)}static isColorLike(t){return typeof t=="number"||typeof t=="string"||t instanceof Number||t instanceof Cl||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t.r!==void 0&&t.g!==void 0&&t.b!==void 0||t.r!==void 0&&t.g!==void 0&&t.b!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0&&t.a!==void 0}};go.shared=new go;go._temp=new go;go.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Re=go;const jz={cullArea:null,cullable:!1,cullableChildren:!0};let Ep=0;const z1=500;function te(...n){Ep!==z1&&(Ep++,Ep===z1?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...n))}const Rc={_registeredResources:new Set,register(n){this._registeredResources.add(n)},unregister(n){this._registeredResources.delete(n)},release(){this._registeredResources.forEach(n=>n.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(n){return this._registeredResources.has(n)},reset(){this._registeredResources.clear()}};class kz{constructor(t,e){this._pool=[],this._count=0,this._index=0,this._classType=t,e&&this.prepopulate(e)}prepopulate(t){for(let e=0;e<t;e++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){let e;return this._index>0?e=this._pool[--this._index]:(e=new this._classType,this._count++),e.init?.(t),e}return(t){t.reset?.(),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let t=0;t<this._index;t++)this._pool[t].destroy();this._pool.length=0,this._count=0,this._index=0}}class Nz{constructor(){this._poolsByClass=new Map}prepopulate(t,e){this.getPool(t).prepopulate(e)}get(t,e){return this.getPool(t).get(e)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new kz(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach(e=>{const i=t[e._classType.name]?e._classType.name+e._classType.ID:e._classType.name;t[i]={free:e.totalFree,used:e.totalUsed,size:e.totalSize}}),t}clear(){this._poolsByClass.forEach(t=>t.clear()),this._poolsByClass.clear()}}const di=new Nz;Rc.register(di);const Oz={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(n){typeof n=="boolean"&&n===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(n===!0?{}:n))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(n){Ct("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(n)}};function zz(n,t,e){const i=n.length;let s;if(t>=i||e===0)return;e=t+e>i?i-t:e;const r=i-e;for(s=t;s<r;++s)n[s]=n[s+e];n.length=r}const Dz={allowChildren:!0,removeChildren(n=0,t){const e=t??this.children.length,i=e-n,s=[];if(i>0&&i<=e){for(let a=e-1;a>=n;a--){const l=this.children[a];l&&(s.push(l),l.parent=null)}zz(this.children,n,e);const r=this.renderGroup||this.parentRenderGroup;r&&r.removeChildren(s);for(let a=0;a<s.length;++a){const l=s[a];l.parentRenderLayer?.detach(l),this.emit("childRemoved",l,this,a),s[a].emit("removed",this)}return s.length>0&&this._didViewChangeTick++,s}else if(i===0&&this.children.length===0)return s;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(n){const t=this.getChildAt(n);return this.removeChild(t)},getChildAt(n){if(n<0||n>=this.children.length)throw new Error(`getChildAt: Index (${n}) does not exist.`);return this.children[n]},setChildIndex(n,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(n),this.addChildAt(n,t)},getChildIndex(n){const t=this.children.indexOf(n);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(n,t){this.allowChildren||Ct(Lt,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:e}=this;if(t<0||t>e.length)throw new Error(`${n}addChildAt: The index ${t} supplied is out of bounds ${e.length}`);if(n.parent){const s=n.parent.children.indexOf(n);if(n.parent===this&&s===t)return n;s!==-1&&n.parent.children.splice(s,1)}t===e.length?e.push(n):e.splice(t,0,n),n.parent=this,n.didChange=!0,n._updateFlags=15;const i=this.renderGroup||this.parentRenderGroup;return i&&i.addChild(n),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",n,this,t),n.emit("added",this),n},swapChildren(n,t){if(n===t)return;const e=this.getChildIndex(n),i=this.getChildIndex(t);this.children[e]=t,this.children[i]=n;const s=this.renderGroup||this.parentRenderGroup;s&&(s.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...n){return n.length===1?this.reparentChildAt(n[0],this.children.length):(n.forEach(t=>this.reparentChildAt(t,this.children.length)),n[0])},reparentChildAt(n,t){if(n.parent===this)return this.setChildIndex(n,t),n;const e=n.worldTransform.clone();n.removeFromParent(),this.addChildAt(n,t);const i=this.worldTransform.clone();return i.invert(),e.prepend(i),n.setFromMatrix(e),n},replaceChild(n,t){n.updateLocalTransform(),this.addChildAt(t,this.getChildIndex(n)),t.setFromMatrix(n.localTransform),t.updateLocalTransform(),this.removeChild(n)}},Iz={collectRenderables(n,t,e){this.parentRenderLayer&&this.parentRenderLayer!==e||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(n,t,e):this.renderGroup?t.renderPipes.renderGroup.addRenderGroup(this.renderGroup,n):this.collectRenderablesWithEffects(n,t,e))},collectRenderablesSimple(n,t,e){const i=this.children,s=i.length;for(let r=0;r<s;r++)i[r].collectRenderables(n,t,e)},collectRenderablesWithEffects(n,t,e){const{renderPipes:i}=t;for(let s=0;s<this.effects.length;s++){const r=this.effects[s];i[r.pipe].push(r,this,n)}this.collectRenderablesSimple(n,t,e);for(let s=this.effects.length-1;s>=0;s--){const r=this.effects[s];i[r.pipe].pop(r,this,n)}}};class D1{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}class Bz{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let e=0;e<this._tests.length;e++){const i=this._tests[e];if(i.test(t))return di.get(i.maskClass,t)}return t}returnMaskEffect(t){di.return(t)}}const Lg=new Bz;Ne.handleByList(lt.MaskEffect,Lg._effectClasses);const Lz={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const n=this.renderGroup||this.parentRenderGroup;n&&(n.structureDidChange=!0)},addEffect(n){this.effects.indexOf(n)===-1&&(this.effects.push(n),this.effects.sort((e,i)=>e.priority-i.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(n){const t=this.effects.indexOf(n);t!==-1&&(this.effects.splice(t,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(n){const t=this._maskEffect;t?.mask!==n&&(t&&(this.removeEffect(t),Lg.returnMaskEffect(t),this._maskEffect=null),n!=null&&(this._maskEffect=Lg.getMaskEffect(n),this.addEffect(this._maskEffect)))},get mask(){return this._maskEffect?.mask},setMask(n){this._maskOptions={...this._maskOptions,...n},n.mask&&(this.mask=n.mask),this._markStructureAsChanged()},set filters(n){!Array.isArray(n)&&n&&(n=[n]);const t=this._filterEffect||(this._filterEffect=new D1);n=n;const e=n?.length>0,i=t.filters?.length>0,s=e!==i;n=Array.isArray(n)?n.slice(0):n,t.filters=Object.freeze(n),s&&(e?this.addEffect(t):(this.removeEffect(t),t.filters=n??null))},get filters(){return this._filterEffect?.filters},set filterArea(n){this._filterEffect||(this._filterEffect=new D1),this._filterEffect.filterArea=n},get filterArea(){return this._filterEffect?.filterArea}},Fz={label:null,get name(){return Ct(Lt,"Container.name property has been removed, use Container.label instead"),this.label},set name(n){Ct(Lt,"Container.name property has been removed, use Container.label instead"),this.label=n},getChildByName(n,t=!1){return this.getChildByLabel(n,t)},getChildByLabel(n,t=!1){const e=this.children;for(let i=0;i<e.length;i++){const s=e[i];if(s.label===n||n instanceof RegExp&&n.test(s.label))return s}if(t)for(let i=0;i<e.length;i++){const r=e[i].getChildByLabel(n,!0);if(r)return r}return null},getChildrenByLabel(n,t=!1,e=[]){const i=this.children;for(let s=0;s<i.length;s++){const r=i[s];(r.label===n||n instanceof RegExp&&n.test(r.label))&&e.push(r)}if(t)for(let s=0;s<i.length;s++)i[s].getChildrenByLabel(n,!0,e);return e}},en=di.getPool(Tt),Es=di.getPool(Ei),Hz=new Tt,Uz={getFastGlobalBounds(n,t){t||(t=new Ei),t.clear(),this._getGlobalBoundsRecursive(!!n,t,this.parentRenderLayer),t.isValid||t.set(0,0,0,0);const e=this.renderGroup||this.parentRenderGroup;return t.applyMatrix(e.worldTransform),t},_getGlobalBoundsRecursive(n,t,e){let i=t;if(n&&this.parentRenderLayer&&this.parentRenderLayer!==e||this.localDisplayStatus!==7||!this.measurable)return;const s=!!this.effects.length;if((this.renderGroup||s)&&(i=Es.get().clear()),this.boundsArea)t.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const a=this.bounds;i.addFrame(a.minX,a.minY,a.maxX,a.maxY,this.groupTransform)}const r=this.children;for(let a=0;a<r.length;a++)r[a]._getGlobalBoundsRecursive(n,i,e)}if(s){let r=!1;const a=this.renderGroup||this.parentRenderGroup;for(let l=0;l<this.effects.length;l++)this.effects[l].addBounds&&(r||(r=!0,i.applyMatrix(a.worldTransform)),this.effects[l].addBounds(i,!0));r&&i.applyMatrix(a.worldTransform.copyTo(Hz).invert()),t.addBounds(i),Es.return(i)}else this.renderGroup&&(t.addBounds(i,this.relativeGroupTransform),Es.return(i))}};function NP(n,t,e){e.clear();let i,s;return n.parent?t?i=n.parent.worldTransform:(s=en.get().identity(),i=vy(n,s)):i=Tt.IDENTITY,OP(n,e,i,t),s&&en.return(s),e.isValid||e.set(0,0,0,0),e}function OP(n,t,e,i){if(!n.visible||!n.measurable)return;let s;i?s=n.worldTransform:(n.updateLocalTransform(),s=en.get(),s.appendFrom(n.localTransform,e));const r=t,a=!!n.effects.length;if(a&&(t=Es.get().clear()),n.boundsArea)t.addRect(n.boundsArea,s);else{const l=n.bounds;l&&!l.isEmpty()&&(t.matrix=s,t.addBounds(l));for(let u=0;u<n.children.length;u++)OP(n.children[u],t,s,i)}if(a){for(let l=0;l<n.effects.length;l++)n.effects[l].addBounds?.(t);r.addBounds(t,Tt.IDENTITY),Es.return(t)}i||en.return(s)}function vy(n,t){const e=n.parent;return e&&(vy(e,t),e.updateLocalTransform(),t.append(e.localTransform)),t}function zP(n,t){if(n===16777215||!t)return t;if(t===16777215||!n)return n;const e=n>>16&255,i=n>>8&255,s=n&255,r=t>>16&255,a=t>>8&255,l=t&255,u=e*r/255|0,h=i*a/255|0,f=s*l/255|0;return(u<<16)+(h<<8)+f}const I1=16777215;function B1(n,t){return n===I1?t:t===I1?n:zP(n,t)}function ih(n){return((n&255)<<16)+(n&65280)+(n>>16&255)}const Gz={getGlobalAlpha(n){if(n)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let t=this.alpha,e=this.parent;for(;e;)t*=e.alpha,e=e.parent;return t},getGlobalTransform(n=new Tt,t){if(t)return n.copyFrom(this.worldTransform);this.updateLocalTransform();const e=vy(this,en.get().identity());return n.appendFrom(this.localTransform,e),en.return(e),n},getGlobalTint(n){if(n)return this.renderGroup?ih(this.renderGroup.worldColor):this.parentRenderGroup?ih(B1(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let t=this.localColor,e=this.parent;for(;e;)t=B1(t,e.localColor),e=e.parent;return ih(t)}};function DP(n,t,e){return t.clear(),e||(e=Tt.IDENTITY),IP(n,t,e,n,!0),t.isValid||t.set(0,0,0,0),t}function IP(n,t,e,i,s){let r;if(s)r=en.get(),r=e.copyTo(r);else{if(!n.visible||!n.measurable)return;n.updateLocalTransform();const u=n.localTransform;r=en.get(),r.appendFrom(u,e)}const a=t,l=!!n.effects.length;if(l&&(t=Es.get().clear()),n.boundsArea)t.addRect(n.boundsArea,r);else{n.renderPipeId&&(t.matrix=r,t.addBounds(n.bounds));const u=n.children;for(let h=0;h<u.length;h++)IP(u[h],t,r,i,!1)}if(l){for(let u=0;u<n.effects.length;u++)n.effects[u].addLocalBounds?.(t,i);a.addBounds(t,Tt.IDENTITY),Es.return(t)}en.return(r)}function BP(n,t){const e=n.children;for(let i=0;i<e.length;i++){const s=e[i],r=s.uid,a=(s._didViewChangeTick&65535)<<16|s._didContainerChangeTick&65535,l=t.index;(t.data[l]!==r||t.data[l+1]!==a)&&(t.data[t.index]=r,t.data[t.index+1]=a,t.didChange=!0),t.index=l+2,s.children.length&&BP(s,t)}return t.didChange}const Vz=new Tt,Wz={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(n,t){const e=Math.sign(this.scale.x)||1;t!==0?this.scale.x=n/t*e:this.scale.x=e},_setHeight(n,t){const e=Math.sign(this.scale.y)||1;t!==0?this.scale.y=n/t*e:this.scale.y=e},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Ei});const n=this._localBoundsCacheData;return n.index=1,n.didChange=!1,n.data[0]!==this._didViewChangeTick&&(n.didChange=!0,n.data[0]=this._didViewChangeTick),BP(this,n),n.didChange&&DP(this,n.localBounds,Vz),n.localBounds},getBounds(n,t){return NP(this,n,t||new Ei)}},Yz={_onRender:null,set onRender(n){const t=this.renderGroup||this.parentRenderGroup;if(!n){this._onRender&&t?.removeOnRender(this),this._onRender=null;return}this._onRender||t?.addOnRender(this),this._onRender=n},get onRender(){return this._onRender}},qz={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(n){this._zIndex!==n&&(this._zIndex=n,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(Xz))}};function Xz(n,t){return n._zIndex-t._zIndex}const $z={getGlobalPosition(n=new Dt,t=!1){return this.parent?this.parent.toGlobal(this._position,n,t):(n.x=this._position.x,n.y=this._position.y),n},toGlobal(n,t,e=!1){const i=this.getGlobalTransform(en.get(),e);return t=i.apply(n,t),en.return(i),t},toLocal(n,t,e,i){t&&(n=t.toGlobal(n,e,i));const s=this.getGlobalTransform(en.get(),i);return e=s.applyInverse(n,e),en.return(s),e}};class LP{constructor(){this.uid=ve("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let Qz=0;class Kz{constructor(t){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this.textureStyle=new mo(this.textureOptions)}createTexture(t,e,i){const s=new Oi({...this.textureOptions,width:t,height:e,resolution:1,antialias:i,autoGarbageCollect:!1});return new dt({source:s,label:`texturePool_${Qz++}`})}getOptimalTexture(t,e,i=1,s){let r=Math.ceil(t*i-1e-6),a=Math.ceil(e*i-1e-6);r=po(r),a=po(a);const l=(r<<17)+(a<<1)+(s?1:0);this._texturePool[l]||(this._texturePool[l]=[]);let u=this._texturePool[l].pop();return u||(u=this.createTexture(r,a,s)),u.source._resolution=i,u.source.width=r/i,u.source.height=a/i,u.source.pixelWidth=r,u.source.pixelHeight=a,u.frame.x=0,u.frame.y=0,u.frame.width=t,u.frame.height=e,u.updateUvs(),this._poolKeyHash[u.uid]=l,u}getSameSizeTexture(t,e=!1){const i=t.source;return this.getOptimalTexture(t.width,t.height,i._resolution,e)}returnTexture(t,e=!1){const i=this._poolKeyHash[t.uid];e&&(t.source.style=this.textureStyle),this._texturePool[i].push(t)}clear(t){if(t=t!==!1,t)for(const e in this._texturePool){const i=this._texturePool[e];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0)}this._texturePool={}}}const FP=new Kz;Rc.register(FP);class Zz{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Tt,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new LP,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;const e=t.children;for(let i=0;i<e.length;i++){const s=e[i];s._updateFlags=15,this.addChild(s)}}enableCacheAsTexture(t={}){this.textureOptions=t,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(FP.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const t=this._parentCacheAsTextureRenderGroup;t&&!t.textureNeedsUpdate&&t.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const t in this.childrenToUpdate){const e=this.childrenToUpdate[t];e.list.fill(null),e.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){const e=this.renderGroupChildren.indexOf(t);e>-1&&this.renderGroupChildren.splice(e,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup){this.addRenderGroupChild(t.renderGroup);return}t._onRender&&this.addOnRender(t);const e=t.children;for(let i=0;i<e.length;i++)this.addChild(e[i])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup){this._removeRenderGroupChild(t.renderGroup);return}const e=t.children;for(let i=0;i<e.length;i++)this.removeChild(e[i])}removeChildren(t){for(let e=0;e<t.length;e++)this.removeChild(t[e])}onChildUpdate(t){let e=this.childrenToUpdate[t.relativeRenderGroupDepth];e||(e=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),e.list[e.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t),t.didViewUpdate=!1)}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(t){for(let e=0;e<this._onRenderContainers.length;e++)this._onRenderContainers[e]._onRender(t)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(t=[]){const e=this.root.children;for(let i=0;i<e.length;i++)this._getChildren(e[i],t);return t}_getChildren(t,e=[]){if(e.push(t),t.renderGroup)return e;const i=t.children;for(let s=0;s<i.length;s++)this._getChildren(i[s],e);return e}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Tt),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Tt),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const t=this._parentCacheAsTextureRenderGroup;return t?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Tt),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(t.inverseWorldTransform).translate(-t._textureBounds.x,-t._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function Jz(n,t,e={}){for(const i in t)!e[i]&&t[i]!==void 0&&(n[i]=t[i])}const Rp=new Ge(null),Ou=new Ge(null),jp=new Ge(null,1,1),zu=new Ge(null),L1=1,tD=2,kp=4;class pe extends Ni{constructor(t={}){super(),this.uid=ve("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new Tt,this.relativeGroupTransform=new Tt,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Ge(this,0,0),this._scale=jp,this._pivot=Ou,this._origin=zu,this._skew=Rp,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],Jz(this,t,{children:!0,parent:!0,effects:!0}),t.children?.forEach(e=>this.addChild(e)),t.parent?.addChild(this)}static mixin(t){Ct("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),Ne.mixin(pe,t)}set _didChangeId(t){this._didViewChangeTick=t>>12&4095,this._didContainerChangeTick=t&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...t){if(this.allowChildren||Ct(Lt,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let s=0;s<t.length;s++)this.addChild(t[s]);return t[0]}const e=t[0],i=this.renderGroup||this.parentRenderGroup;return e.parent===this?(this.children.splice(this.children.indexOf(e),1),this.children.push(e),i&&(i.structureDidChange=!0),e):(e.parent&&e.parent.removeChild(e),this.children.push(e),this.sortableChildren&&(this.sortDirty=!0),e.parent=this,e.didChange=!0,e._updateFlags=15,i&&i.addChild(e),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this),this._didViewChangeTick++,e._zIndex!==0&&e.depthOfChildModified(),e)}removeChild(...t){if(t.length>1){for(let s=0;s<t.length;s++)this.removeChild(t[s]);return t[0]}const e=t[0],i=this.children.indexOf(e);return i>-1&&(this._didViewChangeTick++,this.children.splice(i,1),this.renderGroup?this.renderGroup.removeChild(e):this.parentRenderGroup&&this.parentRenderGroup.removeChild(e),e.parentRenderLayer&&e.parentRenderLayer.detach(e),e.parent=null,this.emit("childRemoved",e,this,i),e.emit("removed",this)),e}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){!!this.renderGroup!==t&&(t?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const t=this.parentRenderGroup;t?.removeChild(this),this.renderGroup=di.get(Zz,this),this.groupTransform=Tt.IDENTITY,t?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const t=this.parentRenderGroup;t?.removeChild(this),di.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,t?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Tt),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*fz}set angle(t){this.rotation=t*pz}get pivot(){return this._pivot===Ou&&(this._pivot=new Ge(this,0,0)),this._pivot}set pivot(t){this._pivot===Ou&&(this._pivot=new Ge(this,0,0),this._origin!==zu&&te("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof t=="number"?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===Rp&&(this._skew=new Ge(this,0,0)),this._skew}set skew(t){this._skew===Rp&&(this._skew=new Ge(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===jp&&(this._scale=new Ge(this,1,1)),this._scale}set scale(t){this._scale===jp&&(this._scale=new Ge(this,0,0)),typeof t=="string"&&(t=parseFloat(t)),typeof t=="number"?this._scale.set(t):this._scale.copyFrom(t)}get origin(){return this._origin===zu&&(this._origin=new Ge(this,0,0)),this._origin}set origin(t){this._origin===zu&&(this._origin=new Ge(this,0,0),this._pivot!==Ou&&te("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof t=="number"?this._origin.set(t):this._origin.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const e=this.getLocalBounds().width;this._setWidth(t,e)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const e=this.getLocalBounds().height;this._setHeight(t,e)}getSize(t){t||(t={});const e=this.getLocalBounds();return t.width=Math.abs(this.scale.x*e.width),t.height=Math.abs(this.scale.y*e.height),t}setSize(t,e){const i=this.getLocalBounds();typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,i.width),e!==void 0&&this._setHeight(e,i.height)}_updateSkew(){const t=this._rotation,e=this._skew;this._cx=Math.cos(t+e._y),this._sx=Math.sin(t+e._y),this._cy=-Math.sin(t-e._x),this._sy=Math.cos(t-e._x)}updateTransform(t){return this.position.set(typeof t.x=="number"?t.x:this.position.x,typeof t.y=="number"?t.y:this.position.y),this.scale.set(typeof t.scaleX=="number"?t.scaleX||1:this.scale.x,typeof t.scaleY=="number"?t.scaleY||1:this.scale.y),this.rotation=typeof t.rotation=="number"?t.rotation:this.rotation,this.skew.set(typeof t.skewX=="number"?t.skewX:this.skew.x,typeof t.skewY=="number"?t.skewY:this.skew.y),this.pivot.set(typeof t.pivotX=="number"?t.pivotX:this.pivot.x,typeof t.pivotY=="number"?t.pivotY:this.pivot.y),this.origin.set(typeof t.originX=="number"?t.originX:this.origin.x,typeof t.originY=="number"?t.originY:this.origin.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){const t=this._didContainerChangeTick;if(this._didLocalTransformChangeId===t)return;this._didLocalTransformChangeId=t;const e=this.localTransform,i=this._scale,s=this._pivot,r=this._origin,a=this._position,l=i._x,u=i._y,h=s._x,f=s._y,p=-r._x,g=-r._y;e.a=this._cx*l,e.b=this._sx*l,e.c=this._cy*u,e.d=this._sy*u,e.tx=a._x-(h*e.a+f*e.c)+(p*e.a+g*e.c)-p,e.ty=a._y-(h*e.b+f*e.d)+(p*e.b+g*e.d)-g}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=L1,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const i=Re.shared.setValue(t??16777215).toBgrNumber();i!==this.localColor&&(this.localColor=i,this._updateFlags|=L1,this._onUpdate())}get tint(){return ih(this.localColor)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=tD,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(t){const e=t?2:0;(this.localDisplayStatus&2)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=kp,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(t){const e=t?0:4;(this.localDisplayStatus&4)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=kp,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(t){const e=t?1:0;(this.localDisplayStatus&1)!==e&&(this._updateFlags|=kp,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(t=!1){if(this.destroyed)return;this.destroyed=!0;let e;if(this.children.length&&(e=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof t=="boolean"?t:t?.children)&&e)for(let s=0;s<e.length;++s)e[s].destroy(t);this.renderGroup?.destroy(),this.renderGroup=null}}Ne.mixin(pe,Dz,Uz,$z,Yz,Wz,Lz,Fz,qz,jz,Oz,Gz,Iz);class _y extends pe{constructor(t){super(t),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this._bounds=new Ei(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){const e=this.bounds,{x:i,y:s}=t;return i>=e.minX&&i<=e.maxX&&s>=e.minY&&s<=e.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}destroy(t){super.destroy(t),this._bounds=null;for(const e in this._gpuData)this._gpuData[e].destroy?.();this._gpuData=null}collectRenderablesSimple(t,e,i){const{renderPipes:s}=e;s.blendMode.pushBlendMode(this,this.groupBlendMode,t),s[this.renderPipeId].addRenderable(this,t),this.didViewUpdate=!1;const a=this.children,l=a.length;for(let u=0;u<l;u++)a[u].collectRenderables(t,e,i);s.blendMode.popBlendMode(t)}}class Ki extends _y{constructor(t=dt.EMPTY){t instanceof dt&&(t={texture:t});const{texture:e=dt.EMPTY,anchor:i,roundPixels:s,width:r,height:a,...l}=t;super({label:"Sprite",...l}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Ge({_onUpdate:()=>{this.onViewUpdate()}}),i?this.anchor=i:e.defaultAnchor&&(this.anchor=e.defaultAnchor),this.texture=e,this.allowChildren=!1,this.roundPixels=s??!1,r!==void 0&&(this.width=r),a!==void 0&&(this.height=a)}static from(t,e=!1){return t instanceof dt?new Ki(t):new Ki(dt.from(t,e))}set texture(t){t||(t=dt.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return bz(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return Ct("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const t=this._anchor,e=this._texture,i=this._bounds,{width:s,height:r}=e.orig;i.minX=-t._x*s,i.maxX=i.minX+s,i.minY=-t._y*r,i.maxY=i.minY+r}destroy(t=!1){if(super.destroy(t),typeof t=="boolean"?t:t?.texture){const i=typeof t=="boolean"?t:t?.textureSource;this._texture.destroy(i)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null,this._gpuData=null}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width),this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height),this._height=t}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this._texture.orig.width),e!==void 0&&this._setHeight(e,this._texture.orig.height)}}const eD=new Ei;function HP(n,t,e){const i=eD;n.measurable=!0,NP(n,e,i),t.addBoundsMask(i),n.measurable=!1}function UP(n,t,e){const i=Es.get();n.measurable=!0;const s=en.get().identity(),r=GP(n,e,s);DP(n,i,r),n.measurable=!1,t.addBoundsMask(i),en.return(s),Es.return(i)}function GP(n,t,e){return n?(n!==t&&(GP(n.parent,t,e),n.updateLocalTransform(),e.append(n.localTransform)),e):(te("Mask bounds, renderable is not inside the root container"),e)}class VP{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof Ki),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(t,e){this.inverse||HP(this.mask,t,e)}addLocalBounds(t,e){UP(this.mask,t,e)}containsPoint(t,e){const i=this.mask;return e(i,t)}destroy(){this.reset()}static test(t){return t instanceof Ki}}VP.extension=lt.MaskEffect;class WP{constructor(t){this.priority=0,this.pipe="colorMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return typeof t=="number"}}WP.extension=lt.MaskEffect;class YP{constructor(t){this.priority=0,this.pipe="stencilMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(t,e){HP(this.mask,t,e)}addLocalBounds(t,e){UP(this.mask,t,e)}containsPoint(t,e){const i=this.mask;return e(i,t)}destroy(){this.reset()}static test(t){return t instanceof pe}}YP.extension=lt.MaskEffect;const nD={createCanvas:(n,t)=>{const e=document.createElement("canvas");return e.width=n,e.height=t,e},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,t)=>fetch(n,t),parseXML:n=>new DOMParser().parseFromString(n,"text/xml")};let F1=nD;const ee={get(){return F1},set(n){F1=n}};class qP extends Oi{constructor(t){t.resource||(t.resource=ee.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity,this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,e=this.height,i=this._resolution){const s=super.resize(t,e,i);return s&&this.resizeCanvas(),s}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}qP.extension=lt.TextureSource;class ha extends Oi{constructor(t){super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}}ha.extension=lt.TextureSource;var Fg=(n=>(n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(Fg||{});class Np{constructor(t,e=null,i=0,s=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=e,this.priority=i,this._once=s}match(t,e=null){return this._fn===t&&this._context===e}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const e=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const XP=class Nn{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Np(null,null,1/0),this.deltaMS=1/Nn.targetFPMS,this.elapsedMS=1/Nn.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,i=Fg.NORMAL){return this._addListener(new Np(t,e,i))}addOnce(t,e,i=Fg.NORMAL){return this._addListener(new Np(t,e,i,!0))}_addListener(t){let e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this}remove(t,e){let i=this._head.next;for(;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const r=t-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=t-r%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*Nn.targetFPMS;const i=this._head;let s=i.next;for(;s;)s=s.emit(this);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,Nn.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!Nn._shared){const t=Nn._shared=new Nn;t.autoStart=!0,t._protected=!0}return Nn._shared}static get system(){if(!Nn._system){const t=Nn._system=new Nn;t.autoStart=!0,t._protected=!0}return Nn._system}};XP.targetFPMS=.06;let Ml=XP,Op;async function $P(){return Op??(Op=(async()=>{const t=ee.get().createCanvas(1,1).getContext("webgl");if(!t)return"premultiply-alpha-on-upload";const e=await new Promise(a=>{const l=document.createElement("video");l.onloadeddata=()=>a(l),l.onerror=()=>a(null),l.autoplay=!1,l.crossOrigin="anonymous",l.preload="auto",l.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",l.load()});if(!e)return"premultiply-alpha-on-upload";const i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const r=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,r),t.deleteFramebuffer(s),t.deleteTexture(i),t.getExtension("WEBGL_lose_context")?.loseContext(),r[0]<=r[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),Op}const cd=class QP extends Oi{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...QP.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=Ml.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,e=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(e.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await $P(),this._load=new Promise((i,s)=>{this.isValid?i(this):(this._resolve=i,this._reject=s,e.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${e.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(Ml.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Ml.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Ml.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement}};cd.extension=lt.TextureSource;cd.defaultOptions={...Oi.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};cd.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Il=cd;const Mi=(n,t,e=!1)=>(Array.isArray(n)||(n=[n]),t?n.map(i=>typeof i=="string"||e?t(i):i):n);class iD{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||te(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const i=Mi(t);let s;for(let u=0;u<this.parsers.length;u++){const h=this.parsers[u];if(h.test(e)){s=h.getCacheableAssets(i,e);break}}const r=new Map(Object.entries(s||{}));s||i.forEach(u=>{r.set(u,e)});const a=[...r.keys()],l={cacheKeys:a,keys:i};i.forEach(u=>{this._cacheMap.set(u,l)}),a.forEach(u=>{const h=s?s[u]:e;this._cache.has(u)&&this._cache.get(u)!==h&&te("[Cache] already has key:",u),this._cache.set(u,r.get(u))})}remove(t){if(!this._cacheMap.has(t)){te(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(s=>{this._cache.delete(s)}),e.keys.forEach(s=>{this._cacheMap.delete(s)})}get parsers(){return this._parsers}}const re=new iD,Hg=[];Ne.handleByList(lt.TextureSource,Hg);function KP(n={}){const t=n&&n.resource,e=t?n.resource:n,i=t?n:{resource:n};for(let s=0;s<Hg.length;s++){const r=Hg[s];if(r.test(e))return new r(i)}throw new Error(`Could not find a source type for resource: ${i.resource}`)}function sD(n={},t=!1){const e=n&&n.resource,i=e?n.resource:n,s=e?n:{resource:n};if(!t&&re.has(i))return re.get(i);const r=new dt({source:KP(s)});return r.on("destroy",()=>{re.has(i)&&re.remove(i)}),t||re.set(i,r),r}function rD(n,t=!1){return typeof n=="string"?re.get(n):n instanceof Oi?new dt({source:n}):sD(n,t)}dt.from=rD;Oi.from=KP;Ne.add(VP,WP,YP,Il,ha,qP,yy);var Cr=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(Cr||{});function bi(n){if(typeof n!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function dl(n){return n.split("?")[0].split("#")[0]}function aD(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function oD(n,t,e){return n.replace(new RegExp(aD(t),"g"),e)}function lD(n,t){let e="",i=0,s=-1,r=0,a=-1;for(let l=0;l<=n.length;++l){if(l<n.length)a=n.charCodeAt(l);else{if(a===47)break;a=47}if(a===47){if(!(s===l-1||r===1))if(s!==l-1&&r===2){if(e.length<2||i!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const u=e.lastIndexOf("/");if(u!==e.length-1){u===-1?(e="",i=0):(e=e.slice(0,u),i=e.length-1-e.lastIndexOf("/")),s=l,r=0;continue}}else if(e.length===2||e.length===1){e="",i=0,s=l,r=0;continue}}}else e.length>0?e+=`/${n.slice(s+1,l)}`:e=n.slice(s+1,l),i=l-s-1;s=l,r=0}else a===46&&r!==-1?++r:r=-1}return e}const Bn={toPosix(n){return oD(n,"\\","/")},isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},isBlobUrl(n){return n.startsWith("blob:")},hasProtocol(n){return/^[^/:]+:/.test(this.toPosix(n))},getProtocol(n){bi(n),n=this.toPosix(n);const t=/^file:\/\/\//.exec(n);if(t)return t[0];const e=/^[^/:]+:\/{0,2}/.exec(n);return e?e[0]:""},toAbsolute(n,t,e){if(bi(n),this.isDataUrl(n)||this.isBlobUrl(n))return n;const i=dl(this.toPosix(t??ee.get().getBaseUrl())),s=dl(this.toPosix(e??this.rootname(i)));return n=this.toPosix(n),n.startsWith("/")?Bn.join(s,n.slice(1)):this.isAbsolute(n)?n:this.join(i,n)},normalize(n){if(bi(n),n.length===0)return".";if(this.isDataUrl(n)||this.isBlobUrl(n))return n;n=this.toPosix(n);let t="";const e=n.startsWith("/");this.hasProtocol(n)&&(t=this.rootname(n),n=n.slice(t.length));const i=n.endsWith("/");return n=lD(n),n.length>0&&i&&(n+="/"),e?`/${n}`:t+n},isAbsolute(n){return bi(n),n=this.toPosix(n),this.hasProtocol(n)?!0:n.startsWith("/")},join(...n){if(n.length===0)return".";let t;for(let e=0;e<n.length;++e){const i=n[e];if(bi(i),i.length>0)if(t===void 0)t=i;else{const s=n[e-1]??"";this.joinExtensions.includes(this.extname(s).toLowerCase())?t+=`/../${i}`:t+=`/${i}`}}return t===void 0?".":this.normalize(t)},dirname(n){if(bi(n),n.length===0)return".";n=this.toPosix(n);let t=n.charCodeAt(0);const e=t===47;let i=-1,s=!0;const r=this.getProtocol(n),a=n;n=n.slice(r.length);for(let l=n.length-1;l>=1;--l)if(t=n.charCodeAt(l),t===47){if(!s){i=l;break}}else s=!1;return i===-1?e?"/":this.isUrl(a)?r+n:r:e&&i===1?"//":r+n.slice(0,i)},rootname(n){bi(n),n=this.toPosix(n);let t="";if(n.startsWith("/")?t="/":t=this.getProtocol(n),this.isUrl(n)){const e=n.indexOf("/",t.length);e!==-1?t=n.slice(0,e):t=n,t.endsWith("/")||(t+="/")}return t},basename(n,t){bi(n),t&&bi(t),n=dl(this.toPosix(n));let e=0,i=-1,s=!0,r;if(t!==void 0&&t.length>0&&t.length<=n.length){if(t.length===n.length&&t===n)return"";let a=t.length-1,l=-1;for(r=n.length-1;r>=0;--r){const u=n.charCodeAt(r);if(u===47){if(!s){e=r+1;break}}else l===-1&&(s=!1,l=r+1),a>=0&&(u===t.charCodeAt(a)?--a===-1&&(i=r):(a=-1,i=l))}return e===i?i=l:i===-1&&(i=n.length),n.slice(e,i)}for(r=n.length-1;r>=0;--r)if(n.charCodeAt(r)===47){if(!s){e=r+1;break}}else i===-1&&(s=!1,i=r+1);return i===-1?"":n.slice(e,i)},extname(n){bi(n),n=dl(this.toPosix(n));let t=-1,e=0,i=-1,s=!0,r=0;for(let a=n.length-1;a>=0;--a){const l=n.charCodeAt(a);if(l===47){if(!s){e=a+1;break}continue}i===-1&&(s=!1,i=a+1),l===46?t===-1?t=a:r!==1&&(r=1):t!==-1&&(r=-1)}return t===-1||i===-1||r===0||r===1&&t===i-1&&t===e+1?"":n.slice(t,i)},parse(n){bi(n);const t={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return t;n=dl(this.toPosix(n));let e=n.charCodeAt(0);const i=this.isAbsolute(n);let s;t.root=this.rootname(n),i||this.hasProtocol(n)?s=1:s=0;let r=-1,a=0,l=-1,u=!0,h=n.length-1,f=0;for(;h>=s;--h){if(e=n.charCodeAt(h),e===47){if(!u){a=h+1;break}continue}l===-1&&(u=!1,l=h+1),e===46?r===-1?r=h:f!==1&&(f=1):r!==-1&&(f=-1)}return r===-1||l===-1||f===0||f===1&&r===l-1&&r===a+1?l!==-1&&(a===0&&i?t.base=t.name=n.slice(1,l):t.base=t.name=n.slice(a,l)):(a===0&&i?(t.name=n.slice(1,r),t.base=n.slice(1,l)):(t.name=n.slice(a,r),t.base=n.slice(a,l)),t.ext=n.slice(r,l)),t.dir=this.dirname(n),t},sep:"/",delimiter:":",joinExtensions:[".html"]};function ZP(n,t,e,i,s){const r=t[e];for(let a=0;a<r.length;a++){const l=r[a];e<t.length-1?ZP(n.replace(i[e],l),t,e+1,i,s):s.push(n.replace(i[e],l))}}function cD(n){const t=/\{(.*?)\}/g,e=n.match(t),i=[];if(e){const s=[];e.forEach(r=>{const a=r.substring(1,r.length-1).split(",");s.push(a)}),ZP(n,s,0,e,i)}else i.push(n);return i}const yh=n=>!Array.isArray(n);class ko{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`).join("&")}}getAlias(t){const{alias:e,src:i}=t;return Mi(e||i,r=>typeof r=="string"?r:Array.isArray(r)?r.map(a=>a?.src??a):r?.src?r.src:r,!0)}addManifest(t){this._manifest&&te("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const i=[];let s=e;Array.isArray(e)||(s=Object.entries(e).map(([r,a])=>typeof a=="string"||Array.isArray(a)?{alias:r,src:a}:{alias:r,...a})),s.forEach(r=>{const a=r.src,l=r.alias;let u;if(typeof l=="string"){const h=this._createBundleAssetId(t,l);i.push(h),u=[l,h]}else{const h=l.map(f=>this._createBundleAssetId(t,f));i.push(...h),u=[...l,...h]}this.add({...r,alias:u,src:a})}),this._bundles[t]=i}add(t){const e=[];Array.isArray(t)?e.push(...t):e.push(t);let i;i=r=>{this.hasKey(r)&&te(`[Resolver] already has key: ${r} overwriting`)},Mi(e).forEach(r=>{const{src:a}=r;let{data:l,format:u,loadParser:h,parser:f}=r;const p=Mi(a).map(_=>typeof _=="string"?cD(_):Array.isArray(_)?_:[_]),g=this.getAlias(r);Array.isArray(g)?g.forEach(i):i(g);const x=[],w=_=>({...this._parsers.find(C=>C.test(_))?.parse(_),src:_});p.forEach(_=>{_.forEach(b=>{let C={};if(typeof b!="object"?C=w(b):(l=b.data??l,u=b.format??u,(b.loadParser||b.parser)&&(h=b.loadParser??h,f=b.parser??f),C={...w(b.src),...b}),!g)throw new Error(`[Resolver] alias is undefined for this asset: ${C.src}`);C=this._buildResolvedAsset(C,{aliases:g,data:l,format:u,loadParser:h,parser:f,progressSize:r.progressSize}),x.push(C)})}),g.forEach(_=>{this._assetMap[_]=x})})}resolveBundle(t){const e=yh(t);t=Mi(t);const i={};return t.forEach(s=>{const r=this._bundles[s];if(r){const a=this.resolve(r),l={};for(const u in a){const h=a[u];l[this._extractAssetIdFromBundle(s,u)]=h}i[s]=l}}),e?i[t[0]]:i}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const i={};for(const s in e)i[s]=e[s].src;return i}return e.src}resolve(t){const e=yh(t);t=Mi(t);const i={};return t.forEach(s=>{if(!this._resolverHash[s])if(this._assetMap[s]){let r=this._assetMap[s];const a=this._getPreferredOrder(r);a?.priority.forEach(l=>{a.params[l].forEach(u=>{const h=r.filter(f=>f[l]?f[l]===u:!1);h.length&&(r=h)})}),this._resolverHash[s]=r[0]}else this._resolverHash[s]=this._buildResolvedAsset({alias:[s],src:s},{});i[s]=this._resolverHash[s]}),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const i=t[e],s=this._preferredOrder.find(r=>r.params.format.includes(i.format));if(s)return s}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}_buildResolvedAsset(t,e){const{aliases:i,data:s,loadParser:r,parser:a,format:l,progressSize:u}=e;return(this._basePath||this._rootPath)&&(t.src=Bn.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=i??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...s||{},...t.data},t.loadParser=r??t.loadParser,t.parser=a??t.parser,t.format=l??t.format??uD(t.src),u!==void 0&&(t.progressSize=u),t}}ko.RETINA_PREFIX=/@([0-9\.]+)x/;function uD(n){return n.split(".").pop().split("?").shift().split("#").shift()}const Ug=(n,t)=>{const e=t.split("?")[1];return e&&(n+=`?${e}`),n},JP=class Pl{constructor(t,e){this.linkedSheets=[];let i=t;t?.source instanceof Oi&&(i={texture:t,data:e});const{texture:s,data:r,cachePrefix:a=""}=i;this.cachePrefix=a,this._texture=s instanceof dt?s:null,this.textureSource=s.source,this.textures={},this.animations={},this.data=r;const l=parseFloat(r.meta.scale);l?(this.resolution=l,s.source.resolution=this.resolution):this.resolution=s.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=Pl.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const i=Pl.BATCH_SIZE;for(;e-t<i&&e<this._frameKeys.length;){const s=this._frameKeys[e],r=this._frames[s],a=r.frame;if(a){let l=null,u=null;const h=r.trimmed!==!1&&r.sourceSize?r.sourceSize:r.frame,f=new Yt(0,0,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution);r.rotated?l=new Yt(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):l=new Yt(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),r.trimmed!==!1&&r.spriteSourceSize&&(u=new Yt(Math.floor(r.spriteSourceSize.x)/this.resolution,Math.floor(r.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[s]=new dt({source:this.textureSource,frame:l,orig:f,trim:u,rotate:r.rotated?2:0,defaultAnchor:r.anchor,defaultBorders:r.borders,label:s.toString()})}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let i=0;i<t[e].length;i++){const s=t[e][i];this.animations[e].push(this.textures[s])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Pl.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Pl.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){for(const e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};JP.BATCH_SIZE=1e3;let H1=JP;const hD=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function tA(n,t,e){const i={};if(n.forEach(s=>{i[s]=t}),Object.keys(t.textures).forEach(s=>{i[`${t.cachePrefix}${s}`]=t.textures[s]}),!e){const s=Bn.dirname(n[0]);t.linkedSheets.forEach((r,a)=>{const l=tA([`${s}/${t.data.meta.related_multi_packs[a]}`],r,!0);Object.assign(i,l)})}return i}const dD={extension:lt.Asset,cache:{test:n=>n instanceof H1,getCacheableAssets:(n,t)=>tA(n,t,!1)},resolver:{extension:{type:lt.ResolveParser,name:"resolveSpritesheet"},test:n=>{const e=n.split("?")[0].split("."),i=e.pop(),s=e.pop();return i==="json"&&hD.includes(s)},parse:n=>{const t=n.split(".");return{resolution:parseFloat(ko.RETINA_PREFIX.exec(n)?.[1]??"1"),format:t[t.length-2],src:n}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:lt.LoadParser,priority:Cr.Normal,name:"spritesheetLoader"},async testParse(n,t){return Bn.extname(t.src).toLowerCase()===".json"&&!!n.frames},async parse(n,t,e){const{texture:i,imageFilename:s,textureOptions:r,cachePrefix:a}=t?.data??{};let l=Bn.dirname(t.src);l&&l.lastIndexOf("/")!==l.length-1&&(l+="/");let u;if(i instanceof dt)u=i;else{const p=Ug(l+(s??n.meta.image),t.src);u=(await e.load([{src:p,data:r}]))[p]}const h=new H1({texture:u.source,data:n,cachePrefix:a});await h.parse();const f=n?.meta?.related_multi_packs;if(Array.isArray(f)){const p=[];for(const x of f){if(typeof x!="string")continue;let w=l+x;t.data?.ignoreMultiPack||(w=Ug(w,t.src),p.push(e.load({src:w,data:{textureOptions:r,ignoreMultiPack:!0}})))}const g=await Promise.all(p);h.linkedSheets=g,g.forEach(x=>{x.linkedSheets=[h].concat(h.linkedSheets.filter(w=>w!==x))})}return h},async unload(n,t,e){await e.unload(n.textureSource._sourceOrigin),n.destroy(!1)}}};Ne.add(dD);const zp=Object.create(null),U1=Object.create(null);function by(n,t){let e=U1[n];return e===void 0&&(zp[t]===void 0&&(zp[t]=1),U1[n]=e=zp[t]++),e}let Du;function eA(){return(!Du||Du?.isContextLost())&&(Du=ee.get().createCanvas().getContext("webgl",{})),Du}let Iu;function fD(){if(!Iu){Iu="mediump";const n=eA();n&&n.getShaderPrecisionFormat&&(Iu=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision?"highp":"mediump")}return Iu}function pD(n,t,e){return t?n:e?(n=n.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${n}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${n}
        `}function mD(n,t,e){const i=e?t.maxSupportedFragmentPrecision:t.maxSupportedVertexPrecision;if(n.substring(0,9)!=="precision"){let s=e?t.requestedFragmentPrecision:t.requestedVertexPrecision;return s==="highp"&&i!=="highp"&&(s="mediump"),`precision ${s} float;
${n}`}else if(i!=="highp"&&n.substring(0,15)==="precision highp")return n.replace("precision highp","precision mediump");return n}function gD(n,t){return t?`#version 300 es
${n}`:n}const xD={},yD={};function vD(n,{name:t="pixi-program"},e=!0){t=t.replace(/\s+/g,"-"),t+=e?"-fragment":"-vertex";const i=e?xD:yD;return i[t]?(i[t]++,t+=`-${i[t]}`):i[t]=1,n.indexOf("#define SHADER_NAME")!==-1?n:`${`#define SHADER_NAME ${t}`}
${n}`}function _D(n,t){return t?n.replace("#version 300 es",""):n}const Dp={stripVersion:_D,ensurePrecision:mD,addProgramDefines:pD,setProgramName:vD,insertVersion:gD},fl=Object.create(null),nA=class Gg{constructor(t){t={...Gg.defaultOptions,...t};const e=t.fragment.indexOf("#version 300 es")!==-1,i={stripVersion:e,ensurePrecision:{requestedFragmentPrecision:t.preferredFragmentPrecision,requestedVertexPrecision:t.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:fD()},setProgramName:{name:t.name},addProgramDefines:e,insertVersion:e};let s=t.fragment,r=t.vertex;Object.keys(Dp).forEach(a=>{const l=i[a];s=Dp[a](s,l,!0),r=Dp[a](r,l,!1)}),this.fragment=s,this.vertex=r,this.transformFeedbackVaryings=t.transformFeedbackVaryings,this._key=by(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,fl[this._cacheKey]=null}static from(t){const e=`${t.vertex}:${t.fragment}`;return fl[e]||(fl[e]=new Gg(t),fl[e]._cacheKey=e),fl[e]}};nA.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let wy=nA;const G1={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function bD(n){return G1[n]??G1.float32}const wD={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function SD({source:n,entryPoint:t}){const e={},i=n.indexOf(`fn ${t}`);if(i!==-1){const s=n.indexOf("->",i);if(s!==-1){const r=n.substring(i,s),a=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let l;for(;(l=a.exec(r))!==null;){const u=wD[l[3]]??"float32";e[l[2]]={location:parseInt(l[1],10),format:u,stride:bD(u).stride,offset:0,instance:!1,start:0}}}}return e}function Ip(n){const t=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,e=/@group\((\d+)\)/,i=/@binding\((\d+)\)/,s=/var(<[^>]+>)? (\w+)/,r=/:\s*(\w+)/,a=/struct\s+(\w+)\s*{([^}]+)}/g,l=/(\w+)\s*:\s*([\w\<\>]+)/g,u=/struct\s+(\w+)/,h=n.match(t)?.map(p=>({group:parseInt(p.match(e)[1],10),binding:parseInt(p.match(i)[1],10),name:p.match(s)[2],isUniform:p.match(s)[1]==="<uniform>",type:p.match(r)[1]}));if(!h)return{groups:[],structs:[]};const f=n.match(a)?.map(p=>{const g=p.match(u)[1],x=p.match(l).reduce((w,_)=>{const[b,C]=_.split(":");return w[b.trim()]=C.trim(),w},{});return x?{name:g,members:x}:null}).filter(({name:p})=>h.some(g=>g.type===p))??[];return{groups:h,structs:f}}var Al=(n=>(n[n.VERTEX=1]="VERTEX",n[n.FRAGMENT=2]="FRAGMENT",n[n.COMPUTE=4]="COMPUTE",n))(Al||{});function CD({groups:n}){const t=[];for(let e=0;e<n.length;e++){const i=n[e];t[i.group]||(t[i.group]=[]),i.isUniform?t[i.group].push({binding:i.binding,visibility:Al.VERTEX|Al.FRAGMENT,buffer:{type:"uniform"}}):i.type==="sampler"?t[i.group].push({binding:i.binding,visibility:Al.FRAGMENT,sampler:{type:"filtering"}}):i.type==="texture_2d"&&t[i.group].push({binding:i.binding,visibility:Al.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return t}function MD({groups:n}){const t=[];for(let e=0;e<n.length;e++){const i=n[e];t[i.group]||(t[i.group]={}),t[i.group][i.name]=i.binding}return t}function PD(n,t){const e=new Set,i=new Set,s=[...n.structs,...t.structs].filter(a=>e.has(a.name)?!1:(e.add(a.name),!0)),r=[...n.groups,...t.groups].filter(a=>{const l=`${a.name}-${a.binding}`;return i.has(l)?!1:(i.add(l),!0)});return{structs:s,groups:r}}const pl=Object.create(null);class jc{constructor(t){this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:e,vertex:i,layout:s,gpuLayout:r,name:a}=t;if(this.name=a,this.fragment=e,this.vertex=i,e.source===i.source){const l=Ip(e.source);this.structsAndGroups=l}else{const l=Ip(i.source),u=Ip(e.source);this.structsAndGroups=PD(l,u)}this.layout=s??MD(this.structsAndGroups),this.gpuLayout=r??CD(this.structsAndGroups),this.autoAssignGlobalUniforms=this.layout[0]?.globalUniforms!==void 0,this.autoAssignLocalUniforms=this.layout[1]?.localUniforms!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:t,fragment:e}=this,i=t.source+e.source+t.entryPoint+e.entryPoint;this._layoutKey=by(i,"program")}get attributeData(){return this._attributeData??(this._attributeData=SD(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,pl[this._cacheKey]=null}static from(t){const e=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return pl[e]||(pl[e]=new jc(t),pl[e]._cacheKey=e),pl[e]}}const iA=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],AD=iA.reduce((n,t)=>(n[t]=!0,n),{});function TD(n,t){switch(n){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*t);case"vec3<f32>":return new Float32Array(3*t);case"vec4<f32>":return new Float32Array(4*t);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const sA=class rA{constructor(t,e){this._touched=0,this.uid=ve("uniform"),this._resourceType="uniformGroup",this._resourceId=ve("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,e={...rA.defaultOptions,...e},this.uniformStructures=t;const i={};for(const s in t){const r=t[s];if(r.name=s,r.size=r.size??1,!AD[r.type]){const a=r.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(a){const[,l,u]=a;throw new Error(`Uniform type ${r.type} is not supported. Use type: '${l}', size: ${u} instead.`)}throw new Error(`Uniform type ${r.type} is not supported. Supported uniform types are: ${iA.join(", ")}`)}r.value??(r.value=TD(r.type,r.size)),i[s]=r.value}this.uniforms=i,this._dirtyId=1,this.ubo=e.ubo,this.isStatic=e.isStatic,this._signature=by(Object.keys(i).map(s=>`${s}-${t[s].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};sA.defaultOptions={ubo:!1,isStatic:!1};let aA=sA;class sh{constructor(t){this.resources=Object.create(null),this._dirty=!0;let e=0;for(const i in t){const s=t[i];this.setResource(s,e++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let e=0;for(const i in this.resources)t[e++]=this.resources[i]._resourceId;this._key=t.join("|")}setResource(t,e){const i=this.resources[e];t!==i&&(i&&t.off?.("change",this.onResourceChange,this),t.on?.("change",this.onResourceChange,this),this.resources[e]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t){const e=this.resources;for(const i in e)e[i]._touched=t}destroy(){const t=this.resources;for(const e in t)t[e]?.off?.("change",this.onResourceChange,this);this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const e=this.resources;for(const i in e)e[i]===t&&(e[i]=null)}else this._updateKey()}}var Vg=(n=>(n[n.WEBGL=1]="WEBGL",n[n.WEBGPU=2]="WEBGPU",n[n.BOTH=3]="BOTH",n))(Vg||{});class ud extends Ni{constructor(t){super(),this.uid=ve("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:e,glProgram:i,groups:s,resources:r,compatibleRenderers:a,groupMap:l}=t;this.gpuProgram=e,this.glProgram=i,a===void 0&&(a=0,e&&(a|=Vg.WEBGPU),i&&(a|=Vg.WEBGL)),this.compatibleRenderers=a;const u={};if(!r&&!s&&(r={}),r&&s)throw new Error("[Shader] Cannot have both resources and groups");if(!e&&s&&!l)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!e&&s&&l)for(const h in l)for(const f in l[h]){const p=l[h][f];u[p]={group:h,binding:f,name:p}}else if(e&&s&&!l){const h=e.structsAndGroups.groups;l={},h.forEach(f=>{l[f.group]=l[f.group]||{},l[f.group][f.binding]=f.name,u[f.name]=f})}else if(r){s={},l={},e&&e.structsAndGroups.groups.forEach(p=>{l[p.group]=l[p.group]||{},l[p.group][p.binding]=p.name,u[p.name]=p});let h=0;for(const f in r)u[f]||(s[99]||(s[99]=new sh,this._ownedBindGroups.push(s[99])),u[f]={group:99,binding:h,name:f},l[99]=l[99]||{},l[99][h]=f,h++);for(const f in r){const p=f;let g=r[f];!g.source&&!g._resourceType&&(g=new aA(g));const x=u[p];x&&(s[x.group]||(s[x.group]=new sh,this._ownedBindGroups.push(s[x.group])),s[x.group].setResource(g,x.binding))}}this.groups=s,this._uniformBindMap=l,this.resources=this._buildResourceAccessor(s,u)}addResource(t,e,i){var s,r;(s=this._uniformBindMap)[e]||(s[e]={}),(r=this._uniformBindMap[e])[i]||(r[i]=t),this.groups[e]||(this.groups[e]=new sh,this._ownedBindGroups.push(this.groups[e]))}_buildResourceAccessor(t,e){const i={};for(const s in e){const r=e[s];Object.defineProperty(i,r.name,{get(){return t[r.group].getResource(r.binding)},set(a){t[r.group].setResource(a,r.binding)}})}return i}destroy(t=!1){this._destroyed||(this._destroyed=!0,this.emit("destroy",this),t&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(e=>{e.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(t){const{gpu:e,gl:i,...s}=t;let r,a;return e&&(r=jc.from(e)),i&&(a=wy.from(i)),new ud({gpuProgram:r,glProgram:a,...s})}}const ED={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},Bp=0,Lp=1,Fp=2,Hp=3,Up=4,Gp=5,Wg=class oA{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Bp)}set blend(t){!!(this.data&1<<Bp)!==t&&(this.data^=1<<Bp)}get offsets(){return!!(this.data&1<<Lp)}set offsets(t){!!(this.data&1<<Lp)!==t&&(this.data^=1<<Lp)}set cullMode(t){if(t==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=t==="front"}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(this.data&1<<Fp)}set culling(t){!!(this.data&1<<Fp)!==t&&(this.data^=1<<Fp)}get depthTest(){return!!(this.data&1<<Hp)}set depthTest(t){!!(this.data&1<<Hp)!==t&&(this.data^=1<<Hp)}get depthMask(){return!!(this.data&1<<Gp)}set depthMask(t){!!(this.data&1<<Gp)!==t&&(this.data^=1<<Gp)}get clockwiseFrontFace(){return!!(this.data&1<<Up)}set clockwiseFrontFace(t){!!(this.data&1<<Up)!==t&&(this.data^=1<<Up)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!=="none",this._blendMode=t,this._blendModeId=ED[t]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const t=new oA;return t.depthTest=!1,t.blend=!0,t}};Wg.default2d=Wg.for2d();let RD=Wg;const lA=class Yg extends ud{constructor(t){t={...Yg.defaultOptions,...t},super(t),this.enabled=!0,this._state=RD.for2d(),this.blendMode=t.blendMode,this.padding=t.padding,typeof t.antialias=="boolean"?this.antialias=t.antialias?"on":"off":this.antialias=t.antialias,this.resolution=t.resolution,this.blendRequired=t.blendRequired,this.clipToViewport=t.clipToViewport,this.addResource("uTexture",0,1),t.blendRequired&&this.addResource("uBackTexture",0,3)}apply(t,e,i,s){t.applyFilter(this,e,i,s)}get blendMode(){return this._state.blendMode}set blendMode(t){this._state.blendMode=t}static from(t){const{gpu:e,gl:i,...s}=t;let r,a;return e&&(r=jc.from(e)),i&&(a=wy.from(i)),new Yg({gpuProgram:r,glProgram:a,...s})}};lA.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0};let xa=lA;const qg=[];Ne.handleByNamedList(lt.Environment,qg);async function jD(n){if(!n)for(let t=0;t<qg.length;t++){const e=qg[t];if(e.value.test()){await e.value.load();return}}}let ml;function kD(){if(typeof ml=="boolean")return ml;try{ml=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{ml=!1}return ml}function V1(n,t,e=2){const i=t&&t.length,s=i?t[0]*e:n.length;let r=cA(n,0,s,e,!0);const a=[];if(!r||r.next===r.prev)return a;let l,u,h;if(i&&(r=ID(n,t,r,e)),n.length>80*e){l=n[0],u=n[1];let f=l,p=u;for(let g=e;g<s;g+=e){const x=n[g],w=n[g+1];x<l&&(l=x),w<u&&(u=w),x>f&&(f=x),w>p&&(p=w)}h=Math.max(f-l,p-u),h=h!==0?32767/h:0}return ql(r,a,e,l,u,h,0),a}function cA(n,t,e,i,s){let r;if(s===XD(n,t,e,i)>0)for(let a=t;a<e;a+=i)r=W1(a/i|0,n[a],n[a+1],r);else for(let a=e-i;a>=t;a-=i)r=W1(a/i|0,n[a],n[a+1],r);return r&&xo(r,r.next)&&($l(r),r=r.next),r}function da(n,t){if(!n)return n;t||(t=n);let e=n,i;do if(i=!1,!e.steiner&&(xo(e,e.next)||he(e.prev,e,e.next)===0)){if($l(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function ql(n,t,e,i,s,r,a){if(!n)return;!a&&r&&UD(n,i,s,r);let l=n;for(;n.prev!==n.next;){const u=n.prev,h=n.next;if(r?OD(n,i,s,r):ND(n)){t.push(u.i,n.i,h.i),$l(n),n=h.next,l=h.next;continue}if(n=h,n===l){a?a===1?(n=zD(da(n),t),ql(n,t,e,i,s,r,2)):a===2&&DD(n,t,e,i,s,r):ql(da(n),t,e,i,s,r,1);break}}}function ND(n){const t=n.prev,e=n,i=n.next;if(he(t,e,i)>=0)return!1;const s=t.x,r=e.x,a=i.x,l=t.y,u=e.y,h=i.y,f=Math.min(s,r,a),p=Math.min(l,u,h),g=Math.max(s,r,a),x=Math.max(l,u,h);let w=i.next;for(;w!==t;){if(w.x>=f&&w.x<=g&&w.y>=p&&w.y<=x&&Tl(s,l,r,u,a,h,w.x,w.y)&&he(w.prev,w,w.next)>=0)return!1;w=w.next}return!0}function OD(n,t,e,i){const s=n.prev,r=n,a=n.next;if(he(s,r,a)>=0)return!1;const l=s.x,u=r.x,h=a.x,f=s.y,p=r.y,g=a.y,x=Math.min(l,u,h),w=Math.min(f,p,g),_=Math.max(l,u,h),b=Math.max(f,p,g),C=Xg(x,w,t,e,i),M=Xg(_,b,t,e,i);let P=n.prevZ,T=n.nextZ;for(;P&&P.z>=C&&T&&T.z<=M;){if(P.x>=x&&P.x<=_&&P.y>=w&&P.y<=b&&P!==s&&P!==a&&Tl(l,f,u,p,h,g,P.x,P.y)&&he(P.prev,P,P.next)>=0||(P=P.prevZ,T.x>=x&&T.x<=_&&T.y>=w&&T.y<=b&&T!==s&&T!==a&&Tl(l,f,u,p,h,g,T.x,T.y)&&he(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;P&&P.z>=C;){if(P.x>=x&&P.x<=_&&P.y>=w&&P.y<=b&&P!==s&&P!==a&&Tl(l,f,u,p,h,g,P.x,P.y)&&he(P.prev,P,P.next)>=0)return!1;P=P.prevZ}for(;T&&T.z<=M;){if(T.x>=x&&T.x<=_&&T.y>=w&&T.y<=b&&T!==s&&T!==a&&Tl(l,f,u,p,h,g,T.x,T.y)&&he(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function zD(n,t){let e=n;do{const i=e.prev,s=e.next.next;!xo(i,s)&&hA(i,e,e.next,s)&&Xl(i,s)&&Xl(s,i)&&(t.push(i.i,e.i,s.i),$l(e),$l(e.next),e=n=s),e=e.next}while(e!==n);return da(e)}function DD(n,t,e,i,s,r){let a=n;do{let l=a.next.next;for(;l!==a.prev;){if(a.i!==l.i&&WD(a,l)){let u=dA(a,l);a=da(a,a.next),u=da(u,u.next),ql(a,t,e,i,s,r,0),ql(u,t,e,i,s,r,0);return}l=l.next}a=a.next}while(a!==n)}function ID(n,t,e,i){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r]*i,u=r<a-1?t[r+1]*i:n.length,h=cA(n,l,u,i,!1);h===h.next&&(h.steiner=!0),s.push(VD(h))}s.sort(BD);for(let r=0;r<s.length;r++)e=LD(s[r],e);return e}function BD(n,t){let e=n.x-t.x;if(e===0&&(e=n.y-t.y,e===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),s=(t.next.y-t.y)/(t.next.x-t.x);e=i-s}return e}function LD(n,t){const e=FD(n,t);if(!e)return t;const i=dA(e,n);return da(i,i.next),da(e,e.next)}function FD(n,t){let e=t;const i=n.x,s=n.y;let r=-1/0,a;if(xo(n,e))return e;do{if(xo(n,e.next))return e.next;if(s<=e.y&&s>=e.next.y&&e.next.y!==e.y){const p=e.x+(s-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(p<=i&&p>r&&(r=p,a=e.x<e.next.x?e:e.next,p===i))return a}e=e.next}while(e!==t);if(!a)return null;const l=a,u=a.x,h=a.y;let f=1/0;e=a;do{if(i>=e.x&&e.x>=u&&i!==e.x&&uA(s<h?i:r,s,u,h,s<h?r:i,s,e.x,e.y)){const p=Math.abs(s-e.y)/(i-e.x);Xl(e,n)&&(p<f||p===f&&(e.x>a.x||e.x===a.x&&HD(a,e)))&&(a=e,f=p)}e=e.next}while(e!==l);return a}function HD(n,t){return he(n.prev,n,t.prev)<0&&he(t.next,n,n.next)<0}function UD(n,t,e,i){let s=n;do s.z===0&&(s.z=Xg(s.x,s.y,t,e,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==n);s.prevZ.nextZ=null,s.prevZ=null,GD(s)}function GD(n){let t,e=1;do{let i=n,s;n=null;let r=null;for(t=0;i;){t++;let a=i,l=0;for(let h=0;h<e&&(l++,a=a.nextZ,!!a);h++);let u=e;for(;l>0||u>0&&a;)l!==0&&(u===0||!a||i.z<=a.z)?(s=i,i=i.nextZ,l--):(s=a,a=a.nextZ,u--),r?r.nextZ=s:n=s,s.prevZ=r,r=s;i=a}r.nextZ=null,e*=2}while(t>1);return n}function Xg(n,t,e,i,s){return n=(n-e)*s|0,t=(t-i)*s|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,n|t<<1}function VD(n){let t=n,e=n;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==n);return e}function uA(n,t,e,i,s,r,a,l){return(s-a)*(t-l)>=(n-a)*(r-l)&&(n-a)*(i-l)>=(e-a)*(t-l)&&(e-a)*(r-l)>=(s-a)*(i-l)}function Tl(n,t,e,i,s,r,a,l){return!(n===a&&t===l)&&uA(n,t,e,i,s,r,a,l)}function WD(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!YD(n,t)&&(Xl(n,t)&&Xl(t,n)&&qD(n,t)&&(he(n.prev,n,t.prev)||he(n,t.prev,t))||xo(n,t)&&he(n.prev,n,n.next)>0&&he(t.prev,t,t.next)>0)}function he(n,t,e){return(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y)}function xo(n,t){return n.x===t.x&&n.y===t.y}function hA(n,t,e,i){const s=Lu(he(n,t,e)),r=Lu(he(n,t,i)),a=Lu(he(e,i,n)),l=Lu(he(e,i,t));return!!(s!==r&&a!==l||s===0&&Bu(n,e,t)||r===0&&Bu(n,i,t)||a===0&&Bu(e,n,i)||l===0&&Bu(e,t,i))}function Bu(n,t,e){return t.x<=Math.max(n.x,e.x)&&t.x>=Math.min(n.x,e.x)&&t.y<=Math.max(n.y,e.y)&&t.y>=Math.min(n.y,e.y)}function Lu(n){return n>0?1:n<0?-1:0}function YD(n,t){let e=n;do{if(e.i!==n.i&&e.next.i!==n.i&&e.i!==t.i&&e.next.i!==t.i&&hA(e,e.next,n,t))return!0;e=e.next}while(e!==n);return!1}function Xl(n,t){return he(n.prev,n,n.next)<0?he(n,t,n.next)>=0&&he(n,n.prev,t)>=0:he(n,t,n.prev)<0||he(n,n.next,t)<0}function qD(n,t){let e=n,i=!1;const s=(n.x+t.x)/2,r=(n.y+t.y)/2;do e.y>r!=e.next.y>r&&e.next.y!==e.y&&s<(e.next.x-e.x)*(r-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==n);return i}function dA(n,t){const e=$g(n.i,n.x,n.y),i=$g(t.i,t.x,t.y),s=n.next,r=t.prev;return n.next=t,t.prev=n,e.next=s,s.prev=e,i.next=e,e.prev=i,r.next=i,i.prev=r,i}function W1(n,t,e,i){const s=$g(n,t,e);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function $l(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function $g(n,t,e){return{i:n,x:t,y:e,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function XD(n,t,e,i){let s=0;for(let r=t,a=e-i;r<e;r+=i)s+=(n[a]-n[r])*(n[r+1]+n[a+1]),a=r;return s}const $D=V1.default||V1;var fA=(n=>(n[n.NONE=0]="NONE",n[n.COLOR=16384]="COLOR",n[n.STENCIL=1024]="STENCIL",n[n.DEPTH=256]="DEPTH",n[n.COLOR_DEPTH=16640]="COLOR_DEPTH",n[n.COLOR_STENCIL=17408]="COLOR_STENCIL",n[n.DEPTH_STENCIL=1280]="DEPTH_STENCIL",n[n.ALL=17664]="ALL",n))(fA||{});class QD{constructor(t){this.items=[],this._name=t}emit(t,e,i,s,r,a,l,u){const{name:h,items:f}=this;for(let p=0,g=f.length;p<g;p++)f[p][h](t,e,i,s,r,a,l,u);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&this.items.splice(e,1),this}contains(t){return this.items.indexOf(t)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const KD=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],pA=class mA extends Ni{constructor(t){super(),this.uid=ve("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name,this.config=t;const e=[...KD,...this.config.runners??[]];this._addRunners(...e),this._unsafeEvalCheck()}async init(t={}){const e=t.skipExtensionImports===!0?!0:t.manageImports===!1;await jD(e),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const i in this._systemsHash)t={...this._systemsHash[i].constructor.defaultOptions,...t};t={...mA.defaultOptions,...t},this._roundPixels=t.roundPixels?1:0;for(let i=0;i<this.runners.init.items.length;i++)await this.runners.init.items[i].init(t);this._initOptions=t}render(t,e){let i=t;if(i instanceof pe&&(i={container:i},e&&(Ct(Lt,"passing a second argument is deprecated, please use render options instead"),i.target=e.renderTexture)),i.target||(i.target=this.view.renderTarget),i.target===this.view.renderTarget&&(this._lastObjectRendered=i.container,i.clearColor??(i.clearColor=this.background.colorRgba),i.clear??(i.clear=this.background.clearBeforeRender)),i.clearColor){const s=Array.isArray(i.clearColor)&&i.clearColor.length===4;i.clearColor=s?i.clearColor:Re.shared.setValue(i.clearColor).toArray()}i.transform||(i.container.updateLocalTransform(),i.transform=i.container.localTransform),i.container.visible&&(i.container.enableRenderGroup(),this.runners.prerender.emit(i),this.runners.renderStart.emit(i),this.runners.render.emit(i),this.runners.renderEnd.emit(i),this.runners.postrender.emit(i))}resize(t,e,i){const s=this.view.resolution;this.view.resize(t,e,i),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),i!==void 0&&i!==s&&this.runners.resolutionChange.emit(i)}clear(t={}){const e=this;t.target||(t.target=e.renderTarget.renderTarget),t.clearColor||(t.clearColor=this.background.colorRgba),t.clear??(t.clear=fA.ALL);const{clear:i,clearColor:s,target:r}=t;Re.shared.setValue(s??this.background.colorRgba),e.renderTarget.clear(r,i,Re.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...t){t.forEach(e=>{this.runners[e]=new QD(e)})}_addSystems(t){let e;for(e in t){const i=t[e];this._addSystem(i.value,i.name)}}_addSystem(t,e){const i=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=i,this._systemsHash[e]=i;for(const s in this.runners)this.runners[s].add(i);return this}_addPipes(t,e){const i=e.reduce((s,r)=>(s[r.name]=r.value,s),{});t.forEach(s=>{const r=s.value,a=s.name,l=i[a];this.renderPipes[a]=new r(this,l?new l:null),this.runners.destroy.add(this.renderPipes[a])})}destroy(t=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),(t===!0||typeof t=="object"&&t.releaseGlobalResources)&&Rc.release(),Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!kD())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};pA.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let gA=pA,Fu;function ZD(n){return Fu!==void 0||(Fu=(()=>{const t={stencil:!0,failIfMajorPerformanceCaveat:n??gA.defaultOptions.failIfMajorPerformanceCaveat};try{if(!ee.get().getWebGLRenderingContext())return!1;let i=ee.get().createCanvas().getContext("webgl",t);const s=!!i?.getContextAttributes()?.stencil;if(i){const r=i.getExtension("WEBGL_lose_context");r&&r.loseContext()}return i=null,s}catch{return!1}})()),Fu}let Hu;async function JD(n={}){return Hu!==void 0||(Hu=await(async()=>{const t=ee.get().getNavigator().gpu;if(!t)return!1;try{return await(await t.requestAdapter(n)).requestDevice(),!0}catch{return!1}})()),Hu}const Y1=["webgl","webgpu","canvas"];async function t4(n){let t=[];n.preference?(t.push(n.preference),Y1.forEach(r=>{r!==n.preference&&t.push(r)})):t=Y1.slice();let e,i={};for(let r=0;r<t.length;r++){const a=t[r];if(a==="webgpu"&&await JD()){const{WebGPURenderer:l}=await ph(async()=>{const{WebGPURenderer:u}=await import("./WebGPURenderer-C04EaElU.js");return{WebGPURenderer:u}},__vite__mapDeps([8,2,9,3,4,5,6,7]));e=l,i={...n,...n.webgpu};break}else if(a==="webgl"&&ZD(n.failIfMajorPerformanceCaveat??gA.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:l}=await ph(async()=>{const{WebGLRenderer:u}=await import("./WebGLRenderer-txu-J7Yj.js");return{WebGLRenderer:u}},__vite__mapDeps([10,2,9,3,4,5,6,7]));e=l,i={...n,...n.webgl};break}else if(a==="canvas")throw i={...n},new Error("CanvasRenderer is not yet implemented")}if(delete i.webgpu,delete i.webgl,!e)throw new Error("No available renderer for the current environment");const s=new e;return await s.init(i),s}const xA="8.14.3";class yA{static init(){globalThis.__PIXI_APP_INIT__?.(this,xA)}static destroy(){}}yA.extension=lt.Application;class e4{constructor(t){this._renderer=t}init(){globalThis.__PIXI_RENDERER_INIT__?.(this._renderer,xA)}destroy(){this._renderer=null}}e4.extension={type:[lt.WebGLSystem,lt.WebGPUSystem],name:"initHook",priority:-10};const vA=class Qg{constructor(...t){this.stage=new pe,t[0]!==void 0&&Ct(Lt,"Application constructor options are deprecated, please use Application.init() instead.")}async init(t){t={...t},this.stage||(this.stage=new pe),this.renderer=await t4(t),Qg._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Ct(Lt,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,e=!1){const i=Qg._plugins.slice(0);i.reverse(),i.forEach(s=>{s.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};vA._plugins=[];let Sy=vA;Ne.handleByList(lt.Application,Sy._plugins);Ne.add(yA);class _A extends Ni{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return Ct(Lt,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return Ct(Lt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return Ct(Lt,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return Ct(Lt,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return Ct(Lt,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners();for(const e in this.chars)this.chars[e].texture?.destroy();this.chars=null,t&&(this.pages.forEach(e=>e.texture.destroy(!0)),this.pages=null)}}class n4{constructor(t=0,e=0,i=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=t,this.resetTtl=i,this.size=0,this.ttl=e}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(t){if(this.has(t)){const e=this.items[t];delete this.items[t],this.size--,e.prev!==null&&(e.prev.next=e.next),e.next!==null&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),this.last===e&&(this.last=e.prev)}return this}entries(t=this.keys()){return t.map(e=>[e,this.get(e)])}evict(t=!1){if(t||this.size>0){const e=this.first;delete this.items[e.key],--this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}return this}expiresAt(t){let e;return this.has(t)&&(e=this.items[t].expiry),e}get(t){const e=this.items[t];if(e!==void 0){if(this.ttl>0&&e.expiry<=Date.now()){this.delete(t);return}return this.moveToEnd(e),e.value}}has(t){return t in this.items}moveToEnd(t){this.last!==t&&(t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),t.prev=this.last,t.next=null,this.last!==null&&(this.last.next=t),this.last=t,this.first===null&&(this.first=t))}keys(){const t=[];let e=this.first;for(;e!==null;)t.push(e.key),e=e.next;return t}setWithEvicted(t,e,i=this.resetTtl){let s=null;if(this.has(t))this.set(t,e,!0,i);else{this.max>0&&this.size===this.max&&(s={...this.first},this.evict(!0));let r=this.items[t]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:e};++this.size===1?this.first=r:this.last.next=r,this.last=r}return s}set(t,e,i=!1,s=this.resetTtl){let r=this.items[t];return i||r!==void 0?(r.value=e,i===!1&&s&&(r.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(r)):(this.max>0&&this.size===this.max&&this.evict(!0),r=this.items[t]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:e},++this.size===1?this.first=r:this.last.next=r,this.last=r),this}values(t=this.keys()){return t.map(e=>this.get(e))}}function bA(n=1e3,t=0,e=!1){if(isNaN(n)||n<0)throw new TypeError("Invalid max value");if(isNaN(t)||t<0)throw new TypeError("Invalid ttl value");if(typeof e!="boolean")throw new TypeError("Invalid resetTtl value");return new n4(n,t,e)}const i4=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function vh(n){const t=typeof n.fontSize=="number"?`${n.fontSize}px`:n.fontSize;let e=n.fontFamily;Array.isArray(n.fontFamily)||(e=n.fontFamily.split(","));for(let i=e.length-1;i>=0;i--){let s=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&!i4.includes(s)&&(s=`"${s}"`),e[i]=s}return`${n.fontStyle} ${n.fontVariant} ${n.fontWeight} ${t} ${e.join(",")}`}const Vp={willReadFrequently:!0},zi=class at{static get experimentalLetterSpacingSupported(){let t=at._experimentalLetterSpacingSupported;if(t===void 0){const e=ee.get().getCanvasRenderingContext2D().prototype;t=at._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,i,s,r,a,l,u,h){this.text=t,this.style=e,this.width=i,this.height=s,this.lines=r,this.lineWidths=a,this.lineHeight=l,this.maxLineWidth=u,this.fontProperties=h}static measureText(t=" ",e,i=at._canvas,s=e.wordWrap){const r=`${t}-${e.styleKey}-wordWrap-${s}`;if(at._measurementCache.has(r))return at._measurementCache.get(r);const a=vh(e),l=at.measureFont(a);l.fontSize===0&&(l.fontSize=e.fontSize,l.ascent=e.fontSize);const u=at.__context;u.font=a;const f=(s?at._wordWrap(t,e,i):t).split(/(?:\r\n|\r|\n)/),p=new Array(f.length);let g=0;for(let M=0;M<f.length;M++){const P=at._measureText(f[M],e.letterSpacing,u);p[M]=P,g=Math.max(g,P)}const x=e._stroke?.width||0;let w=g+x;e.dropShadow&&(w+=e.dropShadow.distance);const _=e.lineHeight||l.fontSize;let b=Math.max(_,l.fontSize+x)+(f.length-1)*(_+e.leading);e.dropShadow&&(b+=e.dropShadow.distance);const C=new at(t,e,w,b,f,p,_+e.leading,g,l);return at._measurementCache.set(r,C),C}static _measureText(t,e,i){let s=!1;at.experimentalLetterSpacingSupported&&(at.experimentalLetterSpacing?(i.letterSpacing=`${e}px`,i.textLetterSpacing=`${e}px`,s=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));const r=i.measureText(t);let a=r.width;const l=-r.actualBoundingBoxLeft;let h=r.actualBoundingBoxRight-l;if(a>0)if(s)a-=e,h-=e;else{const f=(at.graphemeSegmenter(t).length-1)*e;a+=f,h+=f}return Math.max(a,h)}static _wordWrap(t,e,i=at._canvas){const s=i.getContext("2d",Vp);let r=0,a="",l="";const u=Object.create(null),{letterSpacing:h,whiteSpace:f}=e,p=at._collapseSpaces(f),g=at._collapseNewlines(f);let x=!p;const w=e.wordWrapWidth+h,_=at._tokenize(t);for(let b=0;b<_.length;b++){let C=_[b];if(at._isNewline(C)){if(!g){l+=at._addLine(a),x=!p,a="",r=0;continue}C=" "}if(p){const P=at.isBreakingSpace(C),T=at.isBreakingSpace(a[a.length-1]);if(P&&T)continue}const M=at._getFromCache(C,h,u,s);if(M>w)if(a!==""&&(l+=at._addLine(a),a="",r=0),at.canBreakWords(C,e.breakWords)){const P=at.wordWrapSplit(C);for(let T=0;T<P.length;T++){let E=P[T],R=E,N=1;for(;P[T+N];){const k=P[T+N];if(!at.canBreakChars(R,k,C,T,e.breakWords))E+=k;else break;R=k,N++}T+=N-1;const O=at._getFromCache(E,h,u,s);O+r>w&&(l+=at._addLine(a),x=!1,a="",r=0),a+=E,r+=O}}else{a.length>0&&(l+=at._addLine(a),a="",r=0);const P=b===_.length-1;l+=at._addLine(C,!P),x=!1,a="",r=0}else M+r>w&&(x=!1,l+=at._addLine(a),a="",r=0),(a.length>0||!at.isBreakingSpace(C)||x)&&(a+=C,r+=M)}return l+=at._addLine(a,!1),l}static _addLine(t,e=!0){return t=at._trimRight(t),t=e?`${t}
`:t,t}static _getFromCache(t,e,i,s){let r=i[t];return typeof r!="number"&&(r=at._measureText(t,e,s)+e,i[t]=r),r}static _collapseSpaces(t){return t==="normal"||t==="pre-line"}static _collapseNewlines(t){return t==="normal"}static _trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const i=t[e];if(!at.isBreakingSpace(i))break;t=t.slice(0,-1)}return t}static _isNewline(t){return typeof t!="string"?!1:at._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:at._breakingSpaces.includes(t.charCodeAt(0))}static _tokenize(t){const e=[];let i="";if(typeof t!="string")return e;for(let s=0;s<t.length;s++){const r=t[s],a=t[s+1];if(at.isBreakingSpace(r,a)||at._isNewline(r)){i!==""&&(e.push(i),i=""),r==="\r"&&a===`
`?(e.push(`\r
`),s++):e.push(r);continue}i+=r}return i!==""&&e.push(i),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,i,s,r){return!0}static wordWrapSplit(t){return at.graphemeSegmenter(t)}static measureFont(t){if(at._fonts[t])return at._fonts[t];const e=at._context;e.font=t;const i=e.measureText(at.METRICS_STRING+at.BASELINE_SYMBOL),s={ascent:i.actualBoundingBoxAscent,descent:i.actualBoundingBoxDescent,fontSize:i.actualBoundingBoxAscent+i.actualBoundingBoxDescent};return at._fonts[t]=s,s}static clearMetrics(t=""){t?delete at._fonts[t]:at._fonts={}}static get _canvas(){if(!at.__canvas){let t;try{const e=new OffscreenCanvas(0,0);if(e.getContext("2d",Vp)?.measureText)return at.__canvas=e,e;t=ee.get().createCanvas()}catch{t=ee.get().createCanvas()}t.width=t.height=10,at.__canvas=t}return at.__canvas}static get _context(){return at.__context||(at.__context=at._canvas.getContext("2d",Vp)),at.__context}};zi.METRICS_STRING="|q";zi.BASELINE_SYMBOL="M";zi.BASELINE_MULTIPLIER=1.4;zi.HEIGHT_MULTIPLIER=2;zi.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const n=new Intl.Segmenter;return t=>{const e=n.segment(t),i=[];let s=0;for(const r of e)i[s++]=r.segment;return i}}return n=>[...n]})();zi.experimentalLetterSpacing=!1;zi._fonts={};zi._newlines=[10,13];zi._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];zi._measurementCache=bA(1e3);let Yi=zi;const q1=[{offset:0,color:"white"},{offset:1,color:"black"}],Cy=class Kg{constructor(...t){this.uid=ve("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let e=s4(t);e={...e.type==="radial"?Kg.defaultRadialOptions:Kg.defaultLinearOptions,...MP(e)},this._textureSize=e.textureSize,this._wrapMode=e.wrapMode,e.type==="radial"?(this.center=e.center,this.outerCenter=e.outerCenter??this.center,this.innerRadius=e.innerRadius,this.outerRadius=e.outerRadius,this.scale=e.scale,this.rotation=e.rotation):(this.start=e.start,this.end=e.end),this.textureSpace=e.textureSpace,this.type=e.type,e.colorStops.forEach(s=>{this.addColorStop(s.offset,s.color)})}addColorStop(t,e){return this.colorStops.push({offset:t,color:Re.shared.setValue(e).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:t,y:e}=this.start,{x:i,y:s}=this.end,r=i-t,a=s-e;const l=r<0||a<0;if(this._wrapMode==="clamp-to-edge"){if(r<0){const b=t;t=i,i=b,r*=-1}if(a<0){const b=e;e=s,s=b,a*=-1}}const u=this.colorStops.length?this.colorStops:q1,h=this._textureSize,{canvas:f,context:p}=$1(h,1),g=l?p.createLinearGradient(this._textureSize,0,0,0):p.createLinearGradient(0,0,this._textureSize,0);X1(g,u),p.fillStyle=g,p.fillRect(0,0,h,1),this.texture=new dt({source:new ha({resource:f,addressMode:this._wrapMode})});const x=Math.sqrt(r*r+a*a),w=Math.atan2(a,r),_=new Tt;_.scale(x/h,1),_.rotate(w),_.translate(t,e),this.textureSpace==="local"&&_.scale(h,h),this.transform=_}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const t=this.colorStops.length?this.colorStops:q1,e=this._textureSize,{canvas:i,context:s}=$1(e,e),{x:r,y:a}=this.center,{x:l,y:u}=this.outerCenter,h=this.innerRadius,f=this.outerRadius,p=l-f,g=u-f,x=e/(f*2),w=(r-p)*x,_=(a-g)*x,b=s.createRadialGradient(w,_,h*x,(l-p)*x,(u-g)*x,f*x);X1(b,t),s.fillStyle=t[t.length-1].color,s.fillRect(0,0,e,e),s.fillStyle=b,s.translate(w,_),s.rotate(this.rotation),s.scale(1,this.scale),s.translate(-w,-_),s.fillRect(0,0,e,e),this.texture=new dt({source:new ha({resource:i,addressMode:this._wrapMode})});const C=new Tt;C.scale(1/x,1/x),C.translate(p,g),this.textureSpace==="local"&&C.scale(e,e),this.transform=C}destroy(){this.texture?.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};Cy.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};Cy.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let js=Cy;function X1(n,t){for(let e=0;e<t.length;e++){const i=t[e];n.addColorStop(i.offset,i.color)}}function $1(n,t){const e=ee.get().createCanvas(n,t),i=e.getContext("2d");return{canvas:e,context:i}}function s4(n){let t=n[0]??{};return(typeof t=="number"||n[1])&&(Ct("8.5.2","use options object instead"),t={type:"linear",start:{x:n[0],y:n[1]},end:{x:n[2],y:n[3]},textureSpace:n[4],textureSize:n[5]??js.defaultLinearOptions.textureSize}),t}const Q1={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class hd{constructor(t,e){this.uid=ve("fillPattern"),this._tick=0,this.transform=new Tt,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),e&&(t.source.style.addressModeU=Q1[e].addressModeU,t.source.style.addressModeV=Q1[e].addressModeV)}setTransform(t){const e=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/e.frame.width,1/e.frame.height),this._tick++}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture=t,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}var Wp,K1;function r4(){if(K1)return Wp;K1=1,Wp=e;var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function e(r){var a=[];return r.replace(t,function(l,u,h){var f=u.toLowerCase();for(h=s(h),f=="m"&&h.length>2&&(a.push([u].concat(h.splice(0,2))),f="l",u=u=="m"?"l":"L");;){if(h.length==n[f])return h.unshift(u),a.push(h);if(h.length<n[f])throw new Error("malformed path data");a.push([u].concat(h.splice(0,n[f])))}}),a}var i=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function s(r){var a=r.match(i);return a?a.map(Number):[]}return Wp}var a4=r4();const o4=Eo(a4);function l4(n,t){const e=o4(n),i=[];let s=null,r=0,a=0;for(let l=0;l<e.length;l++){const u=e[l],h=u[0],f=u;switch(h){case"M":r=f[1],a=f[2],t.moveTo(r,a);break;case"m":r+=f[1],a+=f[2],t.moveTo(r,a);break;case"H":r=f[1],t.lineTo(r,a);break;case"h":r+=f[1],t.lineTo(r,a);break;case"V":a=f[1],t.lineTo(r,a);break;case"v":a+=f[1],t.lineTo(r,a);break;case"L":r=f[1],a=f[2],t.lineTo(r,a);break;case"l":r+=f[1],a+=f[2],t.lineTo(r,a);break;case"C":r=f[5],a=f[6],t.bezierCurveTo(f[1],f[2],f[3],f[4],r,a);break;case"c":t.bezierCurveTo(r+f[1],a+f[2],r+f[3],a+f[4],r+f[5],a+f[6]),r+=f[5],a+=f[6];break;case"S":r=f[3],a=f[4],t.bezierCurveToShort(f[1],f[2],r,a);break;case"s":t.bezierCurveToShort(r+f[1],a+f[2],r+f[3],a+f[4]),r+=f[3],a+=f[4];break;case"Q":r=f[3],a=f[4],t.quadraticCurveTo(f[1],f[2],r,a);break;case"q":t.quadraticCurveTo(r+f[1],a+f[2],r+f[3],a+f[4]),r+=f[3],a+=f[4];break;case"T":r=f[1],a=f[2],t.quadraticCurveToShort(r,a);break;case"t":r+=f[1],a+=f[2],t.quadraticCurveToShort(r,a);break;case"A":r=f[6],a=f[7],t.arcToSvg(f[1],f[2],f[3],f[4],f[5],r,a);break;case"a":r+=f[6],a+=f[7],t.arcToSvg(f[1],f[2],f[3],f[4],f[5],r,a);break;case"Z":case"z":t.closePath(),i.length>0&&(s=i.pop(),s?(r=s.startX,a=s.startY):(r=0,a=0)),s=null;break;default:te(`Unknown SVG path command: ${h}`)}h!=="Z"&&h!=="z"&&s===null&&(s={startX:r,startY:a},i.push(s))}return t}class My{constructor(t=0,e=0,i=0){this.type="circle",this.x=t,this.y=e,this.radius=i}clone(){return new My(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const i=this.radius*this.radius;let s=this.x-t,r=this.y-e;return s*=s,r*=r,s+r<=i}strokeContains(t,e,i,s=.5){if(this.radius===0)return!1;const r=this.x-t,a=this.y-e,l=this.radius,u=(1-s)*i,h=Math.sqrt(r*r+a*a);return h<=l+u&&h>l-(i-u)}getBounds(t){return t||(t=new Yt),t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Py{constructor(t=0,e=0,i=0,s=0){this.type="ellipse",this.x=t,this.y=e,this.halfWidth=i,this.halfHeight=s}clone(){return new Py(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,e){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(t-this.x)/this.halfWidth,s=(e-this.y)/this.halfHeight;return i*=i,s*=s,i+s<=1}strokeContains(t,e,i,s=.5){const{halfWidth:r,halfHeight:a}=this;if(r<=0||a<=0)return!1;const l=i*(1-s),u=i-l,h=r-u,f=a-u,p=r+l,g=a+l,x=t-this.x,w=e-this.y,_=x*x/(h*h)+w*w/(f*f),b=x*x/(p*p)+w*w/(g*g);return _>1&&b<=1}getBounds(t){return t||(t=new Yt),t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=this.halfWidth*2,t.height=this.halfHeight*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function c4(n,t,e,i,s,r){const a=n-e,l=t-i,u=s-e,h=r-i,f=a*u+l*h,p=u*u+h*h;let g=-1;p!==0&&(g=f/p);let x,w;g<0?(x=e,w=i):g>1?(x=s,w=r):(x=e+g*u,w=i+g*h);const _=n-x,b=t-w;return _*_+b*b}let u4,h4;class so{constructor(...t){this.type="polygon";let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const i=[];for(let s=0,r=e.length;s<r;s++)i.push(e[s].x,e[s].y);e=i}this.points=e,this.closePath=!0}isClockwise(){let t=0;const e=this.points,i=e.length;for(let s=0;s<i;s+=2){const r=e[s],a=e[s+1],l=e[(s+2)%i],u=e[(s+3)%i];t+=(l-r)*(u+a)}return t<0}containsPolygon(t){const e=this.getBounds(u4),i=t.getBounds(h4);if(!e.containsRect(i))return!1;const s=t.points;for(let r=0;r<s.length;r+=2){const a=s[r],l=s[r+1];if(!this.contains(a,l))return!1}return!0}clone(){const t=this.points.slice(),e=new so(t);return e.closePath=this.closePath,e}contains(t,e){let i=!1;const s=this.points.length/2;for(let r=0,a=s-1;r<s;a=r++){const l=this.points[r*2],u=this.points[r*2+1],h=this.points[a*2],f=this.points[a*2+1];u>e!=f>e&&t<(h-l)*((e-u)/(f-u))+l&&(i=!i)}return i}strokeContains(t,e,i,s=.5){const r=i*i,a=r*(1-s),l=r-a,{points:u}=this,h=u.length-(this.closePath?0:2);for(let f=0;f<h;f+=2){const p=u[f],g=u[f+1],x=u[(f+2)%u.length],w=u[(f+3)%u.length],_=c4(t,e,p,g,x,w),b=Math.sign((x-p)*(e-g)-(w-g)*(t-p));if(_<=(b<0?l:a))return!0}return!1}getBounds(t){t||(t=new Yt);const e=this.points;let i=1/0,s=-1/0,r=1/0,a=-1/0;for(let l=0,u=e.length;l<u;l+=2){const h=e[l],f=e[l+1];i=h<i?h:i,s=h>s?h:s,r=f<r?f:r,a=f>a?f:a}return t.x=i,t.width=s-i,t.y=r,t.height=a-r,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return Ct("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return Ct("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const Uu=(n,t,e,i,s,r,a)=>{const l=n-e,u=t-i,h=Math.sqrt(l*l+u*u);return h>=s-r&&h<=s+a};class Ay{constructor(t=0,e=0,i=0,s=0,r=20){this.type="roundedRectangle",this.x=t,this.y=e,this.width=i,this.height=s,this.radius=r}getBounds(t){return t||(t=new Yt),t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new Ay(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let s=t-(this.x+i),r=e-(this.y+i);const a=i*i;if(s*s+r*r<=a||(s=t-(this.x+this.width-i),s*s+r*r<=a)||(r=e-(this.y+this.height-i),s*s+r*r<=a)||(s=t-(this.x+i),s*s+r*r<=a))return!0}return!1}strokeContains(t,e,i,s=.5){const{x:r,y:a,width:l,height:u,radius:h}=this,f=i*(1-s),p=i-f,g=r+h,x=a+h,w=l-h*2,_=u-h*2,b=r+l,C=a+u;return(t>=r-f&&t<=r+p||t>=b-p&&t<=b+f)&&e>=x&&e<=x+_||(e>=a-f&&e<=a+p||e>=C-p&&e<=C+f)&&t>=g&&t<=g+w?!0:t<g&&e<x&&Uu(t,e,g,x,h,p,f)||t>b-h&&e<x&&Uu(t,e,b-h,x,h,p,f)||t>b-h&&e>C-h&&Uu(t,e,b-h,C-h,h,p,f)||t<g&&e>C-h&&Uu(t,e,g,C-h,h,p,f)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const wA={};function d4(n,t,e){let i=2166136261;for(let s=0;s<t;s++)i^=n[s].uid,i=Math.imul(i,16777619),i>>>=0;return wA[i]||f4(n,t,i,e)}function f4(n,t,e,i){const s={};let r=0;for(let l=0;l<i;l++){const u=l<t?n[l]:dt.EMPTY.source;s[r++]=u.source,s[r++]=u.style}const a=new sh(s);return wA[e]=a,a}class Z1{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}function J1(n,t){const e=n.byteLength/8|0,i=new Float64Array(n,0,e);new Float64Array(t,0,e).set(i);const r=n.byteLength-e*8;if(r>0){const a=new Uint8Array(n,e*8,r);new Uint8Array(t,e*8,r).set(a)}}const p4={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var m4=(n=>(n[n.DISABLED=0]="DISABLED",n[n.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",n[n.MASK_ACTIVE=2]="MASK_ACTIVE",n[n.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",n[n.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",n[n.NONE=5]="NONE",n))(m4||{});function tb(n,t){return t.alphaMode==="no-premultiply-alpha"&&p4[n]||n}const g4=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function x4(n){let t="";for(let e=0;e<n;++e)e>0&&(t+=`
else `),e<n-1&&(t+=`if(test == ${e}.0){}`);return t}function y4(n,t){if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);try{for(;;){const i=g4.replace(/%forloop%/gi,x4(n));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))n=n/2|0;else break}}finally{t.deleteShader(e)}return n}let qa=null;function v4(){if(qa)return qa;const n=eA();return qa=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),qa=y4(qa,n),n.getExtension("WEBGL_lose_context")?.loseContext(),qa}class _4{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const e=this.textures[t];this.textures[t]=null,this.ids[e.uid]=null}this.count=0}}class b4{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new _4,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const Bl=[];let _h=0;Rc.register({clear:()=>{if(Bl.length>0)for(const n of Bl)n&&n.destroy();Bl.length=0,_h=0}});function eb(){return _h>0?Bl[--_h]:new b4}function nb(n){Bl[_h++]=n}let gl=0;const SA=class CA{constructor(t){this.uid=ve("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],t={...CA.defaultOptions,...t},t.maxTextures||(Ct("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),t.maxTextures=v4());const{maxTextures:e,attributesInitialSize:i,indicesInitialSize:s}=t;this.attributeBuffer=new Z1(i*4),this.indexBuffer=new Uint16Array(s),this.maxTextures=e}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let t=0;t<this.batchIndex;t++)nb(this.batches[t]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t._indexStart=this.indexSize,t._attributeStart=this.attributeSize,t._batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.attributeSize*this.vertexSize}checkAndUpdateTexture(t,e){const i=t._batch.textures.ids[e._source.uid];return!i&&i!==0?!1:(t._textureId=i,t.texture=e,!0)}updateElement(t){this.dirty=!0;const e=this.attributeBuffer;t.packAsQuad?this.packQuadAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId):this.packAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId)}break(t){const e=this._elements;if(!e[this.elementStart])return;let i=eb(),s=i.textures;s.clear();const r=e[this.elementStart];let a=tb(r.blendMode,r.texture._source),l=r.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const u=this.attributeBuffer.float32View,h=this.attributeBuffer.uint32View,f=this.indexBuffer;let p=this._batchIndexSize,g=this._batchIndexStart,x="startBatch";const w=this.maxTextures;for(let _=this.elementStart;_<this.elementSize;++_){const b=e[_];e[_]=null;const M=b.texture._source,P=tb(b.blendMode,M),T=a!==P||l!==b.topology;if(M._batchTick===gl&&!T){b._textureId=M._textureBindLocation,p+=b.indexSize,b.packAsQuad?(this.packQuadAttributes(b,u,h,b._attributeStart,b._textureId),this.packQuadIndex(f,b._indexStart,b._attributeStart/this.vertexSize)):(this.packAttributes(b,u,h,b._attributeStart,b._textureId),this.packIndex(b,f,b._indexStart,b._attributeStart/this.vertexSize)),b._batch=i;continue}M._batchTick=gl,(s.count>=w||T)&&(this._finishBatch(i,g,p-g,s,a,l,t,x),x="renderBatch",g=p,a=P,l=b.topology,i=eb(),s=i.textures,s.clear(),++gl),b._textureId=M._textureBindLocation=s.count,s.ids[M.uid]=s.count,s.textures[s.count++]=M,b._batch=i,p+=b.indexSize,b.packAsQuad?(this.packQuadAttributes(b,u,h,b._attributeStart,b._textureId),this.packQuadIndex(f,b._indexStart,b._attributeStart/this.vertexSize)):(this.packAttributes(b,u,h,b._attributeStart,b._textureId),this.packIndex(b,f,b._indexStart,b._attributeStart/this.vertexSize))}s.count>0&&(this._finishBatch(i,g,p-g,s,a,l,t,x),g=p,++gl),this.elementStart=this.elementSize,this._batchIndexStart=g,this._batchIndexSize=p}_finishBatch(t,e,i,s,r,a,l,u){t.gpuBindGroup=null,t.bindGroup=null,t.action=u,t.batcher=this,t.textures=s,t.blendMode=r,t.topology=a,t.start=e,t.size=i,++gl,this.batches[this.batchIndex++]=t,l.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){t*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(t*4)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const e=Math.max(t,this.attributeBuffer.size*2),i=new Z1(e);J1(this.attributeBuffer.rawBinaryData,i.rawBinaryData),this.attributeBuffer=i}_resizeIndexBuffer(t){const e=this.indexBuffer;let i=Math.max(t,e.length*1.5);i+=i%2;const s=i>65535?new Uint32Array(i):new Uint16Array(i);if(s.BYTES_PER_ELEMENT!==e.BYTES_PER_ELEMENT)for(let r=0;r<e.length;r++)s[r]=e[r];else J1(e.buffer,s.buffer);this.indexBuffer=s}packQuadIndex(t,e,i){t[e]=i+0,t[e+1]=i+1,t[e+2]=i+2,t[e+3]=i+0,t[e+4]=i+2,t[e+5]=i+3}packIndex(t,e,i,s){const r=t.indices,a=t.indexSize,l=t.indexOffset,u=t.attributeOffset;for(let h=0;h<a;h++)e[i++]=s+r[h+l]-u}destroy(t={}){if(this.batches!==null){for(let e=0;e<this.batches.length;e++)nb(this.batches[e]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,t.shader&&(this.shader?.destroy(),this.shader=null);for(let e=0;e<this._elements.length;e++)this._elements[e]&&(this._elements[e]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};SA.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let w4=SA;var dn=(n=>(n[n.MAP_READ=1]="MAP_READ",n[n.MAP_WRITE=2]="MAP_WRITE",n[n.COPY_SRC=4]="COPY_SRC",n[n.COPY_DST=8]="COPY_DST",n[n.INDEX=16]="INDEX",n[n.VERTEX=32]="VERTEX",n[n.UNIFORM=64]="UNIFORM",n[n.STORAGE=128]="STORAGE",n[n.INDIRECT=256]="INDIRECT",n[n.QUERY_RESOLVE=512]="QUERY_RESOLVE",n[n.STATIC=1024]="STATIC",n))(dn||{});class Ql extends Ni{constructor(t){let{data:e,size:i}=t;const{usage:s,label:r,shrinkToFit:a}=t;super(),this.uid=ve("buffer"),this._resourceType="buffer",this._resourceId=ve("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,e instanceof Array&&(e=new Float32Array(e)),this._data=e,i??(i=e?.byteLength);const l=!!e;this.descriptor={size:i,usage:s,mappedAtCreation:l,label:r},this.shrinkToFit=a??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&dn.STATIC)}set static(t){t?this.descriptor.usage|=dn.STATIC:this.descriptor.usage&=~dn.STATIC}setDataWithSize(t,e,i){if(this._updateID++,this._updateSize=e*t.BYTES_PER_ELEMENT,this._data===t){i&&this.emit("update",this);return}const s=this._data;if(this._data=t,this._dataInt32=null,!s||s.length!==t.length){!this.shrinkToFit&&s&&t.byteLength<s.byteLength?i&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=ve("resource"),this.emit("change",this));return}i&&this.emit("update",this)}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function MA(n,t){if(!(n instanceof Ql)){let e=t?dn.INDEX:dn.VERTEX;n instanceof Array&&(t?(n=new Uint32Array(n),e=dn.INDEX|dn.COPY_DST):(n=new Float32Array(n),e=dn.VERTEX|dn.COPY_DST)),n=new Ql({data:n,label:t?"index-mesh-buffer":"vertex-mesh-buffer",usage:e})}return n}function S4(n,t,e){const i=n.getAttribute(t);if(!i)return e.minX=0,e.minY=0,e.maxX=0,e.maxY=0,e;const s=i.buffer.data;let r=1/0,a=1/0,l=-1/0,u=-1/0;const h=s.BYTES_PER_ELEMENT,f=(i.offset||0)/h,p=(i.stride||8)/h;for(let g=f;g<s.length;g+=p){const x=s[g],w=s[g+1];x>l&&(l=x),w>u&&(u=w),x<r&&(r=x),w<a&&(a=w)}return e.minX=r,e.minY=a,e.maxX=l,e.maxY=u,e}function C4(n){return(n instanceof Ql||Array.isArray(n)||n.BYTES_PER_ELEMENT)&&(n={buffer:n}),n.buffer=MA(n.buffer,!1),n}class M4 extends Ni{constructor(t={}){super(),this.uid=ve("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Ei,this._boundsDirty=!0;const{attributes:e,indexBuffer:i,topology:s}=t;if(this.buffers=[],this.attributes={},e)for(const r in e)this.addAttribute(r,e[r]);this.instanceCount=t.instanceCount??1,i&&this.addIndex(i),this.topology=s||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const e=this.attributes[t];return e.buffer.data.length/(e.stride/4||e.size)}return 0}addAttribute(t,e){const i=C4(e);this.buffers.indexOf(i.buffer)===-1&&(this.buffers.push(i.buffer),i.buffer.on("update",this.onBufferUpdate,this),i.buffer.on("change",this.onBufferUpdate,this)),this.attributes[t]=i}addIndex(t){this.indexBuffer=MA(t,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,S4(this,"aPosition",this._bounds)):this._bounds}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(e=>e.destroy()),this.indexBuffer?.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const P4=new Float32Array(1),A4=new Uint32Array(1);class T4 extends M4{constructor(){const e=new Ql({data:P4,label:"attribute-batch-buffer",usage:dn.VERTEX|dn.COPY_DST,shrinkToFit:!1}),i=new Ql({data:A4,label:"index-batch-buffer",usage:dn.INDEX|dn.COPY_DST,shrinkToFit:!1}),s=24;super({attributes:{aPosition:{buffer:e,format:"float32x2",stride:s,offset:0},aUV:{buffer:e,format:"float32x2",stride:s,offset:8},aColor:{buffer:e,format:"unorm8x4",stride:s,offset:16},aTextureIdAndRound:{buffer:e,format:"uint16x2",stride:s,offset:20}},indexBuffer:i})}}function ib(n,t,e){if(n)for(const i in n){const s=i.toLocaleLowerCase(),r=t[s];if(r){let a=n[i];i==="header"&&(a=a.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),e&&r.push(`//----${e}----//`),r.push(a)}else te(`${i} placement hook does not exist in shader`)}}const E4=/\{\{(.*?)\}\}/g;function sb(n){const t={};return(n.match(E4)?.map(i=>i.replace(/[{()}]/g,""))??[]).forEach(i=>{t[i]=[]}),t}function rb(n,t){let e;const i=/@in\s+([^;]+);/g;for(;(e=i.exec(n))!==null;)t.push(e[1])}function ab(n,t,e=!1){const i=[];rb(t,i),n.forEach(l=>{l.header&&rb(l.header,i)});const s=i;e&&s.sort();const r=s.map((l,u)=>`       @location(${u}) ${l},`).join(`
`);let a=t.replace(/@in\s+[^;]+;\s*/g,"");return a=a.replace("{{in}}",`
${r}
`),a}function ob(n,t){let e;const i=/@out\s+([^;]+);/g;for(;(e=i.exec(n))!==null;)t.push(e[1])}function R4(n){const e=/\b(\w+)\s*:/g.exec(n);return e?e[1]:""}function j4(n){const t=/@.*?\s+/g;return n.replace(t,"")}function k4(n,t){const e=[];ob(t,e),n.forEach(u=>{u.header&&ob(u.header,e)});let i=0;const s=e.sort().map(u=>u.indexOf("builtin")>-1?u:`@location(${i++}) ${u}`).join(`,
`),r=e.sort().map(u=>`       var ${j4(u)};`).join(`
`),a=`return VSOutput(
            ${e.sort().map(u=>` ${R4(u)}`).join(`,
`)});`;let l=t.replace(/@out\s+[^;]+;\s*/g,"");return l=l.replace("{{struct}}",`
${s}
`),l=l.replace("{{start}}",`
${r}
`),l=l.replace("{{return}}",`
${a}
`),l}function lb(n,t){let e=n;for(const i in t){const s=t[i];s.join(`
`).length?e=e.replace(`{{${i}}}`,`//-----${i} START-----//
${s.join(`
`)}
//----${i} FINISH----//`):e=e.replace(`{{${i}}}`,"")}return e}const rr=Object.create(null),Yp=new Map;let N4=0;function O4({template:n,bits:t}){const e=PA(n,t);if(rr[e])return rr[e];const{vertex:i,fragment:s}=D4(n,t);return rr[e]=AA(i,s,t),rr[e]}function z4({template:n,bits:t}){const e=PA(n,t);return rr[e]||(rr[e]=AA(n.vertex,n.fragment,t)),rr[e]}function D4(n,t){const e=t.map(a=>a.vertex).filter(a=>!!a),i=t.map(a=>a.fragment).filter(a=>!!a);let s=ab(e,n.vertex,!0);s=k4(e,s);const r=ab(i,n.fragment,!0);return{vertex:s,fragment:r}}function PA(n,t){return t.map(e=>(Yp.has(e)||Yp.set(e,N4++),Yp.get(e))).sort((e,i)=>e-i).join("-")+n.vertex+n.fragment}function AA(n,t,e){const i=sb(n),s=sb(t);return e.forEach(r=>{ib(r.vertex,i,r.name),ib(r.fragment,s,r.name)}),{vertex:lb(n,i),fragment:lb(t,s)}}const I4=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,B4=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,L4=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,F4=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,H4={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},U4={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function G4({bits:n,name:t}){const e=O4({template:{fragment:B4,vertex:I4},bits:[H4,...n]});return jc.from({name:t,vertex:{source:e.vertex,entryPoint:"main"},fragment:{source:e.fragment,entryPoint:"main"}})}function V4({bits:n,name:t}){return new wy({name:t,...z4({template:{vertex:L4,fragment:F4},bits:[U4,...n]})})}const W4={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},Y4={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},qp={};function q4(n){const t=[];if(n===1)t.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),t.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let e=0;for(let i=0;i<n;i++)t.push(`@group(1) @binding(${e++}) var textureSource${i+1}: texture_2d<f32>;`),t.push(`@group(1) @binding(${e++}) var textureSampler${i+1}: sampler;`)}return t.join(`
`)}function X4(n){const t=[];if(n===1)t.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{t.push("switch vTextureId {");for(let e=0;e<n;e++)e===n-1?t.push("  default:{"):t.push(`  case ${e}:{`),t.push(`      outColor = textureSampleGrad(textureSource${e+1}, textureSampler${e+1}, vUV, uvDx, uvDy);`),t.push("      break;}");t.push("}")}return t.join(`
`)}function $4(n){return qp[n]||(qp[n]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${q4(n)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${X4(n)}
            `}}),qp[n]}const Xp={};function Q4(n){const t=[];for(let e=0;e<n;e++)e>0&&t.push("else"),e<n-1&&t.push(`if(vTextureId < ${e}.5)`),t.push("{"),t.push(`	outColor = texture(uTextures[${e}], vUV);`),t.push("}");return t.join(`
`)}function K4(n){return Xp[n]||(Xp[n]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${n}];

            `,main:`

                ${Q4(n)}
            `}}),Xp[n]}const Z4={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},J4={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},cb={};function tI(n){let t=cb[n];if(t)return t;const e=new Int32Array(n);for(let i=0;i<n;i++)e[i]=i;return t=cb[n]=new aA({uTextures:{value:e,type:"i32",size:n}},{isStatic:!0}),t}class ub extends ud{constructor(t){const e=V4({name:"batch",bits:[Y4,K4(t),J4]}),i=G4({name:"batch",bits:[W4,$4(t),Z4]});super({glProgram:e,gpuProgram:i,resources:{batchSamplers:tI(t)}}),this.maxTextures=t}}let xl=null;const TA=class EA extends w4{constructor(t){super(t),this.geometry=new T4,this.name=EA.extension.name,this.vertexSize=6,xl??(xl=new ub(t.maxTextures)),this.shader=xl}packAttributes(t,e,i,s,r){const a=r<<16|t.roundPixels&65535,l=t.transform,u=l.a,h=l.b,f=l.c,p=l.d,g=l.tx,x=l.ty,{positions:w,uvs:_}=t,b=t.color,C=t.attributeOffset,M=C+t.attributeSize;for(let P=C;P<M;P++){const T=P*2,E=w[T],R=w[T+1];e[s++]=u*E+f*R+g,e[s++]=p*R+h*E+x,e[s++]=_[T],e[s++]=_[T+1],i[s++]=b,i[s++]=a}}packQuadAttributes(t,e,i,s,r){const a=t.texture,l=t.transform,u=l.a,h=l.b,f=l.c,p=l.d,g=l.tx,x=l.ty,w=t.bounds,_=w.maxX,b=w.minX,C=w.maxY,M=w.minY,P=a.uvs,T=t.color,E=r<<16|t.roundPixels&65535;e[s+0]=u*b+f*M+g,e[s+1]=p*M+h*b+x,e[s+2]=P.x0,e[s+3]=P.y0,i[s+4]=T,i[s+5]=E,e[s+6]=u*_+f*M+g,e[s+7]=p*M+h*_+x,e[s+8]=P.x1,e[s+9]=P.y1,i[s+10]=T,i[s+11]=E,e[s+12]=u*_+f*C+g,e[s+13]=p*C+h*_+x,e[s+14]=P.x2,e[s+15]=P.y2,i[s+16]=T,i[s+17]=E,e[s+18]=u*b+f*C+g,e[s+19]=p*C+h*b+x,e[s+20]=P.x3,e[s+21]=P.y3,i[s+22]=T,i[s+23]=E}_updateMaxTextures(t){this.shader.maxTextures!==t&&(xl=new ub(t),this.shader=xl)}destroy(){this.shader=null,super.destroy()}};TA.extension={type:[lt.Batcher],name:"default"};let eI=TA;function nI(n,t,e,i,s,r,a,l=null){let u=0;e*=t,s*=r;const h=l.a,f=l.b,p=l.c,g=l.d,x=l.tx,w=l.ty;for(;u<a;){const _=n[e],b=n[e+1];i[s]=h*_+p*b+x,i[s+1]=f*_+g*b+w,s+=r,e+=t,u++}}function iI(n,t,e,i){let s=0;for(t*=e;s<i;)n[t]=0,n[t+1]=0,t+=e,s++}function RA(n,t,e,i,s){const r=t.a,a=t.b,l=t.c,u=t.d,h=t.tx,f=t.ty;e||(e=0),i||(i=2),s||(s=n.length/i-e);let p=e*i;for(let g=0;g<s;g++){const x=n[p],w=n[p+1];n[p]=r*x+l*w+h,n[p+1]=a*x+u*w+f,p+=i}}const sI=new Tt;class jA{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const t=this.baseColor,e=t>>16|t&65280|(t&255)<<16,i=this.renderable;return i?zP(e,i.groupColor)+(this.alpha*i.groupAlpha*255<<24):e+(this.alpha*255<<24)}get transform(){return this.renderable?.groupTransform||sI}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData,t.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const Kl={extension:{type:lt.ShapeBuilder,name:"circle"},build(n,t){let e,i,s,r,a,l;if(n.type==="circle"){const T=n;if(a=l=T.radius,a<=0)return!1;e=T.x,i=T.y,s=r=0}else if(n.type==="ellipse"){const T=n;if(a=T.halfWidth,l=T.halfHeight,a<=0||l<=0)return!1;e=T.x,i=T.y,s=r=0}else{const T=n,E=T.width/2,R=T.height/2;e=T.x+E,i=T.y+R,a=l=Math.max(0,Math.min(T.radius,Math.min(E,R))),s=E-a,r=R-l}if(s<0||r<0)return!1;const u=Math.ceil(2.3*Math.sqrt(a+l)),h=u*8+(s?4:0)+(r?4:0);if(h===0)return!1;if(u===0)return t[0]=t[6]=e+s,t[1]=t[3]=i+r,t[2]=t[4]=e-s,t[5]=t[7]=i-r,!0;let f=0,p=u*4+(s?2:0)+2,g=p,x=h,w=s+a,_=r,b=e+w,C=e-w,M=i+_;if(t[f++]=b,t[f++]=M,t[--p]=M,t[--p]=C,r){const T=i-_;t[g++]=C,t[g++]=T,t[--x]=T,t[--x]=b}for(let T=1;T<u;T++){const E=Math.PI/2*(T/u),R=s+Math.cos(E)*a,N=r+Math.sin(E)*l,O=e+R,k=e-R,B=i+N,I=i-N;t[f++]=O,t[f++]=B,t[--p]=B,t[--p]=k,t[g++]=k,t[g++]=I,t[--x]=I,t[--x]=O}w=s,_=r+l,b=e+w,C=e-w,M=i+_;const P=i-_;return t[f++]=b,t[f++]=M,t[--x]=P,t[--x]=b,s&&(t[f++]=C,t[f++]=M,t[--x]=P,t[--x]=C),!0},triangulate(n,t,e,i,s,r){if(n.length===0)return;let a=0,l=0;for(let f=0;f<n.length;f+=2)a+=n[f],l+=n[f+1];a/=n.length/2,l/=n.length/2;let u=i;t[u*e]=a,t[u*e+1]=l;const h=u++;for(let f=0;f<n.length;f+=2)t[u*e]=n[f],t[u*e+1]=n[f+1],f>0&&(s[r++]=u,s[r++]=h,s[r++]=u-1),u++;s[r++]=h+1,s[r++]=h,s[r++]=u-1}},rI={...Kl,extension:{...Kl.extension,name:"ellipse"}},aI={...Kl,extension:{...Kl.extension,name:"roundedRectangle"}},kA=1e-4,hb=1e-4;function oI(n){const t=n.length;if(t<6)return 1;let e=0;for(let i=0,s=n[t-2],r=n[t-1];i<t;i+=2){const a=n[i],l=n[i+1];e+=(a-s)*(l+r),s=a,r=l}return e<0?-1:1}function db(n,t,e,i,s,r,a,l){const u=n-e*s,h=t-i*s,f=n+e*r,p=t+i*r;let g,x;a?(g=i,x=-e):(g=-i,x=e);const w=u+g,_=h+x,b=f+g,C=p+x;return l.push(w,_),l.push(b,C),2}function Wr(n,t,e,i,s,r,a,l){const u=e-n,h=i-t;let f=Math.atan2(u,h),p=Math.atan2(s-n,r-t);l&&f<p?f+=Math.PI*2:!l&&f>p&&(p+=Math.PI*2);let g=f;const x=p-f,w=Math.abs(x),_=Math.sqrt(u*u+h*h),b=(15*w*Math.sqrt(_)/Math.PI>>0)+1,C=x/b;if(g+=C,l){a.push(n,t),a.push(e,i);for(let M=1,P=g;M<b;M++,P+=C)a.push(n,t),a.push(n+Math.sin(P)*_,t+Math.cos(P)*_);a.push(n,t),a.push(s,r)}else{a.push(e,i),a.push(n,t);for(let M=1,P=g;M<b;M++,P+=C)a.push(n+Math.sin(P)*_,t+Math.cos(P)*_),a.push(n,t);a.push(s,r),a.push(n,t)}return b*2}function lI(n,t,e,i,s,r){const a=kA;if(n.length===0)return;const l=t;let u=l.alignment;if(t.alignment!==.5){let V=oI(n);u=(u-.5)*V+.5}const h=new Dt(n[0],n[1]),f=new Dt(n[n.length-2],n[n.length-1]),p=i,g=Math.abs(h.x-f.x)<a&&Math.abs(h.y-f.y)<a;if(p){n=n.slice(),g&&(n.pop(),n.pop(),f.set(n[n.length-2],n[n.length-1]));const V=(h.x+f.x)*.5,Z=(f.y+h.y)*.5;n.unshift(V,Z),n.push(V,Z)}const x=s,w=n.length/2;let _=n.length;const b=x.length/2,C=l.width/2,M=C*C,P=l.miterLimit*l.miterLimit;let T=n[0],E=n[1],R=n[2],N=n[3],O=0,k=0,B=-(E-N),I=T-R,X=0,q=0,U=Math.sqrt(B*B+I*I);B/=U,I/=U,B*=C,I*=C;const Y=u,D=(1-Y)*2,H=Y*2;p||(l.cap==="round"?_+=Wr(T-B*(D-H)*.5,E-I*(D-H)*.5,T-B*D,E-I*D,T+B*H,E+I*H,x,!0)+2:l.cap==="square"&&(_+=db(T,E,B,I,D,H,!0,x))),x.push(T-B*D,E-I*D),x.push(T+B*H,E+I*H);for(let V=1;V<w-1;++V){T=n[(V-1)*2],E=n[(V-1)*2+1],R=n[V*2],N=n[V*2+1],O=n[(V+1)*2],k=n[(V+1)*2+1],B=-(E-N),I=T-R,U=Math.sqrt(B*B+I*I),B/=U,I/=U,B*=C,I*=C,X=-(N-k),q=R-O,U=Math.sqrt(X*X+q*q),X/=U,q/=U,X*=C,q*=C;const Z=R-T,gt=E-N,tt=R-O,ft=k-N,xt=Z*tt+gt*ft,pt=gt*tt-ft*Z,Kt=pt<0;if(Math.abs(pt)<.001*Math.abs(xt)){x.push(R-B*D,N-I*D),x.push(R+B*H,N+I*H),xt>=0&&(l.join==="round"?_+=Wr(R,N,R-B*D,N-I*D,R-X*D,N-q*D,x,!1)+4:_+=2,x.push(R-X*H,N-q*H),x.push(R+X*D,N+q*D));continue}const Rt=(-B+T)*(-I+N)-(-B+R)*(-I+E),be=(-X+O)*(-q+N)-(-X+R)*(-q+k),we=(Z*be-tt*Rt)/pt,wn=(ft*Rt-gt*be)/pt,gi=(we-R)*(we-R)+(wn-N)*(wn-N),ct=R+(we-R)*D,It=N+(wn-N)*D,Mt=R-(we-R)*H,qt=N-(wn-N)*H,je=Math.min(Z*Z+gt*gt,tt*tt+ft*ft),Oe=Kt?D:H,rs=je+Oe*Oe*M;gi<=rs?l.join==="bevel"||gi/M>P?(Kt?(x.push(ct,It),x.push(R+B*H,N+I*H),x.push(ct,It),x.push(R+X*H,N+q*H)):(x.push(R-B*D,N-I*D),x.push(Mt,qt),x.push(R-X*D,N-q*D),x.push(Mt,qt)),_+=2):l.join==="round"?Kt?(x.push(ct,It),x.push(R+B*H,N+I*H),_+=Wr(R,N,R+B*H,N+I*H,R+X*H,N+q*H,x,!0)+4,x.push(ct,It),x.push(R+X*H,N+q*H)):(x.push(R-B*D,N-I*D),x.push(Mt,qt),_+=Wr(R,N,R-B*D,N-I*D,R-X*D,N-q*D,x,!1)+4,x.push(R-X*D,N-q*D),x.push(Mt,qt)):(x.push(ct,It),x.push(Mt,qt)):(x.push(R-B*D,N-I*D),x.push(R+B*H,N+I*H),l.join==="round"?Kt?_+=Wr(R,N,R+B*H,N+I*H,R+X*H,N+q*H,x,!0)+2:_+=Wr(R,N,R-B*D,N-I*D,R-X*D,N-q*D,x,!1)+2:l.join==="miter"&&gi/M<=P&&(Kt?(x.push(Mt,qt),x.push(Mt,qt)):(x.push(ct,It),x.push(ct,It)),_+=2),x.push(R-X*D,N-q*D),x.push(R+X*H,N+q*H),_+=2)}T=n[(w-2)*2],E=n[(w-2)*2+1],R=n[(w-1)*2],N=n[(w-1)*2+1],B=-(E-N),I=T-R,U=Math.sqrt(B*B+I*I),B/=U,I/=U,B*=C,I*=C,x.push(R-B*D,N-I*D),x.push(R+B*H,N+I*H),p||(l.cap==="round"?_+=Wr(R-B*(D-H)*.5,N-I*(D-H)*.5,R-B*D,N-I*D,R+B*H,N+I*H,x,!1)+2:l.cap==="square"&&(_+=db(R,N,B,I,D,H,!1,x)));const J=hb*hb;for(let V=b;V<_+b-2;++V)T=x[V*2],E=x[V*2+1],R=x[(V+1)*2],N=x[(V+1)*2+1],O=x[(V+2)*2],k=x[(V+2)*2+1],!(Math.abs(T*(N-k)+R*(k-E)+O*(E-N))<J)&&r.push(V,V+1,V+2)}function cI(n,t,e,i){const s=kA;if(n.length===0)return;const r=n[0],a=n[1],l=n[n.length-2],u=n[n.length-1],h=t||Math.abs(r-l)<s&&Math.abs(a-u)<s,f=e,p=n.length/2,g=f.length/2;for(let x=0;x<p;x++)f.push(n[x*2]),f.push(n[x*2+1]);for(let x=0;x<p-1;x++)i.push(g+x,g+x+1);h&&i.push(g+p-1,g)}function NA(n,t,e,i,s,r,a){const l=$D(n,t,2);if(!l)return;for(let h=0;h<l.length;h+=3)r[a++]=l[h]+s,r[a++]=l[h+1]+s,r[a++]=l[h+2]+s;let u=s*i;for(let h=0;h<n.length;h+=2)e[u]=n[h],e[u+1]=n[h+1],u+=i}const uI=[],hI={extension:{type:lt.ShapeBuilder,name:"polygon"},build(n,t){for(let e=0;e<n.points.length;e++)t[e]=n.points[e];return!0},triangulate(n,t,e,i,s,r){NA(n,uI,t,e,i,s,r)}},dI={extension:{type:lt.ShapeBuilder,name:"rectangle"},build(n,t){const e=n,i=e.x,s=e.y,r=e.width,a=e.height;return r>0&&a>0?(t[0]=i,t[1]=s,t[2]=i+r,t[3]=s,t[4]=i+r,t[5]=s+a,t[6]=i,t[7]=s+a,!0):!1},triangulate(n,t,e,i,s,r){let a=0;i*=e,t[i+a]=n[0],t[i+a+1]=n[1],a+=e,t[i+a]=n[2],t[i+a+1]=n[3],a+=e,t[i+a]=n[6],t[i+a+1]=n[7],a+=e,t[i+a]=n[4],t[i+a+1]=n[5],a+=e;const l=i/e;s[r++]=l,s[r++]=l+1,s[r++]=l+2,s[r++]=l+1,s[r++]=l+3,s[r++]=l+2}},fI={extension:{type:lt.ShapeBuilder,name:"triangle"},build(n,t){return t[0]=n.x,t[1]=n.y,t[2]=n.x2,t[3]=n.y2,t[4]=n.x3,t[5]=n.y3,!0},triangulate(n,t,e,i,s,r){let a=0;i*=e,t[i+a]=n[0],t[i+a+1]=n[1],a+=e,t[i+a]=n[2],t[i+a+1]=n[3],a+=e,t[i+a]=n[4],t[i+a+1]=n[5];const l=i/e;s[r++]=l,s[r++]=l+1,s[r++]=l+2}},pI=new Tt,mI=new Yt;function gI(n,t,e,i){const s=t.matrix?n.copyFrom(t.matrix).invert():n.identity();if(t.textureSpace==="local"){const a=e.getBounds(mI);t.width&&a.pad(t.width);const{x:l,y:u}=a,h=1/a.width,f=1/a.height,p=-l*h,g=-u*f,x=s.a,w=s.b,_=s.c,b=s.d;s.a*=h,s.b*=h,s.c*=f,s.d*=f,s.tx=p*x+g*_+s.tx,s.ty=p*w+g*b+s.ty}else s.translate(t.texture.frame.x,t.texture.frame.y),s.scale(1/t.texture.source.width,1/t.texture.source.height);const r=t.texture.source.style;return!(t.fill instanceof js)&&r.addressMode==="clamp-to-edge"&&(r.addressMode="repeat",r.update()),i&&s.append(pI.copyFrom(i).invert()),s}const dd={};Ne.handleByMap(lt.ShapeBuilder,dd);Ne.add(dI,hI,fI,Kl,rI,aI);const xI=new Yt,yI=new Tt;function vI(n,t){const{geometryData:e,batches:i}=t;i.length=0,e.indices.length=0,e.vertices.length=0,e.uvs.length=0;for(let s=0;s<n.instructions.length;s++){const r=n.instructions[s];if(r.action==="texture")_I(r.data,i,e);else if(r.action==="fill"||r.action==="stroke"){const a=r.action==="stroke",l=r.data.path.shapePath,u=r.data.style,h=r.data.hole;a&&h&&fb(h.shapePath,u,!0,i,e),h&&(l.shapePrimitives[l.shapePrimitives.length-1].holes=h.shapePath.shapePrimitives),fb(l,u,a,i,e)}}}function _I(n,t,e){const i=[],s=dd.rectangle,r=xI;r.x=n.dx,r.y=n.dy,r.width=n.dw,r.height=n.dh;const a=n.transform;if(!s.build(r,i))return;const{vertices:l,uvs:u,indices:h}=e,f=h.length,p=l.length/2;a&&RA(i,a),s.triangulate(i,l,2,p,h,f);const g=n.image,x=g.uvs;u.push(x.x0,x.y0,x.x1,x.y1,x.x3,x.y3,x.x2,x.y2);const w=di.get(jA);w.indexOffset=f,w.indexSize=h.length-f,w.attributeOffset=p,w.attributeSize=l.length/2-p,w.baseColor=n.style,w.alpha=n.alpha,w.texture=g,w.geometryData=e,t.push(w)}function fb(n,t,e,i,s){const{vertices:r,uvs:a,indices:l}=s;n.shapePrimitives.forEach(({shape:u,transform:h,holes:f})=>{const p=[],g=dd[u.type];if(!g.build(u,p))return;const x=l.length,w=r.length/2;let _="triangle-list";if(h&&RA(p,h),e){const P=u.closePath??!0,T=t;T.pixelLine?(cI(p,P,r,l),_="line-list"):lI(p,T,!1,P,r,l)}else if(f){const P=[],T=p.slice();bI(f).forEach(R=>{P.push(T.length/2),T.push(...R)}),NA(T,P,r,2,w,l,x)}else g.triangulate(p,r,2,w,l,x);const b=a.length/2,C=t.texture;if(C!==dt.WHITE){const P=gI(yI,t,u,h);nI(r,2,w,a,b,2,r.length/2-w,P)}else iI(a,b,2,r.length/2-w);const M=di.get(jA);M.indexOffset=x,M.indexSize=l.length-x,M.attributeOffset=w,M.attributeSize=r.length/2-w,M.baseColor=t.color,M.alpha=t.alpha,M.texture=C,M.geometryData=s,M.topology=_,i.push(M)})}function bI(n){const t=[];for(let e=0;e<n.length;e++){const i=n[e].shape,s=[];dd[i.type].build(i,s)&&t.push(s)}return t}class wI{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class SI{constructor(){this.instructions=new LP}init(t){const e=t.maxTextures;this.batcher?this.batcher._updateMaxTextures(e):this.batcher=new eI({maxTextures:e}),this.instructions.reset()}get geometry(){return Ct(yz,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const Ty=class Zg{constructor(t){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._renderer=t,t.renderableGC.addManagedHash(this,"_gpuContextHash"),t.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(t){Zg.defaultOptions.bezierSmoothness=t?.bezierSmoothness??Zg.defaultOptions.bezierSmoothness}getContextRenderData(t){return this._graphicsDataContextHash[t.uid]||this._initContextRenderData(t)}updateGpuContext(t){let e=this._gpuContextHash[t.uid]||this._initContext(t);if(t.dirty){e?this._cleanGraphicsContextData(t):e=this._initContext(t),vI(t,e);const i=t.batchMode;t.customShader||i==="no-batch"?e.isBatchable=!1:i==="auto"?e.isBatchable=e.geometryData.vertices.length<400:e.isBatchable=!0,t.dirty=!1}return e}getGpuContext(t){return this._gpuContextHash[t.uid]||this._initContext(t)}_initContextRenderData(t){const e=di.get(SI,{maxTextures:this._renderer.limits.maxBatchableTextures}),{batches:i,geometryData:s}=this._gpuContextHash[t.uid],r=s.vertices.length,a=s.indices.length;for(let f=0;f<i.length;f++)i[f].applyTransform=!1;const l=e.batcher;l.ensureAttributeBuffer(r),l.ensureIndexBuffer(a),l.begin();for(let f=0;f<i.length;f++){const p=i[f];l.add(p)}l.finish(e.instructions);const u=l.geometry;u.indexBuffer.setDataWithSize(l.indexBuffer,l.indexSize,!0),u.buffers[0].setDataWithSize(l.attributeBuffer.float32View,l.attributeSize,!0);const h=l.batches;for(let f=0;f<h.length;f++){const p=h[f];p.bindGroup=d4(p.textures.textures,p.textures.count,this._renderer.limits.maxBatchableTextures)}return this._graphicsDataContextHash[t.uid]=e,e}_initContext(t){const e=new wI;return e.context=t,this._gpuContextHash[t.uid]=e,t.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]}onGraphicsContextDestroy(t){this._cleanGraphicsContextData(t),t.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]=null}_cleanGraphicsContextData(t){const e=this._gpuContextHash[t.uid];e.isBatchable||this._graphicsDataContextHash[t.uid]&&(di.return(this.getContextRenderData(t)),this._graphicsDataContextHash[t.uid]=null),e.batches&&e.batches.forEach(i=>{di.return(i)})}destroy(){for(const t in this._gpuContextHash)this._gpuContextHash[t]&&this.onGraphicsContextDestroy(this._gpuContextHash[t].context);this._gpuContextHash={},this._graphicsDataContextHash={},this._renderer=null}};Ty.extension={type:[lt.WebGLSystem,lt.WebGPUSystem,lt.CanvasSystem],name:"graphicsContext"};Ty.defaultOptions={bezierSmoothness:.5};let OA=Ty;const CI=8,Gu=11920929e-14,MI=1;function zA(n,t,e,i,s,r,a,l,u,h){const p=Math.min(.99,Math.max(0,h??OA.defaultOptions.bezierSmoothness));let g=(MI-p)/1;return g*=g,PI(t,e,i,s,r,a,l,u,n,g),n}function PI(n,t,e,i,s,r,a,l,u,h){Jg(n,t,e,i,s,r,a,l,u,h,0),u.push(a,l)}function Jg(n,t,e,i,s,r,a,l,u,h,f){if(f>CI)return;const p=(n+e)/2,g=(t+i)/2,x=(e+s)/2,w=(i+r)/2,_=(s+a)/2,b=(r+l)/2,C=(p+x)/2,M=(g+w)/2,P=(x+_)/2,T=(w+b)/2,E=(C+P)/2,R=(M+T)/2;if(f>0){let N=a-n,O=l-t;const k=Math.abs((e-a)*O-(i-l)*N),B=Math.abs((s-a)*O-(r-l)*N);if(k>Gu&&B>Gu){if((k+B)*(k+B)<=h*(N*N+O*O)){u.push(E,R);return}}else if(k>Gu){if(k*k<=h*(N*N+O*O)){u.push(E,R);return}}else if(B>Gu){if(B*B<=h*(N*N+O*O)){u.push(E,R);return}}else if(N=E-(n+a)/2,O=R-(t+l)/2,N*N+O*O<=h){u.push(E,R);return}}Jg(n,t,p,g,C,M,E,R,u,h,f+1),Jg(E,R,P,T,_,b,a,l,u,h,f+1)}const AI=8,TI=11920929e-14,EI=1;function RI(n,t,e,i,s,r,a,l){const h=Math.min(.99,Math.max(0,l??OA.defaultOptions.bezierSmoothness));let f=(EI-h)/1;return f*=f,jI(t,e,i,s,r,a,n,f),n}function jI(n,t,e,i,s,r,a,l){tx(a,n,t,e,i,s,r,l,0),a.push(s,r)}function tx(n,t,e,i,s,r,a,l,u){if(u>AI)return;const h=(t+i)/2,f=(e+s)/2,p=(i+r)/2,g=(s+a)/2,x=(h+p)/2,w=(f+g)/2;let _=r-t,b=a-e;const C=Math.abs((i-r)*b-(s-a)*_);if(C>TI){if(C*C<=l*(_*_+b*b)){n.push(x,w);return}}else if(_=x-(t+r)/2,b=w-(e+a)/2,_*_+b*b<=l){n.push(x,w);return}tx(n,t,e,h,f,x,w,l,u+1),tx(n,x,w,p,g,r,a,l,u+1)}function DA(n,t,e,i,s,r,a,l){let u=Math.abs(s-r);(!a&&s>r||a&&r>s)&&(u=2*Math.PI-u),l||(l=Math.max(6,Math.floor(6*Math.pow(i,1/3)*(u/Math.PI)))),l=Math.max(l,3);let h=u/l,f=s;h*=a?-1:1;for(let p=0;p<l+1;p++){const g=Math.cos(f),x=Math.sin(f),w=t+g*i,_=e+x*i;n.push(w,_),f+=h}}function kI(n,t,e,i,s,r){const a=n[n.length-2],u=n[n.length-1]-e,h=a-t,f=s-e,p=i-t,g=Math.abs(u*p-h*f);if(g<1e-8||r===0){(n[n.length-2]!==t||n[n.length-1]!==e)&&n.push(t,e);return}const x=u*u+h*h,w=f*f+p*p,_=u*f+h*p,b=r*Math.sqrt(x)/g,C=r*Math.sqrt(w)/g,M=b*_/x,P=C*_/w,T=b*p+C*h,E=b*f+C*u,R=h*(C+M),N=u*(C+M),O=p*(b+P),k=f*(b+P),B=Math.atan2(N-E,R-T),I=Math.atan2(k-E,O-T);DA(n,T+t,E+e,r,B,I,h*f>p*u)}const Ll=Math.PI*2,$p={centerX:0,centerY:0,ang1:0,ang2:0},Qp=({x:n,y:t},e,i,s,r,a,l,u)=>{n*=e,t*=i;const h=s*n-r*t,f=r*n+s*t;return u.x=h+a,u.y=f+l,u};function NI(n,t){const e=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),i=t===1.5707963267948966?.551915024494:e,s=Math.cos(n),r=Math.sin(n),a=Math.cos(n+t),l=Math.sin(n+t);return[{x:s-r*i,y:r+s*i},{x:a+l*i,y:l-a*i},{x:a,y:l}]}const pb=(n,t,e,i)=>{const s=n*i-t*e<0?-1:1;let r=n*e+t*i;return r>1&&(r=1),r<-1&&(r=-1),s*Math.acos(r)},OI=(n,t,e,i,s,r,a,l,u,h,f,p,g)=>{const x=Math.pow(s,2),w=Math.pow(r,2),_=Math.pow(f,2),b=Math.pow(p,2);let C=x*w-x*b-w*_;C<0&&(C=0),C/=x*b+w*_,C=Math.sqrt(C)*(a===l?-1:1);const M=C*s/r*p,P=C*-r/s*f,T=h*M-u*P+(n+e)/2,E=u*M+h*P+(t+i)/2,R=(f-M)/s,N=(p-P)/r,O=(-f-M)/s,k=(-p-P)/r,B=pb(1,0,R,N);let I=pb(R,N,O,k);l===0&&I>0&&(I-=Ll),l===1&&I<0&&(I+=Ll),g.centerX=T,g.centerY=E,g.ang1=B,g.ang2=I};function zI(n,t,e,i,s,r,a,l=0,u=0,h=0){if(r===0||a===0)return;const f=Math.sin(l*Ll/360),p=Math.cos(l*Ll/360),g=p*(t-i)/2+f*(e-s)/2,x=-f*(t-i)/2+p*(e-s)/2;if(g===0&&x===0)return;r=Math.abs(r),a=Math.abs(a);const w=Math.pow(g,2)/Math.pow(r,2)+Math.pow(x,2)/Math.pow(a,2);w>1&&(r*=Math.sqrt(w),a*=Math.sqrt(w)),OI(t,e,i,s,r,a,u,h,f,p,g,x,$p);let{ang1:_,ang2:b}=$p;const{centerX:C,centerY:M}=$p;let P=Math.abs(b)/(Ll/4);Math.abs(1-P)<1e-7&&(P=1);const T=Math.max(Math.ceil(P),1);b/=T;let E=n[n.length-2],R=n[n.length-1];const N={x:0,y:0};for(let O=0;O<T;O++){const k=NI(_,b),{x:B,y:I}=Qp(k[0],r,a,p,f,C,M,N),{x:X,y:q}=Qp(k[1],r,a,p,f,C,M,N),{x:U,y:Y}=Qp(k[2],r,a,p,f,C,M,N);zA(n,E,R,B,I,X,q,U,Y),E=U,R=Y,_+=b}}function DI(n,t,e){const i=(a,l)=>{const u=l.x-a.x,h=l.y-a.y,f=Math.sqrt(u*u+h*h),p=u/f,g=h/f;return{len:f,nx:p,ny:g}},s=(a,l)=>{a===0?n.moveTo(l.x,l.y):n.lineTo(l.x,l.y)};let r=t[t.length-1];for(let a=0;a<t.length;a++){const l=t[a%t.length],u=l.radius??e;if(u<=0){s(a,l),r=l;continue}const h=t[(a+1)%t.length],f=i(l,r),p=i(l,h);if(f.len<1e-4||p.len<1e-4){s(a,l),r=l;continue}let g=Math.asin(f.nx*p.ny-f.ny*p.nx),x=1,w=!1;f.nx*p.nx-f.ny*-p.ny<0?g<0?g=Math.PI+g:(g=Math.PI-g,x=-1,w=!0):g>0&&(x=-1,w=!0);const _=g/2;let b,C=Math.abs(Math.cos(_)*u/Math.sin(_));C>Math.min(f.len/2,p.len/2)?(C=Math.min(f.len/2,p.len/2),b=Math.abs(C*Math.sin(_)/Math.cos(_))):b=u;const M=l.x+p.nx*C+-p.ny*b*x,P=l.y+p.ny*C+p.nx*b*x,T=Math.atan2(f.ny,f.nx)+Math.PI/2*x,E=Math.atan2(p.ny,p.nx)-Math.PI/2*x;a===0&&n.moveTo(M+Math.cos(T)*b,P+Math.sin(T)*b),n.arc(M,P,b,T,E,w),r=l}}function II(n,t,e,i){const s=(l,u)=>Math.sqrt((l.x-u.x)**2+(l.y-u.y)**2),r=(l,u,h)=>({x:l.x+(u.x-l.x)*h,y:l.y+(u.y-l.y)*h}),a=t.length;for(let l=0;l<a;l++){const u=t[(l+1)%a],h=u.radius??e;if(h<=0){l===0?n.moveTo(u.x,u.y):n.lineTo(u.x,u.y);continue}const f=t[l],p=t[(l+2)%a],g=s(f,u);let x;if(g<1e-4)x=u;else{const b=Math.min(g/2,h);x=r(u,f,b/g)}const w=s(p,u);let _;if(w<1e-4)_=u;else{const b=Math.min(w/2,h);_=r(u,p,b/w)}l===0?n.moveTo(x.x,x.y):n.lineTo(x.x,x.y),n.quadraticCurveTo(u.x,u.y,_.x,_.y,i)}}const BI=new Yt;class LI{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Ei,this._graphicsPath2D=t,this.signed=t.checkForHoles}moveTo(t,e){return this.startPoly(t,e),this}lineTo(t,e){this._ensurePoly();const i=this._currentPoly.points,s=i[i.length-2],r=i[i.length-1];return(s!==t||r!==e)&&i.push(t,e),this}arc(t,e,i,s,r,a){this._ensurePoly(!1);const l=this._currentPoly.points;return DA(l,t,e,i,s,r,a),this}arcTo(t,e,i,s,r){this._ensurePoly();const a=this._currentPoly.points;return kI(a,t,e,i,s,r),this}arcToSvg(t,e,i,s,r,a,l){const u=this._currentPoly.points;return zI(u,this._currentPoly.lastX,this._currentPoly.lastY,a,l,t,e,i,s,r),this}bezierCurveTo(t,e,i,s,r,a,l){this._ensurePoly();const u=this._currentPoly;return zA(this._currentPoly.points,u.lastX,u.lastY,t,e,i,s,r,a,l),this}quadraticCurveTo(t,e,i,s,r){this._ensurePoly();const a=this._currentPoly;return RI(this._currentPoly.points,a.lastX,a.lastY,t,e,i,s,r),this}closePath(){return this.endPoly(!0),this}addPath(t,e){this.endPoly(),e&&!e.isIdentity()&&(t=t.clone(!0),t.transform(e));const i=this.shapePrimitives,s=i.length;for(let r=0;r<t.instructions.length;r++){const a=t.instructions[r];this[a.action](...a.data)}if(t.checkForHoles&&i.length-s>1){let r=null;for(let a=s;a<i.length;a++){const l=i[a];if(l.shape.type==="polygon"){const u=l.shape,h=r?.shape;h&&h.containsPolygon(u)?(r.holes||(r.holes=[]),r.holes.push(l),i.copyWithin(a,a+1),i.length--,a--):r=l}}}return this}finish(t=!1){this.endPoly(t)}rect(t,e,i,s,r){return this.drawShape(new Yt(t,e,i,s),r),this}circle(t,e,i,s){return this.drawShape(new My(t,e,i),s),this}poly(t,e,i){const s=new so(t);return s.closePath=e,this.drawShape(s,i),this}regularPoly(t,e,i,s,r=0,a){s=Math.max(s|0,3);const l=-1*Math.PI/2+r,u=Math.PI*2/s,h=[];for(let f=0;f<s;f++){const p=l-f*u;h.push(t+i*Math.cos(p),e+i*Math.sin(p))}return this.poly(h,!0,a),this}roundPoly(t,e,i,s,r,a=0,l){if(s=Math.max(s|0,3),r<=0)return this.regularPoly(t,e,i,s,a);const u=i*Math.sin(Math.PI/s)-.001;r=Math.min(r,u);const h=-1*Math.PI/2+a,f=Math.PI*2/s,p=(s-2)*Math.PI/s/2;for(let g=0;g<s;g++){const x=g*f+h,w=t+i*Math.cos(x),_=e+i*Math.sin(x),b=x+Math.PI+p,C=x-Math.PI-p,M=w+r*Math.cos(b),P=_+r*Math.sin(b),T=w+r*Math.cos(C),E=_+r*Math.sin(C);g===0?this.moveTo(M,P):this.lineTo(M,P),this.quadraticCurveTo(w,_,T,E,l)}return this.closePath()}roundShape(t,e,i=!1,s){return t.length<3?this:(i?II(this,t,e,s):DI(this,t,e),this.closePath())}filletRect(t,e,i,s,r){if(r===0)return this.rect(t,e,i,s);const a=Math.min(i,s)/2,l=Math.min(a,Math.max(-a,r)),u=t+i,h=e+s,f=l<0?-l:0,p=Math.abs(l);return this.moveTo(t,e+p).arcTo(t+f,e+f,t+p,e,p).lineTo(u-p,e).arcTo(u-f,e+f,u,e+p,p).lineTo(u,h-p).arcTo(u-f,h-f,t+i-p,h,p).lineTo(t+p,h).arcTo(t+f,h-f,t,h-p,p).closePath()}chamferRect(t,e,i,s,r,a){if(r<=0)return this.rect(t,e,i,s);const l=Math.min(r,Math.min(i,s)/2),u=t+i,h=e+s,f=[t+l,e,u-l,e,u,e+l,u,h-l,u-l,h,t+l,h,t,h-l,t,e+l];for(let p=f.length-1;p>=2;p-=2)f[p]===f[p-2]&&f[p-1]===f[p-3]&&f.splice(p-1,2);return this.poly(f,!0,a)}ellipse(t,e,i,s,r){return this.drawShape(new Py(t,e,i,s),r),this}roundRect(t,e,i,s,r,a){return this.drawShape(new Ay(t,e,i,s,r),a),this}drawShape(t,e){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:e}),this}startPoly(t,e){let i=this._currentPoly;return i&&this.endPoly(),i=new so,i.points.push(t,e),this._currentPoly=i,this}endPoly(t=!1){const e=this._currentPoly;return e&&e.points.length>2&&(e.closePath=t,this.shapePrimitives.push({shape:e})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new so,t)){const e=this.shapePrimitives[this.shapePrimitives.length-1];if(e){let i=e.shape.x,s=e.shape.y;if(e.transform&&!e.transform.isIdentity()){const r=e.transform,a=i;i=r.a*i+r.c*s+r.tx,s=r.b*a+r.d*s+r.ty}this._currentPoly.points.push(i,s)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let e=0;e<t.instructions.length;e++){const i=t.instructions[e];this[i.action](...i.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const e=this.shapePrimitives;for(let i=0;i<e.length;i++){const s=e[i],r=s.shape.getBounds(BI);s.transform?t.addRect(r,s.transform):t.addRect(r)}return t}}class Rs{constructor(t,e=!1){this.instructions=[],this.uid=ve("graphicsPath"),this._dirty=!0,this.checkForHoles=e,typeof t=="string"?l4(t,this):this.instructions=t?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new LI(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,e){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,e]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,e,i,s,r){const a=this.instructions[this.instructions.length-1],l=this.getLastPoint(Dt.shared);let u=0,h=0;if(!a||a.action!=="bezierCurveTo")u=l.x,h=l.y;else{u=a.data[2],h=a.data[3];const f=l.x,p=l.y;u=f+(f-u),h=p+(p-h)}return this.instructions.push({action:"bezierCurveTo",data:[u,h,t,e,i,s,r]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,e,i){const s=this.instructions[this.instructions.length-1],r=this.getLastPoint(Dt.shared);let a=0,l=0;if(!s||s.action!=="quadraticCurveTo")a=r.x,l=r.y;else{a=s.data[0],l=s.data[1];const u=r.x,h=r.y;a=u+(u-a),l=h+(h-l)}return this.instructions.push({action:"quadraticCurveTo",data:[a,l,t,e,i]}),this._dirty=!0,this}rect(t,e,i,s,r){return this.instructions.push({action:"rect",data:[t,e,i,s,r]}),this._dirty=!0,this}circle(t,e,i,s){return this.instructions.push({action:"circle",data:[t,e,i,s]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,e,i,s,r,a,l){r||(r=s/2);const u=-1*Math.PI/2+a,h=i*2,f=Math.PI*2/h,p=[];for(let g=0;g<h;g++){const x=g%2?r:s,w=g*f+u;p.push(t+x*Math.cos(w),e+x*Math.sin(w))}return this.poly(p,!0,l),this}clone(t=!1){const e=new Rs;if(e.checkForHoles=this.checkForHoles,!t)e.instructions=this.instructions.slice();else for(let i=0;i<this.instructions.length;i++){const s=this.instructions[i];e.instructions.push({action:s.action,data:s.data.slice()})}return e}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const e=t.a,i=t.b,s=t.c,r=t.d,a=t.tx,l=t.ty;let u=0,h=0,f=0,p=0,g=0,x=0,w=0,_=0;for(let b=0;b<this.instructions.length;b++){const C=this.instructions[b],M=C.data;switch(C.action){case"moveTo":case"lineTo":u=M[0],h=M[1],M[0]=e*u+s*h+a,M[1]=i*u+r*h+l;break;case"bezierCurveTo":f=M[0],p=M[1],g=M[2],x=M[3],u=M[4],h=M[5],M[0]=e*f+s*p+a,M[1]=i*f+r*p+l,M[2]=e*g+s*x+a,M[3]=i*g+r*x+l,M[4]=e*u+s*h+a,M[5]=i*u+r*h+l;break;case"quadraticCurveTo":f=M[0],p=M[1],u=M[2],h=M[3],M[0]=e*f+s*p+a,M[1]=i*f+r*p+l,M[2]=e*u+s*h+a,M[3]=i*u+r*h+l;break;case"arcToSvg":u=M[5],h=M[6],w=M[0],_=M[1],M[0]=e*w+s*_,M[1]=i*w+r*_,M[5]=e*u+s*h+a,M[6]=i*u+r*h+l;break;case"circle":M[4]=yl(M[3],t);break;case"rect":M[4]=yl(M[4],t);break;case"ellipse":M[8]=yl(M[8],t);break;case"roundRect":M[5]=yl(M[5],t);break;case"addPath":M[0].transform(t);break;case"poly":M[2]=yl(M[2],t);break;default:te("unknown transform action",C.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let e=this.instructions.length-1,i=this.instructions[e];if(!i)return t.x=0,t.y=0,t;for(;i.action==="closePath";){if(e--,e<0)return t.x=0,t.y=0,t;i=this.instructions[e]}switch(i.action){case"moveTo":case"lineTo":t.x=i.data[0],t.y=i.data[1];break;case"quadraticCurveTo":t.x=i.data[2],t.y=i.data[3];break;case"bezierCurveTo":t.x=i.data[4],t.y=i.data[5];break;case"arc":case"arcToSvg":t.x=i.data[5],t.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(t);break}return t}}function yl(n,t){return n?n.prepend(t):t.clone()}function ye(n,t,e){const i=n.getAttribute(t);return i?Number(i):e}function FI(n,t){const e=n.querySelectorAll("defs");for(let i=0;i<e.length;i++){const s=e[i];for(let r=0;r<s.children.length;r++){const a=s.children[r];switch(a.nodeName.toLowerCase()){case"lineargradient":t.defs[a.id]=HI(a);break;case"radialgradient":t.defs[a.id]=UI();break}}}}function HI(n){const t=ye(n,"x1",0),e=ye(n,"y1",0),i=ye(n,"x2",1),s=ye(n,"y2",0),r=n.getAttribute("gradientUnits")||"objectBoundingBox",a=new js(t,e,i,s,r==="objectBoundingBox"?"local":"global");for(let l=0;l<n.children.length;l++){const u=n.children[l],h=ye(u,"offset",0),f=Re.shared.setValue(u.getAttribute("stop-color")).toNumber();a.addColorStop(h,f)}return a}function UI(n){return te("[SVG Parser] Radial gradients are not yet supported"),new js(0,0,1,0)}function mb(n){const t=n.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return t?t[1]:""}const gb={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function IA(n,t){const e=n.getAttribute("style"),i={},s={},r={strokeStyle:i,fillStyle:s,useFill:!1,useStroke:!1};for(const a in gb){const l=n.getAttribute(a);l&&xb(t,r,a,l.trim())}if(e){const a=e.split(";");for(let l=0;l<a.length;l++){const u=a[l].trim(),[h,f]=u.split(":");gb[h]&&xb(t,r,h,f.trim())}}return{strokeStyle:r.useStroke?i:null,fillStyle:r.useFill?s:null,useFill:r.useFill,useStroke:r.useStroke}}function xb(n,t,e,i){switch(e){case"stroke":if(i!=="none"){if(i.startsWith("url(")){const s=mb(i);t.strokeStyle.fill=n.defs[s]}else t.strokeStyle.color=Re.shared.setValue(i).toNumber();t.useStroke=!0}break;case"stroke-width":t.strokeStyle.width=Number(i);break;case"fill":if(i!=="none"){if(i.startsWith("url(")){const s=mb(i);t.fillStyle.fill=n.defs[s]}else t.fillStyle.color=Re.shared.setValue(i).toNumber();t.useFill=!0}break;case"fill-opacity":t.fillStyle.alpha=Number(i);break;case"stroke-opacity":t.strokeStyle.alpha=Number(i);break;case"opacity":t.fillStyle.alpha=Number(i),t.strokeStyle.alpha=Number(i);break}}function GI(n){if(n.length<=2)return!0;const t=n.map(l=>l.area).sort((l,u)=>u-l),[e,i]=t,s=t[t.length-1],r=e/i,a=i/s;return!(r>3&&a<2)}function VI(n){return n.split(/(?=[Mm])/).filter(i=>i.trim().length>0)}function WI(n){const t=n.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!t||t.length<4)return 0;const e=t.map(Number),i=[],s=[];for(let f=0;f<e.length;f+=2)f+1<e.length&&(i.push(e[f]),s.push(e[f+1]));if(i.length===0||s.length===0)return 0;const r=Math.min(...i),a=Math.max(...i),l=Math.min(...s),u=Math.max(...s);return(a-r)*(u-l)}function yb(n,t){const e=new Rs(n,!1);for(const i of e.instructions)t.instructions.push(i)}function YI(n,t){if(typeof n=="string"){const a=document.createElement("div");a.innerHTML=n.trim(),n=a.querySelector("svg")}const e={context:t,defs:{},path:new Rs};FI(n,e);const i=n.children,{fillStyle:s,strokeStyle:r}=IA(n,e);for(let a=0;a<i.length;a++){const l=i[a];l.nodeName.toLowerCase()!=="defs"&&BA(l,e,s,r)}return t}function BA(n,t,e,i){const s=n.children,{fillStyle:r,strokeStyle:a}=IA(n,t);r&&e?e={...e,...r}:r&&(e=r),a&&i?i={...i,...a}:a&&(i=a);const l=!e&&!i;l&&(e={color:0});let u,h,f,p,g,x,w,_,b,C,M,P,T,E,R,N,O;switch(n.nodeName.toLowerCase()){case"path":{E=n.getAttribute("d");const k=n.getAttribute("fill-rule"),B=VI(E),I=k==="evenodd",X=B.length>1;if(I&&X){const U=B.map(D=>({path:D,area:WI(D)}));if(U.sort((D,H)=>H.area-D.area),B.length>3||!GI(U))for(let D=0;D<U.length;D++){const H=U[D],J=D===0;t.context.beginPath();const V=new Rs(void 0,!0);yb(H.path,V),t.context.path(V),J?(e&&t.context.fill(e),i&&t.context.stroke(i)):t.context.cut()}else for(let D=0;D<U.length;D++){const H=U[D],J=D%2===1;t.context.beginPath();const V=new Rs(void 0,!0);yb(H.path,V),t.context.path(V),J?t.context.cut():(e&&t.context.fill(e),i&&t.context.stroke(i))}}else{const U=k?k==="evenodd":!0;R=new Rs(E,U),t.context.path(R),e&&t.context.fill(e),i&&t.context.stroke(i)}break}case"circle":w=ye(n,"cx",0),_=ye(n,"cy",0),b=ye(n,"r",0),t.context.ellipse(w,_,b,b),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"rect":u=ye(n,"x",0),h=ye(n,"y",0),N=ye(n,"width",0),O=ye(n,"height",0),C=ye(n,"rx",0),M=ye(n,"ry",0),C||M?t.context.roundRect(u,h,N,O,C||M):t.context.rect(u,h,N,O),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"ellipse":w=ye(n,"cx",0),_=ye(n,"cy",0),C=ye(n,"rx",0),M=ye(n,"ry",0),t.context.beginPath(),t.context.ellipse(w,_,C,M),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"line":f=ye(n,"x1",0),p=ye(n,"y1",0),g=ye(n,"x2",0),x=ye(n,"y2",0),t.context.beginPath(),t.context.moveTo(f,p),t.context.lineTo(g,x),i&&t.context.stroke(i);break;case"polygon":T=n.getAttribute("points"),P=T.match(/\d+/g).map(k=>parseInt(k,10)),t.context.poly(P,!0),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"polyline":T=n.getAttribute("points"),P=T.match(/\d+/g).map(k=>parseInt(k,10)),t.context.poly(P,!1),i&&t.context.stroke(i);break;case"g":case"svg":break;default:{te(`[SVG parser] <${n.nodeName}> elements unsupported`);break}}l&&(e=null);for(let k=0;k<s.length;k++)BA(s[k],t,e,i)}function qI(n){return Re.isColorLike(n)}function vb(n){return n instanceof hd}function _b(n){return n instanceof js}function XI(n){return n instanceof dt}function $I(n,t,e){const i=Re.shared.setValue(t??0);return n.color=i.toNumber(),n.alpha=i.alpha===1?e.alpha:i.alpha,n.texture=dt.WHITE,{...e,...n}}function QI(n,t,e){return n.texture=t,{...e,...n}}function bb(n,t,e){return n.fill=t,n.color=16777215,n.texture=t.texture,n.matrix=t.transform,{...e,...n}}function wb(n,t,e){return t.buildGradient(),n.fill=t,n.color=16777215,n.texture=t.texture,n.matrix=t.transform,n.textureSpace=t.textureSpace,{...e,...n}}function KI(n,t){const e={...t,...n},i=Re.shared.setValue(e.color);return e.alpha*=i.alpha,e.color=i.toNumber(),e}function ea(n,t){if(n==null)return null;const e={},i=n;return qI(n)?$I(e,n,t):XI(n)?QI(e,n,t):vb(n)?bb(e,n,t):_b(n)?wb(e,n,t):i.fill&&vb(i.fill)?bb(i,i.fill,t):i.fill&&_b(i.fill)?wb(i,i.fill,t):KI(i,t)}function bh(n,t){const{width:e,alignment:i,miterLimit:s,cap:r,join:a,pixelLine:l,...u}=t,h=ea(n,u);return h?{width:e,alignment:i,miterLimit:s,cap:r,join:a,pixelLine:l,...h}:null}const ZI=new Dt,Sb=new Tt,Ey=class Ui extends Ni{constructor(){super(...arguments),this.uid=ve("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new Rs,this._transform=new Tt,this._fillStyle={...Ui.defaultFillStyle},this._strokeStyle={...Ui.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Ei,this._boundsDirty=!0}clone(){const t=new Ui;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=ea(t,Ui.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=bh(t,Ui.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=ea(t,Ui.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=ea(t,Ui.defaultStrokeStyle),this}texture(t,e,i,s,r,a){return this.instructions.push({action:"texture",data:{image:t,dx:i||0,dy:s||0,dw:r||t.frame.width,dh:a||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:e?Re.shared.setValue(e).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Rs,this}fill(t,e){let i;const s=this.instructions[this.instructions.length-1];return this._tick===0&&s?.action==="stroke"?i=s.data.path:i=this._activePath.clone(),i?(t!=null&&(e!==void 0&&typeof t=="number"&&(Ct(Lt,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:e}),this._fillStyle=ea(t,Ui.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:e}=this._activePath.getLastPoint(Dt.shared);this._activePath.clear(),this._activePath.moveTo(t,e)}stroke(t){let e;const i=this.instructions[this.instructions.length-1];return this._tick===0&&i?.action==="fill"?e=i.data.path:e=this._activePath.clone(),e?(t!=null&&(this._strokeStyle=bh(t,Ui.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:e}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const e=this.instructions[this.instructions.length-1-t],i=this._activePath.clone();if(e&&(e.action==="stroke"||e.action==="fill"))if(e.data.hole)e.data.hole.addPath(i);else{e.data.hole=i;break}}return this._initNextPathLocation(),this}arc(t,e,i,s,r,a){this._tick++;const l=this._transform;return this._activePath.arc(l.a*t+l.c*e+l.tx,l.b*t+l.d*e+l.ty,i,s,r,a),this}arcTo(t,e,i,s,r){this._tick++;const a=this._transform;return this._activePath.arcTo(a.a*t+a.c*e+a.tx,a.b*t+a.d*e+a.ty,a.a*i+a.c*s+a.tx,a.b*i+a.d*s+a.ty,r),this}arcToSvg(t,e,i,s,r,a,l){this._tick++;const u=this._transform;return this._activePath.arcToSvg(t,e,i,s,r,u.a*a+u.c*l+u.tx,u.b*a+u.d*l+u.ty),this}bezierCurveTo(t,e,i,s,r,a,l){this._tick++;const u=this._transform;return this._activePath.bezierCurveTo(u.a*t+u.c*e+u.tx,u.b*t+u.d*e+u.ty,u.a*i+u.c*s+u.tx,u.b*i+u.d*s+u.ty,u.a*r+u.c*a+u.tx,u.b*r+u.d*a+u.ty,l),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(t,e,i,s){return this._tick++,this._activePath.ellipse(t,e,i,s,this._transform.clone()),this}circle(t,e,i){return this._tick++,this._activePath.circle(t,e,i,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,e){this._tick++;const i=this._transform;return this._activePath.lineTo(i.a*t+i.c*e+i.tx,i.b*t+i.d*e+i.ty),this}moveTo(t,e){this._tick++;const i=this._transform,s=this._activePath.instructions,r=i.a*t+i.c*e+i.tx,a=i.b*t+i.d*e+i.ty;return s.length===1&&s[0].action==="moveTo"?(s[0].data[0]=r,s[0].data[1]=a,this):(this._activePath.moveTo(r,a),this)}quadraticCurveTo(t,e,i,s,r){this._tick++;const a=this._transform;return this._activePath.quadraticCurveTo(a.a*t+a.c*e+a.tx,a.b*t+a.d*e+a.ty,a.a*i+a.c*s+a.tx,a.b*i+a.d*s+a.ty,r),this}rect(t,e,i,s){return this._tick++,this._activePath.rect(t,e,i,s,this._transform.clone()),this}roundRect(t,e,i,s,r){return this._tick++,this._activePath.roundRect(t,e,i,s,r,this._transform.clone()),this}poly(t,e){return this._tick++,this._activePath.poly(t,e,this._transform.clone()),this}regularPoly(t,e,i,s,r=0,a){return this._tick++,this._activePath.regularPoly(t,e,i,s,r,a),this}roundPoly(t,e,i,s,r,a){return this._tick++,this._activePath.roundPoly(t,e,i,s,r,a),this}roundShape(t,e,i,s){return this._tick++,this._activePath.roundShape(t,e,i,s),this}filletRect(t,e,i,s,r){return this._tick++,this._activePath.filletRect(t,e,i,s,r),this}chamferRect(t,e,i,s,r,a){return this._tick++,this._activePath.chamferRect(t,e,i,s,r,a),this}star(t,e,i,s,r=0,a=0){return this._tick++,this._activePath.star(t,e,i,s,r,a,this._transform.clone()),this}svg(t){return this._tick++,YI(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,e=t){return this._transform.scale(t,e),this}setTransform(t,e,i,s,r,a){return t instanceof Tt?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,e,i,s,r,a),this)}transform(t,e,i,s,r,a){return t instanceof Tt?(this._transform.append(t),this):(Sb.set(t,e,i,s,r,a),this._transform.append(Sb),this)}translate(t,e=t){return this._transform.translate(t,e),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const t=this._bounds;t.clear();for(let e=0;e<this.instructions.length;e++){const i=this.instructions[e],s=i.action;if(s==="fill"){const r=i.data;t.addBounds(r.path.bounds)}else if(s==="texture"){const r=i.data;t.addFrame(r.dx,r.dy,r.dx+r.dw,r.dy+r.dh,r.transform)}if(s==="stroke"){const r=i.data,a=r.style.alignment,l=r.style.width*(1-a),u=r.path.bounds;t.addFrame(u.minX-l,u.minY-l,u.maxX+l,u.maxY+l)}}return t}containsPoint(t){if(!this.bounds.containsPoint(t.x,t.y))return!1;const e=this.instructions;let i=!1;for(let s=0;s<e.length;s++){const r=e[s],a=r.data,l=a.path;if(!r.action||!l)continue;const u=a.style,h=l.shapePath.shapePrimitives;for(let f=0;f<h.length;f++){const p=h[f].shape;if(!u||!p)continue;const g=h[f].transform,x=g?g.applyInverse(t,ZI):t;if(r.action==="fill")i=p.contains(x.x,x.y);else{const _=u;i=p.strokeContains(x.x,x.y,_.width,_.alignment)}const w=a.hole;if(w){const _=w.shapePath?.shapePrimitives;if(_)for(let b=0;b<_.length;b++)_[b].shape.contains(x.x,x.y)&&(i=!1)}if(i)return!0}}return i}destroy(t=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof t=="boolean"?t:t?.texture){const i=typeof t=="boolean"?t:t?.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(i)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(i))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};Ey.defaultFillStyle={color:16777215,alpha:1,texture:dt.WHITE,matrix:null,fill:null,textureSpace:"local"};Ey.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:dt.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let ii=Ey;const Ry=class Qa extends Ni{constructor(t={}){super(),this.uid=ve("textStyle"),this._tick=0,JI(t);const e={...Qa.defaultTextStyle,...t};for(const i in e){const s=i;this[s]=e[i]}this.update(),this._tick=0}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.update())}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(t!==null&&typeof t=="object"?this._dropShadow=this._createProxy({...Qa.defaultDropShadow,...t}):this._dropShadow=t?this._createProxy({...Qa.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily!==t&&(this._fontFamily=t,this.update())}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(typeof t=="string"?this._fontSize=parseInt(t,10):this._fontSize=t,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.update())}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.update())}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.update())}get filters(){return this._filters}set filters(t){this._filters!==t&&(this._filters=Object.freeze(t),this.update())}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.update())}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...ii.defaultFillStyle,...t},()=>{this._fill=ea({...this._originalFill},ii.defaultFillStyle)})),this._fill=ea(t===0?"black":t,ii.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...ii.defaultStrokeStyle,...t},()=>{this._stroke=bh({...this._originalStroke},ii.defaultStrokeStyle)})),this._stroke=bh(t,ii.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){const t=Qa.defaultTextStyle;for(const e in t)this[e]=t[e]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new Qa({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let t=0;if(this._filters)for(let e=0;e<this._filters.length;e++)t+=this._filters[e].padding;return Math.max(this._padding,t)}destroy(t=!1){if(this.removeAllListeners(),typeof t=="boolean"?t:t?.texture){const i=typeof t=="boolean"?t:t?.textureSource;this._fill?.texture&&this._fill.texture.destroy(i),this._originalFill?.texture&&this._originalFill.texture.destroy(i),this._stroke?.texture&&this._stroke.texture.destroy(i),this._originalStroke?.texture&&this._originalStroke.texture.destroy(i)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,e){return new Proxy(t,{set:(i,s,r)=>(i[s]===r||(i[s]=r,e?.(s,r),this.update()),!0)})}_isFillStyle(t){return(t??null)!==null&&!(Re.isColorLike(t)||t instanceof js||t instanceof hd)}};Ry.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};Ry.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let xr=Ry;function JI(n){const t=n;if(typeof t.dropShadow=="boolean"&&t.dropShadow){const e=xr.defaultDropShadow;n.dropShadow={alpha:t.dropShadowAlpha??e.alpha,angle:t.dropShadowAngle??e.angle,blur:t.dropShadowBlur??e.blur,color:t.dropShadowColor??e.color,distance:t.dropShadowDistance??e.distance}}if(t.strokeThickness!==void 0){Ct(Lt,"strokeThickness is now a part of stroke");const e=t.stroke;let i={};if(Re.isColorLike(e))i.color=e;else if(e instanceof js||e instanceof hd)i.fill=e;else if(Object.hasOwnProperty.call(e,"color")||Object.hasOwnProperty.call(e,"fill"))i=e;else throw new Error("Invalid stroke value.");n.stroke={...i,width:t.strokeThickness}}if(Array.isArray(t.fillGradientStops)){if(Ct(Lt,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(t.fill)||t.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");t.fill.length!==t.fillGradientStops.length&&te("The number of fill colors must match the number of fill gradient stops.");const e=new js({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),i=t.fillGradientStops.slice(),s=t.fill.map(r=>Re.shared.setValue(r).toNumber());i.forEach((r,a)=>{e.addColorStop(r,s[a])}),n.fill={fill:e}}}class t6{constructor(t){this._canvasPool=Object.create(null),this.canvasOptions=t||{},this.enableFullScreen=!1}_createCanvasAndContext(t,e){const i=ee.get().createCanvas();i.width=t,i.height=e;const s=i.getContext("2d");return{canvas:i,context:s}}getOptimalCanvasAndContext(t,e,i=1){t=Math.ceil(t*i-1e-6),e=Math.ceil(e*i-1e-6),t=po(t),e=po(e);const s=(t<<17)+(e<<1);this._canvasPool[s]||(this._canvasPool[s]=[]);let r=this._canvasPool[s].pop();return r||(r=this._createCanvasAndContext(t,e)),r}returnCanvasAndContext(t){const e=t.canvas,{width:i,height:s}=e,r=(i<<17)+(s<<1);t.context.resetTransform(),t.context.clearRect(0,0,i,s),this._canvasPool[r].push(t)}clear(){this._canvasPool={}}}const Zl=new t6;Rc.register(Zl);const Cb=1e5;function wh(n,t,e,i=0){if(n.texture===dt.WHITE&&!n.fill)return Re.shared.setValue(n.color).setAlpha(n.alpha??1).toHexa();if(n.fill){if(n.fill instanceof hd){const s=n.fill,r=t.createPattern(s.texture.source.resource,"repeat"),a=s.transform.copyTo(Tt.shared);return a.scale(s.texture.frame.width,s.texture.frame.height),r.setTransform(a),r}else if(n.fill instanceof js){const s=n.fill,r=s.type==="linear",a=s.textureSpace==="local";let l=1,u=1;a&&e&&(l=e.width+i,u=e.height+i);let h,f=!1;if(r){const{start:p,end:g}=s;h=t.createLinearGradient(p.x*l,p.y*u,g.x*l,g.y*u),f=Math.abs(g.x-p.x)<Math.abs((g.y-p.y)*.1)}else{const{center:p,innerRadius:g,outerCenter:x,outerRadius:w}=s;h=t.createRadialGradient(p.x*l,p.y*u,g*l,x.x*l,x.y*u,w*l)}if(f&&a&&e){const p=e.lineHeight/u;for(let g=0;g<e.lines.length;g++){const x=(g*e.lineHeight+i/2)/u;s.colorStops.forEach(w=>{const _=x+w.offset*p;h.addColorStop(Math.floor(_*Cb)/Cb,Re.shared.setValue(w.color).toHex())})}}else s.colorStops.forEach(p=>{h.addColorStop(p.offset,Re.shared.setValue(p.color).toHex())});return h}}else{const s=t.createPattern(n.texture.source.resource,"repeat"),r=n.matrix.copyTo(Tt.shared);return r.scale(n.texture.frame.width,n.texture.frame.height),s.setTransform(r),s}return te("FillStyle not recognised",n),"red"}const LA=class FA extends _A{constructor(t){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const e={...FA.defaultOptions,...t};this._textureSize=e.textureSize,this._mipmap=e.mipmap;const i=e.style.clone();e.overrideFill&&(i._fill.color=16777215,i._fill.alpha=1,i._fill.texture=dt.WHITE,i._fill.fill=null),this.applyFillAsTint=e.overrideFill;const s=i.fontSize;i.fontSize=this.baseMeasurementFontSize;const r=vh(i);e.overrideSize?i._stroke&&(i._stroke.width*=this.baseRenderedFontSize/s):i.fontSize=this.baseRenderedFontSize=s,this._style=i,this._skipKerning=e.skipKerning??!1,this.resolution=e.resolution??1,this._padding=e.padding??4,e.textureStyle&&(this._textureStyle=e.textureStyle instanceof mo?e.textureStyle:new mo(e.textureStyle)),this.fontMetrics=Yi.measureFont(r),this.lineHeight=i.lineHeight||this.fontMetrics.fontSize||i.fontSize}ensureCharacters(t){const e=Yi.graphemeSegmenter(t).filter(b=>!this._currentChars.includes(b)).filter((b,C,M)=>M.indexOf(b)===C);if(!e.length)return;this._currentChars=[...this._currentChars,...e];let i;this._currentPageIndex===-1?i=this._nextPage():i=this.pages[this._currentPageIndex];let{canvas:s,context:r}=i.canvasAndContext,a=i.texture.source;const l=this._style;let u=this._currentX,h=this._currentY,f=this._currentMaxCharHeight;const p=this.baseRenderedFontSize/this.baseMeasurementFontSize,g=this._padding*p;let x=!1;const w=s.width/this.resolution,_=s.height/this.resolution;for(let b=0;b<e.length;b++){const C=e[b],M=Yi.measureText(C,l,s,!1);M.lineHeight=M.height;const P=M.width*p,T=Math.ceil((l.fontStyle==="italic"?2:1)*P),E=M.height*p,R=T+g*2,N=E+g*2;if(x=!1,C!==`
`&&C!=="\r"&&C!=="	"&&C!==" "&&(x=!0,f=Math.ceil(Math.max(N,f))),u+R>w&&(h+=f,f=N,u=0,h+f>_)){a.update();const k=this._nextPage();s=k.canvasAndContext.canvas,r=k.canvasAndContext.context,a=k.texture.source,u=0,h=0,f=0}const O=P/p-(l.dropShadow?.distance??0)-(l._stroke?.width??0);if(this.chars[C]={id:C.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:O,kerning:{}},x){this._drawGlyph(r,M,u+g,h+g,p,l);const k=a.width*p,B=a.height*p,I=new Yt(u/k*a.width,h/B*a.height,R/k*a.width,N/B*a.height);this.chars[C].texture=new dt({source:a,frame:I}),u+=Math.ceil(R)}}a.update(),this._currentX=u,this._currentY=h,this._currentMaxCharHeight=f,this._skipKerning&&this._applyKerning(e,r)}get pageTextures(){return Ct(Lt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(t,e){const i=this._measureCache;for(let s=0;s<t.length;s++){const r=t[s];for(let a=0;a<this._currentChars.length;a++){const l=this._currentChars[a];let u=i[r];u||(u=i[r]=e.measureText(r).width);let h=i[l];h||(h=i[l]=e.measureText(l).width);let f=e.measureText(r+l).width,p=f-(u+h);p&&(this.chars[r].kerning[l]=p),f=e.measureText(r+l).width,p=f-(u+h),p&&(this.chars[l].kerning[r]=p)}}}_nextPage(){this._currentPageIndex++;const t=this.resolution,e=Zl.getOptimalCanvasAndContext(this._textureSize,this._textureSize,t);this._setupContext(e.context,this._style,t);const i=t*(this.baseRenderedFontSize/this.baseMeasurementFontSize),s=new dt({source:new ha({resource:e.canvas,resolution:i,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(s.source.style=this._textureStyle);const r={canvasAndContext:e,texture:s};return this.pages[this._currentPageIndex]=r,r}_setupContext(t,e,i){e.fontSize=this.baseRenderedFontSize,t.scale(i,i),t.font=vh(e),e.fontSize=this.baseMeasurementFontSize,t.textBaseline=e.textBaseline;const s=e._stroke,r=s?.width??0;if(s&&(t.lineWidth=r,t.lineJoin=s.join,t.miterLimit=s.miterLimit,t.strokeStyle=wh(s,t)),e._fill&&(t.fillStyle=wh(e._fill,t)),e.dropShadow){const a=e.dropShadow,l=Re.shared.setValue(a.color).toArray(),u=a.blur*i,h=a.distance*i;t.shadowColor=`rgba(${l[0]*255},${l[1]*255},${l[2]*255},${a.alpha})`,t.shadowBlur=u,t.shadowOffsetX=Math.cos(a.angle)*h,t.shadowOffsetY=Math.sin(a.angle)*h}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}_drawGlyph(t,e,i,s,r,a){const l=e.text,u=e.fontProperties,f=(a._stroke?.width??0)*r,p=i+f/2,g=s-f/2,x=u.descent*r,w=e.lineHeight*r;let _=!1;a.stroke&&f&&(_=!0,t.strokeText(l,p,g+w-x));const{shadowBlur:b,shadowOffsetX:C,shadowOffsetY:M}=t;a._fill&&(_&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),t.fillText(l,p,g+w-x)),_&&(t.shadowBlur=b,t.shadowOffsetX=C,t.shadowOffsetY=M)}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{canvasAndContext:e,texture:i}=this.pages[t];Zl.returnCanvasAndContext(e),i.destroy(!0)}this.pages=null}};LA.defaultOptions={textureSize:512,style:new xr,mipmap:!0};let Mb=LA;function e6(n,t,e,i){const s={width:0,height:0,offsetY:0,scale:t.fontSize/e.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};s.offsetY=e.baseLineOffset;let r=s.lines[0],a=null,l=!0;const u={width:0,start:0,index:0,positions:[],chars:[]},h=e.baseMeasurementFontSize/t.fontSize,f=t.letterSpacing*h,p=t.wordWrapWidth*h,g=t.lineHeight?t.lineHeight*h:e.lineHeight,x=t.wordWrap&&t.breakWords,w=C=>{const M=r.width;for(let P=0;P<u.index;P++){const T=C.positions[P];r.chars.push(C.chars[P]),r.charPositions.push(T+M)}r.width+=C.width,l=!1,u.width=0,u.index=0,u.chars.length=0},_=()=>{let C=r.chars.length-1;if(i){let M=r.chars[C];for(;M===" ";)r.width-=e.chars[M].xAdvance,M=r.chars[--C]}s.width=Math.max(s.width,r.width),r={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},l=!0,s.lines.push(r),s.height+=g},b=C=>C-f>p;for(let C=0;C<n.length+1;C++){let M;const P=C===n.length;P||(M=n[C]);const T=e.chars[M]||e.chars[" "];if(/(?:\s)/.test(M)||M==="\r"||M===`
`||P){if(!l&&t.wordWrap&&b(r.width+u.width)?(_(),w(u),P||r.charPositions.push(0)):(u.start=r.width,w(u),P||r.charPositions.push(0)),M==="\r"||M===`
`)_();else if(!P){const O=T.xAdvance+(T.kerning[a]||0)+f;r.width+=O,r.spaceWidth=O,r.spacesIndex.push(r.charPositions.length),r.chars.push(M)}}else{const N=T.kerning[a]||0,O=T.xAdvance+N+f;x&&b(r.width+u.width+O)&&(w(u),_()),u.positions[u.index++]=u.width+N,u.chars.push(M),u.width+=O}a=M}return _(),t.align==="center"?n6(s):t.align==="right"?i6(s):t.align==="justify"&&s6(s),s}function n6(n){for(let t=0;t<n.lines.length;t++){const e=n.lines[t],i=n.width/2-e.width/2;for(let s=0;s<e.charPositions.length;s++)e.charPositions[s]+=i}}function i6(n){for(let t=0;t<n.lines.length;t++){const e=n.lines[t],i=n.width-e.width;for(let s=0;s<e.charPositions.length;s++)e.charPositions[s]+=i}}function s6(n){const t=n.width;for(let e=0;e<n.lines.length;e++){const i=n.lines[e];let s=0,r=i.spacesIndex[s++],a=0;const l=i.spacesIndex.length,h=(t-i.width)/l;for(let f=0;f<i.charPositions.length;f++)f===r&&(r=i.spacesIndex[s++],a+=h),i.charPositions[f]+=a}}function r6(n){if(n==="")return[];typeof n=="string"&&(n=[n]);const t=[];for(let e=0,i=n.length;e<i;e++){const s=n[e];if(Array.isArray(s)){if(s.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${s.length}.`);if(s[0].length===0||s[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const r=s[0].charCodeAt(0),a=s[1].charCodeAt(0);if(a<r)throw new Error("[BitmapFont]: Invalid character range.");for(let l=r,u=a;l<=u;l++)t.push(String.fromCharCode(l))}else t.push(...Array.from(s))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}let Vu=0;class a6{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=bA(1e3)}getFont(t,e){let i=`${e.fontFamily}-bitmap`,s=!0;if(e._fill.fill&&!e._stroke?(i+=e._fill.fill.styleKey,s=!1):(e._stroke||e.dropShadow)&&(i=`${e.styleKey}-bitmap`,s=!1),!re.has(i)){const a=Object.create(e);a.lineHeight=0;const l=new Mb({style:a,overrideFill:s,overrideSize:!0,...this.defaultOptions});Vu++,Vu>50&&te("BitmapText",`You have dynamically created ${Vu} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),l.once("destroy",()=>{Vu--,re.remove(i)}),re.set(i,l)}const r=re.get(i);return r.ensureCharacters?.(t),r}getLayout(t,e,i=!0){const s=this.getFont(t,e),r=`${t}-${e.styleKey}-${i}`;if(this.measureCache.has(r))return this.measureCache.get(r);const a=Yi.graphemeSegmenter(t),l=e6(a,e,s,i);return this.measureCache.set(r,l),l}measureText(t,e,i=!0){return this.getLayout(t,e,i)}install(...t){let e=t[0];typeof e=="string"&&(e={name:e,style:t[1],chars:t[2]?.chars,resolution:t[2]?.resolution,padding:t[2]?.padding,skipKerning:t[2]?.skipKerning},Ct(Lt,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const i=e?.name;if(!i)throw new Error("[BitmapFontManager] Property `name` is required.");e={...this.defaultOptions,...e};const s=e.style,r=s instanceof xr?s:new xr(s),a=e.dynamicFill??this._canUseTintForStyle(r),l=new Mb({style:r,overrideFill:a,skipKerning:e.skipKerning,padding:e.padding,resolution:e.resolution,overrideSize:!1,textureStyle:e.textureStyle}),u=r6(e.chars);return l.ensureCharacters(u.join("")),re.set(`${i}-bitmap`,l),l.once("destroy",()=>re.remove(`${i}-bitmap`)),l}uninstall(t){const e=`${t}-bitmap`,i=re.get(e);i&&i.destroy()}_canUseTintForStyle(t){return!t._stroke&&(!t.dropShadow||t.dropShadow.color===0)&&!t._fill.fill&&t._fill.color===16777215}}const Pb=new a6;class HA extends _A{constructor(t,e){super();const{textures:i,data:s}=t;Object.keys(s.pages).forEach(r=>{const a=s.pages[parseInt(r,10)],l=i[a.id];this.pages.push({texture:l})}),Object.keys(s.chars).forEach(r=>{const a=s.chars[r],{frame:l,source:u,rotate:h}=i[a.page],f=Vt.transformRectCoords(a,l,h,new Yt),p=new dt({frame:f,orig:new Yt(0,0,a.width,a.height),source:u,rotate:h});this.chars[r]={id:r.codePointAt(0),xOffset:a.xOffset,yOffset:a.yOffset,xAdvance:a.xAdvance,kerning:a.kerning??{},texture:p}}),this.baseRenderedFontSize=s.fontSize,this.baseMeasurementFontSize=s.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:s.fontSize},this.baseLineOffset=s.baseLineOffset,this.lineHeight=s.lineHeight,this.fontFamily=s.fontFamily,this.distanceField=s.distanceField??{type:"none",range:0},this.url=e}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{texture:e}=this.pages[t];e.destroy(!0)}this.pages=null}static install(t){Pb.install(t)}static uninstall(t){Pb.uninstall(t)}}const Kp={test(n){return typeof n=="string"&&n.startsWith("info face=")},parse(n){const t=n.match(/^[a-z]+\s+.+$/gm),e={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const p in t){const g=t[p].match(/^[a-z]+/gm)[0],x=t[p].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),w={};for(const _ in x){const b=x[_].split("="),C=b[0],M=b[1].replace(/"/gm,""),P=parseFloat(M),T=isNaN(P)?M:P;w[C]=T}e[g].push(w)}const i={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[s]=e.info,[r]=e.common,[a]=e.distanceField??[];a&&(i.distanceField={range:parseInt(a.distanceRange,10),type:a.fieldType}),i.fontSize=parseInt(s.size,10),i.fontFamily=s.face,i.lineHeight=parseInt(r.lineHeight,10);const l=e.page;for(let p=0;p<l.length;p++)i.pages.push({id:parseInt(l[p].id,10)||0,file:l[p].file});const u={};i.baseLineOffset=i.lineHeight-parseInt(r.base,10);const h=e.char;for(let p=0;p<h.length;p++){const g=h[p],x=parseInt(g.id,10);let w=g.letter??g.char??String.fromCharCode(x);w==="space"&&(w=" "),u[x]=w,i.chars[w]={id:x,page:parseInt(g.page,10)||0,x:parseInt(g.x,10),y:parseInt(g.y,10),width:parseInt(g.width,10),height:parseInt(g.height,10),xOffset:parseInt(g.xoffset,10),yOffset:parseInt(g.yoffset,10),xAdvance:parseInt(g.xadvance,10),kerning:{}}}const f=e.kerning||[];for(let p=0;p<f.length;p++){const g=parseInt(f[p].first,10),x=parseInt(f[p].second,10),w=parseInt(f[p].amount,10);i.chars[u[x]].kerning[u[g]]=w}return i}},Ab={test(n){const t=n;return typeof t!="string"&&"getElementsByTagName"in t&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(n){const t={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},e=n.getElementsByTagName("info")[0],i=n.getElementsByTagName("common")[0],s=n.getElementsByTagName("distanceField")[0];s&&(t.distanceField={type:s.getAttribute("fieldType"),range:parseInt(s.getAttribute("distanceRange"),10)});const r=n.getElementsByTagName("page"),a=n.getElementsByTagName("char"),l=n.getElementsByTagName("kerning");t.fontSize=parseInt(e.getAttribute("size"),10),t.fontFamily=e.getAttribute("face"),t.lineHeight=parseInt(i.getAttribute("lineHeight"),10);for(let h=0;h<r.length;h++)t.pages.push({id:parseInt(r[h].getAttribute("id"),10)||0,file:r[h].getAttribute("file")});const u={};t.baseLineOffset=t.lineHeight-parseInt(i.getAttribute("base"),10);for(let h=0;h<a.length;h++){const f=a[h],p=parseInt(f.getAttribute("id"),10);let g=f.getAttribute("letter")??f.getAttribute("char")??String.fromCharCode(p);g==="space"&&(g=" "),u[p]=g,t.chars[g]={id:p,page:parseInt(f.getAttribute("page"),10)||0,x:parseInt(f.getAttribute("x"),10),y:parseInt(f.getAttribute("y"),10),width:parseInt(f.getAttribute("width"),10),height:parseInt(f.getAttribute("height"),10),xOffset:parseInt(f.getAttribute("xoffset"),10),yOffset:parseInt(f.getAttribute("yoffset"),10),xAdvance:parseInt(f.getAttribute("xadvance"),10),kerning:{}}}for(let h=0;h<l.length;h++){const f=parseInt(l[h].getAttribute("first"),10),p=parseInt(l[h].getAttribute("second"),10),g=parseInt(l[h].getAttribute("amount"),10);t.chars[u[p]].kerning[u[f]]=g}return t}},Tb={test(n){return typeof n=="string"&&n.match(/<font(\s|>)/)?Ab.test(ee.get().parseXML(n)):!1},parse(n){return Ab.parse(ee.get().parseXML(n))}},o6=[".xml",".fnt"],l6={extension:{type:lt.CacheParser,name:"cacheBitmapFont"},test:n=>n instanceof HA,getCacheableAssets(n,t){const e={};return n.forEach(i=>{e[i]=t,e[`${i}-bitmap`]=t}),e[`${t.fontFamily}-bitmap`]=t,e}},c6={extension:{type:lt.LoadParser,priority:Cr.Normal},name:"loadBitmapFont",id:"bitmap-font",test(n){return o6.includes(Bn.extname(n).toLowerCase())},async testParse(n){return Kp.test(n)||Tb.test(n)},async parse(n,t,e){const i=Kp.test(n)?Kp.parse(n):Tb.parse(n),{src:s}=t,{pages:r}=i,a=[],l=i.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let p=0;p<r.length;++p){const g=r[p].file;let x=Bn.join(Bn.dirname(s),g);x=Ug(x,s),a.push({src:x,data:l})}const u=await e.load(a),h=a.map(p=>u[p.src]);return new HA({data:i,textures:h},s)},async load(n,t){return await(await ee.get().fetch(n)).text()},async unload(n,t,e){await Promise.all(n.pages.map(i=>e.unload(i.texture.source._sourceOrigin))),n.destroy()}};class u6{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<e;i++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}const h6={extension:{type:lt.CacheParser,name:"cacheTextureArray"},test:n=>Array.isArray(n)&&n.every(t=>t instanceof dt),getCacheableAssets:(n,t)=>{const e={};return n.forEach(i=>{t.forEach((s,r)=>{e[i+(r===0?"":r+1)]=s})}),e}};async function UA(n){if("Image"in globalThis)return new Promise(t=>{const e=new Image;e.onload=()=>{t(!0)},e.onerror=()=>{t(!1)},e.src=n});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(n)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const d6={extension:{type:lt.DetectionParser,priority:1},test:async()=>UA("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async n=>[...n,"avif"],remove:async n=>n.filter(t=>t!=="avif")},Eb=["png","jpg","jpeg"],f6={extension:{type:lt.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async n=>[...n,...Eb],remove:async n=>n.filter(t=>!Eb.includes(t))},p6="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function fd(n){return p6?!1:document.createElement("video").canPlayType(n)!==""}const m6={extension:{type:lt.DetectionParser,priority:0},test:async()=>fd("video/mp4"),add:async n=>[...n,"mp4","m4v"],remove:async n=>n.filter(t=>t!=="mp4"&&t!=="m4v")},g6={extension:{type:lt.DetectionParser,priority:0},test:async()=>fd("video/ogg"),add:async n=>[...n,"ogv"],remove:async n=>n.filter(t=>t!=="ogv")},x6={extension:{type:lt.DetectionParser,priority:0},test:async()=>fd("video/webm"),add:async n=>[...n,"webm"],remove:async n=>n.filter(t=>t!=="webm")},y6={extension:{type:lt.DetectionParser,priority:0},test:async()=>UA("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async n=>[...n,"webp"],remove:async n=>n.filter(t=>t!=="webp")},GA=class rh{constructor(){this.loadOptions={...rh.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,i)=>(this._parsersValidated=!1,t[e]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){const i={promise:null,parser:null};return i.promise=(async()=>{let s=null,r=null;if((e.parser||e.loadParser)&&(r=this._parserHash[e.parser||e.loadParser],e.loadParser&&te(`[Assets] "loadParser" is deprecated, use "parser" instead for ${t}`),r||te(`[Assets] specified load parser "${e.parser||e.loadParser}" not found while loading ${t}`)),!r){for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.load&&l.test?.(t,e,this)){r=l;break}}if(!r)return te(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}s=await r.load(t,e,this),i.parser=r;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];l.parse&&l.parse&&await l.testParse?.(s,e,this)&&(s=await l.parse(s,e,this)||s,i.parser=l)}return s})(),i}async load(t,e){this._parsersValidated||this._validateParsers();const i=typeof e=="function"?{...rh.defaultOptions,...this.loadOptions,onProgress:e}:{...rh.defaultOptions,...this.loadOptions,...e||{}},{onProgress:s,onError:r,strategy:a,retryCount:l,retryDelay:u}=i;let h=0;const f={},p=yh(t),g=Mi(t,_=>({alias:[_],src:_,data:{}})),x=g.reduce((_,b)=>_+(b.progressSize||1),0),w=g.map(async _=>{const b=Bn.toAbsolute(_.src);f[_.src]||(await this._loadAssetWithRetry(b,_,{onProgress:s,onError:r,strategy:a,retryCount:l,retryDelay:u},f),h+=_.progressSize||1,s&&s(h/x))});return await Promise.all(w),p?f[g[0].src]:f}async unload(t){const i=Mi(t,s=>({alias:[s],src:s})).map(async s=>{const r=Bn.toAbsolute(s.src),a=this.promiseCache[r];if(a){const l=await a.promise;delete this.promiseCache[r],await a.parser?.unload?.(l,s,this)}});await Promise.all(i)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name||t.id).reduce((t,e)=>(!e.name&&!e.id?te("[Assets] parser should have an id"):(t[e.name]||t[e.id])&&te(`[Assets] parser id conflict "${e.id}"`),t[e.name]=e,e.id&&(t[e.id]=e),t),{})}async _loadAssetWithRetry(t,e,i,s){let r=0;const{onError:a,strategy:l,retryCount:u,retryDelay:h}=i,f=p=>new Promise(g=>setTimeout(g,p));for(;;)try{this.promiseCache[t]||(this.promiseCache[t]=this._getLoadPromiseAndParser(t,e)),s[e.src]=await this.promiseCache[t].promise;return}catch(p){delete this.promiseCache[t],delete s[e.src],r++;const g=l!=="retry"||r>u;if(l==="retry"&&!g){a&&a(p,e),await f(h);continue}if(l==="skip"){a&&a(p,e);return}throw a&&a(p,e),new Error(`[Loader.load] Failed to load ${t}.
${p}`)}}};GA.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};let v6=GA;function No(n,t){if(Array.isArray(t)){for(const e of t)if(n.startsWith(`data:${e}`))return!0;return!1}return n.startsWith(`data:${t}`)}function Oo(n,t){const e=n.split("?")[0],i=Bn.extname(e).toLowerCase();return Array.isArray(t)?t.includes(i):i===t}const _6=".json",b6="application/json",w6={extension:{type:lt.LoadParser,priority:Cr.Low},name:"loadJson",id:"json",test(n){return No(n,b6)||Oo(n,_6)},async load(n){return await(await ee.get().fetch(n)).json()}},S6=".txt",C6="text/plain",M6={name:"loadTxt",id:"text",extension:{type:lt.LoadParser,priority:Cr.Low,name:"loadTxt"},test(n){return No(n,C6)||Oo(n,S6)},async load(n){return await(await ee.get().fetch(n)).text()}},P6=["normal","bold","100","200","300","400","500","600","700","800","900"],A6=[".ttf",".otf",".woff",".woff2"],T6=["font/ttf","font/otf","font/woff","font/woff2"],E6=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function R6(n){const t=Bn.extname(n),s=Bn.basename(n,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1));let r=s.length>0;for(const l of s)if(!l.match(E6)){r=!1;break}let a=s.join(" ");return r||(a=`"${a.replace(/[\\"]/g,"\\$&")}"`),a}const j6=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function k6(n){return j6.test(n)?n:encodeURI(n)}const N6={extension:{type:lt.LoadParser,priority:Cr.Low},name:"loadWebFont",id:"web-font",test(n){return No(n,T6)||Oo(n,A6)},async load(n,t){const e=ee.get().getFontFaceSet();if(e){const i=[],s=t.data?.family??R6(n),r=t.data?.weights?.filter(l=>P6.includes(l))??["normal"],a=t.data??{};for(let l=0;l<r.length;l++){const u=r[l],h=new FontFace(s,`url(${k6(n)})`,{...a,weight:u});await h.load(),e.add(h),i.push(h)}return re.has(`${s}-and-url`)?re.get(`${s}-and-url`).entries.push({url:n,faces:i}):re.set(`${s}-and-url`,{entries:[{url:n,faces:i}]}),i.length===1?i[0]:i}return te("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(n){const t=Array.isArray(n)?n:[n],e=t[0].family,i=re.get(`${e}-and-url`),s=i.entries.find(r=>r.faces.some(a=>t.indexOf(a)!==-1));s.faces=s.faces.filter(r=>t.indexOf(r)===-1),s.faces.length===0&&(i.entries=i.entries.filter(r=>r!==s)),t.forEach(r=>{ee.get().getFontFaceSet().delete(r)}),i.entries.length===0&&re.remove(`${e}-and-url`)}};function jy(n,t=1){const e=ko.RETINA_PREFIX?.exec(n);return e?parseFloat(e[1]):t}function ky(n,t,e){n.label=e,n._sourceOrigin=e;const i=new dt({source:n,label:e}),s=()=>{delete t.promiseCache[e],re.has(e)&&re.remove(e)};return i.source.once("destroy",()=>{t.promiseCache[e]&&(te("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),s())}),i.once("destroy",()=>{n.destroyed||(te("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),s())}),i}const O6=".svg",z6="image/svg+xml",D6={extension:{type:lt.LoadParser,priority:Cr.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(n){return No(n,z6)||Oo(n,O6)},async load(n,t,e){return t.data?.parseAsGraphicsContext??this.config.parseAsGraphicsContext?B6(n):I6(n,t,e,this.config.crossOrigin)},unload(n){n.destroy(!0)}};async function I6(n,t,e,i){const s=await ee.get().fetch(n),r=ee.get().createImage();r.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await s.text())}`,r.crossOrigin=i,await r.decode();const a=t.data?.width??r.width,l=t.data?.height??r.height,u=t.data?.resolution||jy(n),h=Math.ceil(a*u),f=Math.ceil(l*u),p=ee.get().createCanvas(h,f),g=p.getContext("2d");g.imageSmoothingEnabled=!0,g.imageSmoothingQuality="high",g.drawImage(r,0,0,a*u,l*u);const{parseAsGraphicsContext:x,...w}=t.data??{},_=new ha({resource:p,alphaMode:"premultiply-alpha-on-upload",resolution:u,...w});return ky(_,e,n)}async function B6(n){const e=await(await ee.get().fetch(n)).text(),i=new ii;return i.svg(e),i}const L6=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let ro=null,ex=class{constructor(){ro||(ro=URL.createObjectURL(new Blob([L6],{type:"application/javascript"}))),this.worker=new Worker(ro)}};ex.revokeObjectURL=function(){ro&&(URL.revokeObjectURL(ro),ro=null)};const F6=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let ao=null;class VA{constructor(){ao||(ao=URL.createObjectURL(new Blob([F6],{type:"application/javascript"}))),this.worker=new Worker(ao)}}VA.revokeObjectURL=function(){ao&&(URL.revokeObjectURL(ao),ao=null)};let Rb=0,Zp;class H6{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:e}=new ex;e.addEventListener("message",i=>{e.terminate(),ex.revokeObjectURL(),t(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t,e){return this._run("loadImageBitmap",[t,e?.data?.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){Zp===void 0&&(Zp=navigator.hardwareConcurrency||4);let t=this._workerPool.pop();return!t&&this._createdWorkers<Zp&&(this._createdWorkers++,t=new VA().worker,t.addEventListener("message",e=>{this._complete(e.data),this._returnWorker(e.target),this._next()})),t}_returnWorker(t){this._workerPool.push(t)}_complete(t){this._resolveHash[t.uuid]&&(t.error!==void 0?this._resolveHash[t.uuid].reject(t.error):this._resolveHash[t.uuid].resolve(t.data),delete this._resolveHash[t.uuid])}async _run(t,e){await this._initWorkers();const i=new Promise((s,r)=>{this._queue.push({id:t,arguments:e,resolve:s,reject:r})});return this._next(),i}_next(){if(!this._queue.length)return;const t=this._getWorker();if(!t)return;const e=this._queue.pop(),i=e.id;this._resolveHash[Rb]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:Rb++,id:i})}reset(){this._workerPool.forEach(t=>t.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:t})=>{t?.(new Error("WorkerManager has been reset before completion"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}}const jb=new H6,U6=[".jpeg",".jpg",".png",".webp",".avif"],G6=["image/jpeg","image/png","image/webp","image/avif"];async function V6(n,t){const e=await ee.get().fetch(n);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${n}: ${e.status} ${e.statusText}`);const i=await e.blob();return t?.data?.alphaMode==="premultiplied-alpha"?createImageBitmap(i,{premultiplyAlpha:"none"}):createImageBitmap(i)}const WA={name:"loadTextures",id:"texture",extension:{type:lt.LoadParser,priority:Cr.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(n){return No(n,G6)||Oo(n,U6)},async load(n,t,e){let i=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await jb.isImageBitmapSupported()?i=await jb.loadImageBitmap(n,t):i=await V6(n,t):i=await new Promise((r,a)=>{i=ee.get().createImage(),i.crossOrigin=this.config.crossOrigin,i.src=n,i.complete?r(i):(i.onload=()=>{r(i)},i.onerror=a)});const s=new ha({resource:i,alphaMode:"premultiply-alpha-on-upload",resolution:t.data?.resolution||jy(n),...t.data});return ky(s,e,n)},unload(n){n.destroy(!0)}},W6=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let Jp,tm;function Y6(n,t,e){e===void 0&&!t.startsWith("data:")?n.crossOrigin=X6(t):e!==!1&&(n.crossOrigin=typeof e=="string"?e:"anonymous")}function q6(n){return new Promise((t,e)=>{n.addEventListener("canplaythrough",i),n.addEventListener("error",s),n.load();function i(){r(),t()}function s(a){r(),e(a)}function r(){n.removeEventListener("canplaythrough",i),n.removeEventListener("error",s)}})}function X6(n,t=globalThis.location){if(n.startsWith("data:"))return"";t||(t=globalThis.location);const e=new URL(n,document.baseURI);return e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol?"anonymous":""}function $6(){const n=[],t=[];for(const e of W6){const i=Il.MIME_TYPES[e.substring(1)]||`video/${e.substring(1)}`;fd(i)&&(n.push(e),t.includes(i)||t.push(i))}return{validVideoExtensions:n,validVideoMime:t}}const Q6={name:"loadVideo",id:"video",extension:{type:lt.LoadParser,name:"loadVideo"},test(n){if(!Jp||!tm){const{validVideoExtensions:i,validVideoMime:s}=$6();Jp=i,tm=s}const t=No(n,tm),e=Oo(n,Jp);return t||e},async load(n,t,e){const i={...Il.defaultOptions,resolution:t.data?.resolution||jy(n),alphaMode:t.data?.alphaMode||await $P(),...t.data},s=document.createElement("video"),r={preload:i.autoLoad!==!1?"auto":void 0,"webkit-playsinline":i.playsinline!==!1?"":void 0,playsinline:i.playsinline!==!1?"":void 0,muted:i.muted===!0?"":void 0,loop:i.loop===!0?"":void 0,autoplay:i.autoPlay!==!1?"":void 0};Object.keys(r).forEach(u=>{const h=r[u];h!==void 0&&s.setAttribute(u,h)}),i.muted===!0&&(s.muted=!0),Y6(s,n,i.crossorigin);const a=document.createElement("source");let l;if(i.mime)l=i.mime;else if(n.startsWith("data:"))l=n.slice(5,n.indexOf(";"));else if(!n.startsWith("blob:")){const u=n.split("?")[0].slice(n.lastIndexOf(".")+1).toLowerCase();l=Il.MIME_TYPES[u]||`video/${u}`}return a.src=n,l&&(a.type=l),new Promise(u=>{const h=async()=>{const f=new Il({...i,resource:s});s.removeEventListener("canplay",h),t.data.preload&&await q6(s),u(ky(f,e,n))};i.preload&&!i.autoPlay&&s.load(),s.addEventListener("canplay",h),s.appendChild(a)})},unload(n){n.destroy(!0)}},YA={extension:{type:lt.ResolveParser,name:"resolveTexture"},test:WA.test,parse:n=>({resolution:parseFloat(ko.RETINA_PREFIX.exec(n)?.[1]??"1"),format:n.split(".").pop(),src:n})},K6={extension:{type:lt.ResolveParser,priority:-2,name:"resolveJson"},test:n=>ko.RETINA_PREFIX.test(n)&&n.endsWith(".json"),parse:YA.parse};class Z6{constructor(){this._detections=[],this._initialized=!1,this.resolver=new ko,this.loader=new v6,this.cache=re,this._backgroundLoader=new u6(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){if(this._initialized){te("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let r=t.manifest;typeof r=="string"&&(r=await this.load(r)),this.resolver.addManifest(r)}const e=t.texturePreference?.resolution??1,i=typeof e=="number"?[e]:e,s=await this._detectFormats({preferredFormats:t.texturePreference?.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:s,resolution:i}}),t.preferences&&this.setPreferences(t.preferences),t.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...t.loadOptions})}add(t){this.resolver.add(t)}async load(t,e){this._initialized||await this.init();const i=yh(t),s=Mi(t).map(l=>{if(typeof l!="string"){const u=this.resolver.getAlias(l);return u.some(h=>!this.resolver.hasKey(h))&&this.add(l),Array.isArray(u)?u[0]:u}return this.resolver.hasKey(l)||this.add({alias:l,src:l}),l}),r=this.resolver.resolve(s),a=await this._mapLoadToResolve(r,e);return i?a[s[0]]:a}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let i=!1;typeof t=="string"&&(i=!0,t=[t]);const s=this.resolver.resolveBundle(t),r={},a=Object.keys(s);let l=0;const u=[],h=()=>{e?.(u.reduce((p,g)=>p+g,0)/l)},f=a.map((p,g)=>{const x=s[p],w=Object.values(x),b=[...new Set(w.flat())].reduce((C,M)=>C+(M.progressSize||1),0);return u.push(0),l+=b,this._mapLoadToResolve(x,C=>{u[g]=C*b,h()}).then(C=>{r[p]=C})});return await Promise.all(f),i?r[t[0]]:r}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return re.get(t);const e={};for(let i=0;i<t.length;i++)e[i]=re.get(t[i]);return e}async _mapLoadToResolve(t,e){const i=[...new Set(Object.values(t))];this._backgroundLoader.active=!1;const s=await this.loader.load(i,e);this._backgroundLoader.active=!0;const r={};return i.forEach(a=>{const l=s[a.src],u=[a.src];a.alias&&u.push(...a.alias),u.forEach(h=>{r[h]=l}),re.set(u,l)}),r}async unload(t){this._initialized||await this.init();const e=Mi(t).map(s=>typeof s!="string"?s.src:s),i=this.resolver.resolve(e);await this._unloadFromResolved(i)}async unloadBundle(t){this._initialized||await this.init(),t=Mi(t);const e=this.resolver.resolveBundle(t),i=Object.keys(e).map(s=>this._unloadFromResolved(e[s]));await Promise.all(i)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(i=>{re.remove(i.src)}),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const i of t.detections)t.skipDetections||await i.test()?e=await i.add(e):t.skipDetections||(e=await i.remove(e));return e=e.filter((i,s)=>e.indexOf(i)===s),e}get detections(){return this._detections}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(i=>i in t).forEach(i=>{e.config[i]=t[i]})})}}const El=new Z6;Ne.handleByList(lt.LoadParser,El.loader.parsers).handleByList(lt.ResolveParser,El.resolver.parsers).handleByList(lt.CacheParser,El.cache.parsers).handleByList(lt.DetectionParser,El.detections);Ne.add(h6,f6,d6,y6,m6,g6,x6,w6,M6,N6,D6,WA,Q6,c6,l6,YA,K6);const kb={loader:lt.LoadParser,resolver:lt.ResolveParser,cache:lt.CacheParser,detection:lt.DetectionParser};Ne.handle(lt.Asset,n=>{const t=n.ref;Object.entries(kb).filter(([e])=>!!t[e]).forEach(([e,i])=>Ne.add(Object.assign(t[e],{extension:t[e].extension??i})))},n=>{const t=n.ref;Object.keys(kb).filter(e=>!!t[e]).forEach(e=>Ne.remove(t[e]))});class Hn extends _y{constructor(t){t instanceof ii&&(t={context:t});const{context:e,roundPixels:i,...s}=t||{};super({label:"Graphics",...s}),this.renderPipeId="graphics",e?this._context=e:this._context=this._ownedContext=new ii,this._context.on("update",this.onViewUpdate,this),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=i??!1}set context(t){t!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=t,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(t){return this._context.containsPoint(t)}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):(t===!0||t?.context===!0)&&this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_callContextMethod(t,e){return this.context[t](...e),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new Hn(this._context.clone()):(this._ownedContext=null,new Hn(this._context))}lineStyle(t,e,i){Ct(Lt,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const s={};return t&&(s.width=t),e&&(s.color=e),i&&(s.alpha=i),this.context.strokeStyle=s,this}beginFill(t,e){Ct(Lt,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const i={};return t!==void 0&&(i.color=t),e!==void 0&&(i.alpha=e),this.context.fillStyle=i,this}endFill(){Ct(Lt,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const t=this.context.strokeStyle;return(t.width!==ii.defaultStrokeStyle.width||t.color!==ii.defaultStrokeStyle.color||t.alpha!==ii.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...t){return Ct(Lt,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return Ct(Lt,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return Ct(Lt,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return Ct(Lt,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return Ct(Lt,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return Ct(Lt,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}class J6 extends _y{constructor(t,e){const{text:i,resolution:s,style:r,anchor:a,width:l,height:u,roundPixels:h,...f}=t;super({...f}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=e,this.text=i??"",this.style=r,this.resolution=s??null,this.allowChildren=!1,this._anchor=new Ge({_onUpdate:()=>{this.onViewUpdate()}}),a&&(this.anchor=a),this.roundPixels=h??!1,l!==void 0&&(this.width=l),u!==void 0&&(this.height=u)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}set text(t){t=t.toString(),this._text!==t&&(this._text=t,this.onViewUpdate())}get text(){return this._text}set resolution(t){this._autoResolution=t===null,this._resolution=t,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(t){t||(t={}),this._style?.off("update",this.onViewUpdate,this),t instanceof this._styleClass?this._style=t:this._style=new this._styleClass(t),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(t){this._setWidth(t,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(t){this._setHeight(t,this.bounds.height)}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this.bounds.width,t.height=Math.abs(this.scale.y)*this.bounds.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this.bounds.width),e!==void 0&&this._setHeight(e,this.bounds.height)}containsPoint(t){const e=this.bounds.width,i=this.bounds.height,s=-e*this.anchor.x;let r=0;return t.x>=s&&t.x<=s+e&&(r=-i*this.anchor.y,t.y>=r&&t.y<=r+i)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(t=!1){super.destroy(t),this.owner=null,this._bounds=null,this._anchor=null,(typeof t=="boolean"?t:t?.style)&&this._style.destroy(t),this._style=null,this._text=null}get styleKey(){return`${this._text}:${this._style.styleKey}:${this._resolution}`}}function tB(n,t){let e=n[0]??{};return(typeof e=="string"||n[1])&&(Ct(Lt,`use new ${t}({ text: "hi!", style }) instead`),e={text:e,style:n[1]}),e}let Yr=null,Ss=null;function eB(n,t){Yr||(Yr=ee.get().createCanvas(256,128),Ss=Yr.getContext("2d",{willReadFrequently:!0}),Ss.globalCompositeOperation="copy",Ss.globalAlpha=1),(Yr.width<n||Yr.height<t)&&(Yr.width=po(n),Yr.height=po(t))}function Nb(n,t,e){for(let i=0,s=4*e*t;i<t;++i,s+=4)if(n[s+3]!==0)return!1;return!0}function Ob(n,t,e,i,s){const r=4*t;for(let a=i,l=i*r+4*e;a<=s;++a,l+=r)if(n[l+3]!==0)return!1;return!0}function nB(...n){let t=n[0];t.canvas||(t={canvas:n[0],resolution:n[1]});const{canvas:e}=t,i=Math.min(t.resolution??1,1),s=t.width??e.width,r=t.height??e.height;let a=t.output;if(eB(s,r),!Ss)throw new TypeError("Failed to get canvas 2D context");Ss.drawImage(e,0,0,s,r,0,0,s*i,r*i);const u=Ss.getImageData(0,0,s,r).data;let h=0,f=0,p=s-1,g=r-1;for(;f<r&&Nb(u,s,f);)++f;if(f===r)return Yt.EMPTY;for(;Nb(u,s,g);)--g;for(;Ob(u,s,h,f,g);)++h;for(;Ob(u,s,p,f,g);)--p;return++p,++g,Ss.globalCompositeOperation="source-over",Ss.strokeRect(h,f,p-h,g-f),Ss.globalCompositeOperation="copy",a??(a=new Yt),a.set(h/i,f/i,(p-h)/i,(g-f)/i),a}const zb=new Yt;class iB{getCanvasAndContext(t){const{text:e,style:i,resolution:s=1}=t,r=i._getFinalPadding(),a=Yi.measureText(e||" ",i),l=Math.ceil(Math.ceil(Math.max(1,a.width)+r*2)*s),u=Math.ceil(Math.ceil(Math.max(1,a.height)+r*2)*s),h=Zl.getOptimalCanvasAndContext(l,u);this._renderTextToCanvas(e,i,r,s,h);const f=i.trim?nB({canvas:h.canvas,width:l,height:u,resolution:1,output:zb}):zb.set(0,0,l,u);return{canvasAndContext:h,frame:f}}returnCanvasAndContext(t){Zl.returnCanvasAndContext(t)}_renderTextToCanvas(t,e,i,s,r){const{canvas:a,context:l}=r,u=vh(e),h=Yi.measureText(t||" ",e),f=h.lines,p=h.lineHeight,g=h.lineWidths,x=h.maxLineWidth,w=h.fontProperties,_=a.height;if(l.resetTransform(),l.scale(s,s),l.textBaseline=e.textBaseline,e._stroke?.width){const P=e._stroke;l.lineWidth=P.width,l.miterLimit=P.miterLimit,l.lineJoin=P.join,l.lineCap=P.cap}l.font=u;let b,C;const M=e.dropShadow?2:1;for(let P=0;P<M;++P){const T=e.dropShadow&&P===0,E=T?Math.ceil(Math.max(1,_)+i*2):0,R=E*s;if(T){l.fillStyle="black",l.strokeStyle="black";const k=e.dropShadow,B=k.color,I=k.alpha;l.shadowColor=Re.shared.setValue(B).setAlpha(I).toRgbaString();const X=k.blur*s,q=k.distance*s;l.shadowBlur=X,l.shadowOffsetX=Math.cos(k.angle)*q,l.shadowOffsetY=Math.sin(k.angle)*q+R}else{if(l.fillStyle=e._fill?wh(e._fill,l,h,i*2):null,e._stroke?.width){const k=e._stroke.width*.5+i*2;l.strokeStyle=wh(e._stroke,l,h,k)}l.shadowColor="black"}let N=(p-w.fontSize)/2;p-w.fontSize<0&&(N=0);const O=e._stroke?.width??0;for(let k=0;k<f.length;k++)b=O/2,C=O/2+k*p+w.ascent+N,e.align==="right"?b+=x-g[k]:e.align==="center"&&(b+=(x-g[k])/2),e._stroke?.width&&this._drawLetterSpacing(f[k],e,r,b+i,C+i-E,!0),e._fill!==void 0&&this._drawLetterSpacing(f[k],e,r,b+i,C+i-E)}}_drawLetterSpacing(t,e,i,s,r,a=!1){const{context:l}=i,u=e.letterSpacing;let h=!1;if(Yi.experimentalLetterSpacingSupported&&(Yi.experimentalLetterSpacing?(l.letterSpacing=`${u}px`,l.textLetterSpacing=`${u}px`,h=!0):(l.letterSpacing="0px",l.textLetterSpacing="0px")),u===0||h){a?l.strokeText(t,s,r):l.fillText(t,s,r);return}let f=s;const p=Yi.graphemeSegmenter(t);let g=l.measureText(t).width,x=0;for(let w=0;w<p.length;++w){const _=p[w];a?l.strokeText(_,f,r):l.fillText(_,f,r);let b="";for(let C=w+1;C<p.length;++C)b+=p[C];x=l.measureText(b).width,f+=g-x+u,g=x}}}const Db=new iB;let sB=class extends J6{constructor(...t){const e=tB(t,"Text");super(e,xr),this.renderPipeId="text",e.textureStyle&&(this.textureStyle=e.textureStyle instanceof mo?e.textureStyle:new mo(e.textureStyle))}updateBounds(){const t=this._bounds,e=this._anchor;let i=0,s=0;if(this._style.trim){const{frame:r,canvasAndContext:a}=Db.getCanvasAndContext({text:this.text,style:this._style,resolution:1});Db.returnCanvasAndContext(a),i=r.width,s=r.height}else{const r=Yi.measureText(this._text,this._style);i=r.width,s=r.height}t.minX=-e._x*i,t.maxX=t.minX+i,t.minY=-e._y*s,t.maxY=t.minY+s}};const qA=class XA extends pe{constructor(t={}){t={...XA.defaultOptions,...t},super(),this.renderLayerChildren=[],this.sortableChildren=t.sortableChildren,this.sortFunction=t.sortFunction}attach(...t){for(let e=0;e<t.length;e++){const i=t[e];if(i.parentRenderLayer){if(i.parentRenderLayer===this)continue;i.parentRenderLayer.detach(i)}this.renderLayerChildren.push(i),i.parentRenderLayer=this;const s=this.renderGroup||this.parentRenderGroup;s&&(s.structureDidChange=!0)}return t[0]}detach(...t){for(let e=0;e<t.length;e++){const i=t[e],s=this.renderLayerChildren.indexOf(i);s!==-1&&this.renderLayerChildren.splice(s,1),i.parentRenderLayer=null;const r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0)}return t[0]}detachAll(){const t=this.renderLayerChildren;for(let e=0;e<t.length;e++)t[e].parentRenderLayer=null;this.renderLayerChildren.length=0}collectRenderables(t,e,i){const s=this.renderLayerChildren,r=s.length;this.sortableChildren&&this.sortRenderLayerChildren();for(let a=0;a<r;a++)s[a].parent||te("Container must be added to both layer and scene graph. Layers only handle render order - the scene graph is required for transforms (addChild)",s[a]),s[a].collectRenderables(t,e,this)}sortRenderLayerChildren(){this.renderLayerChildren.sort(this.sortFunction)}_getGlobalBoundsRecursive(t,e,i){if(!t)return;const s=this.renderLayerChildren;for(let r=0;r<s.length;r++)s[r]._getGlobalBoundsRecursive(!0,e,this)}getFastGlobalBounds(t,e){return super.getFastGlobalBounds(t,e)}addChild(...t){throw new Error("RenderLayer.addChild() is not available. Please use RenderLayer.attach()")}removeChild(...t){throw new Error("RenderLayer.removeChild() is not available. Please use RenderLayer.detach()")}removeChildren(t,e){throw new Error("RenderLayer.removeChildren() is not available. Please use RenderLayer.detach()")}removeChildAt(t){throw new Error("RenderLayer.removeChildAt() is not available")}getChildAt(t){throw new Error("RenderLayer.getChildAt() is not available")}setChildIndex(t,e){throw new Error("RenderLayer.setChildIndex() is not available")}getChildIndex(t){throw new Error("RenderLayer.getChildIndex() is not available")}addChildAt(t,e){throw new Error("RenderLayer.addChildAt() is not available")}swapChildren(t,e){throw new Error("RenderLayer.swapChildren() is not available")}reparentChild(...t){throw new Error("RenderLayer.reparentChild() is not available with the render layer")}reparentChildAt(t,e){throw new Error("RenderLayer.reparentChildAt() is not available with the render layer")}};qA.defaultOptions={sortableChildren:!1,sortFunction:(n,t)=>n.zIndex-t.zIndex};let pd=qA;Ne.add(lz,cz);var em={exports:{}},_s={};var Ib;function rB(){return Ib||(Ib=1,_s.ConcurrentRoot=1,_s.ContinuousEventPriority=8,_s.DefaultEventPriority=32,_s.DiscreteEventPriority=2,_s.IdleEventPriority=268435456,_s.LegacyRoot=0,_s.NoEventPriority=0),_s}var Bb;function aB(){return Bb||(Bb=1,em.exports=rB()),em.exports}var Ja=aB();const Ny=A.createContext({}),oB=Ny.Provider;Ny.Consumer;function $A(n,t){const e=Object.getPrototypeOf(n),i=Object.getOwnPropertyDescriptor(e,t);return!(typeof i>"u"||i.writable||i.set)}const yr={currentUpdatePriority:Ja.DefaultEventPriority,unmountQueue:new Set};function Lb(n,...t){}function QA(n,t={}){const e=n;return e.__pixireact=Object.assign({filters:[],parent:null,root:null,type:""},t),e}var lB="0.0.0-development",cB={version:lB};function uB(){}function KA(n,t,e){t instanceof xa&&(t.__pixireact.parent=n,typeof e=="number"?n.__pixireact.filters.splice(e,0,t):n.__pixireact.filters.push(t),n.filters=n.__pixireact.filters)}function nm(n,t){t&&(t instanceof pe?n.addChild(t):t instanceof xa&&KA(n,t))}function hB(){}function dB(){return!1}const nx=Object.freeze({onclick:"onClick",onglobalmousemove:"onGlobalMouseMove",onglobalpointermove:"onGlobalPointerMove",onglobaltouchmove:"onGlobalTouchMove",onmousedown:"onMouseDown",onmouseenter:"onMouseEnter",onmouseleave:"onMouseLeave",onmousemove:"onMouseMove",onmouseout:"onMouseOut",onmouseover:"onMouseOver",onmouseup:"onMouseUp",onmouseupoutside:"onMouseUpOutside",onpointercancel:"onPointerCancel",onpointerdown:"onPointerDown",onpointerenter:"onPointerEnter",onpointerleave:"onPointerLeave",onpointermove:"onPointerMove",onpointerout:"onPointerOut",onpointerover:"onPointerOver",onpointertap:"onPointerTap",onpointerup:"onPointerUp",onpointerupoutside:"onPointerUpOutside",onrightclick:"onRightClick",onrightdown:"onRightDown",onrightup:"onRightUp",onrightupoutside:"onRightUpOutside",ontap:"onTap",ontouchcancel:"onTouchCancel",ontouchend:"onTouchEnd",ontouchendoutside:"onTouchEndOutside",ontouchmove:"onTouchMove",ontouchstart:"onTouchStart",onwheel:"onWheel"}),Sh=Object.freeze({onClick:"onclick",onGlobalMouseMove:"onglobalmousemove",onGlobalPointerMove:"onglobalpointermove",onGlobalTouchMove:"onglobaltouchmove",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseUpOutside:"onmouseupoutside",onPointerCancel:"onpointercancel",onPointerDown:"onpointerdown",onPointerEnter:"onpointerenter",onPointerLeave:"onpointerleave",onPointerMove:"onpointermove",onPointerOut:"onpointerout",onPointerOver:"onpointerover",onPointerTap:"onpointertap",onPointerUp:"onpointerup",onPointerUpOutside:"onpointerupoutside",onRightClick:"onrightclick",onRightDown:"onrightdown",onRightUp:"onrightup",onRightUpOutside:"onrightupoutside",onTap:"ontap",onTouchCancel:"ontouchcancel",onTouchEnd:"ontouchend",onTouchEndOutside:"ontouchendoutside",onTouchMove:"ontouchmove",onTouchStart:"ontouchstart",onWheel:"onwheel"});function ZA(n){return Array.isArray(n)}function JA(n,t,e={arrays:"reference",objects:"reference",strict:!0}){const{arrays:i,objects:s,strict:r}=e;if(typeof n!=typeof t||!!n!=!!t)return!1;if(gB(n)||pB(n))return n===t;const a=mB(n);if(a&&s==="reference")return n===t;const l=ZA(n);if(l&&i==="reference")return n===t;if((l||a)&&n===t)return!0;let u;for(u in n)if(!(u in t))return!1;let h=n;if(r&&(h=t),a&&i==="shallow"&&s==="shallow"){for(u in h)if(!JA(n[u],t[u],{strict:r,objects:"reference"}))return!1}else for(u in h)if(n[u]!==t[u])return!1;if(tT(u)){if(l&&n.length===0&&t.length===0||a&&Object.keys(n).length===0&&Object.keys(t).length===0)return!0;if(n!==t)return!1}return!0}function fB(n){return n===null}function pB(n){return typeof n=="number"}function mB(n){return!(n!==Object(n)||ZA(n)||typeof n=="function")}function gB(n){return typeof n=="string"}function tT(n){return n===void 0}const xB=Object.freeze(["children","key","ref"]);function yB(n,t=[]){const e={};return Object.entries(n).reduce((i,[s,r])=>(t.includes(s)||(i[s]=r),i),e)}function ix(n,t=[]){return yB(n,xB.concat(t))}const vB="__default";function eT(n,t={},e=!1){const i=ix(n),s=ix(t),r=Object.entries(i),a=[];if(e){const l=Object.keys(s);let u=0;for(;u<l.length;){const h=l[u];!(h in i)&&r.unshift([h,`${vB}remove`]),u+=1}}return r.forEach(([l,u])=>{if(JA(u,s[l]))return;if(l in Sh){a.push([l,u,!0,[]]);return}let h=[];l.includes("-")&&(h=l.split("-")),a.push([l,u,!1,h]);for(const f in i){const p=i[f];f.startsWith(`${l}-`)&&a.push([f,p,!1,f.split("-")])}}),{changes:a}}function _B(n){const t=n;return!(!t||!t.changes)}const bB="__default",Fb=new Map,Hb={};function Ub(n,t){if(n){const e=n[t];if(!tT(e)&&!fB(e))return e}return n}function nT(n,t){const{__pixireact:e={},...i}=n;let s;_B(t)?s=t:s=eT(t,i);const{changes:r}=s;let a=0;for(;a<r.length;){const l=r[a];let u=!1,h=l[0],f=l[1];const p=l[2],g=l[3];let x=n,w=x[h];if(h==="draw"&&typeof f=="function"&&(n instanceof Hn?f(n):(u=!0,Lb("warn",`The \`draw\` prop was used on a \`${e.type}\` component, but it's only valid on \`graphics\` components.`))),h in nx){const _=h;u=!0,Hb[h]||(Hb[h]=!0,Lb("warn",`Event names must be pascal case; instead of \`${h}\`, you probably want \`${nx[_]}\`.`))}if(!u){if(g.length&&(w=g.reduce(Ub,x),!(w&&w.set))){const[_,...b]=g.reverse();x=b.reverse().reduce(Ub,x),h=_}if(f===`${bB}remove`)if(x instanceof pe){let _=Fb.get(x.constructor);_||(_=x.constructor,_=new _,Fb.set(x.constructor,_)),f=_[h]}else f=0;if(p&&e){const b=Sh[h];f?x[b]=f:delete x[b]}else $A(x,h)||(x[h]=f)}a+=1}return n}function wB(n,t,e,i){const{children:s,...r}=i,{children:a,...l}=e,u=eT(r,l,!0);return u.changes.length?u:null}function SB(n,t,e,i){const s=wB(n,t,e,i);s&&nT(n,s)}const CB=Object.freeze([...Object.keys(nx),"draw"]),sx={};function MB(n){const t=n.charAt(0),e=n.substring(1);return`${t.toUpperCase()}${e}`}function PB(n,t){return t.toLowerCase()}function AB(n){let t=n;return n.startsWith("pixi")&&(t=n.replace(/^pixi([A-Z])/,PB)),t}function TB(n,t,e){const i=AB(n),s=MB(i);if(!(s in sx))throw new Error(`${s} is not part of the PIXI namespace! Did you forget to extend?`);const r=sx[s],a=ix(t,CB);Object.entries(t).forEach(([u,h])=>{if(u in Sh){const f=Sh[u];a[f]=h}});const l=QA(new r(a),{root:e,type:i});return nT(l,t),l}var im={exports:{}},sm={exports:{}},rm={exports:{}},am={};var Gb;function EB(){return Gb||(Gb=1,(function(n){function t(D,H){var J=D.length;D.push(H);t:for(;0<J;){var V=J-1>>>1,Z=D[V];if(0<s(Z,H))D[V]=H,D[J]=Z,J=V;else break t}}function e(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var H=D[0],J=D.pop();if(J!==H){D[0]=J;t:for(var V=0,Z=D.length,gt=Z>>>1;V<gt;){var tt=2*(V+1)-1,ft=D[tt],xt=tt+1,pt=D[xt];if(0>s(ft,J))xt<Z&&0>s(pt,ft)?(D[V]=pt,D[xt]=J,V=xt):(D[V]=ft,D[tt]=J,V=tt);else if(xt<Z&&0>s(pt,J))D[V]=pt,D[xt]=J,V=xt;else break t}}return H}function s(D,H){var J=D.sortIndex-H.sortIndex;return J!==0?J:D.id-H.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var u=[],h=[],f=1,p=null,g=3,x=!1,w=!1,_=!1,b=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function P(D){for(var H=e(h);H!==null;){if(H.callback===null)i(h);else if(H.startTime<=D)i(h),H.sortIndex=H.expirationTime,t(u,H);else break;H=e(h)}}function T(D){if(_=!1,P(D),!w)if(e(u)!==null)w=!0,U();else{var H=e(h);H!==null&&Y(T,H.startTime-D)}}var E=!1,R=-1,N=5,O=-1;function k(){return!(n.unstable_now()-O<N)}function B(){if(E){var D=n.unstable_now();O=D;var H=!0;try{t:{w=!1,_&&(_=!1,C(R),R=-1),x=!0;var J=g;try{e:{for(P(D),p=e(u);p!==null&&!(p.expirationTime>D&&k());){var V=p.callback;if(typeof V=="function"){p.callback=null,g=p.priorityLevel;var Z=V(p.expirationTime<=D);if(D=n.unstable_now(),typeof Z=="function"){p.callback=Z,P(D),H=!0;break e}p===e(u)&&i(u),P(D)}else i(u);p=e(u)}if(p!==null)H=!0;else{var gt=e(h);gt!==null&&Y(T,gt.startTime-D),H=!1}}break t}finally{p=null,g=J,x=!1}H=void 0}}finally{H?I():E=!1}}}var I;if(typeof M=="function")I=function(){M(B)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,q=X.port2;X.port1.onmessage=B,I=function(){q.postMessage(null)}}else I=function(){b(B,0)};function U(){E||(E=!0,I())}function Y(D,H){R=b(function(){D(n.unstable_now())},H)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){w||x||(w=!0,U())},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return e(u)},n.unstable_next=function(D){switch(g){case 1:case 2:case 3:var H=3;break;default:H=g}var J=g;g=H;try{return D()}finally{g=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,H){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var J=g;g=D;try{return H()}finally{g=J}},n.unstable_scheduleCallback=function(D,H,J){var V=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?V+J:V):J=V,D){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=J+Z,D={id:f++,callback:H,priorityLevel:D,startTime:J,expirationTime:Z,sortIndex:-1},J>V?(D.sortIndex=J,t(h,D),e(u)===null&&D===e(h)&&(_?(C(R),R=-1):_=!0,Y(T,J-V))):(D.sortIndex=Z,t(u,D),w||x||(w=!0,U())),D},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(D){var H=g;return function(){var J=g;g=H;try{return D.apply(this,arguments)}finally{g=J}}}})(am)),am}var Vb;function RB(){return Vb||(Vb=1,rm.exports=EB()),rm.exports}var Wb;function jB(){return Wb||(Wb=1,(function(n){n.exports=function(t){function e(o,c,d,m){return new e3(o,c,d,m)}function i(){}function s(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)c+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return o===null||typeof o!="object"?null:(o=O_&&o[O_]||o["@@iterator"],typeof o=="function"?o:null)}function a(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===o3?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case Ta:return"Fragment";case Aa:return"Portal";case Vf:return"Profiler";case j_:return"StrictMode";case Yf:return"Suspense";case qf:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case Ys:return(o.displayName||"Context")+".Provider";case k_:return(o._context.displayName||"Context")+".Consumer";case Wf:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Xf:return c=o.displayName||null,c!==null?c:a(o.type)||"Memo";case qs:c=o._payload,o=o._init;try{return a(o(c))}catch{}}return null}function l(o){if($f===void 0)try{throw Error()}catch(d){var c=d.stack.trim().match(/\n( *(at )?)/);$f=c&&c[1]||"",z_=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$f+o+z_}function u(o,c){if(!o||Qf)return"";Qf=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(c){var st=function(){throw Error()};if(Object.defineProperty(st.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(st,[])}catch(_t){var rt=_t}Reflect.construct(o,[],st)}else{try{st.call()}catch(_t){rt=_t}o.call(st.prototype)}}else{try{throw Error()}catch(_t){rt=_t}(st=o())&&typeof st.catch=="function"&&st.catch(function(){})}}catch(_t){if(_t&&rt&&typeof _t.stack=="string")return[_t.stack,rt.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=m.DetermineComponentFrameRoot(),j=S[0],z=S[1];if(j&&z){var F=j.split(`
`),$=z.split(`
`);for(v=m=0;m<F.length&&!F[m].includes("DetermineComponentFrameRoot");)m++;for(;v<$.length&&!$[v].includes("DetermineComponentFrameRoot");)v++;if(m===F.length||v===$.length)for(m=F.length-1,v=$.length-1;1<=m&&0<=v&&F[m]!==$[v];)v--;for(;1<=m&&0<=v;m--,v--)if(F[m]!==$[v]){if(m!==1||v!==1)do if(m--,v--,0>v||F[m]!==$[v]){var it=`
`+F[m].replace(" at new "," at ");return o.displayName&&it.includes("<anonymous>")&&(it=it.replace("<anonymous>",o.displayName)),it}while(1<=m&&0<=v);break}}}finally{Qf=!1,Error.prepareStackTrace=d}return(d=o?o.displayName||o.name:"")?l(d):""}function h(o){switch(o.tag){case 26:case 27:case 5:return l(o.type);case 16:return l("Lazy");case 13:return l("Suspense");case 19:return l("SuspenseList");case 0:case 15:return o=u(o.type,!1),o;case 11:return o=u(o.type.render,!1),o;case 1:return o=u(o.type,!0),o;default:return""}}function f(o){try{var c="";do c+=h(o),o=o.return;while(o);return c}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function p(o){var c=o,d=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(d=c.return),o=c.return;while(o)}return c.tag===3?d:null}function g(o){if(p(o)!==o)throw Error(s(188))}function x(o){var c=o.alternate;if(!c){if(c=p(o),c===null)throw Error(s(188));return c!==o?null:o}for(var d=o,m=c;;){var v=d.return;if(v===null)break;var S=v.alternate;if(S===null){if(m=v.return,m!==null){d=m;continue}break}if(v.child===S.child){for(S=v.child;S;){if(S===d)return g(v),o;if(S===m)return g(v),c;S=S.sibling}throw Error(s(188))}if(d.return!==m.return)d=v,m=S;else{for(var j=!1,z=v.child;z;){if(z===d){j=!0,d=v,m=S;break}if(z===m){j=!0,m=v,d=S;break}z=z.sibling}if(!j){for(z=S.child;z;){if(z===d){j=!0,d=S,m=v;break}if(z===m){j=!0,m=S,d=v;break}z=z.sibling}if(!j)throw Error(s(189))}}if(d.alternate!==m)throw Error(s(190))}if(d.tag!==3)throw Error(s(188));return d.stateNode.current===d?o:c}function w(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=w(o),c!==null)return c;o=o.sibling}return null}function _(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(o.tag!==4&&(c=_(o),c!==null))return c;o=o.sibling}return null}function b(o){return{current:o}}function C(o){0>Ra||(o.current=np[Ra],np[Ra]=null,Ra--)}function M(o,c){Ra++,np[Ra]=o.current,o.current=c}function P(o){return o>>>=0,o===0?32:31-(wj(o)/Sj|0)|0}function T(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function E(o,c){var d=o.pendingLanes;if(d===0)return 0;var m=0,v=o.suspendedLanes,S=o.pingedLanes,j=o.warmLanes;o=o.finishedLanes!==0;var z=d&134217727;return z!==0?(d=z&~v,d!==0?m=T(d):(S&=z,S!==0?m=T(S):o||(j=z&~j,j!==0&&(m=T(j))))):(z=d&~v,z!==0?m=T(z):S!==0?m=T(S):o||(j=d&~j,j!==0&&(m=T(j)))),m===0?0:c!==0&&c!==m&&(c&v)===0&&(v=m&-m,j=c&-c,v>=j||v===32&&(j&4194176)!==0)?c:m}function R(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function N(o,c){switch(o){case 1:case 2:case 4:case 8:return c+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function O(){var o=ou;return ou<<=1,(ou&4194176)===0&&(ou=128),o}function k(){var o=lu;return lu<<=1,(lu&62914560)===0&&(lu=4194304),o}function B(o){for(var c=[],d=0;31>d;d++)c.push(o);return c}function I(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function X(o,c,d,m,v,S){var j=o.pendingLanes;o.pendingLanes=d,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=d,o.entangledLanes&=d,o.errorRecoveryDisabledLanes&=d,o.shellSuspendCounter=0;var z=o.entanglements,F=o.expirationTimes,$=o.hiddenUpdates;for(d=j&~d;0<d;){var it=31-Tn(d),st=1<<it;z[it]=0,F[it]=-1;var rt=$[it];if(rt!==null)for($[it]=null,it=0;it<rt.length;it++){var _t=rt[it];_t!==null&&(_t.lane&=-536870913)}d&=~st}m!==0&&q(o,m,0),S!==0&&v===0&&o.tag!==0&&(o.suspendedLanes|=S&~(j&~c))}function q(o,c,d){o.pendingLanes|=c,o.suspendedLanes&=~c;var m=31-Tn(c);o.entangledLanes|=c,o.entanglements[m]=o.entanglements[m]|1073741824|d&4194218}function U(o,c){var d=o.entangledLanes|=c;for(o=o.entanglements;d;){var m=31-Tn(d),v=1<<m;v&c|o[m]&c&&(o[m]|=c),d&=~v}}function Y(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function D(o){if(En&&typeof En.onCommitFiberRoot=="function")try{En.onCommitFiberRoot(Jo,o,void 0,(o.current.flags&128)===128)}catch{}}function H(o){if(typeof Tj=="function"&&Ej(o),En&&typeof En.setStrictMode=="function")try{En.setStrictMode(Jo,o)}catch{}}function J(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}function V(o,c){if(typeof o=="object"&&o!==null){var d=o1.get(o);return d!==void 0?d:(c={value:o,source:c,stack:f(c)},o1.set(o,c),c)}return{value:o,source:c,stack:f(c)}}function Z(o,c){ka[Na++]=hu,ka[Na++]=uu,uu=o,hu=c}function gt(o,c,d){Qn[Kn++]=fs,Qn[Kn++]=ps,Qn[Kn++]=Or,Or=o;var m=fs;o=ps;var v=32-Tn(m)-1;m&=~(1<<v),d+=1;var S=32-Tn(c)+v;if(30<S){var j=v-v%5;S=(m&(1<<j)-1).toString(32),m>>=j,v-=j,fs=1<<32-Tn(c)+v|d<<v|m,ps=S+o}else fs=1<<S|d<<v|m,ps=o}function tt(o){o.return!==null&&(Z(o,1),gt(o,1,0))}function ft(o){for(;o===uu;)uu=ka[--Na],ka[Na]=null,hu=ka[--Na],ka[Na]=null;for(;o===Or;)Or=Qn[--Kn],Qn[Kn]=null,ps=Qn[--Kn],Qn[Kn]=null,fs=Qn[--Kn],Qn[Kn]=null}function xt(o,c){M($s,c),M(tl,o),M(Ue,null),o=u3(c),C(Ue),M(Ue,o)}function pt(){C(Ue),C(tl),C($s)}function Kt(o){o.memoizedState!==null&&M(du,o);var c=Ue.current,d=h3(c,o.type);c!==d&&(M(tl,o),M(Ue,d))}function Rt(o){tl.current===o&&(C(Ue),C(tl)),du.current===o&&(C(du),ds?Nr._currentValue=Ea:Nr._currentValue2=Ea)}function be(o){var c=Error(s(418,""));throw It(V(c,o)),rp}function we(o,c){if(!Xn)throw Error(s(175));sj(o.stateNode,o.type,o.memoizedProps,c,o)||be(o)}function wn(o){for(Je=o.return;Je;)switch(Je.tag){case 3:case 27:Ii=!0;return;case 5:case 13:Ii=!1;return;default:Je=Je.return}}function gi(o){if(!Xn||o!==Je)return!1;if(!Nt)return wn(o),Nt=!0,!1;var c=!1;if(qe?o.tag!==3&&o.tag!==27&&(o.tag!==5||Q_(o.type)&&!au(o.type,o.memoizedProps))&&(c=!0):o.tag!==3&&(o.tag!==5||Q_(o.type)&&!au(o.type,o.memoizedProps))&&(c=!0),c&&Xe&&be(o),wn(o),o.tag===13){if(!Xn)throw Error(s(316));if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(317));Xe=oj(o)}else Xe=Je?X_(o.stateNode):null;return!0}function ct(){Xn&&(Xe=Je=null,Nt=!1)}function It(o){vi===null?vi=[o]:vi.push(o)}function Mt(){for(var o=Oa,c=ap=Oa=0;c<o;){var d=Zn[c];Zn[c++]=null;var m=Zn[c];Zn[c++]=null;var v=Zn[c];Zn[c++]=null;var S=Zn[c];if(Zn[c++]=null,m!==null&&v!==null){var j=m.pending;j===null?v.next=v:(v.next=j.next,j.next=v),m.pending=v}S!==0&&rs(d,v,S)}}function qt(o,c,d,m){Zn[Oa++]=o,Zn[Oa++]=c,Zn[Oa++]=d,Zn[Oa++]=m,ap|=m,o.lanes|=m,o=o.alternate,o!==null&&(o.lanes|=m)}function je(o,c,d,m){return qt(o,c,d,m),Ke(o)}function Oe(o,c){return qt(o,null,null,c),Ke(o)}function rs(o,c,d){o.lanes|=d;var m=o.alternate;m!==null&&(m.lanes|=d);for(var v=!1,S=o.return;S!==null;)S.childLanes|=d,m=S.alternate,m!==null&&(m.childLanes|=d),S.tag===22&&(o=S.stateNode,o===null||o._visibility&1||(v=!0)),o=S,S=S.return;v&&c!==null&&o.tag===3&&(S=o.stateNode,v=31-Tn(d),S=S.hiddenUpdates,o=S[v],o===null?S[v]=[c]:o.push(c),c.lane=d|536870912)}function Ke(o){if(50<cl)throw cl=0,wp=null,Error(s(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}function Di(o){o!==za&&o.next===null&&(za===null?fu=za=o:za=za.next=o),pu=!0,op||(op=!0,kR(jR))}function ba(o,c){if(!lp&&pu){lp=!0;do for(var d=!1,m=fu;m!==null;){if(o!==0){var v=m.pendingLanes;if(v===0)var S=0;else{var j=m.suspendedLanes,z=m.pingedLanes;S=(1<<31-Tn(42|o)+1)-1,S&=v&~(j&~z),S=S&201326677?S&201326677|1:S?S|2:0}S!==0&&(d=!0,j0(m,S))}else S=jt,S=E(m,m===Zt?S:0),(S&3)===0||R(m,S)||(d=!0,j0(m,S));m=m.next}while(d);lp=!1}}function jR(){pu=op=!1;var o=0;Da!==0&&(v3()&&(o=Da),Da=0);for(var c=yi(),d=null,m=fu;m!==null;){var v=m.next,S=E0(m,c);S===0?(m.next=null,d===null?fu=v:d.next=v,v===null&&(za=d)):(d=m,(o!==0||(S&3)!==0)&&(pu=!0)),m=v}ba(o)}function E0(o,c){for(var d=o.suspendedLanes,m=o.pingedLanes,v=o.expirationTimes,S=o.pendingLanes&-62914561;0<S;){var j=31-Tn(S),z=1<<j,F=v[j];F===-1?((z&d)===0||(z&m)!==0)&&(v[j]=N(z,c)):F<=c&&(o.expiredLanes|=z),S&=~z}if(c=Zt,d=jt,d=E(o,o===c?d:0),m=o.callbackNode,d===0||o===c&&Jt===2||o.cancelPendingCommit!==null)return m!==null&&m!==null&&ip(m),o.callbackNode=null,o.callbackPriority=0;if((d&3)===0||R(o,d)){if(c=d&-d,c===o.callbackPriority)return c;switch(m!==null&&ip(m),Y(d)){case 2:case 8:d=Pj;break;case 32:d=sp;break;case 268435456:d=Aj;break;default:d=sp}return m=R0.bind(null,o),d=cu(d,m),o.callbackPriority=c,o.callbackNode=d,c}return m!==null&&m!==null&&ip(m),o.callbackPriority=2,o.callbackNode=null,2}function R0(o,c){var d=o.callbackNode;if(Rr()&&o.callbackNode!==d)return null;var m=jt;return m=E(o,o===Zt?m:0),m===0?null:(u_(o,m,c),E0(o,yi()),o.callbackNode!=null&&o.callbackNode===d?R0.bind(null,o):null)}function j0(o,c){if(Rr())return null;u_(o,c,!0)}function kR(o){M3?P3(function(){(Gt&6)!==0?cu(a1,o):o()}):cu(a1,o)}function Ld(){return Da===0&&(Da=O()),Da}function NR(o,c){if(el===null){var d=el=[];cp=0,Ia=Ld(),Ba={status:"pending",value:void 0,then:function(m){d.push(m)}}}return cp++,c.then(k0,k0),c}function k0(){if(--cp===0&&el!==null){Ba!==null&&(Ba.status="fulfilled");var o=el;el=null,Ia=0,Ba=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function OR(o,c){var d=[],m={status:"pending",value:null,reason:null,then:function(v){d.push(v)}};return o.then(function(){m.status="fulfilled",m.value=c;for(var v=0;v<d.length;v++)(0,d[v])(c)},function(v){for(m.status="rejected",m.reason=v,v=0;v<d.length;v++)(0,d[v])(void 0)}),m}function Fd(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hd(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Is(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Bs(o,c,d){var m=o.updateQueue;if(m===null)return null;if(m=m.shared,(Gt&2)!==0){var v=m.pending;return v===null?c.next=c:(c.next=v.next,v.next=c),m.pending=c,c=Ke(o),rs(o,null,d),c}return qt(o,m,c,d),Ke(o)}function Io(o,c,d){if(c=c.updateQueue,c!==null&&(c=c.shared,(d&4194176)!==0)){var m=c.lanes;m&=o.pendingLanes,d|=m,c.lanes=d,U(o,d)}}function Ud(o,c){var d=o.updateQueue,m=o.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var v=null,S=null;if(d=d.firstBaseUpdate,d!==null){do{var j={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};S===null?v=S=j:S=S.next=j,d=d.next}while(d!==null);S===null?v=S=c:S=S.next=c}else v=S=c;d={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:S,shared:m.shared,callbacks:m.callbacks},o.updateQueue=d;return}o=d.lastBaseUpdate,o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=c}function Bo(){if(up){var o=Ba;if(o!==null)throw o}}function Lo(o,c,d,m){up=!1;var v=o.updateQueue;Qs=!1;var S=v.firstBaseUpdate,j=v.lastBaseUpdate,z=v.shared.pending;if(z!==null){v.shared.pending=null;var F=z,$=F.next;F.next=null,j===null?S=$:j.next=$,j=F;var it=o.alternate;it!==null&&(it=it.updateQueue,z=it.lastBaseUpdate,z!==j&&(z===null?it.firstBaseUpdate=$:z.next=$,it.lastBaseUpdate=F))}if(S!==null){var st=v.baseState;j=0,it=$=F=null,z=S;do{var rt=z.lane&-536870913,_t=rt!==z.lane;if(_t?(jt&rt)===rt:(m&rt)===rt){rt!==0&&rt===Ia&&(up=!0),it!==null&&(it=it.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});t:{var ei=o,ul=z;rt=c;var Gr=d;switch(ul.tag){case 1:if(ei=ul.payload,typeof ei=="function"){st=ei.call(Gr,st,rt);break t}st=ei;break t;case 3:ei.flags=ei.flags&-65537|128;case 0:if(ei=ul.payload,rt=typeof ei=="function"?ei.call(Gr,st,rt):ei,rt==null)break t;st=Gf({},st,rt);break t;case 2:Qs=!0}}rt=z.callback,rt!==null&&(o.flags|=64,_t&&(o.flags|=8192),_t=v.callbacks,_t===null?v.callbacks=[rt]:_t.push(rt))}else _t={lane:rt,tag:z.tag,payload:z.payload,callback:z.callback,next:null},it===null?($=it=_t,F=st):it=it.next=_t,j|=rt;if(z=z.next,z===null){if(z=v.shared.pending,z===null)break;_t=z,z=_t.next,_t.next=null,v.lastBaseUpdate=_t,v.shared.pending=null}}while(!0);it===null&&(F=st),v.baseState=F,v.firstBaseUpdate=$,v.lastBaseUpdate=it,S===null&&(v.shared.lanes=0),Js|=j,o.lanes=j,o.memoizedState=st}}function N0(o,c){if(typeof o!="function")throw Error(s(191,o));o.call(c)}function O0(o,c){var d=o.callbacks;if(d!==null)for(o.callbacks=null,o=0;o<d.length;o++)N0(d[o],c)}function Lc(o,c){if(Rn(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var d=Object.keys(o),m=Object.keys(c);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var v=d[m];if(!Rj.call(c,v)||!Rn(o[v],c[v]))return!1}return!0}function z0(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Fc(){}function D0(o,c,d){switch(d=o[d],d===void 0?o.push(c):d!==c&&(c.then(Fc,Fc),c=d),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,o===nl?Error(s(483)):o;default:if(typeof c.status=="string")c.then(Fc,Fc);else{if(o=Zt,o!==null&&100<o.shellSuspendCounter)throw Error(s(482));o=c,o.status="pending",o.then(function(m){if(c.status==="pending"){var v=c;v.status="fulfilled",v.value=m}},function(m){if(c.status==="pending"){var v=c;v.status="rejected",v.reason=m}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,o===nl?Error(s(483)):o}throw La=c,nl}}function I0(){if(La===null)throw Error(s(459));var o=La;return La=null,o}function Hc(o){var c=il;return il+=1,Fa===null&&(Fa=[]),D0(Fa,o,c)}function Fo(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function Uc(o,c){throw c.$$typeof===s3?Error(s(525)):(o=Object.prototype.toString.call(c),Error(s(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function B0(o){var c=o._init;return c(o._payload)}function L0(o){function c(G,L){if(o){var W=G.deletions;W===null?(G.deletions=[L],G.flags|=16):W.push(L)}}function d(G,L){if(!o)return null;for(;L!==null;)c(G,L),L=L.sibling;return null}function m(G){for(var L=new Map;G!==null;)G.key!==null?L.set(G.key,G):L.set(G.index,G),G=G.sibling;return L}function v(G,L){return G=Ws(G,L),G.index=0,G.sibling=null,G}function S(G,L,W){return G.index=W,o?(W=G.alternate,W!==null?(W=W.index,W<L?(G.flags|=33554434,L):W):(G.flags|=33554434,L)):(G.flags|=1048576,L)}function j(G){return o&&G.alternate===null&&(G.flags|=33554434),G}function z(G,L,W,et){return L===null||L.tag!==6?(L=Ff(W,G.mode,et),L.return=G,L):(L=v(L,W),L.return=G,L)}function F(G,L,W,et){var ot=W.type;return ot===Ta?it(G,L,W.props.children,et,W.key):L!==null&&(L.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===qs&&B0(ot)===L.type)?(L=v(L,W.props),Fo(L,W),L.return=G,L):(L=iu(W.type,W.key,W.props,null,G.mode,et),Fo(L,W),L.return=G,L)}function $(G,L,W,et){return L===null||L.tag!==4||L.stateNode.containerInfo!==W.containerInfo||L.stateNode.implementation!==W.implementation?(L=Hf(W,G.mode,et),L.return=G,L):(L=v(L,W.children||[]),L.return=G,L)}function it(G,L,W,et,ot){return L===null||L.tag!==7?(L=jr(W,G.mode,et,ot),L.return=G,L):(L=v(L,W),L.return=G,L)}function st(G,L,W){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Ff(""+L,G.mode,W),L.return=G,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case su:return W=iu(L.type,L.key,L.props,null,G.mode,W),Fo(W,L),W.return=G,W;case Aa:return L=Hf(L,G.mode,W),L.return=G,L;case qs:var et=L._init;return L=et(L._payload),st(G,L,W)}if(ru(L)||r(L))return L=jr(L,G.mode,W,null),L.return=G,L;if(typeof L.then=="function")return st(G,Hc(L),W);if(L.$$typeof===Ys)return st(G,Kc(G,L),W);Uc(G,L)}return null}function rt(G,L,W,et){var ot=L!==null?L.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return ot!==null?null:z(G,L,""+W,et);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case su:return W.key===ot?F(G,L,W,et):null;case Aa:return W.key===ot?$(G,L,W,et):null;case qs:return ot=W._init,W=ot(W._payload),rt(G,L,W,et)}if(ru(W)||r(W))return ot!==null?null:it(G,L,W,et,null);if(typeof W.then=="function")return rt(G,L,Hc(W),et);if(W.$$typeof===Ys)return rt(G,L,Kc(G,W),et);Uc(G,W)}return null}function _t(G,L,W,et,ot){if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return G=G.get(W)||null,z(L,G,""+et,ot);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case su:return G=G.get(et.key===null?W:et.key)||null,F(L,G,et,ot);case Aa:return G=G.get(et.key===null?W:et.key)||null,$(L,G,et,ot);case qs:var se=et._init;return et=se(et._payload),_t(G,L,W,et,ot)}if(ru(et)||r(et))return G=G.get(W)||null,it(L,G,et,ot,null);if(typeof et.then=="function")return _t(G,L,W,Hc(et),ot);if(et.$$typeof===Ys)return _t(G,L,W,Kc(L,et),ot);Uc(L,et)}return null}function ei(G,L,W,et){for(var ot=null,se=null,mt=L,Ot=L=0,Ie=null;mt!==null&&Ot<W.length;Ot++){mt.index>Ot?(Ie=mt,mt=null):Ie=mt.sibling;var zt=rt(G,mt,W[Ot],et);if(zt===null){mt===null&&(mt=Ie);break}o&&mt&&zt.alternate===null&&c(G,mt),L=S(zt,L,Ot),se===null?ot=zt:se.sibling=zt,se=zt,mt=Ie}if(Ot===W.length)return d(G,mt),Nt&&Z(G,Ot),ot;if(mt===null){for(;Ot<W.length;Ot++)mt=st(G,W[Ot],et),mt!==null&&(L=S(mt,L,Ot),se===null?ot=mt:se.sibling=mt,se=mt);return Nt&&Z(G,Ot),ot}for(mt=m(mt);Ot<W.length;Ot++)Ie=_t(mt,G,Ot,W[Ot],et),Ie!==null&&(o&&Ie.alternate!==null&&mt.delete(Ie.key===null?Ot:Ie.key),L=S(Ie,L,Ot),se===null?ot=Ie:se.sibling=Ie,se=Ie);return o&&mt.forEach(function(er){return c(G,er)}),Nt&&Z(G,Ot),ot}function ul(G,L,W,et){if(W==null)throw Error(s(151));for(var ot=null,se=null,mt=L,Ot=L=0,Ie=null,zt=W.next();mt!==null&&!zt.done;Ot++,zt=W.next()){mt.index>Ot?(Ie=mt,mt=null):Ie=mt.sibling;var er=rt(G,mt,zt.value,et);if(er===null){mt===null&&(mt=Ie);break}o&&mt&&er.alternate===null&&c(G,mt),L=S(er,L,Ot),se===null?ot=er:se.sibling=er,se=er,mt=Ie}if(zt.done)return d(G,mt),Nt&&Z(G,Ot),ot;if(mt===null){for(;!zt.done;Ot++,zt=W.next())zt=st(G,zt.value,et),zt!==null&&(L=S(zt,L,Ot),se===null?ot=zt:se.sibling=zt,se=zt);return Nt&&Z(G,Ot),ot}for(mt=m(mt);!zt.done;Ot++,zt=W.next())zt=_t(mt,G,Ot,zt.value,et),zt!==null&&(o&&zt.alternate!==null&&mt.delete(zt.key===null?Ot:zt.key),L=S(zt,L,Ot),se===null?ot=zt:se.sibling=zt,se=zt);return o&&mt.forEach(function(Ij){return c(G,Ij)}),Nt&&Z(G,Ot),ot}function Gr(G,L,W,et){if(typeof W=="object"&&W!==null&&W.type===Ta&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case su:t:{for(var ot=W.key;L!==null;){if(L.key===ot){if(ot=W.type,ot===Ta){if(L.tag===7){d(G,L.sibling),et=v(L,W.props.children),et.return=G,G=et;break t}}else if(L.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===qs&&B0(ot)===L.type){d(G,L.sibling),et=v(L,W.props),Fo(et,W),et.return=G,G=et;break t}d(G,L);break}else c(G,L);L=L.sibling}W.type===Ta?(et=jr(W.props.children,G.mode,et,W.key),et.return=G,G=et):(et=iu(W.type,W.key,W.props,null,G.mode,et),Fo(et,W),et.return=G,G=et)}return j(G);case Aa:t:{for(ot=W.key;L!==null;){if(L.key===ot)if(L.tag===4&&L.stateNode.containerInfo===W.containerInfo&&L.stateNode.implementation===W.implementation){d(G,L.sibling),et=v(L,W.children||[]),et.return=G,G=et;break t}else{d(G,L);break}else c(G,L);L=L.sibling}et=Hf(W,G.mode,et),et.return=G,G=et}return j(G);case qs:return ot=W._init,W=ot(W._payload),Gr(G,L,W,et)}if(ru(W))return ei(G,L,W,et);if(r(W)){if(ot=r(W),typeof ot!="function")throw Error(s(150));return W=ot.call(W),ul(G,L,W,et)}if(typeof W.then=="function")return Gr(G,L,Hc(W),et);if(W.$$typeof===Ys)return Gr(G,L,Kc(G,W),et);Uc(G,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,L!==null&&L.tag===6?(d(G,L.sibling),et=v(L,W),et.return=G,G=et):(d(G,L),et=Ff(W,G.mode,et),et.return=G,G=et),j(G)):d(G,L)}return function(G,L,W,et){try{il=0;var ot=Gr(G,L,W,et);return Fa=null,ot}catch(mt){if(mt===nl)throw mt;var se=e(29,mt,null,G.mode);return se.lanes=et,se.return=G,se}finally{}}}function F0(o,c){o=ys,M(gu,o),M(Ha,c),ys=o|c.baseLanes}function Gd(){M(gu,ys),M(Ha,Ha.current)}function Vd(){ys=gu.current,C(Ha),C(gu)}function Ls(o){var c=o.alternate;M(ke,ke.current&1),M(Jn,o),Bi===null&&(c===null||Ha.current!==null||c.memoizedState!==null)&&(Bi=o)}function H0(o){if(o.tag===22){if(M(ke,ke.current),M(Jn,o),Bi===null){var c=o.alternate;c!==null&&c.memoizedState!==null&&(Bi=o)}}else Fs()}function Fs(){M(ke,ke.current),M(Jn,Jn.current)}function as(o){C(Jn),Bi===o&&(Bi=null),C(ke)}function Gc(o){for(var c=o;c!==null;){if(c.tag===13){var d=c.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||Jf(d)||tp(d)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function Se(){throw Error(s(321))}function Wd(o,c){if(c===null)return!1;for(var d=0;d<c.length&&d<o.length;d++)if(!Rn(o[d],c[d]))return!1;return!0}function Yd(o,c,d,m,v,S){return Ks=S,wt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,yt.H=o===null||o.memoizedState===null?Ir:Zs,Dr=!1,S=d(m,v),Dr=!1,Ua&&(S=G0(c,d,m,v)),U0(o),S}function U0(o){yt.H=Li;var c=Ut!==null&&Ut.next!==null;if(Ks=0,Pe=Ut=wt=null,xu=!1,sl=0,Ga=null,c)throw Error(s(300));o===null||ze||(o=o.dependencies,o!==null&&Qc(o)&&(ze=!0))}function G0(o,c,d,m){wt=o;var v=0;do{if(Ua&&(Ga=null),sl=0,Ua=!1,25<=v)throw Error(s(301));if(v+=1,Pe=Ut=null,o.updateQueue!=null){var S=o.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}yt.H=Br,S=c(d,m)}while(Ua);return S}function zR(){var o=yt.H,c=o.useState()[0];return c=typeof c.then=="function"?Ho(c):c,o=o.useState()[0],(Ut!==null?Ut.memoizedState:null)!==o&&(wt.flags|=1024),c}function qd(){var o=yu!==0;return yu=0,o}function Xd(o,c,d){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~d}function $d(o){if(xu){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}xu=!1}Ks=0,Pe=Ut=wt=null,Ua=!1,sl=yu=0,Ga=null}function an(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pe===null?wt.memoizedState=Pe=o:Pe=Pe.next=o,Pe}function Me(){if(Ut===null){var o=wt.alternate;o=o!==null?o.memoizedState:null}else o=Ut.next;var c=Pe===null?wt.memoizedState:Pe.next;if(c!==null)Pe=c,Ut=o;else{if(o===null)throw wt.alternate===null?Error(s(467)):Error(s(310));Ut=o,o={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},Pe===null?wt.memoizedState=Pe=o:Pe=Pe.next=o}return Pe}function Ho(o){var c=sl;return sl+=1,Ga===null&&(Ga=[]),o=D0(Ga,o,c),c=wt,(Pe===null?c.memoizedState:Pe.next)===null&&(c=c.alternate,yt.H=c===null||c.memoizedState===null?Ir:Zs),o}function Vc(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Ho(o);if(o.$$typeof===Ys)return We(o)}throw Error(s(438,String(o)))}function Qd(o){var c=null,d=wt.updateQueue;if(d!==null&&(c=d.memoCache),c==null){var m=wt.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(c={data:m.data.map(function(v){return v.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),d===null&&(d=dp(),wt.updateQueue=d),d.memoCache=c,d=c.data[c.index],d===void 0)for(d=c.data[c.index]=Array(o),m=0;m<o;m++)d[m]=a3;return c.index++,d}function os(o,c){return typeof c=="function"?c(o):c}function Wc(o){var c=Me();return Kd(c,Ut,o)}function Kd(o,c,d){var m=o.queue;if(m===null)throw Error(s(311));m.lastRenderedReducer=d;var v=o.baseQueue,S=m.pending;if(S!==null){if(v!==null){var j=v.next;v.next=S.next,S.next=j}c.baseQueue=v=S,m.pending=null}if(S=o.baseState,v===null)o.memoizedState=S;else{c=v.next;var z=j=null,F=null,$=c,it=!1;do{var st=$.lane&-536870913;if(st!==$.lane?(jt&st)===st:(Ks&st)===st){var rt=$.revertLane;if(rt===0)F!==null&&(F=F.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),st===Ia&&(it=!0);else if((Ks&rt)===rt){$=$.next,rt===Ia&&(it=!0);continue}else st={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},F===null?(z=F=st,j=S):F=F.next=st,wt.lanes|=rt,Js|=rt;st=$.action,Dr&&d(S,st),S=$.hasEagerState?$.eagerState:d(S,st)}else rt={lane:st,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},F===null?(z=F=rt,j=S):F=F.next=rt,wt.lanes|=st,Js|=st;$=$.next}while($!==null&&$!==c);if(F===null?j=S:F.next=z,!Rn(S,o.memoizedState)&&(ze=!0,it&&(d=Ba,d!==null)))throw d;o.memoizedState=S,o.baseState=j,o.baseQueue=F,m.lastRenderedState=S}return v===null&&(m.lanes=0),[o.memoizedState,m.dispatch]}function Zd(o){var c=Me(),d=c.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=o;var m=d.dispatch,v=d.pending,S=c.memoizedState;if(v!==null){d.pending=null;var j=v=v.next;do S=o(S,j.action),j=j.next;while(j!==v);Rn(S,c.memoizedState)||(ze=!0),c.memoizedState=S,c.baseQueue===null&&(c.baseState=S),d.lastRenderedState=S}return[S,m]}function V0(o,c,d){var m=wt,v=Me(),S=Nt;if(S){if(d===void 0)throw Error(s(407));d=d()}else d=c();var j=!Rn((Ut||v).memoizedState,d);if(j&&(v.memoizedState=d,ze=!0),v=v.queue,ef(q0.bind(null,m,v,o),[o]),v.getSnapshot!==c||j||Pe!==null&&Pe.memoizedState.tag&1){if(m.flags|=2048,wa(9,Y0.bind(null,m,v,d,c),{destroy:void 0},null),Zt===null)throw Error(s(349));S||(Ks&60)!==0||W0(m,c,d)}return d}function W0(o,c,d){o.flags|=16384,o={getSnapshot:c,value:d},c=wt.updateQueue,c===null?(c=dp(),wt.updateQueue=c,c.stores=[o]):(d=c.stores,d===null?c.stores=[o]:d.push(o))}function Y0(o,c,d,m){c.value=d,c.getSnapshot=m,X0(c)&&$0(o)}function q0(o,c,d){return d(function(){X0(c)&&$0(o)})}function X0(o){var c=o.getSnapshot;o=o.value;try{var d=c();return!Rn(o,d)}catch{return!0}}function $0(o){var c=Oe(o,2);c!==null&&Ze(c,o,2)}function Jd(o){var c=an();if(typeof o=="function"){var d=o;if(o=d(),Dr){H(!0);try{d()}finally{H(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:o},c}function Q0(o,c,d,m){return o.baseState=d,Kd(o,Ut,typeof m=="function"?m:os)}function DR(o,c,d,m,v){if(Xc(o))throw Error(s(485));if(o=c.action,o!==null){var S={payload:v,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){S.listeners.push(j)}};yt.T!==null?d(!0):S.isTransition=!1,m(S),d=c.pending,d===null?(S.next=c.pending=S,K0(c,S)):(S.next=d.next,c.pending=d.next=S)}}function K0(o,c){var d=c.action,m=c.payload,v=o.state;if(c.isTransition){var S=yt.T,j={};yt.T=j;try{var z=d(v,m),F=yt.S;F!==null&&F(j,z),Z0(o,c,z)}catch($){tf(o,c,$)}finally{yt.T=S}}else try{S=d(v,m),Z0(o,c,S)}catch($){tf(o,c,$)}}function Z0(o,c,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(m){J0(o,c,m)},function(m){return tf(o,c,m)}):J0(o,c,d)}function J0(o,c,d){c.status="fulfilled",c.value=d,tv(c),o.state=d,c=o.pending,c!==null&&(d=c.next,d===c?o.pending=null:(d=d.next,c.next=d,K0(o,d)))}function tf(o,c,d){var m=o.pending;if(o.pending=null,m!==null){m=m.next;do c.status="rejected",c.reason=d,tv(c),c=c.next;while(c!==m)}o.action=null}function tv(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function ev(o,c){return c}function nv(o,c){if(Nt){var d=Zt.formState;if(d!==null){t:{var m=wt;if(Nt){if(Xe){var v=K3(Xe,Ii);if(v){Xe=X_(v),m=Z3(v);break t}}be(m)}m=!1}m&&(c=d[0])}}d=an(),d.memoizedState=d.baseState=c,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ev,lastRenderedState:c},d.queue=m,d=vv.bind(null,wt,m),m.dispatch=d,m=Jd(!1);var S=af.bind(null,wt,!1,m.queue);return m=an(),v={state:c,dispatch:null,action:o,pending:null},m.queue=v,d=DR.bind(null,wt,v,S,d),v.dispatch=d,m.memoizedState=o,[c,d,!1]}function iv(o){var c=Me();return sv(c,Ut,o)}function sv(o,c,d){c=Kd(o,c,ev)[0],o=Wc(os)[0],c=typeof c=="object"&&c!==null&&typeof c.then=="function"?Ho(c):c;var m=Me(),v=m.queue,S=v.dispatch;return d!==m.memoizedState&&(wt.flags|=2048,wa(9,IR.bind(null,v,d),{destroy:void 0},null)),[c,S,o]}function IR(o,c){o.action=c}function rv(o){var c=Me(),d=Ut;if(d!==null)return sv(c,d,o);Me(),c=c.memoizedState,d=Me();var m=d.queue.dispatch;return d.memoizedState=o,[c,m,!1]}function wa(o,c,d,m){return o={tag:o,create:c,inst:d,deps:m,next:null},c=wt.updateQueue,c===null&&(c=dp(),wt.updateQueue=c),d=c.lastEffect,d===null?c.lastEffect=o.next=o:(m=d.next,d.next=o,o.next=m,c.lastEffect=o),o}function av(){return Me().memoizedState}function Yc(o,c,d,m){var v=an();wt.flags|=o,v.memoizedState=wa(1|c,d,{destroy:void 0},m===void 0?null:m)}function qc(o,c,d,m){var v=Me();m=m===void 0?null:m;var S=v.memoizedState.inst;Ut!==null&&m!==null&&Wd(m,Ut.memoizedState.deps)?v.memoizedState=wa(c,d,S,m):(wt.flags|=o,v.memoizedState=wa(1|c,d,S,m))}function ov(o,c){Yc(8390656,8,o,c)}function ef(o,c){qc(2048,8,o,c)}function lv(o,c){return qc(4,2,o,c)}function cv(o,c){return qc(4,4,o,c)}function uv(o,c){if(typeof c=="function"){o=o();var d=c(o);return function(){typeof d=="function"?d():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function hv(o,c,d){d=d!=null?d.concat([o]):null,qc(4,4,uv.bind(null,c,o),d)}function nf(){}function dv(o,c){var d=Me();c=c===void 0?null:c;var m=d.memoizedState;return c!==null&&Wd(c,m[1])?m[0]:(d.memoizedState=[o,c],o)}function fv(o,c){var d=Me();c=c===void 0?null:c;var m=d.memoizedState;if(c!==null&&Wd(c,m[1]))return m[0];if(m=o(),Dr){H(!0);try{o()}finally{H(!1)}}return d.memoizedState=[m,c],m}function sf(o,c,d){return d===void 0||(Ks&1073741824)!==0?o.memoizedState=c:(o.memoizedState=d,o=c_(),wt.lanes|=o,Js|=o,d)}function pv(o,c,d,m){return Rn(d,c)?d:Ha.current!==null?(o=sf(o,d,m),Rn(o,c)||(ze=!0),o):(Ks&42)===0?(ze=!0,o.memoizedState=d):(o=c_(),wt.lanes|=o,Js|=o,c)}function mv(o,c,d,m,v){var S=kr();ln(S!==0&&8>S?S:8);var j=yt.T,z={};yt.T=z,af(o,!1,c,d);try{var F=v(),$=yt.S;if($!==null&&$(z,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var it=OR(F,m);Uo(o,c,it,Pn(o))}else Uo(o,c,m,Pn(o))}catch(st){Uo(o,c,{then:function(){},status:"rejected",reason:st},Pn())}finally{ln(S),yt.T=j}}function gv(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:Ea,baseState:Ea,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:Ea},next:null};var d={};return c.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:d},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function rf(){return We(Nr)}function xv(){return Me().memoizedState}function yv(){return Me().memoizedState}function BR(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var d=Pn();o=Is(d);var m=Bs(c,o,d);m!==null&&(Ze(m,c,d),Io(m,c,d)),c={cache:vf()},o.payload=c;return}c=c.return}}function LR(o,c,d){var m=Pn();d={lane:m,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},Xc(o)?_v(c,d):(d=je(o,c,d,m),d!==null&&(Ze(d,o,m),bv(d,c,m)))}function vv(o,c,d){var m=Pn();Uo(o,c,d,m)}function Uo(o,c,d,m){var v={lane:m,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(Xc(o))_v(c,v);else{var S=o.alternate;if(o.lanes===0&&(S===null||S.lanes===0)&&(S=c.lastRenderedReducer,S!==null))try{var j=c.lastRenderedState,z=S(j,d);if(v.hasEagerState=!0,v.eagerState=z,Rn(z,j))return qt(o,c,v,0),Zt===null&&Mt(),!1}catch{}finally{}if(d=je(o,c,v,m),d!==null)return Ze(d,o,m),bv(d,c,m),!0}return!1}function af(o,c,d,m){if(m={lane:2,revertLane:Ld(),action:m,hasEagerState:!1,eagerState:null,next:null},Xc(o)){if(c)throw Error(s(479))}else c=je(o,d,m,2),c!==null&&Ze(c,o,2)}function Xc(o){var c=o.alternate;return o===wt||c!==null&&c===wt}function _v(o,c){Ua=xu=!0;var d=o.pending;d===null?c.next=c:(c.next=d.next,d.next=c),o.pending=c}function bv(o,c,d){if((d&4194176)!==0){var m=c.lanes;m&=o.pendingLanes,d|=m,c.lanes=d,U(o,d)}}function of(o,c,d,m){c=o.memoizedState,d=d(m,c),d=d==null?c:Gf({},c,d),o.memoizedState=d,o.lanes===0&&(o.updateQueue.baseState=d)}function wv(o,c,d,m,v,S,j){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(m,S,j):c.prototype&&c.prototype.isPureReactComponent?!Lc(d,m)||!Lc(v,S):!0}function Sv(o,c,d,m){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(d,m),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(d,m),c.state!==o&&fp.enqueueReplaceState(c,c.state,null)}function Pr(o,c){var d=c;if("ref"in c){d={};for(var m in c)m!=="ref"&&(d[m]=c[m])}if(o=o.defaultProps){d===c&&(d=Gf({},d));for(var v in o)d[v]===void 0&&(d[v]=o[v])}return d}function $c(o,c){try{var d=o.onUncaughtError;d(c.value,{componentStack:c.stack})}catch(m){setTimeout(function(){throw m})}}function Cv(o,c,d){try{var m=o.onCaughtError;m(d.value,{componentStack:d.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function lf(o,c,d){return d=Is(d),d.tag=3,d.payload={element:null},d.callback=function(){$c(o,c)},d}function Mv(o){return o=Is(o),o.tag=3,o}function Pv(o,c,d,m){var v=d.type.getDerivedStateFromError;if(typeof v=="function"){var S=m.value;o.payload=function(){return v(S)},o.callback=function(){Cv(c,d,m)}}var j=d.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(o.callback=function(){Cv(c,d,m),typeof v!="function"&&(tr===null?tr=new Set([this]):tr.add(this));var z=m.stack;this.componentDidCatch(m.value,{componentStack:z!==null?z:""})})}function FR(o,c,d,m,v){if(d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(c=d.alternate,c!==null&&Vo(c,d,v,!0),d=Jn.current,d!==null){switch(d.tag){case 13:return Bi===null?Df():d.alternate===null&&xe===0&&(xe=3),d.flags&=-257,d.flags|=65536,d.lanes=v,m===mu?d.flags|=16384:(c=d.updateQueue,c===null?d.updateQueue=new Set([m]):c.add(m),Bf(o,m,v)),!1;case 22:return d.flags|=65536,m===mu?d.flags|=16384:(c=d.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([m])},d.updateQueue=c):(d=c.retryQueue,d===null?c.retryQueue=new Set([m]):d.add(m)),Bf(o,m,v)),!1}throw Error(s(435,d.tag))}return Bf(o,m,v),Df(),!1}if(Nt)return c=Jn.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=v,m!==rp&&(o=Error(s(422),{cause:m}),It(V(o,d)))):(m!==rp&&(c=Error(s(423),{cause:m}),It(V(c,d))),o=o.current.alternate,o.flags|=65536,v&=-v,o.lanes|=v,m=V(m,d),v=lf(o.stateNode,m,v),Ud(o,v),xe!==4&&(xe=2)),!1;var S=Error(s(520),{cause:m});if(S=V(S,d),al===null?al=[S]:al.push(S),xe!==4&&(xe=2),c===null)return!0;m=V(m,d),d=c;do{switch(d.tag){case 3:return d.flags|=65536,o=v&-v,d.lanes|=o,o=lf(d.stateNode,m,o),Ud(d,o),!1;case 1:if(c=d.type,S=d.stateNode,(d.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(tr===null||!tr.has(S))))return d.flags|=65536,v&=-v,d.lanes|=v,v=Mv(v),Pv(v,o,d,m),Ud(d,v),!1}d=d.return}while(d!==null);return!1}function He(o,c,d,m){c.child=o===null?l1(c,null,d,m):zr(c,o.child,d,m)}function Av(o,c,d,m,v){d=d.render;var S=c.ref;if("ref"in m){var j={};for(var z in m)z!=="ref"&&(j[z]=m[z])}else j=m;return Ar(c),m=Yd(o,c,d,j,S,v),z=qd(),o!==null&&!ze?(Xd(o,c,v),ls(o,c,v)):(Nt&&z&&tt(c),c.flags|=1,He(o,c,m,v),c.child)}function Tv(o,c,d,m,v){if(o===null){var S=d.type;return typeof S=="function"&&!Lf(S)&&S.defaultProps===void 0&&d.compare===null?(c.tag=15,c.type=S,Ev(o,c,S,m,v)):(o=iu(d.type,null,m,c,c.mode,v),o.ref=c.ref,o.return=c,c.child=o)}if(S=o.child,!gf(o,v)){var j=S.memoizedProps;if(d=d.compare,d=d!==null?d:Lc,d(j,m)&&o.ref===c.ref)return ls(o,c,v)}return c.flags|=1,o=Ws(S,m),o.ref=c.ref,o.return=c,c.child=o}function Ev(o,c,d,m,v){if(o!==null){var S=o.memoizedProps;if(Lc(S,m)&&o.ref===c.ref)if(ze=!1,c.pendingProps=m=S,gf(o,v))(o.flags&131072)!==0&&(ze=!0);else return c.lanes=o.lanes,ls(o,c,v)}return cf(o,c,d,m,v)}function Rv(o,c,d){var m=c.pendingProps,v=m.children,S=(c.stateNode._pendingVisibility&2)!==0,j=o!==null?o.memoizedState:null;if(Go(o,c),m.mode==="hidden"||S){if((c.flags&128)!==0){if(m=j!==null?j.baseLanes|d:d,o!==null){for(v=c.child=o.child,S=0;v!==null;)S=S|v.lanes|v.childLanes,v=v.sibling;c.childLanes=S&~m}else c.childLanes=0,c.child=null;return jv(o,c,m,d)}if((d&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&Zc(c,j!==null?j.cachePool:null),j!==null?F0(c,j):Gd(),H0(c);else return c.lanes=c.childLanes=536870912,jv(o,c,j!==null?j.baseLanes|d:d,d)}else j!==null?(Zc(c,j.cachePool),F0(c,j),Fs(),c.memoizedState=null):(o!==null&&Zc(c,null),Gd(),Fs());return He(o,c,v,d),c.child}function jv(o,c,d,m){var v=_f();return v=v===null?null:{parent:ds?me._currentValue:me._currentValue2,pool:v},c.memoizedState={baseLanes:d,cachePool:v},o!==null&&Zc(c,null),Gd(),H0(c),o!==null&&Vo(o,c,m,!0),null}function Go(o,c){var d=c.ref;if(d===null)o!==null&&o.ref!==null&&(c.flags|=2097664);else{if(typeof d!="function"&&typeof d!="object")throw Error(s(284));(o===null||o.ref!==d)&&(c.flags|=2097664)}}function cf(o,c,d,m,v){return Ar(c),d=Yd(o,c,d,m,void 0,v),m=qd(),o!==null&&!ze?(Xd(o,c,v),ls(o,c,v)):(Nt&&m&&tt(c),c.flags|=1,He(o,c,d,v),c.child)}function kv(o,c,d,m,v,S){return Ar(c),c.updateQueue=null,d=G0(c,m,d,v),U0(o),m=qd(),o!==null&&!ze?(Xd(o,c,S),ls(o,c,S)):(Nt&&m&&tt(c),c.flags|=1,He(o,c,d,S),c.child)}function Nv(o,c,d,m,v){if(Ar(c),c.stateNode===null){var S=ja,j=d.contextType;typeof j=="object"&&j!==null&&(S=We(j)),S=new d(m,S),c.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=fp,c.stateNode=S,S._reactInternals=c,S=c.stateNode,S.props=m,S.state=c.memoizedState,S.refs={},Fd(c),j=d.contextType,S.context=typeof j=="object"&&j!==null?We(j):ja,S.state=c.memoizedState,j=d.getDerivedStateFromProps,typeof j=="function"&&(of(c,d,j,m),S.state=c.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(j=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),j!==S.state&&fp.enqueueReplaceState(S,S.state,null),Lo(c,m,S,v),Bo(),S.state=c.memoizedState),typeof S.componentDidMount=="function"&&(c.flags|=4194308),m=!0}else if(o===null){S=c.stateNode;var z=c.memoizedProps,F=Pr(d,z);S.props=F;var $=S.context,it=d.contextType;j=ja,typeof it=="object"&&it!==null&&(j=We(it));var st=d.getDerivedStateFromProps;it=typeof st=="function"||typeof S.getSnapshotBeforeUpdate=="function",z=c.pendingProps!==z,it||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(z||$!==j)&&Sv(c,S,m,j),Qs=!1;var rt=c.memoizedState;S.state=rt,Lo(c,m,S,v),Bo(),$=c.memoizedState,z||rt!==$||Qs?(typeof st=="function"&&(of(c,d,st,m),$=c.memoizedState),(F=Qs||wv(c,d,F,m,rt,$,j))?(it||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(c.flags|=4194308)):(typeof S.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=m,c.memoizedState=$),S.props=m,S.state=$,S.context=j,m=F):(typeof S.componentDidMount=="function"&&(c.flags|=4194308),m=!1)}else{S=c.stateNode,Hd(o,c),j=c.memoizedProps,it=Pr(d,j),S.props=it,st=c.pendingProps,rt=S.context,$=d.contextType,F=ja,typeof $=="object"&&$!==null&&(F=We($)),z=d.getDerivedStateFromProps,($=typeof z=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(j!==st||rt!==F)&&Sv(c,S,m,F),Qs=!1,rt=c.memoizedState,S.state=rt,Lo(c,m,S,v),Bo();var _t=c.memoizedState;j!==st||rt!==_t||Qs||o!==null&&o.dependencies!==null&&Qc(o.dependencies)?(typeof z=="function"&&(of(c,d,z,m),_t=c.memoizedState),(it=Qs||wv(c,d,it,m,rt,_t,F)||o!==null&&o.dependencies!==null&&Qc(o.dependencies))?($||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(m,_t,F),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(m,_t,F)),typeof S.componentDidUpdate=="function"&&(c.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof S.componentDidUpdate!="function"||j===o.memoizedProps&&rt===o.memoizedState||(c.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||j===o.memoizedProps&&rt===o.memoizedState||(c.flags|=1024),c.memoizedProps=m,c.memoizedState=_t),S.props=m,S.state=_t,S.context=F,m=it):(typeof S.componentDidUpdate!="function"||j===o.memoizedProps&&rt===o.memoizedState||(c.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||j===o.memoizedProps&&rt===o.memoizedState||(c.flags|=1024),m=!1)}return S=m,Go(o,c),m=(c.flags&128)!==0,S||m?(S=c.stateNode,d=m&&typeof d.getDerivedStateFromError!="function"?null:S.render(),c.flags|=1,o!==null&&m?(c.child=zr(c,o.child,null,v),c.child=zr(c,null,d,v)):He(o,c,d,v),c.memoizedState=S.state,o=c.child):o=ls(o,c,v),o}function Ov(o,c,d,m){return ct(),c.flags|=256,He(o,c,d,m),c.child}function uf(o){return{baseLanes:o,cachePool:Fv()}}function hf(o,c,d){return o=o!==null?o.childLanes&~d:0,c&&(o|=ti),o}function zv(o,c,d){var m=c.pendingProps,v=!1,S=(c.flags&128)!==0,j;if((j=S)||(j=o!==null&&o.memoizedState===null?!1:(ke.current&2)!==0),j&&(v=!0,c.flags&=-129),j=(c.flags&32)!==0,c.flags&=-33,o===null){if(Nt){if(v?Ls(c):Fs(),Nt){var z=Xe,F;(F=z)&&(z=ij(z,Ii),z!==null?(c.memoizedState={dehydrated:z,treeContext:Or!==null?{id:fs,overflow:ps}:null,retryLane:536870912},F=e(18,null,null,0),F.stateNode=z,F.return=c,c.child=F,Je=c,Xe=null,F=!0):F=!1),F||be(c)}if(z=c.memoizedState,z!==null&&(z=z.dehydrated,z!==null))return tp(z)?c.lanes=16:c.lanes=536870912,null;as(c)}return z=m.children,m=m.fallback,v?(Fs(),v=c.mode,z=ff({mode:"hidden",children:z},v),m=jr(m,v,d,null),z.return=c,m.return=c,z.sibling=m,c.child=z,v=c.child,v.memoizedState=uf(d),v.childLanes=hf(o,j,d),c.memoizedState=pp,m):(Ls(c),df(c,z))}if(F=o.memoizedState,F!==null&&(z=F.dehydrated,z!==null)){if(S)c.flags&256?(Ls(c),c.flags&=-257,c=pf(o,c,d)):c.memoizedState!==null?(Fs(),c.child=o.child,c.flags|=128,c=null):(Fs(),v=m.fallback,z=c.mode,m=ff({mode:"visible",children:m.children},z),v=jr(v,z,d,null),v.flags|=2,m.return=c,v.return=c,m.sibling=v,c.child=m,zr(c,o.child,null,d),m=c.child,m.memoizedState=uf(d),m.childLanes=hf(o,j,d),c.memoizedState=pp,c=v);else if(Ls(c),tp(z))j=$3(z).digest,m=Error(s(419)),m.stack="",m.digest=j,It({value:m,source:null,stack:null}),c=pf(o,c,d);else if(ze||Vo(o,c,d,!1),j=(d&o.childLanes)!==0,ze||j){if(j=Zt,j!==null){if(m=d&-d,(m&42)!==0)m=1;else switch(m){case 2:m=1;break;case 8:m=4;break;case 32:m=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:m=64;break;case 268435456:m=134217728;break;default:m=0}if(m=(m&(j.suspendedLanes|d))!==0?0:m,m!==0&&m!==F.retryLane)throw F.retryLane=m,Oe(o,m),Ze(j,o,m),u1}Jf(z)||Df(),c=pf(o,c,d)}else Jf(z)?(c.flags|=128,c.child=o.child,c=ZR.bind(null,o),Q3(z,c),c=null):(o=F.treeContext,Xn&&(Xe=tj(z),Je=c,Nt=!0,vi=null,Ii=!1,o!==null&&(Qn[Kn++]=fs,Qn[Kn++]=ps,Qn[Kn++]=Or,fs=o.id,ps=o.overflow,Or=c)),c=df(c,m.children),c.flags|=4096);return c}return v?(Fs(),v=m.fallback,z=c.mode,F=o.child,S=F.sibling,m=Ws(F,{mode:"hidden",children:m.children}),m.subtreeFlags=F.subtreeFlags&31457280,S!==null?v=Ws(S,v):(v=jr(v,z,d,null),v.flags|=2),v.return=c,m.return=c,m.sibling=v,c.child=m,m=v,v=c.child,z=o.child.memoizedState,z===null?z=uf(d):(F=z.cachePool,F!==null?(S=ds?me._currentValue:me._currentValue2,F=F.parent!==S?{parent:S,pool:S}:F):F=Fv(),z={baseLanes:z.baseLanes|d,cachePool:F}),v.memoizedState=z,v.childLanes=hf(o,j,d),c.memoizedState=pp,m):(Ls(c),d=o.child,o=d.sibling,d=Ws(d,{mode:"visible",children:m.children}),d.return=c,d.sibling=null,o!==null&&(j=c.deletions,j===null?(c.deletions=[o],c.flags|=16):j.push(o)),c.child=d,c.memoizedState=null,d)}function df(o,c){return c=ff({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function ff(o,c){return M_(o,c,0,null)}function pf(o,c,d){return zr(c,o.child,null,d),o=df(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function Dv(o,c,d){o.lanes|=c;var m=o.alternate;m!==null&&(m.lanes|=c),xf(o.return,c,d)}function mf(o,c,d,m,v){var S=o.memoizedState;S===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:v}:(S.isBackwards=c,S.rendering=null,S.renderingStartTime=0,S.last=m,S.tail=d,S.tailMode=v)}function Iv(o,c,d){var m=c.pendingProps,v=m.revealOrder,S=m.tail;if(He(o,c,m.children,d),m=ke.current,(m&2)!==0)m=m&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)t:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Dv(o,d,c);else if(o.tag===19)Dv(o,d,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break t;for(;o.sibling===null;){if(o.return===null||o.return===c)break t;o=o.return}o.sibling.return=o.return,o=o.sibling}m&=1}switch(M(ke,m),v){case"forwards":for(d=c.child,v=null;d!==null;)o=d.alternate,o!==null&&Gc(o)===null&&(v=d),d=d.sibling;d=v,d===null?(v=c.child,c.child=null):(v=d.sibling,d.sibling=null),mf(c,!1,v,d,S);break;case"backwards":for(d=null,v=c.child,c.child=null;v!==null;){if(o=v.alternate,o!==null&&Gc(o)===null){c.child=v;break}o=v.sibling,v.sibling=d,d=v,v=o}mf(c,!0,d,null,S);break;case"together":mf(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function ls(o,c,d){if(o!==null&&(c.dependencies=o.dependencies),Js|=c.lanes,(d&c.childLanes)===0)if(o!==null){if(Vo(o,c,d,!1),(d&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(s(153));if(c.child!==null){for(o=c.child,d=Ws(o,o.pendingProps),c.child=d,d.return=c;o.sibling!==null;)o=o.sibling,d=d.sibling=Ws(o,o.pendingProps),d.return=c;d.sibling=null}return c.child}function gf(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&Qc(o)))}function HR(o,c,d){switch(c.tag){case 3:xt(c,c.stateNode.containerInfo),Hs(c,me,o.memoizedState.cache),ct();break;case 27:case 5:Kt(c);break;case 4:xt(c,c.stateNode.containerInfo);break;case 10:Hs(c,c.type,c.memoizedProps.value);break;case 13:var m=c.memoizedState;if(m!==null)return m.dehydrated!==null?(Ls(c),c.flags|=128,null):(d&c.child.childLanes)!==0?zv(o,c,d):(Ls(c),o=ls(o,c,d),o!==null?o.sibling:null);Ls(c);break;case 19:var v=(o.flags&128)!==0;if(m=(d&c.childLanes)!==0,m||(Vo(o,c,d,!1),m=(d&c.childLanes)!==0),v){if(m)return Iv(o,c,d);c.flags|=128}if(v=c.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),M(ke,ke.current),m)break;return null;case 22:case 23:return c.lanes=0,Rv(o,c,d);case 24:Hs(c,me,o.memoizedState.cache)}return ls(o,c,d)}function Bv(o,c,d){if(o!==null)if(o.memoizedProps!==c.pendingProps)ze=!0;else{if(!gf(o,d)&&(c.flags&128)===0)return ze=!1,HR(o,c,d);ze=(o.flags&131072)!==0}else ze=!1,Nt&&(c.flags&1048576)!==0&&gt(c,hu,c.index);switch(c.lanes=0,c.tag){case 16:t:{o=c.pendingProps;var m=c.elementType,v=m._init;if(m=v(m._payload),c.type=m,typeof m=="function")Lf(m)?(o=Pr(m,o),c.tag=1,c=Nv(null,c,m,o,d)):(c.tag=0,c=cf(null,c,m,o,d));else{if(m!=null){if(v=m.$$typeof,v===Wf){c.tag=11,c=Av(null,c,m,o,d);break t}else if(v===Xf){c.tag=14,c=Tv(null,c,m,o,d);break t}}throw c=a(m)||m,Error(s(306,c,""))}}return c;case 0:return cf(o,c,c.type,c.pendingProps,d);case 1:return m=c.type,v=Pr(m,c.pendingProps),Nv(o,c,m,v,d);case 3:t:{if(xt(c,c.stateNode.containerInfo),o===null)throw Error(s(387));var S=c.pendingProps;v=c.memoizedState,m=v.element,Hd(o,c),Lo(c,S,null,d);var j=c.memoizedState;if(S=j.cache,Hs(c,me,S),S!==v.cache&&yf(c,[me],d,!0),Bo(),S=j.element,Xn&&v.isDehydrated)if(v={element:S,isDehydrated:!1,cache:j.cache},c.updateQueue.baseState=v,c.memoizedState=v,c.flags&256){c=Ov(o,c,S,d);break t}else if(S!==m){m=V(Error(s(424)),c),It(m),c=Ov(o,c,S,d);break t}else for(Xn&&(Xe=J3(c.stateNode.containerInfo),Je=c,Nt=!0,vi=null,Ii=!0),d=l1(c,null,S,d),c.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(ct(),S===m){c=ls(o,c,d);break t}He(o,c,S,d)}c=c.child}return c;case 26:if($n)return Go(o,c),o===null?(d=Z_(c.type,null,c.pendingProps,null))?c.memoizedState=d:Nt||(c.stateNode=mj(c.type,c.pendingProps,$s.current,c)):c.memoizedState=Z_(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:if(qe)return Kt(c),o===null&&qe&&Nt&&(m=c.stateNode=s1(c.type,c.pendingProps,$s.current,Ue.current,!1),Je=c,Ii=!0,Xe=$_(m)),m=c.pendingProps.children,o!==null||Nt?He(o,c,m,d):c.child=zr(c,null,m,d),Go(o,c),c.child;case 5:return o===null&&Nt&&(dj(c.type,c.pendingProps,Ue.current),(v=m=Xe)&&(m=ej(m,c.type,c.pendingProps,Ii),m!==null?(c.stateNode=m,Je=c,Xe=$_(m),Ii=!1,v=!0):v=!1),v||be(c)),Kt(c),v=c.type,S=c.pendingProps,j=o!==null?o.memoizedProps:null,m=S.children,au(v,S)?m=null:j!==null&&au(v,j)&&(c.flags|=32),c.memoizedState!==null&&(v=Yd(o,c,zR,null,null,d),ds?Nr._currentValue=v:Nr._currentValue2=v),Go(o,c),He(o,c,m,d),c.child;case 6:return o===null&&Nt&&(fj(c.pendingProps,Ue.current),(o=d=Xe)&&(d=nj(d,c.pendingProps,Ii),d!==null?(c.stateNode=d,Je=c,Xe=null,o=!0):o=!1),o||be(c)),null;case 13:return zv(o,c,d);case 4:return xt(c,c.stateNode.containerInfo),m=c.pendingProps,o===null?c.child=zr(c,null,m,d):He(o,c,m,d),c.child;case 11:return Av(o,c,c.type,c.pendingProps,d);case 7:return He(o,c,c.pendingProps,d),c.child;case 8:return He(o,c,c.pendingProps.children,d),c.child;case 12:return He(o,c,c.pendingProps.children,d),c.child;case 10:return m=c.pendingProps,Hs(c,c.type,m.value),He(o,c,m.children,d),c.child;case 9:return v=c.type._context,m=c.pendingProps.children,Ar(c),v=We(v),m=m(v),c.flags|=1,He(o,c,m,d),c.child;case 14:return Tv(o,c,c.type,c.pendingProps,d);case 15:return Ev(o,c,c.type,c.pendingProps,d);case 19:return Iv(o,c,d);case 22:return Rv(o,c,d);case 24:return Ar(c),m=We(me),o===null?(v=_f(),v===null&&(v=Zt,S=vf(),v.pooledCache=S,S.refCount++,S!==null&&(v.pooledCacheLanes|=d),v=S),c.memoizedState={parent:m,cache:v},Fd(c),Hs(c,me,v)):((o.lanes&d)!==0&&(Hd(o,c),Lo(c,null,null,d),Bo()),v=o.memoizedState,S=c.memoizedState,v.parent!==m?(v={parent:m,cache:m},c.memoizedState=v,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=v),Hs(c,me,m)):(m=S.cache,Hs(c,me,m),m!==v.cache&&yf(c,[me],d,!0))),He(o,c,c.pendingProps.children,d),c.child;case 29:throw c.pendingProps}throw Error(s(156,c.tag))}function Hs(o,c,d){ds?(M(vu,c._currentValue),c._currentValue=d):(M(vu,c._currentValue2),c._currentValue2=d)}function cs(o){var c=vu.current;ds?o._currentValue=c:o._currentValue2=c,C(vu)}function xf(o,c,d){for(;o!==null;){var m=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,m!==null&&(m.childLanes|=c)):m!==null&&(m.childLanes&c)!==c&&(m.childLanes|=c),o===d)break;o=o.return}}function yf(o,c,d,m){var v=o.child;for(v!==null&&(v.return=o);v!==null;){var S=v.dependencies;if(S!==null){var j=v.child;S=S.firstContext;t:for(;S!==null;){var z=S;S=v;for(var F=0;F<c.length;F++)if(z.context===c[F]){S.lanes|=d,z=S.alternate,z!==null&&(z.lanes|=d),xf(S.return,d,o),m||(j=null);break t}S=z.next}}else if(v.tag===18){if(j=v.return,j===null)throw Error(s(341));j.lanes|=d,S=j.alternate,S!==null&&(S.lanes|=d),xf(j,d,o),j=null}else j=v.child;if(j!==null)j.return=v;else for(j=v;j!==null;){if(j===o){j=null;break}if(v=j.sibling,v!==null){v.return=j.return,j=v;break}j=j.return}v=j}}function Vo(o,c,d,m){o=null;for(var v=c,S=!1;v!==null;){if(!S){if((v.flags&524288)!==0)S=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var j=v.alternate;if(j===null)throw Error(s(387));if(j=j.memoizedProps,j!==null){var z=v.type;Rn(v.pendingProps.value,j.value)||(o!==null?o.push(z):o=[z])}}else if(v===du.current){if(j=v.alternate,j===null)throw Error(s(387));j.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(o!==null?o.push(Nr):o=[Nr])}v=v.return}o!==null&&yf(c,o,d,m),c.flags|=262144}function Qc(o){for(o=o.firstContext;o!==null;){var c=o.context;if(!Rn(ds?c._currentValue:c._currentValue2,o.memoizedValue))return!0;o=o.next}return!1}function Ar(o){Lr=o,ms=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function We(o){return Lv(Lr,o)}function Kc(o,c){return Lr===null&&Ar(o),Lv(o,c)}function Lv(o,c){var d=ds?c._currentValue:c._currentValue2;if(c={context:c,memoizedValue:d,next:null},ms===null){if(o===null)throw Error(s(308));ms=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else ms=ms.next=c;return d}function vf(){return{controller:new kj,data:new Map,refCount:0}}function Wo(o){o.refCount--,o.refCount===0&&Nj(Oj,function(){o.controller.abort()})}function _f(){var o=Fr.current;return o!==null?o:Zt.pooledCache}function Zc(o,c){c===null?M(Fr,Fr.current):M(Fr,c.pool)}function Fv(){var o=_f();return o===null?null:{parent:ds?me._currentValue:me._currentValue2,pool:o}}function Sn(o){o.flags|=4}function Hv(o,c){if(o!==null&&o.child===c.child)return!1;if((c.flags&16)!==0)return!0;for(o=c.child;o!==null;){if((o.flags&13878)!==0||(o.subtreeFlags&13878)!==0)return!0;o=o.sibling}return!1}function bf(o,c,d,m){if(Ye)for(d=c.child;d!==null;){if(d.tag===5||d.tag===6)Kf(o,d.stateNode);else if(!(d.tag===4||qe&&d.tag===27)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return;d=d.return}d.sibling.return=d.return,d=d.sibling}else if(Xs)for(var v=c.child;v!==null;){if(v.tag===5){var S=v.stateNode;d&&m&&(S=Y_(S,v.type,v.memoizedProps)),Kf(o,S)}else if(v.tag===6)S=v.stateNode,d&&m&&(S=q_(S,v.memoizedProps)),Kf(o,S);else if(v.tag!==4){if(v.tag===22&&v.memoizedState!==null)S=v.child,S!==null&&(S.return=v),bf(o,v,!0,!0);else if(v.child!==null){v.child.return=v,v=v.child;continue}}if(v===c)break;for(;v.sibling===null;){if(v.return===null||v.return===c)return;v=v.return}v.sibling.return=v.return,v=v.sibling}}function Uv(o,c,d,m){if(Xs)for(var v=c.child;v!==null;){if(v.tag===5){var S=v.stateNode;d&&m&&(S=Y_(S,v.type,v.memoizedProps)),V_(o,S)}else if(v.tag===6)S=v.stateNode,d&&m&&(S=q_(S,v.memoizedProps)),V_(o,S);else if(v.tag!==4){if(v.tag===22&&v.memoizedState!==null)S=v.child,S!==null&&(S.return=v),Uv(o,v,!(v.memoizedProps!==null&&v.memoizedProps.mode==="manual"),!0);else if(v.child!==null){v.child.return=v,v=v.child;continue}}if(v===c)break;for(;v.sibling===null;){if(v.return===null||v.return===c)return;v=v.return}v.sibling.return=v.return,v=v.sibling}}function Gv(o,c){if(Xs&&Hv(o,c)){o=c.stateNode;var d=o.containerInfo,m=G_();Uv(m,c,!1,!1),o.pendingChildren=m,Sn(c),X3(d,m)}}function wf(o,c,d,m){if(Ye)o.memoizedProps!==m&&Sn(c);else if(Xs){var v=o.stateNode,S=o.memoizedProps;if((o=Hv(o,c))||S!==m){var j=Ue.current;S=q3(v,d,S,m,!o,null),S===v?c.stateNode=v:(I_(S,d,m,j)&&Sn(c),c.stateNode=S,o?bf(S,c,!1,!1):Sn(c))}else c.stateNode=v}}function Sf(o,c,d){if(b3(c,d)){if(o.flags|=16777216,!F_(c,d))if(p_())o.flags|=8192;else throw La=mu,hp}else o.flags&=-16777217}function Vv(o,c){if(xj(c)){if(o.flags|=16777216,!i1(c))if(p_())o.flags|=8192;else throw La=mu,hp}else o.flags&=-16777217}function Jc(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?k():536870912,o.lanes|=c,Ya|=c)}function Yo(o,c){if(!Nt)switch(o.tailMode){case"hidden":c=o.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?o.tail=null:d.sibling=null;break;case"collapsed":d=o.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:m.sibling=null}}function oe(o){var c=o.alternate!==null&&o.alternate.child===o.child,d=0,m=0;if(c)for(var v=o.child;v!==null;)d|=v.lanes|v.childLanes,m|=v.subtreeFlags&31457280,m|=v.flags&31457280,v.return=o,v=v.sibling;else for(v=o.child;v!==null;)d|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=o,v=v.sibling;return o.subtreeFlags|=m,o.childLanes=d,c}function UR(o,c,d){var m=c.pendingProps;switch(ft(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oe(c),null;case 1:return oe(c),null;case 3:return d=c.stateNode,m=null,o!==null&&(m=o.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),cs(me),pt(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(o===null||o.child===null)&&(gi(c)?Sn(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,vi!==null&&(Of(vi),vi=null))),Gv(o,c),oe(c),null;case 26:if($n){d=c.type;var v=c.memoizedState;return o===null?(Sn(c),v!==null?(oe(c),Vv(c,v)):(oe(c),Sf(c,d,m))):v?v!==o.memoizedState?(Sn(c),oe(c),Vv(c,v)):(oe(c),c.flags&=-16777217):(Ye?o.memoizedProps!==m&&Sn(c):wf(o,c,d,m),oe(c),Sf(c,d,m)),null}case 27:if(qe){if(Rt(c),d=$s.current,v=c.type,o!==null&&c.stateNode!=null)Ye?o.memoizedProps!==m&&Sn(c):wf(o,c,v,m);else{if(!m){if(c.stateNode===null)throw Error(s(166));return oe(c),null}o=Ue.current,gi(c)?we(c,o):(o=s1(v,m,d,o,!0),c.stateNode=o,Sn(c))}return oe(c),null}case 5:if(Rt(c),d=c.type,o!==null&&c.stateNode!=null)wf(o,c,d,m);else{if(!m){if(c.stateNode===null)throw Error(s(166));return oe(c),null}o=Ue.current,gi(c)?we(c,o):(v=p3(d,m,$s.current,o,c),bf(v,c,!1,!1),c.stateNode=v,I_(v,d,m,o)&&Sn(c))}return oe(c),Sf(c,c.type,c.pendingProps),null;case 6:if(o&&c.stateNode!=null)d=o.memoizedProps,Ye?d!==m&&Sn(c):Xs&&(d!==m?(c.stateNode=B_(m,$s.current,Ue.current,c),Sn(c)):c.stateNode=o.stateNode);else{if(typeof m!="string"&&c.stateNode===null)throw Error(s(166));if(o=$s.current,d=Ue.current,gi(c)){if(!Xn)throw Error(s(176));if(o=c.stateNode,d=c.memoizedProps,m=null,v=Je,v!==null)switch(v.tag){case 27:case 5:m=v.memoizedProps}rj(o,d,c,m)||be(c)}else c.stateNode=B_(m,o,d,c)}return oe(c),null;case 13:if(m=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(v=gi(c),m!==null&&m.dehydrated!==null){if(o===null){if(!v)throw Error(s(318));if(!Xn)throw Error(s(344));if(v=c.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(s(317));aj(v,c)}else ct(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;oe(c),v=!1}else vi!==null&&(Of(vi),vi=null),v=!0;if(!v)return c.flags&256?(as(c),c):(as(c),null)}if(as(c),(c.flags&128)!==0)return c.lanes=d,c;if(d=m!==null,o=o!==null&&o.memoizedState!==null,d){m=c.child,v=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(v=m.alternate.memoizedState.cachePool.pool);var S=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(S=m.memoizedState.cachePool.pool),S!==v&&(m.flags|=2048)}return d!==o&&d&&(c.child.flags|=8192),Jc(c,c.updateQueue),oe(c),null;case 4:return pt(),Gv(o,c),o===null&&x3(c.stateNode.containerInfo),oe(c),null;case 10:return cs(c.type),oe(c),null;case 19:if(C(ke),v=c.memoizedState,v===null)return oe(c),null;if(m=(c.flags&128)!==0,S=v.rendering,S===null)if(m)Yo(v,!1);else{if(xe!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(S=Gc(o),S!==null){for(c.flags|=128,Yo(v,!1),o=S.updateQueue,c.updateQueue=o,Jc(c,o),c.subtreeFlags=0,o=d,d=c.child;d!==null;)C_(d,o),d=d.sibling;return M(ke,ke.current&1|2),c.child}o=o.sibling}v.tail!==null&&yi()>ol&&(c.flags|=128,m=!0,Yo(v,!1),c.lanes=4194304)}else{if(!m)if(o=Gc(S),o!==null){if(c.flags|=128,m=!0,o=o.updateQueue,c.updateQueue=o,Jc(c,o),Yo(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!Nt)return oe(c),null}else 2*yi()-v.renderingStartTime>ol&&d!==536870912&&(c.flags|=128,m=!0,Yo(v,!1),c.lanes=4194304);v.isBackwards?(S.sibling=c.child,c.child=S):(o=v.last,o!==null?o.sibling=S:c.child=S,v.last=S)}return v.tail!==null?(c=v.tail,v.rendering=c,v.tail=c.sibling,v.renderingStartTime=yi(),c.sibling=null,o=ke.current,M(ke,m?o&1|2:o&1),c):(oe(c),null);case 22:case 23:return as(c),Vd(),m=c.memoizedState!==null,o!==null?o.memoizedState!==null!==m&&(c.flags|=8192):m&&(c.flags|=8192),m?(d&536870912)!==0&&(c.flags&128)===0&&(oe(c),c.subtreeFlags&6&&(c.flags|=8192)):oe(c),d=c.updateQueue,d!==null&&Jc(c,d.retryQueue),d=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==d&&(c.flags|=2048),o!==null&&C(Fr),null;case 24:return d=null,o!==null&&(d=o.memoizedState.cache),c.memoizedState.cache!==d&&(c.flags|=2048),cs(me),oe(c),null;case 25:return null}throw Error(s(156,c.tag))}function GR(o,c){switch(ft(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return cs(me),pt(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return Rt(c),null;case 13:if(as(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(s(340));ct()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return C(ke),null;case 4:return pt(),null;case 10:return cs(c.type),null;case 22:case 23:return as(c),Vd(),o!==null&&C(Fr),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return cs(me),null;case 25:return null;default:return null}}function Wv(o,c){switch(ft(c),c.tag){case 3:cs(me),pt();break;case 26:case 27:case 5:Rt(c);break;case 4:pt();break;case 13:as(c);break;case 19:C(ke);break;case 10:cs(c.type);break;case 22:case 23:as(c),Vd(),o!==null&&C(Fr);break;case 24:cs(me)}}function qo(o,c){try{var d=c.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var v=m.next;d=v;do{if((d.tag&o)===o){m=void 0;var S=d.create,j=d.inst;m=S(),j.destroy=m}d=d.next}while(d!==v)}}catch(z){Bt(c,c.return,z)}}function Us(o,c,d){try{var m=c.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var S=v.next;m=S;do{if((m.tag&o)===o){var j=m.inst,z=j.destroy;if(z!==void 0){j.destroy=void 0,v=c;var F=d;try{z()}catch($){Bt(v,F,$)}}}m=m.next}while(m!==S)}}catch($){Bt(c,c.return,$)}}function Yv(o){var c=o.updateQueue;if(c!==null){var d=o.stateNode;try{O0(c,d)}catch(m){Bt(o,o.return,m)}}}function qv(o,c,d){d.props=Pr(o.type,o.memoizedProps),d.state=o.memoizedState;try{d.componentWillUnmount()}catch(m){Bt(o,c,m)}}function Tr(o,c){try{var d=o.ref;if(d!==null){var m=o.stateNode;switch(o.tag){case 26:case 27:case 5:var v=Qo(m);break;default:v=m}typeof d=="function"?o.refCleanup=d(v):d.current=v}}catch(S){Bt(o,c,S)}}function Cn(o,c){var d=o.ref,m=o.refCleanup;if(d!==null)if(typeof m=="function")try{m()}catch(v){Bt(o,c,v)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(v){Bt(o,c,v)}else d.current=null}function Xv(o){var c=o.type,d=o.memoizedProps,m=o.stateNode;try{D3(m,c,d,o)}catch(v){Bt(o,o.return,v)}}function $v(o,c,d){try{I3(o.stateNode,o.type,d,c,o)}catch(m){Bt(o,o.return,m)}}function Qv(o){return o.tag===5||o.tag===3||($n?o.tag===26:!1)||(qe?o.tag===27:!1)||o.tag===4}function Cf(o){t:for(;;){for(;o.sibling===null;){if(o.return===null||Qv(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&(!qe||o.tag!==27)&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue t;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Mf(o,c,d){var m=o.tag;if(m===5||m===6)o=o.stateNode,c?L3(d,o,c):O3(d,o);else if(!(m===4||qe&&m===27)&&(o=o.child,o!==null))for(Mf(o,c,d),o=o.sibling;o!==null;)Mf(o,c,d),o=o.sibling}function tu(o,c,d){var m=o.tag;if(m===5||m===6)o=o.stateNode,c?B3(d,o,c):N3(d,o);else if(!(m===4||qe&&m===27)&&(o=o.child,o!==null))for(tu(o,c,d),o=o.sibling;o!==null;)tu(o,c,d),o=o.sibling}function Kv(o,c,d){o=o.containerInfo;try{W_(o,d)}catch(m){Bt(c,c.return,m)}}function VR(o,c){for(d3(o.containerInfo),De=c;De!==null;)if(o=De,c=o.child,(o.subtreeFlags&1028)!==0&&c!==null)c.return=o,De=c;else for(;De!==null;){o=De;var d=o.alternate;switch(c=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&d!==null){c=void 0;var m=o,v=d.memoizedProps;d=d.memoizedState;var S=m.stateNode;try{var j=Pr(m.type,v,m.elementType===m.type);c=S.getSnapshotBeforeUpdate(j,d),S.__reactInternalSnapshotBeforeUpdate=c}catch(z){Bt(m,m.return,z)}}break;case 3:(c&1024)!==0&&Ye&&Y3(o.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(s(163))}if(c=o.sibling,c!==null){c.return=o.return,De=c;break}De=o.return}return j=f1,f1=!1,j}function Zv(o,c,d){var m=d.flags;switch(d.tag){case 0:case 11:case 15:us(o,d),m&4&&qo(5,d);break;case 1:if(us(o,d),m&4)if(o=d.stateNode,c===null)try{o.componentDidMount()}catch(z){Bt(d,d.return,z)}else{var v=Pr(d.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(v,c,o.__reactInternalSnapshotBeforeUpdate)}catch(z){Bt(d,d.return,z)}}m&64&&Yv(d),m&512&&Tr(d,d.return);break;case 3:if(us(o,d),m&64&&(m=d.updateQueue,m!==null)){if(o=null,d.child!==null)switch(d.child.tag){case 27:case 5:o=Qo(d.child.stateNode);break;case 1:o=d.child.stateNode}try{O0(m,o)}catch(z){Bt(d,d.return,z)}}break;case 26:if($n){us(o,d),m&512&&Tr(d,d.return);break}case 27:case 5:us(o,d),c===null&&m&4&&Xv(d),m&512&&Tr(d,d.return);break;case 12:us(o,d);break;case 13:us(o,d),m&4&&t_(o,d);break;case 22:if(v=d.memoizedState!==null||gs,!v){c=c!==null&&c.memoizedState!==null||ge;var S=gs,j=ge;gs=v,(ge=c)&&!j?Gs(o,d,(d.subtreeFlags&8772)!==0):us(o,d),gs=S,ge=j}m&512&&(d.memoizedProps.mode==="manual"?Tr(d,d.return):Cn(d,d.return));break;default:us(o,d)}}function Jv(o){var c=o.alternate;c!==null&&(o.alternate=null,Jv(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&_3(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function xi(o,c,d){for(d=d.child;d!==null;)Pf(o,c,d),d=d.sibling}function Pf(o,c,d){if(En&&typeof En.onCommitFiberUnmount=="function")try{En.onCommitFiberUnmount(Jo,d)}catch{}switch(d.tag){case 26:if($n){ge||Cn(d,c),xi(o,c,d),d.memoizedState?t1(d.memoizedState):d.stateNode&&n1(d.stateNode);break}case 27:if(qe){ge||Cn(d,c);var m=Ae,v=jn;Ae=d.stateNode,xi(o,c,d),bj(d.stateNode),Ae=m,jn=v;break}case 5:ge||Cn(d,c);case 6:if(Ye){if(m=Ae,v=jn,Ae=null,xi(o,c,d),Ae=m,jn=v,Ae!==null)if(jn)try{H3(Ae,d.stateNode)}catch(S){Bt(d,c,S)}else try{F3(Ae,d.stateNode)}catch(S){Bt(d,c,S)}}else xi(o,c,d);break;case 18:Ye&&Ae!==null&&(jn?hj(Ae,d.stateNode):uj(Ae,d.stateNode));break;case 4:Ye?(m=Ae,v=jn,Ae=d.stateNode.containerInfo,jn=!0,xi(o,c,d),Ae=m,jn=v):(Xs&&Kv(d.stateNode,d,G_()),xi(o,c,d));break;case 0:case 11:case 14:case 15:ge||Us(2,d,c),ge||Us(4,d,c),xi(o,c,d);break;case 1:ge||(Cn(d,c),m=d.stateNode,typeof m.componentWillUnmount=="function"&&qv(d,c,m)),xi(o,c,d);break;case 21:xi(o,c,d);break;case 22:ge||Cn(d,c),ge=(m=ge)||d.memoizedState!==null,xi(o,c,d),ge=m;break;default:xi(o,c,d)}}function t_(o,c){if(Xn&&c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{cj(o)}catch(d){Bt(c,c.return,d)}}function WR(o){switch(o.tag){case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new d1),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new d1),c;default:throw Error(s(435,o.tag))}}function Af(o,c){var d=WR(o);c.forEach(function(m){var v=JR.bind(null,o,m);d.has(m)||(d.add(m),m.then(v,v))})}function on(o,c){var d=c.deletions;if(d!==null)for(var m=0;m<d.length;m++){var v=d[m],S=o,j=c;if(Ye){var z=j;t:for(;z!==null;){switch(z.tag){case 27:case 5:Ae=z.stateNode,jn=!1;break t;case 3:Ae=z.stateNode.containerInfo,jn=!0;break t;case 4:Ae=z.stateNode.containerInfo,jn=!0;break t}z=z.return}if(Ae===null)throw Error(s(160));Pf(S,j,v),Ae=null,jn=!1}else Pf(S,j,v);S=v.alternate,S!==null&&(S.return=null),v.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)e_(c,o),c=c.sibling}function e_(o,c){var d=o.alternate,m=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:on(c,o),Mn(o),m&4&&(Us(3,o,o.return),qo(3,o),Us(5,o,o.return));break;case 1:on(c,o),Mn(o),m&512&&(ge||d===null||Cn(d,d.return)),m&64&&gs&&(o=o.updateQueue,o!==null&&(m=o.callbacks,m!==null&&(d=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=d===null?m:d.concat(m))));break;case 26:if($n){var v=_i;on(c,o),Mn(o),m&512&&(ge||d===null||Cn(d,d.return)),m&4&&(m=d!==null?d.memoizedState:null,c=o.memoizedState,d===null?c===null?o.stateNode===null?o.stateNode=pj(v,o.type,o.memoizedProps,o):e1(v,o.type,o.stateNode):o.stateNode=J_(v,c,o.memoizedProps):m!==c?(m===null?d.stateNode!==null&&n1(d.stateNode):t1(m),c===null?e1(v,o.type,o.stateNode):J_(v,c,o.memoizedProps)):c===null&&o.stateNode!==null&&$v(o,o.memoizedProps,d.memoizedProps));break}case 27:if(qe&&m&4&&o.alternate===null){v=o.stateNode;var S=o.memoizedProps;try{vj(v),_j(o.type,S,v,o)}catch(it){Bt(o,o.return,it)}}case 5:if(on(c,o),Mn(o),m&512&&(ge||d===null||Cn(d,d.return)),Ye){if(o.flags&32){c=o.stateNode;try{U_(c)}catch(it){Bt(o,o.return,it)}}m&4&&o.stateNode!=null&&(c=o.memoizedProps,$v(o,c,d!==null?d.memoizedProps:c)),m&1024&&(mp=!0)}break;case 6:if(on(c,o),Mn(o),m&4&&Ye){if(o.stateNode===null)throw Error(s(162));m=o.memoizedProps,d=d!==null?d.memoizedProps:m,c=o.stateNode;try{z3(c,d,m)}catch(it){Bt(o,o.return,it)}}break;case 3:if($n?(gj(),v=_i,_i=ep(c.containerInfo),on(c,o),_i=v):on(c,o),Mn(o),m&4){if(Ye&&Xn&&d!==null&&d.memoizedState.isDehydrated)try{lj(c.containerInfo)}catch(it){Bt(o,o.return,it)}if(Xs){m=c.containerInfo,d=c.pendingChildren;try{W_(m,d)}catch(it){Bt(o,o.return,it)}}}mp&&(mp=!1,n_(o));break;case 4:$n?(d=_i,_i=ep(o.stateNode.containerInfo),on(c,o),Mn(o),_i=d):(on(c,o),Mn(o)),m&4&&Xs&&Kv(o.stateNode,o,o.stateNode.pendingChildren);break;case 12:on(c,o),Mn(o);break;case 13:on(c,o),Mn(o),o.child.flags&8192&&o.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(vp=yi()),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,Af(o,m)));break;case 22:m&512&&(ge||d===null||Cn(d,d.return)),v=o.memoizedState!==null;var j=d!==null&&d.memoizedState!==null,z=gs,F=ge;if(gs=z||v,ge=F||j,on(c,o),ge=F,gs=z,Mn(o),c=o.stateNode,c._current=o,c._visibility&=-3,c._visibility|=c._pendingVisibility&2,m&8192&&(c._visibility=v?c._visibility&-2:c._visibility|1,v&&(c=gs||ge,d===null||j||c||Sa(o)),Ye&&(o.memoizedProps===null||o.memoizedProps.mode!=="manual"))){t:if(d=null,Ye)for(c=o;;){if(c.tag===5||$n&&c.tag===26||qe&&c.tag===27){if(d===null){j=d=c;try{S=j.stateNode,v?U3(S):V3(j.stateNode,j.memoizedProps)}catch(it){Bt(j,j.return,it)}}}else if(c.tag===6){if(d===null){j=c;try{var $=j.stateNode;v?G3($):W3($,j.memoizedProps)}catch(it){Bt(j,j.return,it)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break t;for(;c.sibling===null;){if(c.return===null||c.return===o)break t;d===c&&(d=null),c=c.return}d===c&&(d=null),c.sibling.return=c.return,c=c.sibling}}m&4&&(m=o.updateQueue,m!==null&&(d=m.retryQueue,d!==null&&(m.retryQueue=null,Af(o,d))));break;case 19:on(c,o),Mn(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,Af(o,m)));break;case 21:break;default:on(c,o),Mn(o)}}function Mn(o){var c=o.flags;if(c&2){try{if(Ye&&(!qe||o.tag!==27)){t:{for(var d=o.return;d!==null;){if(Qv(d)){var m=d;break t}d=d.return}throw Error(s(160))}switch(m.tag){case 27:if(qe){var v=m.stateNode,S=Cf(o);tu(o,S,v);break}case 5:var j=m.stateNode;m.flags&32&&(U_(j),m.flags&=-33);var z=Cf(o);tu(o,z,j);break;case 3:case 4:var F=m.stateNode.containerInfo,$=Cf(o);Mf(o,$,F);break;default:throw Error(s(161))}}}catch(it){Bt(o,o.return,it)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function n_(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;n_(c),c.tag===5&&c.flags&1024&&C3(c.stateNode),o=o.sibling}}function us(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)Zv(o,c.alternate,c),c=c.sibling}function Sa(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:Us(4,c,c.return),Sa(c);break;case 1:Cn(c,c.return);var d=c.stateNode;typeof d.componentWillUnmount=="function"&&qv(c,c.return,d),Sa(c);break;case 26:case 27:case 5:Cn(c,c.return),Sa(c);break;case 22:Cn(c,c.return),c.memoizedState===null&&Sa(c);break;default:Sa(c)}o=o.sibling}}function Gs(o,c,d){for(d=d&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var m=c.alternate,v=o,S=c,j=S.flags;switch(S.tag){case 0:case 11:case 15:Gs(v,S,d),qo(4,S);break;case 1:if(Gs(v,S,d),m=S,v=m.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch($){Bt(m,m.return,$)}if(m=S,v=m.updateQueue,v!==null){var z=m.stateNode;try{var F=v.shared.hiddenCallbacks;if(F!==null)for(v.shared.hiddenCallbacks=null,v=0;v<F.length;v++)N0(F[v],z)}catch($){Bt(m,m.return,$)}}d&&j&64&&Yv(S),Tr(S,S.return);break;case 26:case 27:case 5:Gs(v,S,d),d&&m===null&&j&4&&Xv(S),Tr(S,S.return);break;case 12:Gs(v,S,d);break;case 13:Gs(v,S,d),d&&j&4&&t_(v,S);break;case 22:S.memoizedState===null&&Gs(v,S,d),Tr(S,S.return);break;default:Gs(v,S,d)}c=c.sibling}}function Tf(o,c){var d=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==d&&(o!=null&&o.refCount++,d!=null&&Wo(d))}function Ef(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Wo(o))}function Vs(o,c,d,m){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)i_(o,c,d,m),c=c.sibling}function i_(o,c,d,m){var v=c.flags;switch(c.tag){case 0:case 11:case 15:Vs(o,c,d,m),v&2048&&qo(9,c);break;case 3:Vs(o,c,d,m),v&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Wo(o)));break;case 12:if(v&2048){Vs(o,c,d,m),o=c.stateNode;try{var S=c.memoizedProps,j=S.id,z=S.onPostCommit;typeof z=="function"&&z(j,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(F){Bt(c,c.return,F)}}else Vs(o,c,d,m);break;case 23:break;case 22:S=c.stateNode,c.memoizedState!==null?S._visibility&4?Vs(o,c,d,m):Xo(o,c):S._visibility&4?Vs(o,c,d,m):(S._visibility|=4,Ca(o,c,d,m,(c.subtreeFlags&10256)!==0)),v&2048&&Tf(c.alternate,c);break;case 24:Vs(o,c,d,m),v&2048&&Ef(c.alternate,c);break;default:Vs(o,c,d,m)}}function Ca(o,c,d,m,v){for(v=v&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var S=o,j=c,z=d,F=m,$=j.flags;switch(j.tag){case 0:case 11:case 15:Ca(S,j,z,F,v),qo(8,j);break;case 23:break;case 22:var it=j.stateNode;j.memoizedState!==null?it._visibility&4?Ca(S,j,z,F,v):Xo(S,j):(it._visibility|=4,Ca(S,j,z,F,v)),v&&$&2048&&Tf(j.alternate,j);break;case 24:Ca(S,j,z,F,v),v&&$&2048&&Ef(j.alternate,j);break;default:Ca(S,j,z,F,v)}c=c.sibling}}function Xo(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var d=o,m=c,v=m.flags;switch(m.tag){case 22:Xo(d,m),v&2048&&Tf(m.alternate,m);break;case 24:Xo(d,m),v&2048&&Ef(m.alternate,m);break;default:Xo(d,m)}c=c.sibling}}function Er(o){if(o.subtreeFlags&Va)for(o=o.child;o!==null;)s_(o),o=o.sibling}function s_(o){switch(o.tag){case 26:Er(o),o.flags&Va&&(o.memoizedState!==null?yj(_i,o.memoizedState,o.memoizedProps):H_(o.type,o.memoizedProps));break;case 5:Er(o),o.flags&Va&&H_(o.type,o.memoizedProps);break;case 3:case 4:if($n){var c=_i;_i=ep(o.stateNode.containerInfo),Er(o),_i=c}else Er(o);break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=Va,Va=16777216,Er(o),Va=c):Er(o));break;default:Er(o)}}function r_(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function $o(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var d=0;d<c.length;d++){var m=c[d];De=m,o_(m,o)}r_(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)a_(o),o=o.sibling}function a_(o){switch(o.tag){case 0:case 11:case 15:$o(o),o.flags&2048&&Us(9,o,o.return);break;case 3:$o(o);break;case 12:$o(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&4&&(o.return===null||o.return.tag!==13)?(c._visibility&=-5,eu(o)):$o(o);break;default:$o(o)}}function eu(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var d=0;d<c.length;d++){var m=c[d];De=m,o_(m,o)}r_(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:Us(8,c,c.return),eu(c);break;case 22:d=c.stateNode,d._visibility&4&&(d._visibility&=-5,eu(c));break;default:eu(c)}o=o.sibling}}function o_(o,c){for(;De!==null;){var d=De;switch(d.tag){case 0:case 11:case 15:Us(8,d,c);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var m=d.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Wo(d.memoizedState.cache)}if(m=d.child,m!==null)m.return=d,De=m;else t:for(d=o;De!==null;){m=De;var v=m.sibling,S=m.return;if(Jv(m),m===d){De=null;break t}if(v!==null){v.return=S,De=v;break t}De=S}}}function Rf(o){var c=L_(o);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(s(364));return c}if(o=A3(o),o===null)throw Error(s(362));return o.stateNode.current}function jf(o,c){var d=o.tag;switch(c.$$typeof){case _u:if(o.type===c.value)return!0;break;case bu:t:{for(c=c.value,o=[o,0],d=0;d<o.length;){var m=o[d++],v=m.tag,S=o[d++],j=c[S];if(v!==5&&v!==26&&v!==27||!Zo(m)){for(;j!=null&&jf(m,j);)S++,j=c[S];if(S===c.length){c=!0;break t}else for(m=m.child;m!==null;)o.push(m,S),m=m.sibling}}c=!1}return c;case wu:if((d===5||d===26||d===27)&&R3(o.stateNode,c.value))return!0;break;case Cu:if((d===5||d===6||d===26||d===27)&&(o=E3(o),o!==null&&0<=o.indexOf(c.value)))return!0;break;case Su:if((d===5||d===26||d===27)&&(o=o.memoizedProps["data-testname"],typeof o=="string"&&o.toLowerCase()===c.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function kf(o){switch(o.$$typeof){case _u:return"<"+(a(o.value)||"Unknown")+">";case bu:return":has("+(kf(o)||"")+")";case wu:return'[role="'+o.value+'"]';case Cu:return'"'+o.value+'"';case Su:return'[data-testname="'+o.value+'"]';default:throw Error(s(365))}}function l_(o,c){var d=[];o=[o,0];for(var m=0;m<o.length;){var v=o[m++],S=v.tag,j=o[m++],z=c[j];if(S!==5&&S!==26&&S!==27||!Zo(v)){for(;z!=null&&jf(v,z);)j++,z=c[j];if(j===c.length)d.push(v);else for(v=v.child;v!==null;)o.push(v,j),v=v.sibling}}return d}function Nf(o,c){if(!Ko)throw Error(s(363));o=Rf(o),o=l_(o,c),c=[],o=Array.from(o);for(var d=0;d<o.length;){var m=o[d++],v=m.tag;if(v===5||v===26||v===27)Zo(m)||c.push(m.stateNode);else for(m=m.child;m!==null;)o.push(m),m=m.sibling}return c}function Pn(){if((Gt&2)!==0&&jt!==0)return jt&-jt;if(yt.T!==null){var o=Ia;return o!==0?o:Ld()}return y3()}function c_(){ti===0&&(ti=(jt&536870912)===0||Nt?O():536870912);var o=Jn.current;return o!==null&&(o.flags|=32),ti}function Ze(o,c,d){(o===Zt&&Jt===2||o.cancelPendingCommit!==null)&&(Ma(o,0),hs(o,jt,ti,!1)),I(o,d),((Gt&2)===0||o!==Zt)&&(o===Zt&&((Gt&2)===0&&(Hr|=d),xe===4&&hs(o,jt,ti,!1)),Di(o))}function u_(o,c,d){if((Gt&6)!==0)throw Error(s(327));var m=!d&&(c&60)===0&&(c&o.expiredLanes)===0||R(o,c),v=m?XR(o,c):If(o,c,!0),S=m;do{if(v===0){Wa&&!m&&hs(o,c,0,!1);break}else if(v===6)hs(o,c,0,!xs);else{if(d=o.current.alternate,S&&!YR(d)){v=If(o,c,!1),S=!1;continue}if(v===2){if(S=c,o.errorRecoveryDisabledLanes&S)var j=0;else j=o.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){c=j;t:{var z=o;v=al;var F=Xn&&z.current.memoizedState.isDehydrated;if(F&&(Ma(z,j).flags|=256),j=If(z,j,!1),j!==2){if(gp&&!F){z.errorRecoveryDisabledLanes|=S,Hr|=S,v=4;break t}S=Fi,Fi=v,S!==null&&Of(S)}v=j}if(S=!1,v!==2)continue}}if(v===1){Ma(o,0),hs(o,c,0,!0);break}t:{switch(m=o,v){case 0:case 1:throw Error(s(345));case 4:if((c&4194176)===c){hs(m,c,ti,!xs);break t}break;case 2:Fi=null;break;case 3:case 5:break;default:throw Error(s(329))}if(m.finishedWork=d,m.finishedLanes=c,(c&62914560)===c&&(S=vp+300-yi(),10<S)){if(hs(m,c,ti,!xs),E(m,0)!==0)break t;m.timeoutHandle=m3(h_.bind(null,m,d,Fi,Mu,yp,c,ti,Hr,Ya,xs,2,-0,0),S);break t}h_(m,d,Fi,Mu,yp,c,ti,Hr,Ya,xs,0,-0,0)}}break}while(!0);Di(o)}function Of(o){Fi===null?Fi=o:Fi.push.apply(Fi,o)}function h_(o,c,d,m,v,S,j,z,F,$,it,st,rt){var _t=c.subtreeFlags;if((_t&8192||(_t&16785408)===16785408)&&(w3(),s_(c),c=S3(),c!==null)){o.cancelPendingCommit=c(__.bind(null,o,d,m,v,j,z,F,1,st,rt)),hs(o,S,j,!$);return}__(o,d,m,v,j,z,F,it,st,rt)}function YR(o){for(var c=o;;){var d=c.tag;if((d===0||d===11||d===15)&&c.flags&16384&&(d=c.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var m=0;m<d.length;m++){var v=d[m],S=v.getSnapshot;v=v.value;try{if(!Rn(S(),v))return!1}catch{return!1}}if(d=c.child,c.subtreeFlags&16384&&d!==null)d.return=c,c=d;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function hs(o,c,d,m){c&=~xp,c&=~Hr,o.suspendedLanes|=c,o.pingedLanes&=~c,m&&(o.warmLanes|=c),m=o.expirationTimes;for(var v=c;0<v;){var S=31-Tn(v),j=1<<S;m[S]=-1,v&=~j}d!==0&&q(o,d,c)}function d_(){return(Gt&6)===0?(ba(0),!1):!0}function zf(){if(At!==null){if(Jt===0)var o=At.return;else o=At,ms=Lr=null,$d(o),Fa=null,il=0,o=At;for(;o!==null;)Wv(o.alternate,o),o=o.return;At=null}}function Ma(o,c){o.finishedWork=null,o.finishedLanes=0;var d=o.timeoutHandle;d!==Zf&&(o.timeoutHandle=Zf,g3(d)),d=o.cancelPendingCommit,d!==null&&(o.cancelPendingCommit=null,d()),zf(),Zt=o,At=d=Ws(o.current,null),jt=c,Jt=0,kn=null,xs=!1,Wa=R(o,c),gp=!1,Ya=ti=xp=Hr=Js=xe=0,Fi=al=null,yp=!1,(c&8)!==0&&(c|=c&32);var m=o.entangledLanes;if(m!==0)for(o=o.entanglements,m&=c;0<m;){var v=31-Tn(m),S=1<<v;c|=o[v],m&=~S}return ys=c,Mt(),d}function f_(o,c){wt=null,yt.H=Li,c===nl?(c=I0(),Jt=3):c===hp?(c=I0(),Jt=4):Jt=c===u1?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,kn=c,At===null&&(xe=1,$c(o,V(c,o.current)))}function p_(){var o=Jn.current;return o===null?!0:(jt&4194176)===jt?Bi===null:(jt&62914560)===jt||(jt&536870912)!==0?o===Bi:!1}function m_(){var o=yt.H;return yt.H=Li,o===null?Li:o}function g_(){var o=yt.A;return yt.A=zj,o}function Df(){xe=4,xs||(jt&4194176)!==jt&&Jn.current!==null||(Wa=!0),(Js&134217727)===0&&(Hr&134217727)===0||Zt===null||hs(Zt,jt,ti,!1)}function If(o,c,d){var m=Gt;Gt|=2;var v=m_(),S=g_();(Zt!==o||jt!==c)&&(Mu=null,Ma(o,c)),c=!1;var j=xe;t:do try{if(Jt!==0&&At!==null){var z=At,F=kn;switch(Jt){case 8:zf(),j=6;break t;case 3:case 2:case 6:Jn.current===null&&(c=!0);var $=Jt;if(Jt=0,kn=null,Pa(o,z,F,$),d&&Wa){j=0;break t}break;default:$=Jt,Jt=0,kn=null,Pa(o,z,F,$)}}qR(),j=xe;break}catch(it){f_(o,it)}while(!0);return c&&o.shellSuspendCounter++,ms=Lr=null,Gt=m,yt.H=v,yt.A=S,At===null&&(Zt=null,jt=0,Mt()),j}function qR(){for(;At!==null;)x_(At)}function XR(o,c){var d=Gt;Gt|=2;var m=m_(),v=g_();Zt!==o||jt!==c?(Mu=null,ol=yi()+500,Ma(o,c)):Wa=R(o,c);t:do try{if(Jt!==0&&At!==null){c=At;var S=kn;e:switch(Jt){case 1:Jt=0,kn=null,Pa(o,c,S,1);break;case 2:if(z0(S)){Jt=0,kn=null,y_(c);break}c=function(){Jt===2&&Zt===o&&(Jt=7),Di(o)},S.then(c,c);break t;case 3:Jt=7;break t;case 4:Jt=5;break t;case 7:z0(S)?(Jt=0,kn=null,y_(c)):(Jt=0,kn=null,Pa(o,c,S,7));break;case 5:var j=null;switch(At.tag){case 26:j=At.memoizedState;case 5:case 27:var z=At,F=z.type,$=z.pendingProps;if(j?i1(j):F_(F,$)){Jt=0,kn=null;var it=z.sibling;if(it!==null)At=it;else{var st=z.return;st!==null?(At=st,nu(st)):At=null}break e}}Jt=0,kn=null,Pa(o,c,S,5);break;case 6:Jt=0,kn=null,Pa(o,c,S,6);break;case 8:zf(),xe=6;break t;default:throw Error(s(462))}}$R();break}catch(rt){f_(o,rt)}while(!0);return ms=Lr=null,yt.H=m,yt.A=v,Gt=d,At!==null?0:(Zt=null,jt=0,Mt(),xe)}function $R(){for(;At!==null&&!Cj();)x_(At)}function x_(o){var c=Bv(o.alternate,o,ys);o.memoizedProps=o.pendingProps,c===null?nu(o):At=c}function y_(o){var c=o,d=c.alternate;switch(c.tag){case 15:case 0:c=kv(d,c,c.pendingProps,c.type,void 0,jt);break;case 11:c=kv(d,c,c.pendingProps,c.type.render,c.ref,jt);break;case 5:$d(c);default:Wv(d,c),c=At=C_(c,ys),c=Bv(d,c,ys)}o.memoizedProps=o.pendingProps,c===null?nu(o):At=c}function Pa(o,c,d,m){ms=Lr=null,$d(c),Fa=null,il=0;var v=c.return;try{if(FR(o,v,c,d,jt)){xe=1,$c(o,V(d,o.current)),At=null;return}}catch(S){if(v!==null)throw At=v,S;xe=1,$c(o,V(d,o.current)),At=null;return}c.flags&32768?(Nt||m===1?o=!0:Wa||(jt&536870912)!==0?o=!1:(xs=o=!0,(m===2||m===3||m===6)&&(m=Jn.current,m!==null&&m.tag===13&&(m.flags|=16384))),v_(c,o)):nu(c)}function nu(o){var c=o;do{if((c.flags&32768)!==0){v_(c,xs);return}o=c.return;var d=UR(c.alternate,c,ys);if(d!==null){At=d;return}if(c=c.sibling,c!==null){At=c;return}At=c=o}while(c!==null);xe===0&&(xe=5)}function v_(o,c){do{var d=GR(o.alternate,o);if(d!==null){d.flags&=32767,At=d;return}if(d=o.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!c&&(o=o.sibling,o!==null)){At=o;return}At=o=d}while(o!==null);xe=6,At=null}function __(o,c,d,m,v,S,j,z,F,$){var it=yt.T,st=kr();try{ln(2),yt.T=null,QR(o,c,d,m,st,v,S,j,z,F,$)}finally{yt.T=it,ln(st)}}function QR(o,c,d,m,v,S,j,z){do Rr();while(Ur!==null);if((Gt&6)!==0)throw Error(s(327));var F=o.finishedWork;if(m=o.finishedLanes,F===null)return null;if(o.finishedWork=null,o.finishedLanes=0,F===o.current)throw Error(s(177));o.callbackNode=null,o.callbackPriority=0,o.cancelPendingCommit=null;var $=F.lanes|F.childLanes;if($|=ap,X(o,m,$,S,j,z),o===Zt&&(At=Zt=null,jt=0),(F.subtreeFlags&10256)===0&&(F.flags&10256)===0||Pu||(Pu=!0,_p=$,bp=d,t3(sp,function(){return Rr(),null})),d=(F.flags&15990)!==0,(F.subtreeFlags&15990)!==0||d?(d=yt.T,yt.T=null,S=kr(),ln(2),j=Gt,Gt|=4,VR(o,F),e_(F,o),f3(o.containerInfo),o.current=F,Zv(o,F.alternate,F),Mj(),Gt=j,ln(S),yt.T=d):o.current=F,Pu?(Pu=!1,Ur=o,ll=m):b_(o,$),$=o.pendingLanes,$===0&&(tr=null),D(F.stateNode),Di(o),c!==null)for(v=o.onRecoverableError,F=0;F<c.length;F++)$=c[F],v($.value,{componentStack:$.stack});return(ll&3)!==0&&Rr(),$=o.pendingLanes,(m&4194218)!==0&&($&42)!==0?o===wp?cl++:(cl=0,wp=o):cl=0,ba(0),null}function b_(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,Wo(c)))}function Rr(){if(Ur!==null){var o=Ur,c=_p;_p=0;var d=Y(ll),m=32>d?32:d;d=yt.T;var v=kr();try{if(ln(m),yt.T=null,Ur===null)var S=!1;else{m=bp,bp=null;var j=Ur,z=ll;if(Ur=null,ll=0,(Gt&6)!==0)throw Error(s(331));var F=Gt;if(Gt|=4,a_(j.current),i_(j,j.current,z,m),Gt=F,ba(0,!1),En&&typeof En.onPostCommitFiberRoot=="function")try{En.onPostCommitFiberRoot(Jo,j)}catch{}S=!0}return S}finally{ln(v),yt.T=d,b_(o,c)}}return!1}function w_(o,c,d){c=V(d,c),c=lf(o.stateNode,c,2),o=Bs(o,c,2),o!==null&&(I(o,2),Di(o))}function Bt(o,c,d){if(o.tag===3)w_(o,o,d);else for(;c!==null;){if(c.tag===3){w_(c,o,d);break}else if(c.tag===1){var m=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(tr===null||!tr.has(m))){o=V(d,o),d=Mv(2),m=Bs(c,d,2),m!==null&&(Pv(d,m,c,o),I(m,2),Di(m));break}}c=c.return}}function Bf(o,c,d){var m=o.pingCache;if(m===null){m=o.pingCache=new Dj;var v=new Set;m.set(c,v)}else v=m.get(c),v===void 0&&(v=new Set,m.set(c,v));v.has(d)||(gp=!0,v.add(d),o=KR.bind(null,o,c,d),c.then(o,o))}function KR(o,c,d){var m=o.pingCache;m!==null&&m.delete(c),o.pingedLanes|=o.suspendedLanes&d,o.warmLanes&=~d,Zt===o&&(jt&d)===d&&(xe===4||xe===3&&(jt&62914560)===jt&&300>yi()-vp?(Gt&2)===0&&Ma(o,0):xp|=d,Ya===jt&&(Ya=0)),Di(o)}function S_(o,c){c===0&&(c=k()),o=Oe(o,c),o!==null&&(I(o,c),Di(o))}function ZR(o){var c=o.memoizedState,d=0;c!==null&&(d=c.retryLane),S_(o,d)}function JR(o,c){var d=0;switch(o.tag){case 13:var m=o.stateNode,v=o.memoizedState;v!==null&&(d=v.retryLane);break;case 19:m=o.stateNode;break;case 22:m=o.stateNode._retryCache;break;default:throw Error(s(314))}m!==null&&m.delete(c),S_(o,d)}function t3(o,c){return cu(o,c)}function e3(o,c,d,m){this.tag=o,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lf(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Ws(o,c){var d=o.alternate;return d===null?(d=e(o.tag,c,o.key,o.mode),d.elementType=o.elementType,d.type=o.type,d.stateNode=o.stateNode,d.alternate=o,o.alternate=d):(d.pendingProps=c,d.type=o.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=o.flags&31457280,d.childLanes=o.childLanes,d.lanes=o.lanes,d.child=o.child,d.memoizedProps=o.memoizedProps,d.memoizedState=o.memoizedState,d.updateQueue=o.updateQueue,c=o.dependencies,d.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},d.sibling=o.sibling,d.index=o.index,d.ref=o.ref,d.refCleanup=o.refCleanup,d}function C_(o,c){o.flags&=31457282;var d=o.alternate;return d===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=d.childLanes,o.lanes=d.lanes,o.child=d.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=d.memoizedProps,o.memoizedState=d.memoizedState,o.updateQueue=d.updateQueue,o.type=d.type,c=d.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function iu(o,c,d,m,v,S){var j=0;if(m=o,typeof o=="function")Lf(o)&&(j=1);else if(typeof o=="string")j=$n&&qe?K_(o,d,Ue.current)?26:r1(o)?27:5:$n?K_(o,d,Ue.current)?26:5:qe&&r1(o)?27:5;else t:switch(o){case Ta:return jr(d.children,v,S,c);case j_:j=8,v|=24;break;case Vf:return o=e(12,d,c,v|2),o.elementType=Vf,o.lanes=S,o;case Yf:return o=e(13,d,c,v),o.elementType=Yf,o.lanes=S,o;case qf:return o=e(19,d,c,v),o.elementType=qf,o.lanes=S,o;case N_:return M_(d,v,S,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case r3:case Ys:j=10;break t;case k_:j=9;break t;case Wf:j=11;break t;case Xf:j=14;break t;case qs:j=16,m=null;break t}j=29,d=Error(s(130,o===null?"null":typeof o,"")),m=null}return c=e(j,d,c,v),c.elementType=o,c.type=m,c.lanes=S,c}function jr(o,c,d,m){return o=e(7,o,m,c),o.lanes=d,o}function M_(o,c,d,m){o=e(22,o,m,c),o.elementType=N_,o.lanes=d;var v={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var S=v._current;if(S===null)throw Error(s(456));if((v._pendingVisibility&2)===0){var j=Oe(S,2);j!==null&&(v._pendingVisibility|=2,Ze(j,S,2))}},attach:function(){var S=v._current;if(S===null)throw Error(s(456));if((v._pendingVisibility&2)!==0){var j=Oe(S,2);j!==null&&(v._pendingVisibility&=-3,Ze(j,S,2))}}};return o.stateNode=v,o}function Ff(o,c,d){return o=e(6,o,null,c),o.lanes=d,o}function Hf(o,c,d){return c=e(4,o.children!==null?o.children:[],o.key,c),c.lanes=d,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function n3(o,c,d,m,v,S,j,z){this.tag=1,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Zf,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=B(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=B(0),this.hiddenUpdates=B(null),this.identifierPrefix=m,this.onUncaughtError=v,this.onCaughtError=S,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function P_(o,c,d,m,v,S,j,z,F,$,it,st){return o=new n3(o,c,d,j,z,F,$,st),c=1,S===!0&&(c|=24),S=e(3,null,null,c),o.current=S,S.stateNode=o,c=vf(),c.refCount++,o.pooledCache=c,c.refCount++,S.memoizedState={element:m,isDehydrated:d,cache:c},Fd(S),o}function A_(o){return o?(o=ja,o):ja}function T_(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(s(188)):(o=Object.keys(o).join(","),Error(s(268,o)));return o=x(c),o=o!==null?w(o):null,o===null?null:Qo(o.stateNode)}function E_(o,c,d,m,v,S){v=A_(v),m.context===null?m.context=v:m.pendingContext=v,m=Is(c),m.payload={element:d},S=S===void 0?null:S,S!==null&&(m.callback=S),d=Bs(o,m,c),d!==null&&(Ze(d,o,c),Io(d,o,c))}function R_(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var d=o.retryLane;o.retryLane=d!==0&&d<c?d:c}}function Uf(o,c){R_(o,c),(o=o.alternate)&&R_(o,c)}var Pt={},i3=Uk(),An=RB(),Gf=Object.assign,s3=Symbol.for("react.element"),su=Symbol.for("react.transitional.element"),Aa=Symbol.for("react.portal"),Ta=Symbol.for("react.fragment"),j_=Symbol.for("react.strict_mode"),Vf=Symbol.for("react.profiler"),r3=Symbol.for("react.provider"),k_=Symbol.for("react.consumer"),Ys=Symbol.for("react.context"),Wf=Symbol.for("react.forward_ref"),Yf=Symbol.for("react.suspense"),qf=Symbol.for("react.suspense_list"),Xf=Symbol.for("react.memo"),qs=Symbol.for("react.lazy"),N_=Symbol.for("react.offscreen"),a3=Symbol.for("react.memo_cache_sentinel"),O_=Symbol.iterator,o3=Symbol.for("react.client.reference"),yt=i3.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$f,z_,Qf=!1,ru=Array.isArray,l3=t.rendererVersion,c3=t.rendererPackageName,D_=t.extraDevToolsConfig,Qo=t.getPublicInstance,u3=t.getRootHostContext,h3=t.getChildHostContext,d3=t.prepareForCommit,f3=t.resetAfterCommit,p3=t.createInstance,Kf=t.appendInitialChild,I_=t.finalizeInitialChildren,au=t.shouldSetTextContent,B_=t.createTextInstance,m3=t.scheduleTimeout,g3=t.cancelTimeout,Zf=t.noTimeout,ds=t.isPrimaryRenderer;t.warnsIfNotActing;var Ye=t.supportsMutation,Xs=t.supportsPersistence,Xn=t.supportsHydration,L_=t.getInstanceFromNode;t.beforeActiveInstanceBlur,t.afterActiveInstanceBlur;var x3=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var ln=t.setCurrentUpdatePriority,kr=t.getCurrentUpdatePriority,y3=t.resolveUpdatePriority;t.resolveEventType,t.resolveEventTimeStamp;var v3=t.shouldAttemptEagerTransition,_3=t.detachDeletedInstance;t.requestPostPaintCallback;var b3=t.maySuspendCommit,F_=t.preloadInstance,w3=t.startSuspendingCommit,H_=t.suspendInstance,S3=t.waitForCommitToBeReady,Ea=t.NotPendingTransition,Nr=t.HostTransitionContext,C3=t.resetFormInstance;t.bindToConsole;var M3=t.supportsMicrotasks,P3=t.scheduleMicrotask,Ko=t.supportsTestSelectors,A3=t.findFiberRoot,T3=t.getBoundingRect,E3=t.getTextContent,Zo=t.isHiddenSubtree,R3=t.matchAccessibilityRole,j3=t.setFocusIfFocusable,k3=t.setupIntersectionObserver,N3=t.appendChild,O3=t.appendChildToContainer,z3=t.commitTextUpdate,D3=t.commitMount,I3=t.commitUpdate,B3=t.insertBefore,L3=t.insertInContainerBefore,F3=t.removeChild,H3=t.removeChildFromContainer,U_=t.resetTextContent,U3=t.hideInstance,G3=t.hideTextInstance,V3=t.unhideInstance,W3=t.unhideTextInstance,Y3=t.clearContainer,q3=t.cloneInstance,G_=t.createContainerChildSet,V_=t.appendChildToContainerChildSet,X3=t.finalizeContainerChildren,W_=t.replaceContainerChildren,Y_=t.cloneHiddenInstance,q_=t.cloneHiddenTextInstance,Jf=t.isSuspenseInstancePending,tp=t.isSuspenseInstanceFallback,$3=t.getSuspenseInstanceFallbackErrorDetails,Q3=t.registerSuspenseInstanceRetry,K3=t.canHydrateFormStateMarker,Z3=t.isFormStateMarkerMatching,X_=t.getNextHydratableSibling,$_=t.getFirstHydratableChild,J3=t.getFirstHydratableChildWithinContainer,tj=t.getFirstHydratableChildWithinSuspenseInstance,ej=t.canHydrateInstance,nj=t.canHydrateTextInstance,ij=t.canHydrateSuspenseInstance,sj=t.hydrateInstance,rj=t.hydrateTextInstance,aj=t.hydrateSuspenseInstance,oj=t.getNextHydratableInstanceAfterSuspenseInstance,lj=t.commitHydratedContainer,cj=t.commitHydratedSuspenseInstance,uj=t.clearSuspenseBoundary,hj=t.clearSuspenseBoundaryFromContainer,Q_=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var dj=t.validateHydratableInstance,fj=t.validateHydratableTextInstance,$n=t.supportsResources,K_=t.isHostHoistableType,ep=t.getHoistableRoot,Z_=t.getResource,J_=t.acquireResource,t1=t.releaseResource,pj=t.hydrateHoistable,e1=t.mountHoistable,n1=t.unmountHoistable,mj=t.createHoistableInstance,gj=t.prepareToCommitHoistables,xj=t.mayResourceSuspendCommit,i1=t.preloadResource,yj=t.suspendResource,qe=t.supportsSingletons,s1=t.resolveSingletonInstance,vj=t.clearSingleton,_j=t.acquireSingletonInstance,bj=t.releaseSingletonInstance,r1=t.isHostSingletonType,np=[],Ra=-1,ja={},Tn=Math.clz32?Math.clz32:P,wj=Math.log,Sj=Math.LN2,ou=128,lu=4194304,cu=An.unstable_scheduleCallback,ip=An.unstable_cancelCallback,Cj=An.unstable_shouldYield,Mj=An.unstable_requestPaint,yi=An.unstable_now,a1=An.unstable_ImmediatePriority,Pj=An.unstable_UserBlockingPriority,sp=An.unstable_NormalPriority,Aj=An.unstable_IdlePriority,Tj=An.log,Ej=An.unstable_setDisableYieldValue,Jo=null,En=null,Rn=typeof Object.is=="function"?Object.is:J,o1=new WeakMap,ka=[],Na=0,uu=null,hu=0,Qn=[],Kn=0,Or=null,fs=1,ps="",Ue=b(null),tl=b(null),$s=b(null),du=b(null),Je=null,Xe=null,Nt=!1,vi=null,Ii=!1,rp=Error(s(519)),Zn=[],Oa=0,ap=0,fu=null,za=null,op=!1,pu=!1,lp=!1,Da=0,el=null,cp=0,Ia=0,Ba=null,Qs=!1,up=!1,Rj=Object.prototype.hasOwnProperty,nl=Error(s(460)),hp=Error(s(474)),mu={then:function(){}},La=null,Fa=null,il=0,zr=L0(!0),l1=L0(!1),Ha=b(null),gu=b(0),Jn=b(null),Bi=null,ke=b(0),Ks=0,wt=null,Ut=null,Pe=null,xu=!1,Ua=!1,Dr=!1,yu=0,sl=0,Ga=null,jj=0,dp=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Li={readContext:We,use:Vc,useCallback:Se,useContext:Se,useEffect:Se,useImperativeHandle:Se,useLayoutEffect:Se,useInsertionEffect:Se,useMemo:Se,useReducer:Se,useRef:Se,useState:Se,useDebugValue:Se,useDeferredValue:Se,useTransition:Se,useSyncExternalStore:Se,useId:Se};Li.useCacheRefresh=Se,Li.useMemoCache=Se,Li.useHostTransitionStatus=Se,Li.useFormState=Se,Li.useActionState=Se,Li.useOptimistic=Se;var Ir={readContext:We,use:Vc,useCallback:function(o,c){return an().memoizedState=[o,c===void 0?null:c],o},useContext:We,useEffect:ov,useImperativeHandle:function(o,c,d){d=d!=null?d.concat([o]):null,Yc(4194308,4,uv.bind(null,c,o),d)},useLayoutEffect:function(o,c){return Yc(4194308,4,o,c)},useInsertionEffect:function(o,c){Yc(4,2,o,c)},useMemo:function(o,c){var d=an();c=c===void 0?null:c;var m=o();if(Dr){H(!0);try{o()}finally{H(!1)}}return d.memoizedState=[m,c],m},useReducer:function(o,c,d){var m=an();if(d!==void 0){var v=d(c);if(Dr){H(!0);try{d(c)}finally{H(!1)}}}else v=c;return m.memoizedState=m.baseState=v,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:v},m.queue=o,o=o.dispatch=LR.bind(null,wt,o),[m.memoizedState,o]},useRef:function(o){var c=an();return o={current:o},c.memoizedState=o},useState:function(o){o=Jd(o);var c=o.queue,d=vv.bind(null,wt,c);return c.dispatch=d,[o.memoizedState,d]},useDebugValue:nf,useDeferredValue:function(o,c){var d=an();return sf(d,o,c)},useTransition:function(){var o=Jd(!1);return o=mv.bind(null,wt,o.queue,!0,!1),an().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,d){var m=wt,v=an();if(Nt){if(d===void 0)throw Error(s(407));d=d()}else{if(d=c(),Zt===null)throw Error(s(349));(jt&60)!==0||W0(m,c,d)}v.memoizedState=d;var S={value:d,getSnapshot:c};return v.queue=S,ov(q0.bind(null,m,S,o),[o]),m.flags|=2048,wa(9,Y0.bind(null,m,S,d,c),{destroy:void 0},null),d},useId:function(){var o=an(),c=Zt.identifierPrefix;if(Nt){var d=ps,m=fs;d=(m&~(1<<32-Tn(m)-1)).toString(32)+d,c=":"+c+"R"+d,d=yu++,0<d&&(c+="H"+d.toString(32)),c+=":"}else d=jj++,c=":"+c+"r"+d.toString(32)+":";return o.memoizedState=c},useCacheRefresh:function(){return an().memoizedState=BR.bind(null,wt)}};Ir.useMemoCache=Qd,Ir.useHostTransitionStatus=rf,Ir.useFormState=nv,Ir.useActionState=nv,Ir.useOptimistic=function(o){var c=an();c.memoizedState=c.baseState=o;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=d,c=af.bind(null,wt,!0,d),d.dispatch=c,[o,c]};var Zs={readContext:We,use:Vc,useCallback:dv,useContext:We,useEffect:ef,useImperativeHandle:hv,useInsertionEffect:lv,useLayoutEffect:cv,useMemo:fv,useReducer:Wc,useRef:av,useState:function(){return Wc(os)},useDebugValue:nf,useDeferredValue:function(o,c){var d=Me();return pv(d,Ut.memoizedState,o,c)},useTransition:function(){var o=Wc(os)[0],c=Me().memoizedState;return[typeof o=="boolean"?o:Ho(o),c]},useSyncExternalStore:V0,useId:xv};Zs.useCacheRefresh=yv,Zs.useMemoCache=Qd,Zs.useHostTransitionStatus=rf,Zs.useFormState=iv,Zs.useActionState=iv,Zs.useOptimistic=function(o,c){var d=Me();return Q0(d,Ut,o,c)};var Br={readContext:We,use:Vc,useCallback:dv,useContext:We,useEffect:ef,useImperativeHandle:hv,useInsertionEffect:lv,useLayoutEffect:cv,useMemo:fv,useReducer:Zd,useRef:av,useState:function(){return Zd(os)},useDebugValue:nf,useDeferredValue:function(o,c){var d=Me();return Ut===null?sf(d,o,c):pv(d,Ut.memoizedState,o,c)},useTransition:function(){var o=Zd(os)[0],c=Me().memoizedState;return[typeof o=="boolean"?o:Ho(o),c]},useSyncExternalStore:V0,useId:xv};Br.useCacheRefresh=yv,Br.useMemoCache=Qd,Br.useHostTransitionStatus=rf,Br.useFormState=rv,Br.useActionState=rv,Br.useOptimistic=function(o,c){var d=Me();return Ut!==null?Q0(d,Ut,o,c):(d.baseState=o,[o,d.queue.dispatch])};var fp={isMounted:function(o){return(o=o._reactInternals)?p(o)===o:!1},enqueueSetState:function(o,c,d){o=o._reactInternals;var m=Pn(),v=Is(m);v.payload=c,d!=null&&(v.callback=d),c=Bs(o,v,m),c!==null&&(Ze(c,o,m),Io(c,o,m))},enqueueReplaceState:function(o,c,d){o=o._reactInternals;var m=Pn(),v=Is(m);v.tag=1,v.payload=c,d!=null&&(v.callback=d),c=Bs(o,v,m),c!==null&&(Ze(c,o,m),Io(c,o,m))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var d=Pn(),m=Is(d);m.tag=2,c!=null&&(m.callback=c),c=Bs(o,m,d),c!==null&&(Ze(c,o,d),Io(c,o,d))}},c1=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},u1=Error(s(461)),ze=!1,pp={dehydrated:null,treeContext:null,retryLane:0},vu=b(null),Lr=null,ms=null,kj=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(d,m){o.push(m)}};this.abort=function(){c.aborted=!0,o.forEach(function(d){return d()})}},Nj=An.unstable_scheduleCallback,Oj=An.unstable_NormalPriority,me={$$typeof:Ys,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},h1=yt.S;yt.S=function(o,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&NR(o,c),h1!==null&&h1(o,c)};var Fr=b(null),gs=!1,ge=!1,mp=!1,d1=typeof WeakSet=="function"?WeakSet:Set,De=null,f1=!1,Ae=null,jn=!1,_i=null,Va=8192,zj={getCacheForType:function(o){var c=We(me),d=c.data.get(o);return d===void 0&&(d=o(),c.data.set(o,d)),d}},_u=0,bu=1,wu=2,Su=3,Cu=4;if(typeof Symbol=="function"&&Symbol.for){var rl=Symbol.for;_u=rl("selector.component"),bu=rl("selector.has_pseudo_class"),wu=rl("selector.role"),Su=rl("selector.test_id"),Cu=rl("selector.text")}var Dj=typeof WeakMap=="function"?WeakMap:Map,Gt=0,Zt=null,At=null,jt=0,Jt=0,kn=null,xs=!1,Wa=!1,gp=!1,ys=0,xe=0,Js=0,Hr=0,xp=0,ti=0,Ya=0,al=null,Fi=null,yp=!1,vp=0,ol=1/0,Mu=null,tr=null,Pu=!1,Ur=null,ll=0,_p=0,bp=null,cl=0,wp=null;return Pt.attemptContinuousHydration=function(o){if(o.tag===13){var c=Oe(o,67108864);c!==null&&Ze(c,o,67108864),Uf(o,67108864)}},Pt.attemptHydrationAtCurrentPriority=function(o){if(o.tag===13){var c=Pn(),d=Oe(o,c);d!==null&&Ze(d,o,c),Uf(o,c)}},Pt.attemptSynchronousHydration=function(o){switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var c=T(o.pendingLanes);if(c!==0){for(o.pendingLanes|=2,o.entangledLanes|=2;c;){var d=1<<31-Tn(c);o.entanglements[1]|=d,c&=~d}Di(o),(Gt&6)===0&&(ol=yi()+500,ba(0))}}break;case 13:c=Oe(o,2),c!==null&&Ze(c,o,2),d_(),Uf(o,2)}},Pt.batchedUpdates=function(o,c){return o(c)},Pt.createComponentSelector=function(o){return{$$typeof:_u,value:o}},Pt.createContainer=function(o,c,d,m,v,S,j,z,F,$){return P_(o,c,!1,null,d,m,S,j,z,F,$,null)},Pt.createHasPseudoClassSelector=function(o){return{$$typeof:bu,value:o}},Pt.createHydrationContainer=function(o,c,d,m,v,S,j,z,F,$,it,st,rt){return o=P_(d,m,!0,o,v,S,z,F,$,it,st,rt),o.context=A_(null),d=o.current,m=Pn(),v=Is(m),v.callback=c??null,Bs(d,v,m),o.current.lanes=m,I(o,m),Di(o),o},Pt.createPortal=function(o,c,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Aa,key:m==null?null:""+m,children:o,containerInfo:c,implementation:d}},Pt.createRoleSelector=function(o){return{$$typeof:wu,value:o}},Pt.createTestNameSelector=function(o){return{$$typeof:Su,value:o}},Pt.createTextSelector=function(o){return{$$typeof:Cu,value:o}},Pt.defaultOnCaughtError=function(o){console.error(o)},Pt.defaultOnRecoverableError=function(o){c1(o)},Pt.defaultOnUncaughtError=function(o){c1(o)},Pt.deferredUpdates=function(o){var c=yt.T,d=kr();try{return ln(32),yt.T=null,o()}finally{ln(d),yt.T=c}},Pt.discreteUpdates=function(o,c,d,m,v){var S=yt.T,j=kr();try{return ln(2),yt.T=null,o(c,d,m,v)}finally{ln(j),yt.T=S,Gt===0&&(ol=yi()+500)}},Pt.findAllNodes=Nf,Pt.findBoundingRects=function(o,c){if(!Ko)throw Error(s(363));c=Nf(o,c),o=[];for(var d=0;d<c.length;d++)o.push(T3(c[d]));for(c=o.length-1;0<c;c--){d=o[c];for(var m=d.x,v=m+d.width,S=d.y,j=S+d.height,z=c-1;0<=z;z--)if(c!==z){var F=o[z],$=F.x,it=$+F.width,st=F.y,rt=st+F.height;if(m>=$&&S>=st&&v<=it&&j<=rt){o.splice(c,1);break}else if(m!==$||d.width!==F.width||rt<S||st>j){if(!(S!==st||d.height!==F.height||it<m||$>v)){$>m&&(F.width+=$-m,F.x=m),it<v&&(F.width=v-$),o.splice(c,1);break}}else{st>S&&(F.height+=st-S,F.y=S),rt<j&&(F.height=j-st),o.splice(c,1);break}}}return o},Pt.findHostInstance=T_,Pt.findHostInstanceWithNoPortals=function(o){return o=x(o),o=o!==null?_(o):null,o===null?null:Qo(o.stateNode)},Pt.findHostInstanceWithWarning=function(o){return T_(o)},Pt.flushPassiveEffects=Rr,Pt.flushSyncFromReconciler=function(o){var c=Gt;Gt|=1;var d=yt.T,m=kr();try{if(ln(2),yt.T=null,o)return o()}finally{ln(m),yt.T=d,Gt=c,(Gt&6)===0&&ba(0)}},Pt.flushSyncWork=d_,Pt.focusWithin=function(o,c){if(!Ko)throw Error(s(363));for(o=Rf(o),c=l_(o,c),c=Array.from(c),o=0;o<c.length;){var d=c[o++],m=d.tag;if(!Zo(d)){if((m===5||m===26||m===27)&&j3(d.stateNode))return!0;for(d=d.child;d!==null;)c.push(d),d=d.sibling}}return!1},Pt.getFindAllNodesFailureDescription=function(o,c){if(!Ko)throw Error(s(363));var d=0,m=[];o=[Rf(o),0];for(var v=0;v<o.length;){var S=o[v++],j=S.tag,z=o[v++],F=c[z];if((j!==5&&j!==26&&j!==27||!Zo(S))&&(jf(S,F)&&(m.push(kf(F)),z++,z>d&&(d=z)),z<c.length))for(S=S.child;S!==null;)o.push(S,z),S=S.sibling}if(d<c.length){for(o=[];d<c.length;d++)o.push(kf(c[d]));return`findAllNodes was able to match part of the selector:
  `+(m.join(" > ")+`

No matching component was found for:
  `)+o.join(" > ")}return null},Pt.getPublicRootInstance=function(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 27:case 5:return Qo(o.child.stateNode);default:return o.child.stateNode}},Pt.injectIntoDevTools=function(){var o={bundleType:0,version:l3,rendererPackageName:c3,currentDispatcherRef:yt,findFiberByHostInstance:L_,reconcilerVersion:"19.0.0"};if(D_!==null&&(o.rendererConfig=D_),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")o=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(c.isDisabled||!c.supportsFiber)o=!0;else{try{Jo=c.inject(o),En=c}catch{}o=!!c.checkDCE}}return o},Pt.isAlreadyRendering=function(){return!1},Pt.observeVisibleRects=function(o,c,d,m){if(!Ko)throw Error(s(363));o=Nf(o,c);var v=k3(o,d,m).disconnect;return{disconnect:function(){v()}}},Pt.shouldError=function(){return null},Pt.shouldSuspend=function(){return!1},Pt.startHostTransition=function(o,c,d,m){if(o.tag!==5)throw Error(s(476));var v=gv(o).queue;mv(o,v,c,Ea,d===null?i:function(){var S=gv(o).next.queue;return Uo(o,S,{},Pn()),d(m)})},Pt.updateContainer=function(o,c,d,m){var v=c.current,S=Pn();return E_(v,S,o,c,d,m),S},Pt.updateContainerSync=function(o,c,d,m){return c.tag===0&&Rr(),E_(c.current,2,o,c,d,m),2},Pt},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(sm)),sm.exports}var Yb;function kB(){return Yb||(Yb=1,im.exports=jB()),im.exports}var NB=kB();const OB=Eo(NB),zB=OB;function DB(n,t,e,i){throw new Error("Text instances are not yet supported. Please use a `<text>` component.")}function IB(){}function BB(){return!1}const iT={};function LB(n){return n??iT}function FB(){return yr.currentUpdatePriority}function HB(){return null}function UB(n){throw new Error("Not yet implemented.")}function GB(n){return n}function VB(){return iT}function WB(n){n instanceof pe?n.visible=!1:n instanceof xa&&(n.enabled=!1)}function YB(n){throw new Error("Text instances are not yet supported. Please use a `<text>` component.")}function sT(n){if(n instanceof xa){const t=n.__pixireact.parent;if(t){const e=t.__pixireact.filters.indexOf(n);t.__pixireact.filters.splice(e,1),t.filters=t.__pixireact.filters}n.__pixireact.parent=null}}function Oy(n,t,...e){}function qb(n,t,e){if(Oy(),t instanceof pe){const i=t,s=t,r=e;i.parent===n&&n.removeChild(s);const a=n.getChildIndex(r);n.addChildAt(s,a)}else if(t instanceof xa){const r=t.__pixireact.filters.indexOf(e);sT(t),KA(n,t,r)}}function qB(){return!1}function XB(){return!0}function $B(){return null}function QB(){}function KB(){}function Xb(n,t){t instanceof xa&&sT(t),t.destroy()}function ZB(n){}function JB(){}function tL(){}function eL(){return-1.1}function nL(){return null}function iL(){if(yr.currentUpdatePriority)return yr.currentUpdatePriority;const n=typeof self<"u"&&self||typeof window<"u"&&window;if(!n)return Ja.DefaultEventPriority;switch(n.event?.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Ja.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Ja.ContinuousEventPriority;default:return Ja.DefaultEventPriority}}function sL(n){yr.currentUpdatePriority=n}function rL(){return!1}function aL(){return!1}function oL(){}function lL(){}function cL(){}function uL(n){n instanceof pe?n.visible=!0:n instanceof xa&&(n.enabled=!0)}function hL(n){throw new Error("Text instances are not yet supported. Please use a `<text>` component.")}function dL(){return null}const fL={isPrimaryRenderer:!1,noTimeout:-1,NotPendingTransition:null,supportsHydration:!1,supportsMutation:!0,supportsPersistence:!1,warnsIfNotActing:!1,afterActiveInstanceBlur:uB,appendChild:nm,appendChildToContainer:nm,appendInitialChild:nm,beforeActiveInstanceBlur:hB,cancelTimeout:clearTimeout,clearContainer:dB,commitUpdate:SB,createInstance:TB,createTextInstance:DB,hideTextInstance:YB,unhideTextInstance:hL,detachDeletedInstance:IB,finalizeInitialChildren:BB,getChildHostContext:LB,getCurrentUpdatePriority:FB,getInstanceFromNode:HB,getInstanceFromScope:UB,getPublicInstance:GB,getRootHostContext:VB,hideInstance:WB,insertBefore:qb,insertInContainerBefore:qb,maySuspendCommit:qB,preloadInstance:XB,prepareForCommit:$B,preparePortalMount:QB,prepareScopeUpdate:KB,removeChild:Xb,removeChildFromContainer:Xb,requestPostPaintCallback:ZB,resetAfterCommit:JB,resetFormInstance:tL,resolveEventTimeStamp:eL,resolveEventType:nL,resolveUpdatePriority:iL,scheduleTimeout:setTimeout,shouldAttemptEagerTransition:rL,setCurrentUpdatePriority:sL,shouldSetTextContent:aL,startSuspendingCommit:oL,suspendInstance:lL,trackSchedulerEvent:cL,unhideInstance:uL,waitForCommitToBeReady:dL},Ch=zB(fL);Ch.injectIntoDevTools({bundleType:0,rendererPackageName:"@pixi/react",version:cB.version});const yo=new Map;function pL(n,t={}){let e=yo.get(n),i=e?.applicationState??{isInitialised:!1,isInitialising:!1};const s=e?.internalState??{};e||(i.app=new Sy,s.rootContainer=QA(i.app.stage));const r=e?.fiber??Ch.createContainer(s.rootContainer,Ja.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null);if(!e){let a;n instanceof HTMLCanvasElement&&(a=n),a||(a=document.createElement("canvas"),n.innerHTML="",n.appendChild(a)),s.canvas=a,e={applicationState:i,fiber:r,internalState:s,render:async(u,h)=>(!i.app.renderer&&!i.isInitialised&&!i.isInitialising&&(i.isInitialising=!0,await i.app.init({...h,canvas:a}),i.isInitialising=!1,i.isInitialised=!0,i={...i},t.onInit?.(i.app)),Object.entries(h).forEach(([f,p])=>{const g=f;$A(h,g)||(i.app[g]=p)}),Ch.updateContainer(y.jsx(oB,{value:i,children:u}),r,null,()=>{}),i.app)},yo.set(a,e)}return e}function rT(n){yr.unmountQueue.delete(n);const t=n.fiber;t&&Ch.updateContainer(null,t,null,()=>{n.applicationState.app&&n.applicationState.app.destroy(),yo.delete(n.internalState.canvas)})}function mL(){for(const n of yr.unmountQueue)rT(n)}function gL(n){const t=yo.get(n);t&&(t.applicationState.isInitialised?rT(t):yr.unmountQueue.add(t))}function xL(n){const t=yo.get(n);t&&yr.unmountQueue.delete(t)}const Rl=typeof window<"u"&&(window.document?.createElement||window.navigator?.product==="ReactNative")?A.useLayoutEffect:A.useEffect,yL={...xr.defaultTextStyle},vL=A.forwardRef(function(t,e){const{children:i,className:s,defaultTextStyle:r,extensions:a,onInit:l,resizeTo:u,...h}=t,f=oz(),p=A.useRef(null),g=A.useRef(null),x=A.useRef(new Set);A.useImperativeHandle(e,()=>({getApplication(){return p.current},getCanvas(){return g.current}}));const w=A.useCallback(()=>{const b=p.current;b&&(u?"current"in u?u.current instanceof HTMLElement&&(b.resizeTo=u.current):b.resizeTo=u:b.resizeTo=void 0)},[u]),_=A.useCallback(b=>{mL(),p.current=b,w(),l?.(b)},[l]);return Rl(()=>{if(a){const b=[...a],C=x.current;for(const M of C.values()){const P=b.indexOf(M);P===-1&&(Ne.remove(M),C.delete(M)),b.splice(P,1)}for(const M of b)Ne.add(M),C.add(M)}},[a]),Rl(()=>{const b=g.current;if(b){let C=yo.get(b);C||(C=pL(b,{onInit:_})),C.render(y.jsx(f,{children:i}),h)}},[h,i,_,u]),Rl(()=>{w()},[u]),Rl(()=>{r?Object.assign(xr.defaultTextStyle,r):Object.assign(xr.defaultTextStyle,yL)},[r]),A.useEffect(()=>{const b=g.current;if(b)return xL(b),()=>{gL(b)}},[]),y.jsx("canvas",{ref:g,className:s})}),md=A.forwardRef(function(t,e){return y.jsx(bP,{children:y.jsx(vL,{ref:e,...t})})});function rn(n){Object.assign(sx,n)}function ya(){const n=A.useContext(Ny);return Oy(n.app instanceof Sy,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider"),n}function gd(n){const{app:t,isInitialised:e}=ya();let i,s,r=!0,a;typeof n=="function"?i=n:(i=n.callback,s=n.context,r=n.isEnabled??!0,a=n.priority),Oy(),Rl(()=>{if(e){const l=t?.ticker,u=r,h=s,f=i;return r&&l&&l.add(i,s,a),()=>{u&&l?.remove(f,h)}}},[t?.ticker,i,s,r,e,a])}var _L=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bL(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var aT={exports:{}};(function(n,t){(function(){var e,i;i=function(s){return n.exports=s},e={linear:function(s,r,a,l){return a*s/l+r},easeInQuad:function(s,r,a,l){return a*(s/=l)*s+r},easeOutQuad:function(s,r,a,l){return-a*(s/=l)*(s-2)+r},easeInOutQuad:function(s,r,a,l){return(s/=l/2)<1?a/2*s*s+r:-a/2*(--s*(s-2)-1)+r},easeInCubic:function(s,r,a,l){return a*(s/=l)*s*s+r},easeOutCubic:function(s,r,a,l){return a*((s=s/l-1)*s*s+1)+r},easeInOutCubic:function(s,r,a,l){return(s/=l/2)<1?a/2*s*s*s+r:a/2*((s-=2)*s*s+2)+r},easeInQuart:function(s,r,a,l){return a*(s/=l)*s*s*s+r},easeOutQuart:function(s,r,a,l){return-a*((s=s/l-1)*s*s*s-1)+r},easeInOutQuart:function(s,r,a,l){return(s/=l/2)<1?a/2*s*s*s*s+r:-a/2*((s-=2)*s*s*s-2)+r},easeInQuint:function(s,r,a,l){return a*(s/=l)*s*s*s*s+r},easeOutQuint:function(s,r,a,l){return a*((s=s/l-1)*s*s*s*s+1)+r},easeInOutQuint:function(s,r,a,l){return(s/=l/2)<1?a/2*s*s*s*s*s+r:a/2*((s-=2)*s*s*s*s+2)+r},easeInSine:function(s,r,a,l){return-a*Math.cos(s/l*(Math.PI/2))+a+r},easeOutSine:function(s,r,a,l){return a*Math.sin(s/l*(Math.PI/2))+r},easeInOutSine:function(s,r,a,l){return-a/2*(Math.cos(Math.PI*s/l)-1)+r},easeInExpo:function(s,r,a,l){return s===0?r:a*Math.pow(2,10*(s/l-1))+r},easeOutExpo:function(s,r,a,l){return s===l?r+a:a*(-Math.pow(2,-10*s/l)+1)+r},easeInOutExpo:function(s,r,a,l){return(s/=l/2)<1?a/2*Math.pow(2,10*(s-1))+r:a/2*(-Math.pow(2,-10*--s)+2)+r},easeInCirc:function(s,r,a,l){return-a*(Math.sqrt(1-(s/=l)*s)-1)+r},easeOutCirc:function(s,r,a,l){return a*Math.sqrt(1-(s=s/l-1)*s)+r},easeInOutCirc:function(s,r,a,l){return(s/=l/2)<1?-a/2*(Math.sqrt(1-s*s)-1)+r:a/2*(Math.sqrt(1-(s-=2)*s)+1)+r},easeInElastic:function(s,r,a,l){var u,h,f;return f=1.70158,h=0,u=a,s===0||(s/=l),h||(h=l*.3),u<Math.abs(a)?(u=a,f=h/4):f=h/(2*Math.PI)*Math.asin(a/u),-(u*Math.pow(2,10*(s-=1))*Math.sin((s*l-f)*(2*Math.PI)/h))+r},easeOutElastic:function(s,r,a,l){var u,h,f;return f=1.70158,h=0,u=a,s===0||(s/=l),h||(h=l*.3),u<Math.abs(a)?(u=a,f=h/4):f=h/(2*Math.PI)*Math.asin(a/u),u*Math.pow(2,-10*s)*Math.sin((s*l-f)*(2*Math.PI)/h)+a+r},easeInOutElastic:function(s,r,a,l){var u,h,f;return f=1.70158,h=0,u=a,s===0||(s/=l/2),h||(h=l*(.3*1.5)),u<Math.abs(a)?(u=a,f=h/4):f=h/(2*Math.PI)*Math.asin(a/u),s<1?-.5*(u*Math.pow(2,10*(s-=1))*Math.sin((s*l-f)*(2*Math.PI)/h))+r:u*Math.pow(2,-10*(s-=1))*Math.sin((s*l-f)*(2*Math.PI)/h)*.5+a+r},easeInBack:function(s,r,a,l,u){return u===void 0&&(u=1.70158),a*(s/=l)*s*((u+1)*s-u)+r},easeOutBack:function(s,r,a,l,u){return u===void 0&&(u=1.70158),a*((s=s/l-1)*s*((u+1)*s+u)+1)+r},easeInOutBack:function(s,r,a,l,u){return u===void 0&&(u=1.70158),(s/=l/2)<1?a/2*(s*s*(((u*=1.525)+1)*s-u))+r:a/2*((s-=2)*s*(((u*=1.525)+1)*s+u)+2)+r},easeInBounce:function(s,r,a,l){var u;return u=e.easeOutBounce(l-s,0,a,l),a-u+r},easeOutBounce:function(s,r,a,l){return(s/=l)<1/2.75?a*(7.5625*s*s)+r:s<2/2.75?a*(7.5625*(s-=1.5/2.75)*s+.75)+r:s<2.5/2.75?a*(7.5625*(s-=2.25/2.75)*s+.9375)+r:a*(7.5625*(s-=2.625/2.75)*s+.984375)+r},easeInOutBounce:function(s,r,a,l){var u;return s<l/2?(u=e.easeInBounce(s*2,0,a,l),u*.5+r):(u=e.easeOutBounce(s*2-l,0,a,l),u*.5+a*.5+r)}},i(e)}).call(_L)})(aT);var wL=aT.exports;const $b=bL(wL);function xd(n,t){if(n){if(typeof n=="function")return n;if(typeof n=="string")return $b[n]}else return $b[t]}class SL{constructor(t){this.viewport=t,this.touches=[],this.addListeners()}addListeners(){this.viewport.eventMode="static",this.viewport.forceHitArea||(this.viewport.hitArea=new Yt(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.options.allowPreserveDragOutside?this.viewport.on("globalpointermove",this.move,this):this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.options.allowPreserveDragOutside||this.viewport.on("pointerleave",this.up,this),this.wheelFunction=t=>this.handleWheel(t),this.viewport.options.events.domElement.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}destroy(){var t;(t=this.viewport.options.events.domElement)==null||t.removeEventListener("wheel",this.wheelFunction)}down(t){if(!(this.viewport.pause||!this.viewport.visible)){if(t.pointerType==="mouse"?this.isMouseDown=!0:this.get(t.pointerId)||this.touches.push({id:t.pointerId,last:null}),this.count()===1){this.last=t.global.clone();const e=this.viewport.plugins.get("decelerate",!0),i=this.viewport.plugins.get("bounce",!0);(!e||!e.isActive())&&(!i||!i.isActive())?this.clickedAvailable=!0:this.clickedAvailable=!1}else this.clickedAvailable=!1;this.viewport.plugins.down(t)&&this.viewport.options.stopPropagation&&t.stopPropagation()}}clear(){this.isMouseDown=!1,this.touches=[],this.last=null}checkThreshold(t){return Math.abs(t)>=this.viewport.threshold}move(t){if(this.viewport.pause||!this.viewport.visible)return;const e=this.viewport.plugins.move(t);if(this.clickedAvailable&&this.last){const i=t.global.x-this.last.x,s=t.global.y-this.last.y;(this.checkThreshold(i)||this.checkThreshold(s))&&(this.clickedAvailable=!1)}e&&this.viewport.options.stopPropagation&&t.stopPropagation()}up(t){if(this.viewport.pause||!this.viewport.visible)return;t.pointerType==="mouse"&&(this.isMouseDown=!1),t.pointerType!=="mouse"&&this.remove(t.pointerId);const e=this.viewport.plugins.up(t);this.clickedAvailable&&this.count()===0&&this.last&&(this.viewport.emit("clicked",{event:t,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this.viewport}),this.clickedAvailable=!1),e&&this.viewport.options.stopPropagation&&t.stopPropagation()}getPointerPosition(t){const e=new Dt;return this.viewport.options.events.mapPositionToPoint(e,t.clientX,t.clientY),e}handleWheel(t){if(this.viewport.pause||!this.viewport.visible)return;const e=this.viewport.toLocal(this.getPointerPosition(t));this.viewport.left<=e.x&&e.x<=this.viewport.right&&this.viewport.top<=e.y&&e.y<=this.viewport.bottom&&this.viewport.plugins.wheel(t)&&!this.viewport.options.passiveWheel&&t.preventDefault()}pause(){this.touches=[],this.isMouseDown=!1}get(t){for(const e of this.touches)if(e.id===t)return e;return null}remove(t){for(let e=0;e<this.touches.length;e++)if(this.touches[e].id===t){this.touches.splice(e,1);return}}count(){return(this.isMouseDown?1:0)+this.touches.length}}const vl=["drag","pinch","wheel","follow","mouse-edges","decelerate","animate","bounce","snap-zoom","clamp-zoom","snap","clamp"];class CL{constructor(t){this.viewport=t,this.list=[],this.plugins={}}add(t,e,i=vl.length){const s=this.plugins[t];s&&s.destroy(),this.plugins[t]=e;const r=vl.indexOf(t);r!==-1&&vl.splice(r,1),vl.splice(i,0,t),this.sort()}get(t,e){var i;return e&&(i=this.plugins[t])!=null&&i.paused?null:this.plugins[t]}update(t){for(const e of this.list)e.update(t)}resize(){for(const t of this.list)t.resize()}reset(){for(const t of this.list)t.reset()}removeAll(){this.list.forEach(t=>{t.destroy()}),this.plugins={},this.sort()}remove(t){var e;this.plugins[t]&&((e=this.plugins[t])==null||e.destroy(),delete this.plugins[t],this.viewport.emit("plugin-remove",t),this.sort())}pause(t){var e;(e=this.plugins[t])==null||e.pause()}resume(t){var e;(e=this.plugins[t])==null||e.resume()}sort(){this.list=[];for(const t of vl)this.plugins[t]&&this.list.push(this.plugins[t])}down(t){let e=!1;for(const i of this.list)i.down(t)&&(e=!0);return e}move(t){let e=!1;for(const i of this.viewport.plugins.list)i.move(t)&&(e=!0);return e}up(t){let e=!1;for(const i of this.list)i.up(t)&&(e=!0);return e}wheel(t){let e=!1;for(const i of this.list)i.wheel(t)&&(e=!0);return e}}class mi{constructor(t){this.parent=t,this.paused=!1}destroy(){}down(t){return!1}move(t){return!1}up(t){return!1}wheel(t){return!1}update(t){}resize(){}reset(){}pause(){this.paused=!0}resume(){this.paused=!1}}const ML={removeOnInterrupt:!1,ease:"linear",time:1e3};let PL=class extends mi{constructor(t,e={}){super(t),this.startWidth=null,this.startHeight=null,this.deltaWidth=null,this.deltaHeight=null,this.width=null,this.height=null,this.time=0,this.options=Object.assign({},ML,e),this.options.ease=xd(this.options.ease),this.setupPosition(),this.setupZoom(),this.time=0}setupPosition(){typeof this.options.position<"u"?(this.startX=this.parent.center.x,this.startY=this.parent.center.y,this.deltaX=this.options.position.x-this.parent.center.x,this.deltaY=this.options.position.y-this.parent.center.y,this.keepCenter=!1):this.keepCenter=!0}setupZoom(){this.width=null,this.height=null,typeof this.options.scale<"u"?this.width=this.parent.screenWidth/this.options.scale:typeof this.options.scaleX<"u"||typeof this.options.scaleY<"u"?(typeof this.options.scaleX<"u"&&(this.width=this.parent.screenWidth/this.options.scaleX),typeof this.options.scaleY<"u"&&(this.height=this.parent.screenHeight/this.options.scaleY)):(typeof this.options.width<"u"&&(this.width=this.options.width),typeof this.options.height<"u"&&(this.height=this.options.height)),this.width!==null&&(this.startWidth=this.parent.screenWidthInWorldPixels,this.deltaWidth=this.width-this.startWidth),this.height!==null&&(this.startHeight=this.parent.screenHeightInWorldPixels,this.deltaHeight=this.height-this.startHeight)}down(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("animate"),!1}complete(){this.parent.plugins.remove("animate"),this.width!==null&&this.parent.fitWidth(this.width,this.keepCenter,this.height===null),this.height!==null&&this.parent.fitHeight(this.height,this.keepCenter,this.width===null),!this.keepCenter&&this.options.position&&this.parent.moveCenter(this.options.position),this.parent.emit("animate-end",this.parent),this.options.callbackOnComplete&&this.options.callbackOnComplete(this.parent)}update(t){if(this.paused)return;this.time+=t;const e=new Dt(this.parent.scale.x,this.parent.scale.y);if(this.time>=this.options.time){const i=this.parent.width,s=this.parent.height;this.complete(),(i!==this.parent.width||s!==this.parent.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:e,type:"animate"})}else{const i=this.options.ease(this.time,0,1,this.options.time);if(this.width!==null){const s=this.startWidth,r=this.deltaWidth;this.parent.fitWidth(s+r*i,this.keepCenter,this.height===null)}if(this.height!==null){const s=this.startHeight,r=this.deltaHeight;this.parent.fitHeight(s+r*i,this.keepCenter,this.width===null)}if(this.width===null?this.parent.scale.x=this.parent.scale.y:this.height===null&&(this.parent.scale.y=this.parent.scale.x),!this.keepCenter){const s=this.startX,r=this.startY,a=this.deltaX,l=this.deltaY,u=new Dt(this.parent.x,this.parent.y);this.parent.moveCenter(s+a*i,r+l*i),this.parent.emit("moved",{viewport:this.parent,original:u,type:"animate"})}(this.width||this.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:e,type:"animate"})}}};const AL={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null};let TL=class extends mi{constructor(t,e={}){super(t),this.options=Object.assign({},AL,e),this.ease=xd(this.options.ease,"easeInOutSine"),this.options.sides?this.options.sides==="all"?this.top=this.bottom=this.left=this.right=!0:this.options.sides==="horizontal"?(this.right=this.left=!0,this.top=this.bottom=!1):this.options.sides==="vertical"?(this.left=this.right=!1,this.top=this.bottom=!0):(this.top=this.options.sides.indexOf("top")!==-1,this.bottom=this.options.sides.indexOf("bottom")!==-1,this.left=this.options.sides.indexOf("left")!==-1,this.right=this.options.sides.indexOf("right")!==-1):this.left=this.top=this.right=this.bottom=!1;const i=this.options.underflow.toLowerCase();i==="center"?(this.underflowX=0,this.underflowY=0):(this.underflowX=i.indexOf("left")!==-1?-1:i.indexOf("right")!==-1?1:0,this.underflowY=i.indexOf("top")!==-1?-1:i.indexOf("bottom")!==-1?1:0),this.reset()}isActive(){return this.toX!==null||this.toY!==null}down(){return this.toX=this.toY=null,!1}up(){return this.bounce(),!1}update(t){if(!this.paused){if(this.bounce(),this.toX){const e=this.toX;e.time+=t,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),e.time>=this.options.time?(this.parent.x=e.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(e.time,e.start,e.delta,this.options.time)}if(this.toY){const e=this.toY;e.time+=t,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),e.time>=this.options.time?(this.parent.y=e.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(e.time,e.start,e.delta,this.options.time)}}}calcUnderflowX(){let t;switch(this.underflowX){case-1:t=0;break;case 1:t=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:t=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return t}calcUnderflowY(){let t;switch(this.underflowY){case-1:t=0;break;case 1:t=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:t=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return t}oob(){const t=this.options.bounceBox;if(t){const e=typeof t.x>"u"?0:t.x,i=typeof t.y>"u"?0:t.y,s=typeof t.width>"u"?this.parent.worldWidth:t.width,r=typeof t.height>"u"?this.parent.worldHeight:t.height;return{left:this.parent.left<e,right:this.parent.right>s,top:this.parent.top<i,bottom:this.parent.bottom>r,topLeft:new Dt(e*this.parent.scale.x,i*this.parent.scale.y),bottomRight:new Dt(s*this.parent.scale.x-this.parent.screenWidth,r*this.parent.scale.y-this.parent.screenHeight)}}return{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new Dt(0,0),bottomRight:new Dt(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}bounce(){var t,e;if(this.paused)return;let i,s=this.parent.plugins.get("decelerate",!0);s&&(s.x||s.y)&&(s.x&&s.percentChangeX===((t=s.options)==null?void 0:t.friction)||s.y&&s.percentChangeY===((e=s.options)==null?void 0:e.friction))&&(i=this.oob(),(i.left&&this.left||i.right&&this.right)&&(s.percentChangeX=this.options.friction),(i.top&&this.top||i.bottom&&this.bottom)&&(s.percentChangeY=this.options.friction));const r=this.parent.plugins.get("drag",!0)||{},a=this.parent.plugins.get("pinch",!0)||{};if(s=s||{},!(r!=null&&r.active)&&!(a!=null&&a.active)&&(!this.toX||!this.toY)&&(!s.x||!s.y)){i=i||this.oob();const l=i.topLeft,u=i.bottomRight;if(!this.toX&&!s.x){let h=null;i.left&&this.left?h=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-l.x:i.right&&this.right&&(h=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-u.x),h!==null&&this.parent.x!==h&&(this.toX={time:0,start:this.parent.x,delta:h-this.parent.x,end:h},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!s.y){let h=null;i.top&&this.top?h=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-l.y:i.bottom&&this.bottom&&(h=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-u.y),h!==null&&this.parent.y!==h&&(this.toY={time:0,start:this.parent.y,delta:h-this.parent.y,end:h},this.parent.emit("bounce-y-start",this.parent))}}}reset(){this.toX=this.toY=null,this.bounce()}};const EL={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"};class RL extends mi{constructor(t,e={}){super(t),this.options=Object.assign({},EL,e),this.options.direction&&(this.options.left=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.right=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.top=this.options.direction==="y"||this.options.direction==="all"?!0:null,this.options.bottom=this.options.direction==="y"||this.options.direction==="all"?!0:null),this.parseUnderflow(),this.last={x:null,y:null,scaleX:null,scaleY:null},this.update()}parseUnderflow(){const t=this.options.underflow.toLowerCase();t==="none"?this.noUnderflow=!0:t==="center"?(this.underflowX=this.underflowY=0,this.noUnderflow=!1):(this.underflowX=t.indexOf("left")!==-1?-1:t.indexOf("right")!==-1?1:0,this.underflowY=t.indexOf("top")!==-1?-1:t.indexOf("bottom")!==-1?1:0,this.noUnderflow=!1)}move(){return this.update(),!1}update(){if(this.paused||this.parent.x===this.last.x&&this.parent.y===this.last.y&&this.parent.scale.x===this.last.scaleX&&this.parent.scale.y===this.last.scaleY)return;const t=new Dt(this.parent.x,this.parent.y),e=this.parent.plugins.decelerate||{};if(this.options.left!==null||this.options.right!==null){let i=!1;if(!this.noUnderflow&&this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x!==0&&(this.parent.x=0,i=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,i=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,i=!0)}else this.options.left!==null&&this.parent.left<(this.options.left===!0?0:this.options.left)&&(this.parent.x=-(this.options.left===!0?0:this.options.left)*this.parent.scale.x,e.x=0,i=!0),this.options.right!==null&&this.parent.right>(this.options.right===!0?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(this.options.right===!0?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,e.x=0,i=!0);i&&this.parent.emit("moved",{viewport:this.parent,original:t,type:"clamp-x"})}if(this.options.top!==null||this.options.bottom!==null){let i=!1;if(!this.noUnderflow&&this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y!==0&&(this.parent.y=0,i=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,i=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,i=!0)}else this.options.top!==null&&this.parent.top<(this.options.top===!0?0:this.options.top)&&(this.parent.y=-(this.options.top===!0?0:this.options.top)*this.parent.scale.y,e.y=0,i=!0),this.options.bottom!==null&&this.parent.bottom>(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,e.y=0,i=!0);i&&this.parent.emit("moved",{viewport:this.parent,original:t,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}reset(){this.update()}}const jL={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null};class kL extends mi{constructor(t,e={}){super(t),this.options=Object.assign({},jL,e),this.clamp()}resize(){this.clamp()}clamp(){if(!this.paused){if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){let t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight;if(this.options.minWidth!==null&&t<this.options.minWidth){const i=this.parent.scale.x;this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/i,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxWidth!==null&&t>this.options.maxWidth){const i=this.parent.scale.x;this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/i,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.minHeight!==null&&e<this.options.minHeight){const i=this.parent.scale.y;this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/i,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxHeight!==null&&e>this.options.maxHeight){const i=this.parent.scale.y;this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/i,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}}else if(this.options.minScale||this.options.maxScale){const t={x:null,y:null},e={x:null,y:null};if(typeof this.options.minScale=="number")t.x=this.options.minScale,t.y=this.options.minScale;else if(this.options.minScale!==null){const r=this.options.minScale;t.x=typeof r.x>"u"?null:r.x,t.y=typeof r.y>"u"?null:r.y}if(typeof this.options.maxScale=="number")e.x=this.options.maxScale,e.y=this.options.maxScale;else if(this.options.maxScale!==null){const r=this.options.maxScale;e.x=typeof r.x>"u"?null:r.x,e.y=typeof r.y>"u"?null:r.y}let i=this.parent.scale.x,s=this.parent.scale.y;t.x!==null&&i<t.x&&(i=t.x),e.x!==null&&i>e.x&&(i=e.x),t.y!==null&&s<t.y&&(s=t.y),e.y!==null&&s>e.y&&(s=e.y),(i!==this.parent.scale.x||s!==this.parent.scale.y)&&(this.parent.scale.set(i,s),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}}reset(){this.clamp()}}const NL={friction:.98,bounce:.8,minSpeed:.01},nr=16;let OL=class extends mi{constructor(t,e={}){super(t),this.options=Object.assign({},NL,e),this.saved=[],this.timeSinceRelease=0,this.reset(),this.parent.on("moved",i=>this.handleMoved(i))}down(){return this.saved=[],this.x=this.y=null,!1}isActive(){return!!(this.x||this.y)}move(){if(this.paused)return!1;const t=this.parent.input.count();return(t===1||t>1&&!this.parent.plugins.get("pinch",!0))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),this.saved.length>60&&this.saved.splice(0,30)),!1}handleMoved(t){if(this.saved.length){const e=this.saved[this.saved.length-1];t.type==="clamp-x"&&t.original?e.x===t.original.x&&(e.x=this.parent.x):t.type==="clamp-y"&&t.original&&e.y===t.original.y&&(e.y=this.parent.y)}}up(){if(this.parent.input.count()===0&&this.saved.length){const t=performance.now();for(const e of this.saved)if(e.time>=t-100){const i=t-e.time;this.x=(this.parent.x-e.x)/i,this.y=(this.parent.y-e.y)/i,this.percentChangeX=this.percentChangeY=this.options.friction,this.timeSinceRelease=0;break}}return!1}activate(t){t=t||{},typeof t.x<"u"&&(this.x=t.x,this.percentChangeX=this.options.friction),typeof t.y<"u"&&(this.y=t.y,this.percentChangeY=this.options.friction)}update(t){if(this.paused)return;const e=this.x||this.y,i=this.timeSinceRelease,s=this.timeSinceRelease+t;if(this.x){const r=this.percentChangeX,a=Math.log(r);this.parent.x+=this.x*nr/a*(Math.pow(r,s/nr)-Math.pow(r,i/nr)),this.x*=Math.pow(this.percentChangeX,t/nr)}if(this.y){const r=this.percentChangeY,a=Math.log(r);this.parent.y+=this.y*nr/a*(Math.pow(r,s/nr)-Math.pow(r,i/nr)),this.y*=Math.pow(this.percentChangeY,t/nr)}this.timeSinceRelease+=t,this.x&&this.y?Math.abs(this.x)<this.options.minSpeed&&Math.abs(this.y)<this.options.minSpeed&&(this.x=0,this.y=0):(Math.abs(this.x||0)<this.options.minSpeed&&(this.x=0),Math.abs(this.y||0)<this.options.minSpeed&&(this.y=0)),e&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"})}reset(){this.x=this.y=null}};const zL={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1,lineHeight:20,wheelSwapAxes:!1};class DL extends mi{constructor(t,e={}){super(t),this.windowEventHandlers=[],this.options=Object.assign({},zL,e),this.moved=!1,this.reverse=this.options.reverse?1:-1,this.xDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="x",this.yDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="y",this.keyIsPressed=!1,this.parseUnderflow(),this.mouseButtons(this.options.mouseButtons),this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(t){const e=s=>{t.includes(s.code)&&(this.keyIsPressed=!0)},i=s=>{t.includes(s.code)&&(this.keyIsPressed=!1)};this.addWindowEventHandler("keyup",i),this.addWindowEventHandler("keydown",e)}addWindowEventHandler(t,e){typeof window>"u"||(window.addEventListener(t,e),this.windowEventHandlers.push({event:t,handler:e}))}destroy(){typeof window>"u"||this.windowEventHandlers.forEach(({event:t,handler:e})=>{window.removeEventListener(t,e)})}mouseButtons(t){!t||t==="all"?this.mouse=[!0,!0,!0]:this.mouse=[t.indexOf("left")!==-1,t.indexOf("middle")!==-1,t.indexOf("right")!==-1]}parseUnderflow(){const t=this.options.underflow.toLowerCase();t==="center"?(this.underflowX=0,this.underflowY=0):(t.includes("left")?this.underflowX=-1:t.includes("right")?this.underflowX=1:this.underflowX=0,t.includes("top")?this.underflowY=-1:t.includes("bottom")?this.underflowY=1:this.underflowY=0)}checkButtons(t){const e=t.pointerType==="mouse",i=this.parent.input.count();return!!((i===1||i>1&&!this.parent.plugins.get("pinch",!0))&&(!e||this.mouse[t.button]))}checkKeyPress(t){return!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&t.data.pointerType==="touch"}down(t){return this.paused||!this.options.pressDrag?!1:this.checkButtons(t)&&this.checkKeyPress(t)?(this.last={x:t.global.x,y:t.global.y},(this.parent.parent||this.parent).toLocal(this.last,void 0,this.last),this.current=t.pointerId,!0):(this.last=null,!1)}get active(){return this.moved}move(t){if(this.paused||!this.options.pressDrag)return!1;if(this.last&&this.current===t.data.pointerId){const e=t.global.x,i=t.global.y,s=this.parent.input.count();if(s===1||s>1&&!this.parent.plugins.get("pinch",!0)){const r={x:e,y:i};(this.parent.parent||this.parent).toLocal(r,void 0,r);const a=r.x-this.last.x,l=r.y-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(a)||this.yDirection&&this.parent.input.checkThreshold(l))return this.xDirection&&(this.parent.x+=(r.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(r.y-this.last.y)*this.options.factor),this.last=r,this.moved||this.parent.emit("drag-start",{event:t,screen:new Dt(this.last.x,this.last.y),world:this.parent.toWorld(new Dt(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}else this.moved=!1}return!1}up(t){if(this.paused)return!1;const e=this.parent.input.touches;if(e.length===1){const i=e[0];return i.last&&(this.last={x:i.last.x,y:i.last.y},this.current=i.id),this.moved=!1,!0}else if(this.last&&this.moved){const i=new Dt(this.last.x,this.last.y);return(this.parent.parent||this.parent).toGlobal(i,i,!0),this.parent.emit("drag-end",{event:t,screen:i,world:this.parent.toWorld(i),viewport:this.parent}),this.last=null,this.moved=!1,!0}return!1}wheel(t){if(this.paused)return!1;if(this.options.wheel){const e=this.parent.plugins.get("wheel",!0);if(!e||!e.options.wheelZoom&&!t.ctrlKey){const i=t.deltaMode?this.options.lineHeight:1,s=[t.deltaX,t.deltaY],[r,a]=this.options.wheelSwapAxes?s.reverse():s;return this.xDirection&&(this.parent.x+=r*i*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=a*i*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||t.preventDefault(),this.parent.options.stopPropagation&&t.stopPropagation(),!0}}return!1}resume(){this.last=null,this.paused=!1}clamp(){const t=this.parent.plugins.get("decelerate",!0)||{};if(this.options.clampWheel!=="y")if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,t.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,t.x=0);if(this.options.clampWheel!=="x")if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,t.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,t.y=0)}}const IL={speed:0,acceleration:null,radius:null};class BL extends mi{constructor(t,e,i={}){super(t),this.target=e,this.options=Object.assign({},IL,i),this.velocity={x:0,y:0}}update(t){if(this.paused)return;const e=this.parent.center;let i=this.target.x,s=this.target.y;if(this.options.radius)if(Math.sqrt(Math.pow(this.target.y-e.y,2)+Math.pow(this.target.x-e.x,2))>this.options.radius){const l=Math.atan2(this.target.y-e.y,this.target.x-e.x);i=this.target.x-Math.cos(l)*this.options.radius,s=this.target.y-Math.sin(l)*this.options.radius}else return;const r=i-e.x,a=s-e.y;if(r||a)if(this.options.speed)if(this.options.acceleration){const l=Math.atan2(s-e.y,i-e.x),u=Math.sqrt(Math.pow(r,2)+Math.pow(a,2));if(u){const h=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration);u>h?this.velocity={x:Math.min(this.velocity.x+(this.options.acceleration*t,this.options.speed)),y:Math.min(this.velocity.y+(this.options.acceleration*t,this.options.speed))}:this.velocity={x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)};const f=Math.cos(l)*this.velocity.x,p=Math.sin(l)*this.velocity.y,g=Math.abs(f)>Math.abs(r)?i:e.x+f,x=Math.abs(p)>Math.abs(a)?s:e.y+p;this.parent.moveCenter(g,x),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}else{const l=Math.atan2(s-e.y,i-e.x),u=Math.cos(l)*this.options.speed,h=Math.sin(l)*this.options.speed,f=Math.abs(u)>Math.abs(r)?i:e.x+u,p=Math.abs(h)>Math.abs(a)?s:e.y+h;this.parent.moveCenter(f,p),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}else this.parent.moveCenter(i,s),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}const LL={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1};class FL extends mi{constructor(t,e={}){super(t),this.options=Object.assign({},LL,e),this.reverse=this.options.reverse?1:-1,this.radiusSquared=typeof this.options.radius=="number"?Math.pow(this.options.radius,2):null,this.resize()}resize(){const t=this.options.distance;t!==null?(this.left=t,this.top=t,this.right=this.parent.screenWidth-t,this.bottom=this.parent.screenHeight-t):this.options.radius||(this.left=this.options.left,this.top=this.options.top,this.right=this.options.right===null?null:this.parent.screenWidth-this.options.right,this.bottom=this.options.bottom===null?null:this.parent.screenHeight-this.options.bottom)}down(){return this.paused||this.options.allowButtons||(this.horizontal=this.vertical=null),!1}move(t){if(this.paused||t.pointerType!=="mouse"&&t.pointerId!==1||!this.options.allowButtons&&t.buttons!==0)return!1;const e=t.global.x,i=t.global.y;if(this.radiusSquared){const s=this.parent.toScreen(this.parent.center);if(Math.pow(s.x-e,2)+Math.pow(s.y-i,2)>=this.radiusSquared){const r=Math.atan2(s.y-i,s.x-e);this.options.linear?(this.horizontal=Math.round(Math.cos(r))*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.round(Math.sin(r))*this.options.speed*this.reverse*(60/1e3)):(this.horizontal=Math.cos(r)*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.sin(r)*this.options.speed*this.reverse*(60/1e3))}else this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0}else this.left!==null&&e<this.left?this.horizontal=Number(this.reverse)*this.options.speed*(60/1e3):this.right!==null&&e>this.right?this.horizontal=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateHorizontal(),this.horizontal=0),this.top!==null&&i<this.top?this.vertical=Number(this.reverse)*this.options.speed*(60/1e3):this.bottom!==null&&i>this.bottom?this.vertical=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateVertical(),this.vertical=0);return!1}decelerateHorizontal(){const t=this.parent.plugins.get("decelerate",!0);this.horizontal&&t&&!this.options.noDecelerate&&t.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}decelerateVertical(){const t=this.parent.plugins.get("decelerate",!0);this.vertical&&t&&!this.options.noDecelerate&&t.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}up(){return this.paused||(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null),!1}update(){if(!this.paused&&(this.horizontal||this.vertical)){const t=this.parent.center;this.horizontal&&(t.x+=this.horizontal*this.options.speed),this.vertical&&(t.y+=this.vertical*this.options.speed),this.parent.moveCenter(t),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}}const HL={noDrag:!1,percent:1,center:null,factor:1,axis:"all"},UL=new Dt;let GL=class extends mi{constructor(t,e={}){super(t),this.active=!1,this.pinching=!1,this.moved=!1,this.options=Object.assign({},HL,e)}down(){return this.parent.input.count()>=2?(this.active=!0,!0):!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}move(t){if(this.paused||!this.active)return!1;const{x:e,y:i}=(this.parent.parent||this.parent).toLocal(t.global,void 0,UL),s=this.parent.input.touches;if(s.length>=2){const r=s[0],a=s[1],l=r.last&&a.last?Math.sqrt(Math.pow(a.last.x-r.last.x,2)+Math.pow(a.last.y-r.last.y,2)):null;if(r.id===t.pointerId?r.last={x:e,y:i,data:t}:a.id===t.pointerId&&(a.last={x:e,y:i,data:t}),l){let u;const h=new Dt(r.last.x+(a.last.x-r.last.x)/2,r.last.y+(a.last.y-r.last.y)/2);this.options.center||(u=this.parent.toLocal(h,this.parent.parent||this.parent));let f=Math.sqrt(Math.pow(a.last.x-r.last.x,2)+Math.pow(a.last.y-r.last.y,2));f=f===0?f=1e-10:f;const p=(1-l/f)*this.options.percent*(this.isAxisX()?this.parent.scale.x:this.parent.scale.y);this.isAxisX()&&(this.parent.scale.x+=p),this.isAxisY()&&(this.parent.scale.y+=p),this.parent.emit("zoomed",{viewport:this.parent,type:"pinch",center:h});const g=this.parent.plugins.get("clamp-zoom",!0);if(g&&g.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const x=(this.parent.parent||this.parent).toLocal(u,this.parent);this.parent.x+=(h.x-x.x)*this.options.factor,this.parent.y+=(h.y-x.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})}!this.options.noDrag&&this.lastCenter&&(this.parent.x+=(h.x-this.lastCenter.x)*this.options.factor,this.parent.y+=(h.y-this.lastCenter.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=h,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}return!1}up(){return this.pinching&&this.parent.input.touches.length<=1?(this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0):!1}};const VL={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1};class WL extends mi{constructor(t,e,i,s={}){super(t),this.options=Object.assign({},VL,s),this.ease=xd(s.ease,"easeInOutSine"),this.x=e,this.y=i,this.options.forceStart&&this.snapStart()}snapStart(){this.percent=0,this.snapping={time:0};const t=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-t.x,this.deltaY=this.y-t.y,this.startX=t.x,this.startY=t.y,this.parent.emit("snap-start",this.parent)}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null),!1}up(){if(this.parent.input.count()===0){const t=this.parent.plugins.get("decelerate",!0);t&&(t.x||t.y)&&(t.percentChangeX=t.percentChangeY=this.options.friction)}return!1}update(t){if(!this.paused&&!(this.options.interrupt&&this.parent.input.count()!==0))if(this.snapping){const e=this.snapping;e.time+=t;let i,s,r;const a=this.startX,l=this.startY,u=this.deltaX,h=this.deltaY;if(e.time>this.options.time)i=!0,s=a+u,r=l+h;else{const f=this.ease(e.time,0,1,this.options.time);s=a+u*f,r=l+h*f}this.options.topLeft?this.parent.moveCorner(s,r):this.parent.moveCenter(s,r),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),i&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{const e=this.options.topLeft?this.parent.corner:this.parent.center;(e.x!==this.x||e.y!==this.y)&&this.snapStart()}}}const YL={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1,noMove:!1};class qL extends mi{constructor(t,e={}){super(t),this.options=Object.assign({},YL,e),this.ease=xd(this.options.ease),this.xIndependent=!1,this.yIndependent=!1,this.xScale=0,this.yScale=0,this.options.width>0&&(this.xScale=t.screenWidth/this.options.width,this.xIndependent=!0),this.options.height>0&&(this.yScale=t.screenHeight/this.options.height,this.yIndependent=!0),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale,this.options.time===0?(t.container.scale.x=this.xScale,t.container.scale.y=this.yScale,this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom")):e.forceStart&&this.createSnapping()}createSnapping(){const t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,i=this.parent.screenWidth/this.xScale,s=this.parent.screenHeight/this.yScale;this.snapping={time:0,startX:t,startY:e,deltaX:i-t,deltaY:s-e},this.parent.emit("snap-zoom-start",this.parent)}resize(){this.snapping=null,this.options.width>0&&(this.xScale=this.parent.screenWidth/this.options.width),this.options.height>0&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null),!1}update(t){if(this.paused||this.options.interrupt&&this.parent.input.count()!==0)return;let e;if(!this.options.center&&!this.options.noMove&&(e=this.parent.center),!this.snapping)(this.parent.scale.x!==this.xScale||this.parent.scale.y!==this.yScale)&&this.createSnapping();else if(this.snapping){const i=this.snapping;if(i.time+=t,i.time>=this.options.time)this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null;else{const r=this.snapping,a=this.ease(r.time,r.startX,r.deltaX,this.options.time),l=this.ease(r.time,r.startY,r.deltaY,this.options.time);this.parent.scale.x=this.parent.screenWidth/a,this.parent.scale.y=this.parent.screenHeight/l}const s=this.parent.plugins.get("clamp-zoom",!0);s&&s.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(e))}}resume(){this.snapping=null,super.resume()}}const XL={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null,lineHeight:20,axis:"all",keyToPress:null,trackpadPinch:!1,wheelZoom:!0};class $L extends mi{constructor(t,e={}){super(t),this.options=Object.assign({},XL,e),this.keyIsPressed=!1,this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(t){typeof window>"u"||(window.addEventListener("keydown",e=>{t.includes(e.code)&&(this.keyIsPressed=!0)}),window.addEventListener("keyup",e=>{t.includes(e.code)&&(this.keyIsPressed=!1)}))}checkKeyPress(){return!this.options.keyToPress||this.keyIsPressed}down(){return this.options.interrupt&&(this.smoothing=null),!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}update(){if(this.smoothing){const t=this.smoothingCenter,e=this.smoothing;let i;this.options.center||(i=this.parent.toLocal(t)),this.isAxisX()&&(this.parent.scale.x+=e.x),this.isAxisY()&&(this.parent.scale.y+=e.y),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const s=this.parent.plugins.get("clamp-zoom",!0);if(s&&s.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const r=this.parent.parent||this.parent;r.toLocal(i,this.parent,i);const a=r.toLocal(t);this.parent.x+=a.x-i.x,this.parent.y+=a.y-i.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,typeof this.options.smooth=="number"&&this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}pinch(t){if(this.paused)return;const e=this.parent.input.getPointerPosition(t),i=-t.deltaY*(t.deltaMode?this.options.lineHeight:1)/200,s=Math.pow(2,(1+this.options.percent)*i);let r;this.options.center||(r=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x*=s),this.isAxisY()&&(this.parent.scale.y*=s),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const a=this.parent.plugins.get("clamp-zoom",!0);if(a&&a.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const l=this.parent.parent||this.parent;l.toLocal(r,this.parent,r);const u=l.toLocal(e);this.parent.x+=u.x-r.x,this.parent.y+=u.y-r.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:t,viewport:this.parent})}wheel(t){if(this.paused||!this.checkKeyPress())return!1;if(t.ctrlKey&&this.options.trackpadPinch)this.pinch(t);else if(this.options.wheelZoom){const e=this.parent.input.getPointerPosition(t),i=(this.options.reverse?-1:1)*-t.deltaY*(t.deltaMode?this.options.lineHeight:1)/500,s=Math.pow(2,(1+this.options.percent)*i);if(this.options.smooth){const r={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+r.x)*s-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+r.y)*s-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=e}else{let r;this.options.center||(r=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x*=s),this.isAxisY()&&(this.parent.scale.y*=s),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const a=this.parent.plugins.get("clamp-zoom",!0);if(a&&a.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const l=this.parent.parent||this.parent;l.toLocal(r,this.parent,r);const u=l.toLocal(e);this.parent.x+=u.x-r.x,this.parent.y+=u.y-r.y}}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:t,viewport:this.parent})}return!this.parent.options.passiveWheel}}const QL={screenWidth:typeof window>"u"?0:window.innerWidth,screenHeight:typeof window>"u"?0:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,disableOnContextMenu:!1,ticker:Ml.shared,allowPreserveDragOutside:!1};class KL extends pe{constructor(t){super(),this._disableOnContextMenu=e=>e.preventDefault(),this.options={...QL,...t},this.screenWidth=this.options.screenWidth,this.screenHeight=this.options.screenHeight,this._worldWidth=this.options.worldWidth,this._worldHeight=this.options.worldHeight,this.forceHitArea=this.options.forceHitArea,this.threshold=this.options.threshold,this.options.disableOnContextMenu&&this.options.events.domElement.addEventListener("contextmenu",this._disableOnContextMenu),this.options.noTicker||(this.tickerFunction=()=>this.update(this.options.ticker.elapsedMS),this.options.ticker.add(this.tickerFunction)),this.input=new SL(this),this.plugins=new CL(this)}destroy(t){var e;!this.options.noTicker&&this.tickerFunction&&this.options.ticker.remove(this.tickerFunction),this.options.disableOnContextMenu&&((e=this.options.events.domElement)==null||e.removeEventListener("contextmenu",this._disableOnContextMenu)),this.input.destroy(),super.destroy(t)}update(t){this.pause||(this.plugins.update(t),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new Yt(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}resize(t=typeof window>"u"?0:window.innerWidth,e=typeof window>"u"?0:window.innerHeight,i,s){this.screenWidth=t,this.screenHeight=e,typeof i<"u"&&(this._worldWidth=i),typeof s<"u"&&(this._worldHeight=s),this.plugins.resize(),this.dirty=!0}get worldWidth(){return this._worldWidth?this._worldWidth:this.width/this.scale.x}set worldWidth(t){this._worldWidth=t,this.plugins.resize()}get worldHeight(){return this._worldHeight?this._worldHeight:this.height/this.scale.y}set worldHeight(t){this._worldHeight=t,this.plugins.resize()}getVisibleBounds(){return new Yt(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}toWorld(t,e){return arguments.length===2?this.toLocal(new Dt(t,e)):this.toLocal(t)}toScreen(t,e){return arguments.length===2?this.toGlobal(new Dt(t,e)):this.toGlobal(t)}get worldScreenWidth(){return this.screenWidth/this.scale.x}get worldScreenHeight(){return this.screenHeight/this.scale.y}get screenWorldWidth(){return this.worldWidth*this.scale.x}get screenWorldHeight(){return this.worldHeight*this.scale.y}get center(){return new Dt(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)}set center(t){this.moveCenter(t)}moveCenter(...t){let e,i;typeof t[0]=="number"?(e=t[0],i=t[1]):(e=t[0].x,i=t[0].y);const s=(this.worldScreenWidth/2-e)*this.scale.x,r=(this.worldScreenHeight/2-i)*this.scale.y;return(this.x!==s||this.y!==r)&&(this.position.set(s,r),this.plugins.reset(),this.dirty=!0),this}get corner(){return new Dt(-this.x/this.scale.x,-this.y/this.scale.y)}set corner(t){this.moveCorner(t)}moveCorner(...t){let e,i;return t.length===1?(e=-t[0].x*this.scale.x,i=-t[0].y*this.scale.y):(e=-t[0]*this.scale.x,i=-t[1]*this.scale.y),(e!==this.x||i!==this.y)&&(this.position.set(e,i),this.plugins.reset(),this.dirty=!0),this}get screenWidthInWorldPixels(){return this.screenWidth/this.scale.x}get screenHeightInWorldPixels(){return this.screenHeight/this.scale.y}findFitWidth(t){return this.screenWidth/t}findFitHeight(t){return this.screenHeight/t}findFit(t,e){const i=this.screenWidth/t,s=this.screenHeight/e;return Math.min(i,s)}findCover(t,e){const i=this.screenWidth/t,s=this.screenHeight/e;return Math.max(i,s)}fitWidth(t=this.worldWidth,e,i=!0,s){let r;e&&(r=this.center),this.scale.x=this.screenWidth/t,i&&(this.scale.y=this.scale.x);const a=this.plugins.get("clamp-zoom",!0);return!s&&a&&a.clamp(),e&&r&&this.moveCenter(r),this}fitHeight(t=this.worldHeight,e,i=!0,s){let r;e&&(r=this.center),this.scale.y=this.screenHeight/t,i&&(this.scale.x=this.scale.y);const a=this.plugins.get("clamp-zoom",!0);return!s&&a&&a.clamp(),e&&r&&this.moveCenter(r),this}fitWorld(t){let e;t&&(e=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const i=this.plugins.get("clamp-zoom",!0);return i&&i.clamp(),t&&e&&this.moveCenter(e),this}fit(t,e=this.worldWidth,i=this.worldHeight){let s;t&&(s=this.center),this.scale.x=this.screenWidth/e,this.scale.y=this.screenHeight/i,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const r=this.plugins.get("clamp-zoom",!0);return r&&r.clamp(),t&&s&&this.moveCenter(s),this}setZoom(t,e){let i;e&&(i=this.center),this.scale.set(t);const s=this.plugins.get("clamp-zoom",!0);return s&&s.clamp(),e&&i&&this.moveCenter(i),this}zoomPercent(t,e){return this.setZoom(this.scale.x+this.scale.x*t,e)}zoom(t,e){return this.fitWidth(t+this.worldScreenWidth,e),this}get scaled(){return this.scale.x}set scaled(t){this.setZoom(t,!0)}snapZoom(t){return this.plugins.add("snap-zoom",new qL(this,t)),this}OOB(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this.worldHeight,cornerPoint:new Dt(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}get right(){return-this.x/this.scale.x+this.worldScreenWidth}set right(t){this.x=-t*this.scale.x+this.screenWidth,this.plugins.reset()}get left(){return-this.x/this.scale.x}set left(t){this.x=-t*this.scale.x,this.plugins.reset()}get top(){return-this.y/this.scale.y}set top(t){this.y=-t*this.scale.y,this.plugins.reset()}get bottom(){return-this.y/this.scale.y+this.worldScreenHeight}set bottom(t){this.y=-t*this.scale.y+this.screenHeight,this.plugins.reset()}get dirty(){return!!this._dirty}set dirty(t){this._dirty=t}get forceHitArea(){return this._forceHitArea}set forceHitArea(t){t?(this._forceHitArea=t,this.hitArea=t):(this._forceHitArea=null,this.hitArea=new Yt(0,0,this.worldWidth,this.worldHeight))}drag(t){return this.plugins.add("drag",new DL(this,t)),this}clamp(t){return this.plugins.add("clamp",new RL(this,t)),this}decelerate(t){return this.plugins.add("decelerate",new OL(this,t)),this}bounce(t){return this.plugins.add("bounce",new TL(this,t)),this}pinch(t){return this.plugins.add("pinch",new GL(this,t)),this}snap(t,e,i){return this.plugins.add("snap",new WL(this,t,e,i)),this}follow(t,e){return this.plugins.add("follow",new BL(this,t,e)),this}wheel(t){return this.plugins.add("wheel",new $L(this,t)),this}animate(t){return this.plugins.add("animate",new PL(this,t)),this}clampZoom(t){return this.plugins.add("clamp-zoom",new kL(this,t)),this}mouseEdges(t){return this.plugins.add("mouse-edges",new FL(this,t)),this}get pause(){return!!this._pause}set pause(t){this._pause=t,this.lastViewport=null,this.moving=!1,this.zooming=!1,t&&this.input.pause()}ensureVisible(t,e,i,s,r){r&&(i>this.worldScreenWidth||s>this.worldScreenHeight)&&(this.fit(!0,i,s),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));let a=!1;t<this.left?(this.left=t,a=!0):t+i>this.right&&(this.right=t+i,a=!0),e<this.top?(this.top=e,a=!0):e+s>this.bottom&&(this.bottom=e+s,a=!0),a&&this.emit("moved",{viewport:this,type:"ensureVisible"})}}class ZL extends KL{constructor(t){const{app:e,...i}=t;super({...i,events:e.renderer.events}),this.drag().pinch().wheel().decelerate()}}rn({ViewportWrapper:ZL});function oT(n){const{children:t,...e}=n,{app:i}=ya();return i?.renderer&&y.jsx("pixiViewportWrapper",{app:i,...e,children:t})}const Qb=n=>Symbol.iterator in n,Kb=n=>"entries"in n,Zb=(n,t)=>{const e=n instanceof Map?n:new Map(n.entries()),i=t instanceof Map?t:new Map(t.entries());if(e.size!==i.size)return!1;for(const[s,r]of e)if(!i.has(s)||!Object.is(r,i.get(s)))return!1;return!0},JL=(n,t)=>{const e=n[Symbol.iterator](),i=t[Symbol.iterator]();let s=e.next(),r=i.next();for(;!s.done&&!r.done;){if(!Object.is(s.value,r.value))return!1;s=e.next(),r=i.next()}return!!s.done&&!!r.done};function t8(n,t){return Object.is(n,t)?!0:typeof n!="object"||n===null||typeof t!="object"||t===null||Object.getPrototypeOf(n)!==Object.getPrototypeOf(t)?!1:Qb(n)&&Qb(t)?Kb(n)&&Kb(t)?Zb(n,t):JL(n,t):Zb({entries:()=>Object.entries(n)},{entries:()=>Object.entries(t)})}function ne(n){const t=Gk.useRef(void 0);return e=>{const i=n(e);return t8(t.current,i)?t.current:t.current=i}}function Wu(n){return n*Math.PI/180}function rx(n){let t=((n+180)%360+360)%360-180;return t===-180&&(t=180),t}function lT(n){return(n%360+360)%360}function Wt(n,t,e){return Math.max(t,Math.min(e,n))}function cT(n,t,e,i){const s=Wu(n),r=Wu(t),a=Wu(e),l=Wu(i),u=Math.cos(s)*Math.cos(r),h=Math.sin(r),f=Math.sin(s)*Math.cos(r),p=Math.cos(a),g=Math.sin(a),x=p*u+g*f,w=-g*u+p*f,_=h,b=Math.cos(l),C=Math.sin(l),M=b*_-C*w,P=C*_+b*w;return{x,y:M,z:P,visible:P>0}}function uT(n,t,e,i,s){return{x:t-n.x*i*s,y:e-n.y*i*s}}function e8(n,t){const e=lT(n+90),i=Wt(t,-90,90);return{ra:e,dec:i}}function hT(n,t){const e=rx(n-90),i=Wt(t,-90,90);return{yawDeg:e,pitchDeg:i}}const Ft=Kh()(n=>({footprints:[],view:{yawDeg:0,pitchDeg:0,scale:1},globeBackground:{centerX:200,centerY:200,initialRadius:200},globeGrid:{showGrid:!0,meridianStep:90,parallelStep:30},hoveredFootprintId:null,hoveredFootprintMousePosition:null,selectedFootprintId:null,setView:t=>n(e=>{let i=t.yawDeg??e.view.yawDeg;i=lT(i);let s=t.pitchDeg??e.view.pitchDeg;return s=Wt(s,-90,90),{view:{...e.view,...t,yawDeg:i,pitchDeg:s}}}),setGlobeBackground:t=>n({globeBackground:t}),setGlobeGrid:t=>n(e=>({globeGrid:{...e.globeGrid,...t}})),setFootprints:t=>n({footprints:t}),setHoveredFootprintId:t=>n({hoveredFootprintId:t}),setHoveredFootprintMousePosition:t=>n({hoveredFootprintMousePosition:t}),setSelectedFootprintId:t=>n({selectedFootprintId:t}),setFootprintMeta:(t,e,i)=>n(s=>({footprints:s.footprints.map(r=>r.id===t?{...r,meta:{...r.meta||{},[e]:i}}:r)}))}));function va(n){const{queryKey:t,path:e,axiosGetParams:i={},returnType:s="data",queryOptions:r={}}=n,a=g1(p=>p.isConnected);let l=(n.enabled??!0)&&a;if(i?.params){const p=Object.values(i.params).some(g=>g==null);l=l&&!p}const u=g1(p=>p.backendUrl);return tN({queryKey:t,enabled:l,queryFn:async()=>{if(s==="response")return x1.get(u+e,i);if(s==="data")return x1.get(u+e,i).then(p=>p.data);throw new Error(`Invalid returnType: ${s}`)},...r})}function n8({selectedFootprintId:n,x:t=null,y:e=null,cutoutParams:i=null,enabled:s=!1}){if((t===null||e===null)&&i===null)throw new Error("Either (x, y) or cutoutParams must be provided");const r=t??(i?i.x0+i.width/2:null),a=e??(i?i.y0+i.height/2:null);return va({queryKey:["world_coordinates",n,r,a],enabled:s,path:"/wfss/world_coordinates/",axiosGetParams:{params:{group_id:n,x:r,y:a}}})}function dT({selectedFootprintId:n,enabled:t=!1}){return va({queryKey:["counterpart_footprint",n],path:`/image/counterpart_footprint/${n}`,enabled:t})}function fT({selectedFootprintId:n,filter:t,normParams:e,enabled:i=!1}){return va({queryKey:["counterpart_image",n,t,e],path:`/image/counterpart_image/${n}`,axiosGetParams:{params:{filter:t,...e},responseType:"blob"},enabled:i})}function pT({selectedFootprintId:n,filter:t,cutoutParams:e,enabled:i=!1}){return va({queryKey:["counterpart_cutout",n,t,e.width,e.height],path:`/image/counterpart_cutout/${n}`,axiosGetParams:{params:{filter:t,x0:e.x0,y0:e.y0,width:e.width,height:e.height}},enabled:i,queryOptions:{placeholderData:CC}})}function kc({selectedFootprintId:n,waveMin:t,waveMax:e,apertureSize:i,x:s=null,y:r=null,cutoutParams:a=null,enabled:l=!1}){if((s===null||r===null)&&a===null)throw new Error("Either (x, y) or cutoutParams must be provided");if(i===null&&a===null)throw new Error("Either apertureSize or cutoutParams must be provided");const u=s??(a?a.x0+a.width/2:null),h=r??(a?a.y0+a.height/2:null),f=i??(a?Math.max(a.width,a.height):null);return va({queryKey:["extract_spectrum",n,u,h,f],path:"/wfss/extract_spectrum/",enabled:l,axiosGetParams:{params:{group_id:n,wavelength_min:t,wavelength_max:e,x:u,y:h,aperture_size:f}},queryOptions:{placeholderData:CC}})}const Un=Kh()(n=>({availableFilters:[],filterRGB:{r:"",g:"",b:""},normParams:{pmin:1,pmax:99},counterpartPosition:{x0:0,y0:0,width:3e3,height:0},cutoutParams:{cutoutPmin:1,cutoutPmax:99,x0:0,y0:0,width:100,height:100},showCutout:!0,setAvailableFilters:t=>n({availableFilters:t}),setFilterRGB:t=>n(e=>({filterRGB:{...e.filterRGB,...t}})),setNormParams:t=>n({normParams:t}),setCounterpartPosition:t=>n(e=>({counterpartPosition:{...e.counterpartPosition,...t}})),setCutoutParams:t=>n(e=>({cutoutParams:{...e.cutoutParams,...t}})),setShowCutout:t=>n({showCutout:t})})),bn=Kh()(eN(n=>({waveUnit:"m",apertureSize:100,zRedshift:0,grismNorm:{pmin:1,pmax:99},forwardWaveRange:{min:3.8,max:5},slice1DWaveRange:{min:3.8,max:5},collapseWindow:{waveMin:3.8,waveMax:5,spatialMin:0,spatialMax:100},emissionLines:{"H":.6563,H:.4861,"[OIII]5007":.5007,Pa:1.2818},selectedEmissionLines:{},showTraceOnSpectrum2D:!0,setWaveUnit:t=>n({waveUnit:t}),setApertureSize:t=>n({apertureSize:t}),setZRedshift:t=>n({zRedshift:t}),setGrismNorm:t=>n(e=>({grismNorm:{...e.grismNorm,...t}})),setForwardWaveRange:t=>n(e=>({forwardWaveRange:{...e.forwardWaveRange,...t}})),setSlice1DWaveRange:t=>n(e=>({slice1DWaveRange:{...e.slice1DWaveRange,...t}})),setCollapseWindow:t=>n(e=>({collapseWindow:{...e.collapseWindow,...t}})),setEmissionLines:t=>{const e=Object.fromEntries(Object.entries(t).sort((i,s)=>i[1]-s[1]));n({emissionLines:e})},addEmissionLine:(t,e)=>{n(i=>{const s={...i.emissionLines,[t]:e};return{emissionLines:Object.fromEntries(Object.entries(s).sort((a,l)=>a[1]-l[1]))}})},removeEmissionLine:t=>{n(e=>{const i={...e.emissionLines};delete i[t];const{[t]:s,...r}=e.selectedEmissionLines;return{emissionLines:i,selectedEmissionLines:r}})},setSelectedEmissionLines:t=>n({selectedEmissionLines:t}),switchShowTraceOnSpectrum2D:()=>n(t=>({showTraceOnSpectrum2D:!t.showTraceOnSpectrum2D}))}),{name:"emission-lines-storage",storage:nN(()=>localStorage),partialize:n=>({emissionLines:n.emissionLines,selectedEmissionLines:n.selectedEmissionLines})}));rn({Sprite:Ki,Container:pe});function i8({layerRef:n}){const{counterpartPosition:t,setCounterpartPosition:e,normParams:i,filterRGB:s}=Un(ne(x=>({counterpartPosition:x.counterpartPosition,setCounterpartPosition:x.setCounterpartPosition,normParams:x.normParams,filterRGB:x.filterRGB}))),r=Ft(x=>x.selectedFootprintId),a=s.r,{data:l,isSuccess:u}=dT({selectedFootprintId:r});A.useEffect(()=>{if(!u)return;const x=l.footprint.vertex_marker;e({x0:x[0][0],y0:x[0][1],width:x[2][0]-x[0][0],height:x[2][1]-x[0][1]})},[l,u,e]);const h=fT({selectedFootprintId:r,filter:a,normParams:i}),[f,p]=A.useState(dt.EMPTY);A.useEffect(()=>{if(!h.isSuccess)return;const x=h.data,w=URL.createObjectURL(x);let _=!1;return(async()=>{try{const b=await El.load({src:w,format:"png",parser:"texture"});if(_){b.destroy(!0);return}f!==dt.EMPTY&&f.destroy(!0),p(b)}finally{URL.revokeObjectURL(w)}})(),()=>{_=!0,f!==dt.EMPTY&&f.destroy(!0)}},[h.isSuccess,h.data,f]);const g=A.useRef(null);return A.useEffect(()=>{const x=n.current,w=g.current;if(!(!x||!w))return x.attach(w),()=>{x.detach(w)}},[n]),y.jsx("pixiContainer",{children:f!==dt.EMPTY&&y.jsx("pixiSprite",{ref:g,texture:f,anchor:0,x:t.x0,y:t.y0,width:t.width,height:t.height})})}rn({Graphics:Hn,Sprite:Ki});function s8({layerRef:n}){const{app:t}=ya(),e=A.useRef(null);A.useEffect(()=>{const _=n.current,b=e.current;if(!(!_||!b))return _.attach(b),()=>{_.detach(b)}},[n]);const{cutoutParams:i,setCutoutParams:s,counterpartPosition:r}=Un(ne(_=>({cutoutParams:_.cutoutParams,setCutoutParams:_.setCutoutParams,counterpartPosition:_.counterpartPosition}))),[a,l]=A.useState(dt.EMPTY);A.useEffect(()=>{const _=new Hn;_.rect(0,0,i.width,i.height).stroke({color:16711680,width:5}).rect(i.width/2,i.height/2,1,1).stroke({color:16711680,width:1});const b=t.renderer.generateTexture(_);l(C=>(C&&!C.destroyed&&C.destroy(!0),b))},[i.height,i.width,t.renderer.generateTexture]);const u=A.useRef(null),h=A.useRef({deltaX:0,deltaY:0}),f=A.useRef(null),p=_=>{_.stopPropagation();const b=_.currentTarget,C=b.parent;if(!C)return;const M=_.getLocalPosition(C);b.dragging=!0,b.alpha=.7,u.current={x:M.x,y:M.y},h.current={deltaX:0,deltaY:0},f.current={x:b.x,y:b.y}},g=_=>{_.stopPropagation();const b=_.currentTarget;b.dragging=!1,b.alpha=1;const C=Wt(i.x0+h.current.deltaX,r.x0,r.x0+r.width-i.width),M=Wt(i.y0+h.current.deltaY,r.y0,r.y0+r.height-i.height);s({x0:Math.round(C),y0:Math.round(M)}),u.current=null,h.current={deltaX:0,deltaY:0},f.current=null},x=_=>{_.stopPropagation();const b=_.currentTarget,C=b.parent;if(!C)return;const M=_.getLocalPosition(C);if(b.dragging&&u.current&&f.current){const{x:P,y:T}=u.current,{x:E,y:R}=f.current,N=M.x-P,O=M.y-T;b.x=E+N,b.y=R+O,h.current={deltaX:N,deltaY:O}}};return Un(_=>_.showCutout)?y.jsx("pixiSprite",{ref:e,x:i.x0,y:i.y0,width:i.width,height:i.height,onPointerDown:p,onPointerUp:g,onPointerMove:x,onGlobalPointerMove:x,onPointerUpOutside:g,anchor:0,cursor:"move",eventMode:"dynamic",texture:a}):null}rn({Container:pe,RenderLayer:pd,Graphics:Hn});function r8(){const n=A.useRef(null),t=A.useRef(null),e=A.useRef(null);return y.jsx(fe,{ref:n,width:"600px",height:"600px",border:"1px solid black",children:y.jsx(md,{resizeTo:n,backgroundColor:1118481,resolution:1,antialias:!0,autoDensity:!0,children:y.jsxs(oT,{passiveWheel:!1,children:[y.jsx(i8,{layerRef:t}),y.jsx(s8,{layerRef:e})]})})})}function a8({label:n,value:t,onValueChange:e,collection:i,width:s}){return y.jsxs(Kx,{children:[y.jsx(Zx,{children:n}),y.jsxs(sy,{collection:i,size:"sm",width:s,value:[t],onValueChange:r=>{const a=r.value?.[0]??"";e(a)},children:[y.jsx(fy,{}),y.jsxs(dy,{children:[y.jsx(ry,{children:y.jsx(ly,{placeholder:t})}),y.jsx(hP,{children:y.jsx(hy,{})})]}),y.jsx(ay,{children:y.jsx(oy,{children:i.items.map(r=>y.jsxs(cy,{item:r,children:[r.label,y.jsx(uy,{})]},r.value))})})]})]})}function o8(){const n="100px",t="80px",e=Ft(R=>R.selectedFootprintId),{availableFilters:i,filterRGB:s,normParams:r,setAvailableFilters:a,setFilterRGB:l,setNormParams:u}=Un(),h=A.useMemo(()=>nd({items:i.map(R=>({label:R,value:R}))}),[i]),{data:f,isSuccess:p}=va({queryKey:["available_filters"],path:"/image/counterpart_meta"});A.useEffect(()=>{p&&f&&a(f)},[p,f,a]);const{refetch:g,isError:x,error:w}=dT({selectedFootprintId:e}),{refetch:_,isFetching:b,isSuccess:C,isError:M,error:P}=fT({selectedFootprintId:e,filter:s.r,normParams:r});A.useEffect(()=>{if(x&&w){const R=w?.message??"Unknown error";queueMicrotask(()=>{Wi.error({title:"Failed to retrieve counterpart",description:R})})}if(M&&P){const R=P?.message??"Unknown error";queueMicrotask(()=>{Wi.error({title:"Failed to retrieve counterpart image",description:R})})}C&&queueMicrotask(()=>{Wi.success({title:"The image is successfully retrieved"})})},[x,w,M,P,C]);const T=R=>{const N=r.pmax-5,O=Wt(R,0,N);u({...r,pmin:O})},E=R=>{const N=r.pmin+5,O=Wt(R,N,100);u({...r,pmax:O})};return y.jsx(fe,{p:5,children:y.jsxs(kt,{gap:3,h:"full",children:[y.jsxs(kt,{gap:3,children:[y.jsx(Qi,{size:"sm",as:"h3",children:"Select False Image Color"}),y.jsx(ht,{gap:4,children:Object.keys(s).map(R=>y.jsx(a8,{label:R.toUpperCase(),value:s[R],onValueChange:N=>{l({...s,[R]:N})},collection:h,width:n},R))})]}),y.jsx(gr,{my:3}),y.jsxs(kt,{gap:3,children:[y.jsx(Qi,{size:"sm",as:"h3",children:"Normalization"}),y.jsxs(ht,{gap:4,align:"flex-end",children:[y.jsx(xh,{label:"Pmin (%)",value:r.pmin,onValueChange:T,width:t}),y.jsx(xh,{label:"Pmax (%)",value:r.pmax,onValueChange:E,width:t})]})]}),y.jsx(gr,{my:3}),y.jsx(ht,{gap:3,children:y.jsx(Fn,{size:"sm",variant:"solid",mb:.5,loading:b,onClick:()=>{if(!e){Wi.error({title:"No footprint selected",description:"Please select a footprint first."});return}if(!s.r){Wi.error({title:"No filter selected",description:"Please select at least the red filter."});return}g(),_()},children:"Retrieve Counterpart"})})]})})}function zy(n){const t=n.flat();return t.sort((e,i)=>e-i),t}function l8(n,t,e=!0){const i=Array.isArray(t)?t:[t],s=e?n.filter(l=>l!==0):n,r=s.length;if(r===0){const l=i.map(()=>0);return Array.isArray(t)?l:0}const a=i.map(l=>{const u=l/100*(r-1),h=Math.floor(u),f=Math.ceil(u);if(h===f)return s[h];const p=u-h;return s[h]*(1-p)+s[f]*p});return Array.isArray(t)?a:a[0]}function c8(n,t,e,i=[],s=!0){const r=i??zy(n),[a,l]=l8(r,[t,e],s);if(l<=a)return n.map(f=>f.map(()=>0));const u=1/(l-a);return n.map(f=>f.map(p=>{const g=(p-a)*u;return Wt(g,0,1)}))}function u8(n){const t=n.flat(),e=new Uint8ClampedArray(t.length);for(let i=0;i<t.length;i++)e[i]=Math.round(Wt(t[i]*255,0,255));return e}function h8(n,t,e){const i=document.createElement("canvas");i.width=t,i.height=e;const s=i.getContext("2d");if(!s)throw new Error("Failed to get 2D context from canvas");const r=s.createImageData(t,e);for(let a=0;a<n.length;a++){const l=n[a],u=a*4;r.data[u+0]=l,r.data[u+1]=l,r.data[u+2]=l,r.data[u+3]=255}return s.putImageData(r,0,0),dt.from(i)}function mT({data:n,pmin:t,pmax:e,width:i=null,height:s=null,sortedArray:r=[],excludeZero:a=!0}){i||(i=n[0].length),s||(s=n.length);const l=c8(n,t,e,r,a),u=u8(l);return h8(u,i,s)}function Jb(n,t,e=201){const i=Math.max(t.min,n.range.min),s=Math.min(t.max,n.range.max);if(i>=s)return[];if(n.kind==="linear"){const r=n.k,a=n.b,l=n.x0,u=r*(i-l)+a,h=r*(s-l)+a;return[{wavelength:i,flux:u},{wavelength:(s+i)/2,flux:(u+h)/2},{wavelength:s,flux:h}]}else if(n.kind==="gaussian"){const r=n.amplitude,a=n.mu,l=n.sigma,u=new Array(e);for(let h=0;h<e;h++){const f=h/(e-1),p=i+f*(s-i),g=-.5*((p-a)/l)**2,x=r*Math.exp(g);u[h]={wavelength:p,flux:x}}return u}else throw new Error("Unknown model kind")}function d8(n,t){if(n.kind==="linear"){const e=n.k,i=n.b,s=n.x0,r=e*(t-s)+i;return{wavelength:t,flux:r}}else if(n.kind==="gaussian"){const e=n.amplitude,i=n.mu,s=n.sigma,r=-.5*((t-i)/s)**2,a=e*Math.exp(r);return{wavelength:t,flux:a}}else throw new Error("Unknown model kind")}rn({Sprite:Ki});function f8(){const n=A.useRef(null),t=Un(C=>C.cutoutParams),e=Ft(C=>C.selectedFootprintId),i=Un(C=>C.filterRGB),{data:s}=pT({selectedFootprintId:e,filter:i.r,cutoutParams:t,enabled:!1}),[r,a]=A.useState(null);A.useEffect(()=>{if(!s){a(null);return}const C=zy(s.cutout_data);a(C)},[s]);const[l,u]=A.useState(dt.EMPTY);A.useEffect(()=>{if(!s||!r)return;const C=mT({data:s.cutout_data,width:t.width,height:t.height,pmin:t.cutoutPmin,pmax:t.cutoutPmax,sortedArray:r,excludeZero:!0});u(M=>(M&&!M.destroyed&&M.destroy(!0),C))},[s,r,t.width,t.height,t.cutoutPmin,t.cutoutPmax]),A.useEffect(()=>()=>{u(C=>(C&&!C.destroyed&&C.destroy(!0),dt.EMPTY))},[]);const{app:h}=ya();if(!h.renderer)return null;const f=h.renderer.width,p=h.renderer.height,g=t.width,x=t.height,w=Math.min(f/g,p/x),_=f/2,b=p/2;return l!==dt.EMPTY&&y.jsx("pixiSprite",{ref:n,texture:l,anchor:.5,x:_,y:b,scale:w})}rn({Container:pe,RenderLayer:pd});function p8(){const n=A.useRef(null);return y.jsx(fe,{ref:n,width:"600px",height:"600px",border:"1px solid black",children:y.jsx(md,{resizeTo:n,backgroundColor:16777215,resolution:1,antialias:!0,autoDensity:!0,children:y.jsx(f8,{})})})}var gT=Symbol.for("immer-nothing"),tw=Symbol.for("immer-draftable"),sn=Symbol.for("immer-state");function Pi(n,...t){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Dn=Object,vo=Dn.getPrototypeOf,Mh="constructor",yd="prototype",ax="configurable",Ph="enumerable",ah="writable",Jl="value",vr=n=>!!n&&!!n[sn];function _r(n){return n?xT(n)||vd(n)||!!n[tw]||!!n[Mh]?.[tw]||_d(n)||bd(n):!1}var m8=Dn[yd][Mh].toString(),ew=new WeakMap;function xT(n){if(!n||!Dy(n))return!1;const t=vo(n);if(t===null||t===Dn[yd])return!0;const e=Dn.hasOwnProperty.call(t,Mh)&&t[Mh];if(e===Object)return!0;if(!Ka(e))return!1;let i=ew.get(e);return i===void 0&&(i=Function.toString.call(e),ew.set(e,i)),i===m8}function Nc(n,t,e=!0){Oc(n)===0?(e?Reflect.ownKeys(n):Dn.keys(n)).forEach(s=>{t(s,n[s],n)}):n.forEach((i,s)=>t(s,i,n))}function Oc(n){const t=n[sn];return t?t.type_:vd(n)?1:_d(n)?2:bd(n)?3:0}var nw=(n,t,e=Oc(n))=>e===2?n.has(t):Dn[yd].hasOwnProperty.call(n,t),ox=(n,t,e=Oc(n))=>e===2?n.get(t):n[t],Ah=(n,t,e,i=Oc(n))=>{i===2?n.set(t,e):i===3?n.add(e):n[t]=e};function g8(n,t){return n===t?n!==0||1/n===1/t:n!==n&&t!==t}var vd=Array.isArray,_d=n=>n instanceof Map,bd=n=>n instanceof Set,Dy=n=>typeof n=="object",Ka=n=>typeof n=="function",om=n=>typeof n=="boolean",Cs=n=>n.copy_||n.base_,Iy=n=>n.modified_?n.copy_:n.base_;function lx(n,t){if(_d(n))return new Map(n);if(bd(n))return new Set(n);if(vd(n))return Array[yd].slice.call(n);const e=xT(n);if(t===!0||t==="class_only"&&!e){const i=Dn.getOwnPropertyDescriptors(n);delete i[sn];let s=Reflect.ownKeys(i);for(let r=0;r<s.length;r++){const a=s[r],l=i[a];l[ah]===!1&&(l[ah]=!0,l[ax]=!0),(l.get||l.set)&&(i[a]={[ax]:!0,[ah]:!0,[Ph]:l[Ph],[Jl]:n[a]})}return Dn.create(vo(n),i)}else{const i=vo(n);if(i!==null&&e)return{...n};const s=Dn.create(i);return Dn.assign(s,n)}}function tc(n,t=!1){return wd(n)||vr(n)||(Oc(n)>1&&Dn.defineProperties(n,{set:Yu,add:Yu,clear:Yu,delete:Yu}),Dn.freeze(n),t&&Nc(n,(e,i)=>{tc(i,!0)},!1)),n}function x8(){Pi(2)}var Yu={[Jl]:x8};function wd(n){return n===null||!Dy(n)?!0:Dn.isFrozen(n)}var Th="MapSet",cx="Patches",yT={};function _o(n){const t=yT[n];return t||Pi(0,n),t}var y8=n=>!!yT[n],ec,vT=()=>ec,v8=(n,t)=>({drafts_:[],parent_:n,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:y8(Th)?_o(Th):void 0});function iw(n,t){t&&(n.patchPlugin_=_o(cx),n.patches_=[],n.inversePatches_=[],n.patchListener_=t)}function ux(n){hx(n),n.drafts_.forEach(_8),n.drafts_=null}function hx(n){n===ec&&(ec=n.parent_)}var sw=n=>ec=v8(ec,n);function _8(n){const t=n[sn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function rw(n,t){t.unfinalizedDrafts_=t.drafts_.length;const e=t.drafts_[0];if(n!==void 0&&n!==e){e[sn].modified_&&(ux(t),Pi(4)),_r(n)&&(n=aw(t,n));const{patchPlugin_:s}=t;s&&s.generateReplacementPatches_(e[sn].base_,n,t)}else n=aw(t,e);return b8(t,n,!0),ux(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),n!==gT?n:void 0}function aw(n,t){if(wd(t))return t;const e=t[sn];if(!e)return By(t,n.handledSet_,n);if(!Sd(e,n))return t;if(!e.modified_)return e.base_;if(!e.finalized_){const{callbacks_:i}=e;if(i)for(;i.length>0;)i.pop()(n);wT(e,n)}return e.copy_}function b8(n,t,e=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&tc(t,e)}function _T(n){n.finalized_=!0,n.scope_.unfinalizedDrafts_--}var Sd=(n,t)=>n.scope_===t,w8=[];function bT(n,t,e,i){const s=Cs(n),r=n.type_;if(i!==void 0&&ox(s,i,r)===t){Ah(s,i,e,r);return}if(!n.draftLocations_){const l=n.draftLocations_=new Map;Nc(s,(u,h)=>{if(vr(h)){const f=l.get(h)||[];f.push(u),l.set(h,f)}})}const a=n.draftLocations_.get(t)??w8;for(const l of a)Ah(s,l,e,r)}function S8(n,t,e){n.callbacks_.push(function(s){const r=t;if(!r||!Sd(r,s))return;s.mapSetPlugin_?.fixSetContents(r);const a=Iy(r);bT(n,r.draft_??r,a,e),wT(r,s)})}function wT(n,t){if(n.modified_&&!n.finalized_&&(n.type_===3||(n.assigned_?.size??0)>0)){const{patchPlugin_:i}=t;if(i){const s=i.getPath(n);s&&i.generatePatches_(n,s,t)}_T(n)}}function C8(n,t,e){const{scope_:i}=n;if(vr(e)){const s=e[sn];Sd(s,i)&&s.callbacks_.push(function(){oh(n);const a=Iy(s);bT(n,e,a,t)})}else _r(e)&&n.callbacks_.push(function(){const r=Cs(n);ox(r,t,n.type_)===e&&i.drafts_.length>1&&(n.assigned_.get(t)??!1)===!0&&n.copy_&&By(ox(n.copy_,t,n.type_),i.handledSet_,i)})}function By(n,t,e){return!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||vr(n)||t.has(n)||!_r(n)||wd(n)||(t.add(n),Nc(n,(i,s)=>{if(vr(s)){const r=s[sn];if(Sd(r,e)){const a=Iy(r);Ah(n,i,a,n.type_),_T(r)}}else _r(s)&&By(s,t,e)})),n}function M8(n,t){const e=vd(n),i={type_:e?1:0,scope_:t?t.scope_:vT(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=i,r=Ly;e&&(s=[i],r=nc);const{revoke:a,proxy:l}=Proxy.revocable(s,r);return i.draft_=l,i.revoke_=a,[l,i]}var Ly={get(n,t){if(t===sn)return n;const e=Cs(n);if(!nw(e,t,n.type_))return P8(n,e,t);const i=e[t];if(n.finalized_||!_r(i))return i;if(i===lm(n.base_,t)){oh(n);const s=n.type_===1?+t:t,r=fx(n.scope_,i,n,s);return n.copy_[s]=r}return i},has(n,t){return t in Cs(n)},ownKeys(n){return Reflect.ownKeys(Cs(n))},set(n,t,e){const i=ST(Cs(n),t);if(i?.set)return i.set.call(n.draft_,e),!0;if(!n.modified_){const s=lm(Cs(n),t),r=s?.[sn];if(r&&r.base_===e)return n.copy_[t]=e,n.assigned_.set(t,!1),!0;if(g8(e,s)&&(e!==void 0||nw(n.base_,t,n.type_)))return!0;oh(n),dx(n)}return n.copy_[t]===e&&(e!==void 0||t in n.copy_)||Number.isNaN(e)&&Number.isNaN(n.copy_[t])||(n.copy_[t]=e,n.assigned_.set(t,!0),C8(n,t,e)),!0},deleteProperty(n,t){return oh(n),lm(n.base_,t)!==void 0||t in n.base_?(n.assigned_.set(t,!1),dx(n)):n.assigned_.delete(t),n.copy_&&delete n.copy_[t],!0},getOwnPropertyDescriptor(n,t){const e=Cs(n),i=Reflect.getOwnPropertyDescriptor(e,t);return i&&{[ah]:!0,[ax]:n.type_!==1||t!=="length",[Ph]:i[Ph],[Jl]:e[t]}},defineProperty(){Pi(11)},getPrototypeOf(n){return vo(n.base_)},setPrototypeOf(){Pi(12)}},nc={};Nc(Ly,(n,t)=>{nc[n]=function(){const e=arguments;return e[0]=e[0][0],t.apply(this,e)}});nc.deleteProperty=function(n,t){return nc.set.call(this,n,t,void 0)};nc.set=function(n,t,e){return Ly.set.call(this,n[0],t,e,n[0])};function lm(n,t){const e=n[sn];return(e?Cs(e):n)[t]}function P8(n,t,e){const i=ST(t,e);return i?Jl in i?i[Jl]:i.get?.call(n.draft_):void 0}function ST(n,t){if(!(t in n))return;let e=vo(n);for(;e;){const i=Object.getOwnPropertyDescriptor(e,t);if(i)return i;e=vo(e)}}function dx(n){n.modified_||(n.modified_=!0,n.parent_&&dx(n.parent_))}function oh(n){n.copy_||(n.assigned_=new Map,n.copy_=lx(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var A8=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,e,i)=>{if(Ka(t)&&!Ka(e)){const r=e;e=t;const a=this;return function(u=r,...h){return a.produce(u,f=>e.call(this,f,...h))}}Ka(e)||Pi(6),i!==void 0&&!Ka(i)&&Pi(7);let s;if(_r(t)){const r=sw(this),a=fx(r,t,void 0);let l=!0;try{s=e(a),l=!1}finally{l?ux(r):hx(r)}return iw(r,i),rw(s,r)}else if(!t||!Dy(t)){if(s=e(t),s===void 0&&(s=t),s===gT&&(s=void 0),this.autoFreeze_&&tc(s,!0),i){const r=[],a=[];_o(cx).generateReplacementPatches_(t,s,{patches_:r,inversePatches_:a}),i(r,a)}return s}else Pi(1,t)},this.produceWithPatches=(t,e)=>{if(Ka(t))return(a,...l)=>this.produceWithPatches(a,u=>t(u,...l));let i,s;return[this.produce(t,e,(a,l)=>{i=a,s=l}),i,s]},om(n?.autoFreeze)&&this.setAutoFreeze(n.autoFreeze),om(n?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),om(n?.useStrictIteration)&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){_r(n)||Pi(8),vr(n)&&(n=T8(n));const t=sw(this),e=fx(t,n,void 0);return e[sn].isManual_=!0,hx(t),e}finishDraft(n,t){const e=n&&n[sn];(!e||!e.isManual_)&&Pi(9);const{scope_:i}=e;return iw(i,t),rw(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,t){let e;for(e=t.length-1;e>=0;e--){const s=t[e];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}e>-1&&(t=t.slice(e+1));const i=_o(cx).applyPatches_;return vr(n)?i(n,t):this.produce(n,s=>i(s,t))}};function fx(n,t,e,i){const[s,r]=_d(t)?_o(Th).proxyMap_(t,e):bd(t)?_o(Th).proxySet_(t,e):M8(t,e);return(e?.scope_??vT()).drafts_.push(s),r.callbacks_=e?.callbacks_??[],r.key_=i,e&&i!==void 0?S8(e,r,i):r.callbacks_.push(function(u){u.mapSetPlugin_?.fixSetContents(r);const{patchPlugin_:h}=u;r.modified_&&h&&h.generatePatches_(r,[],u)}),s}function T8(n){return vr(n)||Pi(10,n),CT(n)}function CT(n){if(!_r(n)||wd(n))return n;const t=n[sn];let e,i=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,e=lx(n,t.scope_.immer_.useStrictShallowCopy_),i=t.scope_.immer_.shouldUseStrictIteration()}else e=lx(n,!0);return Nc(e,(s,r)=>{Ah(e,s,CT(r))},i),t&&(t.finalized_=!1),e}var E8=new A8,R8=E8.produce;function j8(n){var t=A.useState(function(){return tc(typeof n=="function"?n():n,!0)}),e=t[1];return[t[0],A.useCallback(function(i){e(typeof i=="function"?R8(i):tc(i))},[])]}const hr=A.forwardRef(function(t,e){const{showArrow:i,children:s,disabled:r,portalled:a=!0,content:l,contentProps:u,portalRef:h,...f}=t;return r?s:y.jsxs(KO,{...f,children:[y.jsx(ZO,{asChild:!0,children:s}),y.jsx(Cc,{disabled:!a,container:h,children:y.jsx(JO,{children:y.jsxs(tz,{ref:e,...u,children:[i&&y.jsx(ez,{children:y.jsx(yP,{})}),l]})})})]})});function k8(){return y.jsx(fe,{display:"inline-flex",flexDirection:"column",gap:4,p:4,children:y.jsxs(kt,{gap:3,children:[y.jsx(N8,{}),y.jsx(gr,{}),y.jsx(O8,{}),y.jsx(gr,{}),y.jsx(z8,{})]})})}function N8(){const{cutoutParams:n,setCutoutParams:t}=Un(ne(s=>({cutoutParams:s.cutoutParams,setCutoutParams:s.setCutoutParams}))),e=s=>{const r=n.cutoutPmax-5,a=Wt(s,0,r);t({cutoutPmin:a})},i=s=>{const r=n.cutoutPmin+5,a=Wt(s,r,100);t({cutoutPmax:a})};return y.jsxs(kt,{gap:3,children:[y.jsx(Qi,{size:"sm",as:"h3",children:"Normalization Parameters"}),y.jsxs(ht,{gap:4,children:[y.jsx(xh,{label:"Pmin (%)",value:n.cutoutPmin,onValueChange:e,width:"80px"}),y.jsx(xh,{label:"Pmax (%)",value:n.cutoutPmax,onValueChange:i,width:"80px"})]})]})}function O8(){const{cutoutParams:n,setCutoutParams:t,showCutout:e,setShowCutout:i,filterRGB:s}=Un(ne(E=>({cutoutParams:E.cutoutParams,setCutoutParams:E.setCutoutParams,showCutout:E.showCutout,setShowCutout:E.setShowCutout,filterRGB:E.filterRGB}))),r=Ft(E=>E.selectedFootprintId),a=A.useId(),l=A.useId(),u=A.useId(),[h,f]=j8(n),[p,g]=A.useState(!1);A.useEffect(()=>{p||f(n)},[n,p,f]);const x=()=>{t(h),g(!1)},{refetch:w,isFetching:_}=pT({selectedFootprintId:r,filter:s.r,cutoutParams:n,enabled:!1}),b=()=>{if(!r||!s.r){Wi.error({title:"Cannot retrieve cutout",description:"Please select a footprint and filter first."});return}if(p){Wi.error({title:"Unsaved changes",description:"Please confirm cutout position changes before retrieving cutout."});return}w()},{data:C,isSuccess:M}=n8({selectedFootprintId:r,cutoutParams:n,enabled:!0}),P=E=>({valueAsNumber:R})=>{f(N=>{N[E]=Number.isNaN(R)?0:R}),g(!0)},T=[{label:"x0",key:"x0"},{label:"y0",key:"y0"},{label:"width",key:"width"},{label:"height",key:"height"}];return y.jsxs(kt,{gap:3,children:[y.jsxs(ht,{gap:2,justify:"space-between",children:[y.jsx(Qi,{size:"sm",as:"h3",children:"Cutout Position"}),y.jsx(hr,{ids:{trigger:a},content:"Show cutout region on the counterpart image",children:y.jsxs(ad,{size:"md",ids:{root:a},checked:e,onCheckedChange:E=>i(E.checked),children:[y.jsx(ld,{}),y.jsx(od,{}),y.jsx(gy,{children:e?"show":"hide"})]})})]}),y.jsx(ht,{gap:2,children:T.map(({label:E,key:R})=>y.jsxs(Kx,{orientation:"horizontal",css:{"--field-label-width":"15px"},children:[y.jsx(Zx,{children:E}),y.jsx(ce,{size:"sm",maxW:"60px",value:h[R].toString(),onValueChange:P(R),children:y.jsx(ue,{placeholder:n[R].toString()})})]},R))}),y.jsxs(ht,{justify:"space-between",children:[y.jsxs(ut,{textStyle:"sm",children:["RA:"," ",M?`${C.ra.toFixed(6)}`:"--",M?` [${C.ra_hms}]`:""]}),y.jsxs(ut,{textStyle:"sm",children:["Dec:"," ",M?`${C.dec.toFixed(6)}`:"--",M?` [${C.dec_dms}]`:""]})]}),y.jsxs(ht,{justify:"flex-end",children:[y.jsx(hr,{ids:{trigger:l},content:"Confirm changes to cutout position",children:y.jsx(Fn,{size:"sm",onClick:x,variant:"outline",disabled:!p,children:"Confirm"})}),y.jsx(hr,{ids:{trigger:u},content:"Retrieve cutout with current settings",children:y.jsx(Fn,{size:"sm",onClick:b,variant:"solid",loading:_,children:"Cutout"})})]})]})}function z8(){const{apertureSize:n,setApertureSize:t,forwardWaveRange:e,setForwardWaveRange:i}=bn(ne(p=>({apertureSize:p.apertureSize,setApertureSize:p.setApertureSize,forwardWaveRange:p.forwardWaveRange,setForwardWaveRange:p.setForwardWaveRange}))),s=Un(p=>p.cutoutParams),r=Ft(p=>p.selectedFootprintId),a=A.useId(),{refetch:l,isFetching:u,data:h}=kc({selectedFootprintId:r,waveMin:e.min,waveMax:e.max,cutoutParams:s,apertureSize:n,enabled:!1}),f=()=>{Wi.info({title:`Extracting spectrum at (${s.x0+s.width/2}, ${s.y0+s.height/2})`,description:`Wavelength: ${e.min} - ${e.max} m, Aperture Size: ${n} px`}),l()};return A.useEffect(()=>{h&&(h.covered?queueMicrotask(()=>{Wi.success({title:"Extracted spectrum retrieved"})}):queueMicrotask(()=>{Wi.warning({title:"No spectrum available",description:"No spectrum is available at the selected position."})}))},[h]),y.jsxs(kt,{gap:3,children:[y.jsx(Qi,{size:"sm",as:"h3",children:"Extraction Parameters"}),y.jsxs(ht,{gap:3,children:[y.jsx(ut,{textStyle:"sm",children:"Aperture Size:"}),y.jsx(ce,{size:"sm",maxW:"60px",value:n.toString(),onValueChange:({valueAsNumber:p})=>{t(p)},children:y.jsx(ue,{placeholder:n.toString()})}),y.jsx(ut,{textStyle:"sm",children:"Wave (m):"}),y.jsx(ce,{size:"sm",maxW:"60px",value:e.min.toString(),onValueChange:({valueAsNumber:p})=>{i({min:p})},children:y.jsx(ue,{placeholder:e.min.toString()})}),y.jsx(ut,{textStyle:"sm",children:"~"}),y.jsx(ce,{size:"sm",maxW:"60px",value:e.max.toString(),onValueChange:({valueAsNumber:p})=>{i({max:p})},children:y.jsx(ue,{placeholder:e.max.toString()})})]}),y.jsx(ht,{gap:3,justify:"flex-end",children:y.jsx(hr,{ids:{trigger:a},content:"Retrieve extracted spectrum with settings after last confirmation",children:y.jsx(Fn,{size:"sm",onClick:f,variant:"solid",loading:u,children:"Extract"})})})]})}function D8(){return y.jsxs(ht,{align:"start",gap:20,width:"max-content",height:"100%",wrap:"nowrap",children:[y.jsxs(fe,{position:"relative",children:[y.jsx(r8,{}),y.jsx(Og,{position:"absolute",buttonPosition:"top-left",top:"8px",left:"8px",children:y.jsx(o8,{})})]}),y.jsxs(fe,{position:"relative",children:[y.jsx(p8,{}),y.jsx(Og,{position:"absolute",buttonPosition:"top-left",top:"8px",left:"8px",children:y.jsx(k8,{})})]})]})}class I8 extends Hn{renderFrame(t,e){const{centerX:i,centerY:s,initialRadius:r}=e,a=r*t.scale;this.clear(),this.circle(i,s,a).stroke({color:0,width:1})}}rn({GlobeBackgroundGraphics:I8});function B8({layerRef:n}){const t=Ft(s=>s.globeBackground),e=A.useRef(null);A.useEffect(()=>{const s=n.current,r=e.current;if(!(!s||!r))return s.attach(r),r.zIndex=0,()=>{s.detach(r)}},[n]);const i=A.useRef(Ft.getState().view);return A.useEffect(()=>Ft.subscribe(s=>{i.current=s.view}),[]),gd(()=>{e.current&&e.current.renderFrame(i.current,t)}),y.jsx("pixiGlobeBackgroundGraphics",{ref:e})}const ow=2;class L8 extends Hn{currentRAStep=-1;currentDecStep=-1;gridLines=[];getRAStep(t){return t<1.5?45:t<4?30:t<10?20:t<50?10:t<150?2:1}getDecStep(t){return t<1.5?30:t<4?15:t<10?10:t<50?5:t<150?1:.5}regenerateGridLines(t,e){this.gridLines=[];for(let i=0;i<360;i+=t){const s=[];for(let r=-90;r<=90;r+=ow)s.push({ra:i,dec:r});this.gridLines.push(s)}for(let i=-90;i<=90;i+=e){if(Math.abs(i)===90)continue;const s=[];for(let r=0;r<360;r+=ow)s.push({ra:r,dec:i});this.gridLines.push(s)}this.currentRAStep=t,this.currentDecStep=e}renderFrame(t,e){const{centerX:i,centerY:s,initialRadius:r}=e,a=this.getRAStep(t.scale),l=this.getDecStep(t.scale);(a!==this.currentRAStep||l!==this.currentDecStep)&&this.regenerateGridLines(a,l),this.clear();for(const u of this.gridLines){let h=!1;for(let f=0;f<u.length;f++){const p=u[f],g=cT(p.ra,p.dec,t.yawDeg,t.pitchDeg);if(!g.visible){h=!1;continue}const x=uT(g,i,s,t.scale,r);h?this.lineTo(x.x,x.y):(this.moveTo(x.x,x.y),h=!0)}}this.stroke({color:2236962,width:1,alpha:.5})}}rn({GraticuleGraphics:L8});function F8({layerRef:n}){const t=Ft(s=>s.globeBackground),e=A.useRef(null);A.useEffect(()=>{const s=n.current,r=e.current;if(!(!s||!r))return s.attach(r),r.zIndex=1,()=>{s.detach(r)}},[n]);const i=A.useRef(Ft.getState().view);return A.useEffect(()=>Ft.subscribe(s=>{i.current=s.view}),[]),gd(()=>{e.current&&e.current.renderFrame(i.current,t)}),y.jsx("pixiGraticuleGraphics",{ref:e})}function bs(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function MT(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.__proto__=t}var Ln={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},bo={duration:.5,overwrite:!1,delay:0},Fy,Ve,ae,li=1e8,$t=1/li,px=Math.PI*2,H8=px/4,U8=0,PT=Math.sqrt,G8=Math.cos,V8=Math.sin,Fe=function(t){return typeof t=="string"},_e=function(t){return typeof t=="function"},ks=function(t){return typeof t=="number"},Hy=function(t){return typeof t>"u"},Zi=function(t){return typeof t=="object"},pn=function(t){return t!==!1},Uy=function(){return typeof window<"u"},qu=function(t){return _e(t)||Fe(t)},AT=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Qe=Array.isArray,mx=/(?:-?\.?\d|\.)+/gi,TT=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,to=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,cm=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,ET=/[+-]=-?[.\d]+/,RT=/[^,'"\[\]\s]+/gi,W8=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,le,Gi,gx,Gy,Gn={},Eh={},jT,kT=function(t){return(Eh=wo(t,Gn))&&yn},Vy=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},ic=function(t,e){return!e&&console.warn(t)},NT=function(t,e){return t&&(Gn[t]=e)&&Eh&&(Eh[t]=e)||Gn},sc=function(){return 0},Y8={suppressEvents:!0,isStart:!0,kill:!1},lh={suppressEvents:!0,kill:!1},q8={suppressEvents:!0},Wy={},dr=[],xx={},OT,On={},um={},lw=30,ch=[],Yy="",qy=function(t){var e=t[0],i,s;if(Zi(e)||_e(e)||(t=[t]),!(i=(e._gsap||{}).harness)){for(s=ch.length;s--&&!ch[s].targetTest(e););i=ch[s]}for(s=t.length;s--;)t[s]&&(t[s]._gsap||(t[s]._gsap=new sE(t[s],i)))||t.splice(s,1);return t},ra=function(t){return t._gsap||qy(ci(t))[0]._gsap},zT=function(t,e,i){return(i=t[e])&&_e(i)?t[e]():Hy(i)&&t.getAttribute&&t.getAttribute(e)||i},mn=function(t,e){return(t=t.split(",")).forEach(e)||t},Ce=function(t){return Math.round(t*1e5)/1e5||0},Ee=function(t){return Math.round(t*1e7)/1e7||0},oo=function(t,e){var i=e.charAt(0),s=parseFloat(e.substr(2));return t=parseFloat(t),i==="+"?t+s:i==="-"?t-s:i==="*"?t*s:t/s},X8=function(t,e){for(var i=e.length,s=0;t.indexOf(e[s])<0&&++s<i;);return s<i},Rh=function(){var t=dr.length,e=dr.slice(0),i,s;for(xx={},dr.length=0,i=0;i<t;i++)s=e[i],s&&s._lazy&&(s.render(s._lazy[0],s._lazy[1],!0)._lazy=0)},Xy=function(t){return!!(t._initted||t._startAt||t.add)},DT=function(t,e,i,s){dr.length&&!Ve&&Rh(),t.render(e,i,!!(Ve&&e<0&&Xy(t))),dr.length&&!Ve&&Rh()},IT=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(RT).length<2?e:Fe(t)?t.trim():t},BT=function(t){return t},Vn=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},$8=function(t){return function(e,i){for(var s in i)s in e||s==="duration"&&t||s==="ease"||(e[s]=i[s])}},wo=function(t,e){for(var i in e)t[i]=e[i];return t},cw=function n(t,e){for(var i in e)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(t[i]=Zi(e[i])?n(t[i]||(t[i]={}),e[i]):e[i]);return t},jh=function(t,e){var i={},s;for(s in t)s in e||(i[s]=t[s]);return i},Fl=function(t){var e=t.parent||le,i=t.keyframes?$8(Qe(t.keyframes)):Vn;if(pn(t.inherit))for(;e;)i(t,e.vars.defaults),e=e.parent||e._dp;return t},Q8=function(t,e){for(var i=t.length,s=i===e.length;s&&i--&&t[i]===e[i];);return i<0},LT=function(t,e,i,s,r){var a=t[s],l;if(r)for(l=e[r];a&&a[r]>l;)a=a._prev;return a?(e._next=a._next,a._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[s]=e,e._prev=a,e.parent=e._dp=t,e},Cd=function(t,e,i,s){i===void 0&&(i="_first"),s===void 0&&(s="_last");var r=e._prev,a=e._next;r?r._next=a:t[i]===e&&(t[i]=a),a?a._prev=r:t[s]===e&&(t[s]=r),e._next=e._prev=e.parent=null},br=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},aa=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},K8=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},yx=function(t,e,i,s){return t._startAt&&(Ve?t._startAt.revert(lh):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,s))},Z8=function n(t){return!t||t._ts&&n(t.parent)},uw=function(t){return t._repeat?So(t._tTime,t=t.duration()+t._rDelay)*t:0},So=function(t,e){var i=Math.floor(t=Ee(t/e));return t&&i===t?i-1:i},kh=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Md=function(t){return t._end=Ee(t._start+(t._tDur/Math.abs(t._ts||t._rts||$t)||0))},Pd=function(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=Ee(i._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Md(t),i._dirty||aa(i,t)),t},FT=function(t,e){var i;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(i=kh(t.rawTime(),e),(!e._dur||zc(0,e.totalDuration(),i)-e._tTime>$t)&&e.render(i,!0)),aa(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-$t}},qi=function(t,e,i,s){return e.parent&&br(e),e._start=Ee((ks(i)?i:i||t!==le?ni(t,i,e):t._time)+e._delay),e._end=Ee(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),LT(t,e,"_first","_last",t._sort?"_start":0),vx(e)||(t._recent=e),s||FT(t,e),t._ts<0&&Pd(t,t._tTime),t},HT=function(t,e){return(Gn.ScrollTrigger||Vy("scrollTrigger",e))&&Gn.ScrollTrigger.create(e,t)},UT=function(t,e,i,s,r){if(Qy(t,e,r),!t._initted)return 1;if(!i&&t._pt&&!Ve&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&OT!==zn.frame)return dr.push(t),t._lazy=[r,s],1},J8=function n(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||n(e))},vx=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},tF=function(t,e,i,s){var r=t.ratio,a=e<0||!e&&(!t._start&&J8(t)&&!(!t._initted&&vx(t))||(t._ts<0||t._dp._ts<0)&&!vx(t))?0:1,l=t._rDelay,u=0,h,f,p;if(l&&t._repeat&&(u=zc(0,t._tDur,e),f=So(u,l),t._yoyo&&f&1&&(a=1-a),f!==So(t._tTime,l)&&(r=1-a,t.vars.repeatRefresh&&t._initted&&t.invalidate())),a!==r||Ve||s||t._zTime===$t||!e&&t._zTime){if(!t._initted&&UT(t,e,s,i,u))return;for(p=t._zTime,t._zTime=e||(i?$t:0),i||(i=e&&!p),t.ratio=a,t._from&&(a=1-a),t._time=0,t._tTime=u,h=t._pt;h;)h.r(a,h.d),h=h._next;e<0&&yx(t,e,i,!0),t._onUpdate&&!i&&In(t,"onUpdate"),u&&t._repeat&&!i&&t.parent&&In(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===a&&(a&&br(t,1),!i&&!Ve&&(In(t,a?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},eF=function(t,e,i){var s;if(i>e)for(s=t._first;s&&s._start<=i;){if(s.data==="isPause"&&s._start>e)return s;s=s._next}else for(s=t._last;s&&s._start>=i;){if(s.data==="isPause"&&s._start<e)return s;s=s._prev}},Co=function(t,e,i,s){var r=t._repeat,a=Ee(e)||0,l=t._tTime/t._tDur;return l&&!s&&(t._time*=a/t._dur),t._dur=a,t._tDur=r?r<0?1e10:Ee(a*(r+1)+t._rDelay*r):a,l>0&&!s&&Pd(t,t._tTime=t._tDur*l),t.parent&&Md(t),i||aa(t.parent,t),t},hw=function(t){return t instanceof tn?aa(t):Co(t,t._dur)},nF={_start:0,endTime:sc,totalDuration:sc},ni=function n(t,e,i){var s=t.labels,r=t._recent||nF,a=t.duration()>=li?r.endTime(!1):t._dur,l,u,h;return Fe(e)&&(isNaN(e)||e in s)?(u=e.charAt(0),h=e.substr(-1)==="%",l=e.indexOf("="),u==="<"||u===">"?(l>=0&&(e=e.replace(/=/,"")),(u==="<"?r._start:r.endTime(r._repeat>=0))+(parseFloat(e.substr(1))||0)*(h?(l<0?r:i).totalDuration()/100:1)):l<0?(e in s||(s[e]=a),s[e]):(u=parseFloat(e.charAt(l-1)+e.substr(l+1)),h&&i&&(u=u/100*(Qe(i)?i[0]:i).totalDuration()),l>1?n(t,e.substr(0,l-1),i)+u:a+u)):e==null?a:+e},Hl=function(t,e,i){var s=ks(e[1]),r=(s?2:1)+(t<2?0:1),a=e[r],l,u;if(s&&(a.duration=e[1]),a.parent=i,t){for(l=a,u=i;u&&!("immediateRender"in l);)l=u.vars.defaults||{},u=pn(u.vars.inherit)&&u.parent;a.immediateRender=pn(l.immediateRender),t<2?a.runBackwards=1:a.startAt=e[r-1]}return new Te(e[0],a,e[r+1])},Mr=function(t,e){return t||t===0?e(t):e},zc=function(t,e,i){return i<t?t:i>e?e:i},$e=function(t,e){return!Fe(t)||!(e=W8.exec(t))?"":e[1]},iF=function(t,e,i){return Mr(i,function(s){return zc(t,e,s)})},_x=[].slice,GT=function(t,e){return t&&Zi(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&Zi(t[0]))&&!t.nodeType&&t!==Gi},sF=function(t,e,i){return i===void 0&&(i=[]),t.forEach(function(s){var r;return Fe(s)&&!e||GT(s,1)?(r=i).push.apply(r,ci(s)):i.push(s)})||i},ci=function(t,e,i){return ae&&!e&&ae.selector?ae.selector(t):Fe(t)&&!i&&(gx||!Mo())?_x.call((e||Gy).querySelectorAll(t),0):Qe(t)?sF(t,i):GT(t)?_x.call(t,0):t?[t]:[]},bx=function(t){return t=ci(t)[0]||ic("Invalid scope")||{},function(e){var i=t.current||t.nativeElement||t;return ci(e,i.querySelectorAll?i:i===t?ic("Invalid scope")||Gy.createElement("div"):t)}},VT=function(t){return t.sort(function(){return .5-Math.random()})},WT=function(t){if(_e(t))return t;var e=Zi(t)?t:{each:t},i=oa(e.ease),s=e.from||0,r=parseFloat(e.base)||0,a={},l=s>0&&s<1,u=isNaN(s)||l,h=e.axis,f=s,p=s;return Fe(s)?f=p={center:.5,edges:.5,end:1}[s]||0:!l&&u&&(f=s[0],p=s[1]),function(g,x,w){var _=(w||e).length,b=a[_],C,M,P,T,E,R,N,O,k;if(!b){if(k=e.grid==="auto"?0:(e.grid||[1,li])[1],!k){for(N=-li;N<(N=w[k++].getBoundingClientRect().left)&&k<_;);k<_&&k--}for(b=a[_]=[],C=u?Math.min(k,_)*f-.5:s%k,M=k===li?0:u?_*p/k-.5:s/k|0,N=0,O=li,R=0;R<_;R++)P=R%k-C,T=M-(R/k|0),b[R]=E=h?Math.abs(h==="y"?T:P):PT(P*P+T*T),E>N&&(N=E),E<O&&(O=E);s==="random"&&VT(b),b.max=N-O,b.min=O,b.v=_=(parseFloat(e.amount)||parseFloat(e.each)*(k>_?_-1:h?h==="y"?_/k:k:Math.max(k,_/k))||0)*(s==="edges"?-1:1),b.b=_<0?r-_:r,b.u=$e(e.amount||e.each)||0,i=i&&_<0?eE(i):i}return _=(b[g]-b.min)/b.max||0,Ee(b.b+(i?i(_):_)*b.v)+b.u}},wx=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var s=Ee(Math.round(parseFloat(i)/t)*t*e);return(s-s%1)/e+(ks(i)?0:$e(i))}},YT=function(t,e){var i=Qe(t),s,r;return!i&&Zi(t)&&(s=i=t.radius||li,t.values?(t=ci(t.values),(r=!ks(t[0]))&&(s*=s)):t=wx(t.increment)),Mr(e,i?_e(t)?function(a){return r=t(a),Math.abs(r-a)<=s?r:a}:function(a){for(var l=parseFloat(r?a.x:a),u=parseFloat(r?a.y:0),h=li,f=0,p=t.length,g,x;p--;)r?(g=t[p].x-l,x=t[p].y-u,g=g*g+x*x):g=Math.abs(t[p]-l),g<h&&(h=g,f=p);return f=!s||h<=s?t[f]:a,r||f===a||ks(a)?f:f+$e(a)}:wx(t))},qT=function(t,e,i,s){return Mr(Qe(t)?!e:i===!0?!!(i=0):!s,function(){return Qe(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(s=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+i*.99))/i)*i*s)/s})},rF=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(s){return e.reduce(function(r,a){return a(r)},s)}},aF=function(t,e){return function(i){return t(parseFloat(i))+(e||$e(i))}},oF=function(t,e,i){return $T(t,e,0,1,i)},XT=function(t,e,i){return Mr(i,function(s){return t[~~e(s)]})},lF=function n(t,e,i){var s=e-t;return Qe(t)?XT(t,n(0,t.length),e):Mr(i,function(r){return(s+(r-t)%s)%s+t})},cF=function n(t,e,i){var s=e-t,r=s*2;return Qe(t)?XT(t,n(0,t.length-1),e):Mr(i,function(a){return a=(r+(a-t)%r)%r||0,t+(a>s?r-a:a)})},rc=function(t){for(var e=0,i="",s,r,a,l;~(s=t.indexOf("random(",e));)a=t.indexOf(")",s),l=t.charAt(s+7)==="[",r=t.substr(s+7,a-s-7).match(l?RT:mx),i+=t.substr(e,s-e)+qT(l?r:+r[0],l?0:+r[1],+r[2]||1e-5),e=a+1;return i+t.substr(e,t.length-e)},$T=function(t,e,i,s,r){var a=e-t,l=s-i;return Mr(r,function(u){return i+((u-t)/a*l||0)})},uF=function n(t,e,i,s){var r=isNaN(t+e)?0:function(x){return(1-x)*t+x*e};if(!r){var a=Fe(t),l={},u,h,f,p,g;if(i===!0&&(s=1)&&(i=null),a)t={p:t},e={p:e};else if(Qe(t)&&!Qe(e)){for(f=[],p=t.length,g=p-2,h=1;h<p;h++)f.push(n(t[h-1],t[h]));p--,r=function(w){w*=p;var _=Math.min(g,~~w);return f[_](w-_)},i=e}else s||(t=wo(Qe(t)?[]:{},t));if(!f){for(u in e)$y.call(l,t,u,"get",e[u]);r=function(w){return Jy(w,l)||(a?t.p:t)}}}return Mr(i,r)},dw=function(t,e,i){var s=t.labels,r=li,a,l,u;for(a in s)l=s[a]-e,l<0==!!i&&l&&r>(l=Math.abs(l))&&(u=a,r=l);return u},In=function(t,e,i){var s=t.vars,r=s[e],a=ae,l=t._ctx,u,h,f;if(r)return u=s[e+"Params"],h=s.callbackScope||t,i&&dr.length&&Rh(),l&&(ae=l),f=u?r.apply(h,u):r.call(h),ae=a,f},jl=function(t){return br(t),t.scrollTrigger&&t.scrollTrigger.kill(!!Ve),t.progress()<1&&In(t,"onInterrupt"),t},eo,QT=[],KT=function(t){if(t)if(t=!t.name&&t.default||t,Uy()||t.headless){var e=t.name,i=_e(t),s=e&&!i&&t.init?function(){this._props=[]}:t,r={init:sc,render:Jy,add:$y,kill:PF,modifier:MF,rawVars:0},a={targetTest:0,get:0,getSetter:Zy,aliases:{},register:0};if(Mo(),t!==s){if(On[e])return;Vn(s,Vn(jh(t,r),a)),wo(s.prototype,wo(r,jh(t,a))),On[s.prop=e]=s,t.targetTest&&(ch.push(s),Wy[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}NT(e,s),t.register&&t.register(yn,s,gn)}else QT.push(t)},Xt=255,kl={aqua:[0,Xt,Xt],lime:[0,Xt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Xt],navy:[0,0,128],white:[Xt,Xt,Xt],olive:[128,128,0],yellow:[Xt,Xt,0],orange:[Xt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Xt,0,0],pink:[Xt,192,203],cyan:[0,Xt,Xt],transparent:[Xt,Xt,Xt,0]},hm=function(t,e,i){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(i-e)*t*6:t<.5?i:t*3<2?e+(i-e)*(2/3-t)*6:e)*Xt+.5|0},ZT=function(t,e,i){var s=t?ks(t)?[t>>16,t>>8&Xt,t&Xt]:0:kl.black,r,a,l,u,h,f,p,g,x,w;if(!s){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),kl[t])s=kl[t];else if(t.charAt(0)==="#"){if(t.length<6&&(r=t.charAt(1),a=t.charAt(2),l=t.charAt(3),t="#"+r+r+a+a+l+l+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return s=parseInt(t.substr(1,6),16),[s>>16,s>>8&Xt,s&Xt,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),s=[t>>16,t>>8&Xt,t&Xt]}else if(t.substr(0,3)==="hsl"){if(s=w=t.match(mx),!e)u=+s[0]%360/360,h=+s[1]/100,f=+s[2]/100,a=f<=.5?f*(h+1):f+h-f*h,r=f*2-a,s.length>3&&(s[3]*=1),s[0]=hm(u+1/3,r,a),s[1]=hm(u,r,a),s[2]=hm(u-1/3,r,a);else if(~t.indexOf("="))return s=t.match(TT),i&&s.length<4&&(s[3]=1),s}else s=t.match(mx)||kl.transparent;s=s.map(Number)}return e&&!w&&(r=s[0]/Xt,a=s[1]/Xt,l=s[2]/Xt,p=Math.max(r,a,l),g=Math.min(r,a,l),f=(p+g)/2,p===g?u=h=0:(x=p-g,h=f>.5?x/(2-p-g):x/(p+g),u=p===r?(a-l)/x+(a<l?6:0):p===a?(l-r)/x+2:(r-a)/x+4,u*=60),s[0]=~~(u+.5),s[1]=~~(h*100+.5),s[2]=~~(f*100+.5)),i&&s.length<4&&(s[3]=1),s},JT=function(t){var e=[],i=[],s=-1;return t.split(fr).forEach(function(r){var a=r.match(to)||[];e.push.apply(e,a),i.push(s+=a.length+1)}),e.c=i,e},fw=function(t,e,i){var s="",r=(t+s).match(fr),a=e?"hsla(":"rgba(",l=0,u,h,f,p;if(!r)return t;if(r=r.map(function(g){return(g=ZT(g,e,1))&&a+(e?g[0]+","+g[1]+"%,"+g[2]+"%,"+g[3]:g.join(","))+")"}),i&&(f=JT(t),u=i.c,u.join(s)!==f.c.join(s)))for(h=t.replace(fr,"1").split(to),p=h.length-1;l<p;l++)s+=h[l]+(~u.indexOf(l)?r.shift()||a+"0,0,0,0)":(f.length?f:r.length?r:i).shift());if(!h)for(h=t.split(fr),p=h.length-1;l<p;l++)s+=h[l]+r[l];return s+h[p]},fr=(function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in kl)n+="|"+t+"\\b";return new RegExp(n+")","gi")})(),hF=/hsl[a]?\(/,tE=function(t){var e=t.join(" "),i;if(fr.lastIndex=0,fr.test(e))return i=hF.test(e),t[1]=fw(t[1],i),t[0]=fw(t[0],i,JT(t[1])),!0},ac,zn=(function(){var n=Date.now,t=500,e=33,i=n(),s=i,r=1e3/240,a=r,l=[],u,h,f,p,g,x,w=function _(b){var C=n()-s,M=b===!0,P,T,E,R;if((C>t||C<0)&&(i+=C-e),s+=C,E=s-i,P=E-a,(P>0||M)&&(R=++p.frame,g=E-p.time*1e3,p.time=E=E/1e3,a+=P+(P>=r?4:r-P),T=1),M||(u=h(_)),T)for(x=0;x<l.length;x++)l[x](E,g,R,b)};return p={time:0,frame:0,tick:function(){w(!0)},deltaRatio:function(b){return g/(1e3/(b||60))},wake:function(){jT&&(!gx&&Uy()&&(Gi=gx=window,Gy=Gi.document||{},Gn.gsap=yn,(Gi.gsapVersions||(Gi.gsapVersions=[])).push(yn.version),kT(Eh||Gi.GreenSockGlobals||!Gi.gsap&&Gi||{}),QT.forEach(KT)),f=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&p.sleep(),h=f||function(b){return setTimeout(b,a-p.time*1e3+1|0)},ac=1,w(2))},sleep:function(){(f?cancelAnimationFrame:clearTimeout)(u),ac=0,h=sc},lagSmoothing:function(b,C){t=b||1/0,e=Math.min(C||33,t)},fps:function(b){r=1e3/(b||240),a=p.time*1e3+r},add:function(b,C,M){var P=C?function(T,E,R,N){b(T,E,R,N),p.remove(P)}:b;return p.remove(b),l[M?"unshift":"push"](P),Mo(),P},remove:function(b,C){~(C=l.indexOf(b))&&l.splice(C,1)&&x>=C&&x--},_listeners:l},p})(),Mo=function(){return!ac&&zn.wake()},Et={},dF=/^[\d.\-M][\d.\-,\s]/,fF=/["']/g,pF=function(t){for(var e={},i=t.substr(1,t.length-3).split(":"),s=i[0],r=1,a=i.length,l,u,h;r<a;r++)u=i[r],l=r!==a-1?u.lastIndexOf(","):u.length,h=u.substr(0,l),e[s]=isNaN(h)?h.replace(fF,"").trim():+h,s=u.substr(l+1).trim();return e},mF=function(t){var e=t.indexOf("(")+1,i=t.indexOf(")"),s=t.indexOf("(",e);return t.substring(e,~s&&s<i?t.indexOf(")",i+1):i)},gF=function(t){var e=(t+"").split("("),i=Et[e[0]];return i&&e.length>1&&i.config?i.config.apply(null,~t.indexOf("{")?[pF(e[1])]:mF(t).split(",").map(IT)):Et._CE&&dF.test(t)?Et._CE("",t):i},eE=function(t){return function(e){return 1-t(1-e)}},nE=function n(t,e){for(var i=t._first,s;i;)i instanceof tn?n(i,e):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==e&&(i.timeline?n(i.timeline,e):(s=i._ease,i._ease=i._yEase,i._yEase=s,i._yoyo=e)),i=i._next},oa=function(t,e){return t&&(_e(t)?t:Et[t]||gF(t))||e},_a=function(t,e,i,s){i===void 0&&(i=function(u){return 1-e(1-u)}),s===void 0&&(s=function(u){return u<.5?e(u*2)/2:1-e((1-u)*2)/2});var r={easeIn:e,easeOut:i,easeInOut:s},a;return mn(t,function(l){Et[l]=Gn[l]=r,Et[a=l.toLowerCase()]=i;for(var u in r)Et[a+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=Et[l+"."+u]=r[u]}),r},iE=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},dm=function n(t,e,i){var s=e>=1?e:1,r=(i||(t?.3:.45))/(e<1?e:1),a=r/px*(Math.asin(1/s)||0),l=function(f){return f===1?1:s*Math.pow(2,-10*f)*V8((f-a)*r)+1},u=t==="out"?l:t==="in"?function(h){return 1-l(1-h)}:iE(l);return r=px/r,u.config=function(h,f){return n(t,h,f)},u},fm=function n(t,e){e===void 0&&(e=1.70158);var i=function(a){return a?--a*a*((e+1)*a+e)+1:0},s=t==="out"?i:t==="in"?function(r){return 1-i(1-r)}:iE(i);return s.config=function(r){return n(t,r)},s};mn("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,t){var e=t<5?t+1:t;_a(n+",Power"+(e-1),t?function(i){return Math.pow(i,e)}:function(i){return i},function(i){return 1-Math.pow(1-i,e)},function(i){return i<.5?Math.pow(i*2,e)/2:1-Math.pow((1-i)*2,e)/2})});Et.Linear.easeNone=Et.none=Et.Linear.easeIn;_a("Elastic",dm("in"),dm("out"),dm());(function(n,t){var e=1/t,i=2*e,s=2.5*e,r=function(l){return l<e?n*l*l:l<i?n*Math.pow(l-1.5/t,2)+.75:l<s?n*(l-=2.25/t)*l+.9375:n*Math.pow(l-2.625/t,2)+.984375};_a("Bounce",function(a){return 1-r(1-a)},r)})(7.5625,2.75);_a("Expo",function(n){return Math.pow(2,10*(n-1))*n+n*n*n*n*n*n*(1-n)});_a("Circ",function(n){return-(PT(1-n*n)-1)});_a("Sine",function(n){return n===1?1:-G8(n*H8)+1});_a("Back",fm("in"),fm("out"),fm());Et.SteppedEase=Et.steps=Gn.SteppedEase={config:function(t,e){t===void 0&&(t=1);var i=1/t,s=t+(e?0:1),r=e?1:0,a=1-$t;return function(l){return((s*zc(0,a,l)|0)+r)*i}}};bo.ease=Et["quad.out"];mn("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return Yy+=n+","+n+"Params,"});var sE=function(t,e){this.id=U8++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:zT,this.set=e?e.getSetter:Zy},oc=(function(){function n(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Co(this,+e.duration,1,1),this.data=e.data,ae&&(this._ctx=ae,ae.data.push(this)),ac||zn.wake()}var t=n.prototype;return t.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},t.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},t.totalDuration=function(i){return arguments.length?(this._dirty=0,Co(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(i,s){if(Mo(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(Pd(this,i),!r._dp||r.parent||FT(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&qi(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!s||this._initted&&Math.abs(this._zTime)===$t||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),DT(this,i,s)),this},t.time=function(i,s){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+uw(this))%(this._dur+this._rDelay)||(i?this._dur:0),s):this._time},t.totalProgress=function(i,s){return arguments.length?this.totalTime(this.totalDuration()*i,s):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(i,s){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+uw(this),s):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(i,s){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*r,s):this._repeat?So(this._tTime,r)+1:1},t.timeScale=function(i,s){if(!arguments.length)return this._rts===-$t?0:this._rts;if(this._rts===i)return this;var r=this.parent&&this._ts?kh(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-$t?0:this._rts,this.totalTime(zc(-Math.abs(this._delay),this.totalDuration(),r),s!==!1),Md(this),K8(this)},t.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Mo(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==$t&&(this._tTime-=$t)))),this):this._ps},t.startTime=function(i){if(arguments.length){this._start=i;var s=this.parent||this._dp;return s&&(s._sort||!this.parent)&&qi(s,this,i-this._delay),this}return this._start},t.endTime=function(i){return this._start+(pn(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(i){var s=this.parent||this._dp;return s?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?kh(s.rawTime(i),this):this._tTime:this._tTime},t.revert=function(i){i===void 0&&(i=q8);var s=Ve;return Ve=i,Xy(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),Ve=s,this},t.globalTime=function(i){for(var s=this,r=arguments.length?i:s.rawTime();s;)r=s._start+r/(Math.abs(s._ts)||1),s=s._dp;return!this.parent&&this._sat?this._sat.globalTime(i):r},t.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,hw(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(i){if(arguments.length){var s=this._time;return this._rDelay=i,hw(this),s?this.time(s):this}return this._rDelay},t.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},t.seek=function(i,s){return this.totalTime(ni(this,i),pn(s))},t.restart=function(i,s){return this.play().totalTime(i?-this._delay:0,pn(s)),this._dur||(this._zTime=-$t),this},t.play=function(i,s){return i!=null&&this.seek(i,s),this.reversed(!1).paused(!1)},t.reverse=function(i,s){return i!=null&&this.seek(i||this.totalDuration(),s),this.reversed(!0).paused(!1)},t.pause=function(i,s){return i!=null&&this.seek(i,s),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-$t:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-$t,this},t.isActive=function(){var i=this.parent||this._dp,s=this._start,r;return!!(!i||this._ts&&this._initted&&i.isActive()&&(r=i.rawTime(!0))>=s&&r<this.endTime(!0)-$t)},t.eventCallback=function(i,s,r){var a=this.vars;return arguments.length>1?(s?(a[i]=s,r&&(a[i+"Params"]=r),i==="onUpdate"&&(this._onUpdate=s)):delete a[i],this):a[i]},t.then=function(i){var s=this;return new Promise(function(r){var a=_e(i)?i:BT,l=function(){var h=s.then;s.then=null,_e(a)&&(a=a(s))&&(a.then||a===s)&&(s.then=h),r(a),s.then=h};s._initted&&s.totalProgress()===1&&s._ts>=0||!s._tTime&&s._ts<0?l():s._prom=l})},t.kill=function(){jl(this)},n})();Vn(oc.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-$t,_prom:0,_ps:!1,_rts:1});var tn=(function(n){MT(t,n);function t(i,s){var r;return i===void 0&&(i={}),r=n.call(this,i)||this,r.labels={},r.smoothChildTiming=!!i.smoothChildTiming,r.autoRemoveChildren=!!i.autoRemoveChildren,r._sort=pn(i.sortChildren),le&&qi(i.parent||le,bs(r),s),i.reversed&&r.reverse(),i.paused&&r.paused(!0),i.scrollTrigger&&HT(bs(r),i.scrollTrigger),r}var e=t.prototype;return e.to=function(s,r,a){return Hl(0,arguments,this),this},e.from=function(s,r,a){return Hl(1,arguments,this),this},e.fromTo=function(s,r,a,l){return Hl(2,arguments,this),this},e.set=function(s,r,a){return r.duration=0,r.parent=this,Fl(r).repeatDelay||(r.repeat=0),r.immediateRender=!!r.immediateRender,new Te(s,r,ni(this,a),1),this},e.call=function(s,r,a){return qi(this,Te.delayedCall(0,s,r),a)},e.staggerTo=function(s,r,a,l,u,h,f){return a.duration=r,a.stagger=a.stagger||l,a.onComplete=h,a.onCompleteParams=f,a.parent=this,new Te(s,a,ni(this,u)),this},e.staggerFrom=function(s,r,a,l,u,h,f){return a.runBackwards=1,Fl(a).immediateRender=pn(a.immediateRender),this.staggerTo(s,r,a,l,u,h,f)},e.staggerFromTo=function(s,r,a,l,u,h,f,p){return l.startAt=a,Fl(l).immediateRender=pn(l.immediateRender),this.staggerTo(s,r,l,u,h,f,p)},e.render=function(s,r,a){var l=this._time,u=this._dirty?this.totalDuration():this._tDur,h=this._dur,f=s<=0?0:Ee(s),p=this._zTime<0!=s<0&&(this._initted||!h),g,x,w,_,b,C,M,P,T,E,R,N;if(this!==le&&f>u&&s>=0&&(f=u),f!==this._tTime||a||p){if(l!==this._time&&h&&(f+=this._time-l,s+=this._time-l),g=f,T=this._start,P=this._ts,C=!P,p&&(h||(l=this._zTime),(s||!r)&&(this._zTime=s)),this._repeat){if(R=this._yoyo,b=h+this._rDelay,this._repeat<-1&&s<0)return this.totalTime(b*100+s,r,a);if(g=Ee(f%b),f===u?(_=this._repeat,g=h):(E=Ee(f/b),_=~~E,_&&_===E&&(g=h,_--),g>h&&(g=h)),E=So(this._tTime,b),!l&&this._tTime&&E!==_&&this._tTime-E*b-this._dur<=0&&(E=_),R&&_&1&&(g=h-g,N=1),_!==E&&!this._lock){var O=R&&E&1,k=O===(R&&_&1);if(_<E&&(O=!O),l=O?0:f%h?h:f,this._lock=1,this.render(l||(N?0:Ee(_*b)),r,!h)._lock=0,this._tTime=f,!r&&this.parent&&In(this,"onRepeat"),this.vars.repeatRefresh&&!N&&(this.invalidate()._lock=1),l&&l!==this._time||C!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(h=this._dur,u=this._tDur,k&&(this._lock=2,l=O?h:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!N&&this.invalidate()),this._lock=0,!this._ts&&!C)return this;nE(this,N)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(M=eF(this,Ee(l),Ee(g)),M&&(f-=g-(g=M._start))),this._tTime=f,this._time=g,this._act=!P,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=s,l=0),!l&&f&&!r&&!E&&(In(this,"onStart"),this._tTime!==f))return this;if(g>=l&&s>=0)for(x=this._first;x;){if(w=x._next,(x._act||g>=x._start)&&x._ts&&M!==x){if(x.parent!==this)return this.render(s,r,a);if(x.render(x._ts>0?(g-x._start)*x._ts:(x._dirty?x.totalDuration():x._tDur)+(g-x._start)*x._ts,r,a),g!==this._time||!this._ts&&!C){M=0,w&&(f+=this._zTime=-$t);break}}x=w}else{x=this._last;for(var B=s<0?s:g;x;){if(w=x._prev,(x._act||B<=x._end)&&x._ts&&M!==x){if(x.parent!==this)return this.render(s,r,a);if(x.render(x._ts>0?(B-x._start)*x._ts:(x._dirty?x.totalDuration():x._tDur)+(B-x._start)*x._ts,r,a||Ve&&Xy(x)),g!==this._time||!this._ts&&!C){M=0,w&&(f+=this._zTime=B?-$t:$t);break}}x=w}}if(M&&!r&&(this.pause(),M.render(g>=l?0:-$t)._zTime=g>=l?1:-1,this._ts))return this._start=T,Md(this),this.render(s,r,a);this._onUpdate&&!r&&In(this,"onUpdate",!0),(f===u&&this._tTime>=this.totalDuration()||!f&&l)&&(T===this._start||Math.abs(P)!==Math.abs(this._ts))&&(this._lock||((s||!h)&&(f===u&&this._ts>0||!f&&this._ts<0)&&br(this,1),!r&&!(s<0&&!l)&&(f||l||!u)&&(In(this,f===u&&s>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(f<u&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(s,r){var a=this;if(ks(r)||(r=ni(this,r,s)),!(s instanceof oc)){if(Qe(s))return s.forEach(function(l){return a.add(l,r)}),this;if(Fe(s))return this.addLabel(s,r);if(_e(s))s=Te.delayedCall(0,s);else return this}return this!==s?qi(this,s,r):this},e.getChildren=function(s,r,a,l){s===void 0&&(s=!0),r===void 0&&(r=!0),a===void 0&&(a=!0),l===void 0&&(l=-li);for(var u=[],h=this._first;h;)h._start>=l&&(h instanceof Te?r&&u.push(h):(a&&u.push(h),s&&u.push.apply(u,h.getChildren(!0,r,a)))),h=h._next;return u},e.getById=function(s){for(var r=this.getChildren(1,1,1),a=r.length;a--;)if(r[a].vars.id===s)return r[a]},e.remove=function(s){return Fe(s)?this.removeLabel(s):_e(s)?this.killTweensOf(s):(s.parent===this&&Cd(this,s),s===this._recent&&(this._recent=this._last),aa(this))},e.totalTime=function(s,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ee(zn.time-(this._ts>0?s/this._ts:(this.totalDuration()-s)/-this._ts))),n.prototype.totalTime.call(this,s,r),this._forcing=0,this):this._tTime},e.addLabel=function(s,r){return this.labels[s]=ni(this,r),this},e.removeLabel=function(s){return delete this.labels[s],this},e.addPause=function(s,r,a){var l=Te.delayedCall(0,r||sc,a);return l.data="isPause",this._hasPause=1,qi(this,l,ni(this,s))},e.removePause=function(s){var r=this._first;for(s=ni(this,s);r;)r._start===s&&r.data==="isPause"&&br(r),r=r._next},e.killTweensOf=function(s,r,a){for(var l=this.getTweensOf(s,a),u=l.length;u--;)ar!==l[u]&&l[u].kill(s,r);return this},e.getTweensOf=function(s,r){for(var a=[],l=ci(s),u=this._first,h=ks(r),f;u;)u instanceof Te?X8(u._targets,l)&&(h?(!ar||u._initted&&u._ts)&&u.globalTime(0)<=r&&u.globalTime(u.totalDuration())>r:!r||u.isActive())&&a.push(u):(f=u.getTweensOf(l,r)).length&&a.push.apply(a,f),u=u._next;return a},e.tweenTo=function(s,r){r=r||{};var a=this,l=ni(a,s),u=r,h=u.startAt,f=u.onStart,p=u.onStartParams,g=u.immediateRender,x,w=Te.to(a,Vn({ease:r.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:r.duration||Math.abs((l-(h&&"time"in h?h.time:a._time))/a.timeScale())||$t,onStart:function(){if(a.pause(),!x){var b=r.duration||Math.abs((l-(h&&"time"in h?h.time:a._time))/a.timeScale());w._dur!==b&&Co(w,b,0,1).render(w._time,!0,!0),x=1}f&&f.apply(w,p||[])}},r));return g?w.render(0):w},e.tweenFromTo=function(s,r,a){return this.tweenTo(r,Vn({startAt:{time:ni(this,s)}},a))},e.recent=function(){return this._recent},e.nextLabel=function(s){return s===void 0&&(s=this._time),dw(this,ni(this,s))},e.previousLabel=function(s){return s===void 0&&(s=this._time),dw(this,ni(this,s),1)},e.currentLabel=function(s){return arguments.length?this.seek(s,!0):this.previousLabel(this._time+$t)},e.shiftChildren=function(s,r,a){a===void 0&&(a=0);for(var l=this._first,u=this.labels,h;l;)l._start>=a&&(l._start+=s,l._end+=s),l=l._next;if(r)for(h in u)u[h]>=a&&(u[h]+=s);return aa(this)},e.invalidate=function(s){var r=this._first;for(this._lock=0;r;)r.invalidate(s),r=r._next;return n.prototype.invalidate.call(this,s)},e.clear=function(s){s===void 0&&(s=!0);for(var r=this._first,a;r;)a=r._next,this.remove(r),r=a;return this._dp&&(this._time=this._tTime=this._pTime=0),s&&(this.labels={}),aa(this)},e.totalDuration=function(s){var r=0,a=this,l=a._last,u=li,h,f,p;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-s:s));if(a._dirty){for(p=a.parent;l;)h=l._prev,l._dirty&&l.totalDuration(),f=l._start,f>u&&a._sort&&l._ts&&!a._lock?(a._lock=1,qi(a,l,f-l._delay,1)._lock=0):u=f,f<0&&l._ts&&(r-=f,(!p&&!a._dp||p&&p.smoothChildTiming)&&(a._start+=f/a._ts,a._time-=f,a._tTime-=f),a.shiftChildren(-f,!1,-1/0),u=0),l._end>r&&l._ts&&(r=l._end),l=h;Co(a,a===le&&a._time>r?a._time:r,1,1),a._dirty=0}return a._tDur},t.updateRoot=function(s){if(le._ts&&(DT(le,kh(s,le)),OT=zn.frame),zn.frame>=lw){lw+=Ln.autoSleep||120;var r=le._first;if((!r||!r._ts)&&Ln.autoSleep&&zn._listeners.length<2){for(;r&&!r._ts;)r=r._next;r||zn.sleep()}}},t})(oc);Vn(tn.prototype,{_lock:0,_hasPause:0,_forcing:0});var xF=function(t,e,i,s,r,a,l){var u=new gn(this._pt,t,e,0,1,uE,null,r),h=0,f=0,p,g,x,w,_,b,C,M;for(u.b=i,u.e=s,i+="",s+="",(C=~s.indexOf("random("))&&(s=rc(s)),a&&(M=[i,s],a(M,t,e),i=M[0],s=M[1]),g=i.match(cm)||[];p=cm.exec(s);)w=p[0],_=s.substring(h,p.index),x?x=(x+1)%5:_.substr(-5)==="rgba("&&(x=1),w!==g[f++]&&(b=parseFloat(g[f-1])||0,u._pt={_next:u._pt,p:_||f===1?_:",",s:b,c:w.charAt(1)==="="?oo(b,w)-b:parseFloat(w)-b,m:x&&x<4?Math.round:0},h=cm.lastIndex);return u.c=h<s.length?s.substring(h,s.length):"",u.fp=l,(ET.test(s)||C)&&(u.e=0),this._pt=u,u},$y=function(t,e,i,s,r,a,l,u,h,f){_e(s)&&(s=s(r||0,t,a));var p=t[e],g=i!=="get"?i:_e(p)?h?t[e.indexOf("set")||!_e(t["get"+e.substr(3)])?e:"get"+e.substr(3)](h):t[e]():p,x=_e(p)?h?wF:lE:Ky,w;if(Fe(s)&&(~s.indexOf("random(")&&(s=rc(s)),s.charAt(1)==="="&&(w=oo(g,s)+($e(g)||0),(w||w===0)&&(s=w))),!f||g!==s||Sx)return!isNaN(g*s)&&s!==""?(w=new gn(this._pt,t,e,+g||0,s-(g||0),typeof p=="boolean"?CF:cE,0,x),h&&(w.fp=h),l&&w.modifier(l,this,t),this._pt=w):(!p&&!(e in t)&&Vy(e,s),xF.call(this,t,e,g,s,x,u||Ln.stringFilter,h))},yF=function(t,e,i,s,r){if(_e(t)&&(t=Ul(t,r,e,i,s)),!Zi(t)||t.style&&t.nodeType||Qe(t)||AT(t))return Fe(t)?Ul(t,r,e,i,s):t;var a={},l;for(l in t)a[l]=Ul(t[l],r,e,i,s);return a},rE=function(t,e,i,s,r,a){var l,u,h,f;if(On[t]&&(l=new On[t]).init(r,l.rawVars?e[t]:yF(e[t],s,r,a,i),i,s,a)!==!1&&(i._pt=u=new gn(i._pt,r,t,0,1,l.render,l,0,l.priority),i!==eo))for(h=i._ptLookup[i._targets.indexOf(r)],f=l._props.length;f--;)h[l._props[f]]=u;return l},ar,Sx,Qy=function n(t,e,i){var s=t.vars,r=s.ease,a=s.startAt,l=s.immediateRender,u=s.lazy,h=s.onUpdate,f=s.runBackwards,p=s.yoyoEase,g=s.keyframes,x=s.autoRevert,w=t._dur,_=t._startAt,b=t._targets,C=t.parent,M=C&&C.data==="nested"?C.vars.targets:b,P=t._overwrite==="auto"&&!Fy,T=t.timeline,E,R,N,O,k,B,I,X,q,U,Y,D,H;if(T&&(!g||!r)&&(r="none"),t._ease=oa(r,bo.ease),t._yEase=p?eE(oa(p===!0?r:p,bo.ease)):0,p&&t._yoyo&&!t._repeat&&(p=t._yEase,t._yEase=t._ease,t._ease=p),t._from=!T&&!!s.runBackwards,!T||g&&!s.stagger){if(X=b[0]?ra(b[0]).harness:0,D=X&&s[X.prop],E=jh(s,Wy),_&&(_._zTime<0&&_.progress(1),e<0&&f&&l&&!x?_.render(-1,!0):_.revert(f&&w?lh:Y8),_._lazy=0),a){if(br(t._startAt=Te.set(b,Vn({data:"isStart",overwrite:!1,parent:C,immediateRender:!0,lazy:!_&&pn(u),startAt:null,delay:0,onUpdate:h&&function(){return In(t,"onUpdate")},stagger:0},a))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(Ve||!l&&!x)&&t._startAt.revert(lh),l&&w&&e<=0&&i<=0){e&&(t._zTime=e);return}}else if(f&&w&&!_){if(e&&(l=!1),N=Vn({overwrite:!1,data:"isFromStart",lazy:l&&!_&&pn(u),immediateRender:l,stagger:0,parent:C},E),D&&(N[X.prop]=D),br(t._startAt=Te.set(b,N)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(Ve?t._startAt.revert(lh):t._startAt.render(-1,!0)),t._zTime=e,!l)n(t._startAt,$t,$t);else if(!e)return}for(t._pt=t._ptCache=0,u=w&&pn(u)||u&&!w,R=0;R<b.length;R++){if(k=b[R],I=k._gsap||qy(b)[R]._gsap,t._ptLookup[R]=U={},xx[I.id]&&dr.length&&Rh(),Y=M===b?R:M.indexOf(k),X&&(q=new X).init(k,D||E,t,Y,M)!==!1&&(t._pt=O=new gn(t._pt,k,q.name,0,1,q.render,q,0,q.priority),q._props.forEach(function(J){U[J]=O}),q.priority&&(B=1)),!X||D)for(N in E)On[N]&&(q=rE(N,E,t,Y,k,M))?q.priority&&(B=1):U[N]=O=$y.call(t,k,N,"get",E[N],Y,M,0,s.stringFilter);t._op&&t._op[R]&&t.kill(k,t._op[R]),P&&t._pt&&(ar=t,le.killTweensOf(k,U,t.globalTime(e)),H=!t.parent,ar=0),t._pt&&u&&(xx[I.id]=1)}B&&hE(t),t._onInit&&t._onInit(t)}t._onUpdate=h,t._initted=(!t._op||t._pt)&&!H,g&&e<=0&&T.render(li,!0,!0)},vF=function(t,e,i,s,r,a,l,u){var h=(t._pt&&t._ptCache||(t._ptCache={}))[e],f,p,g,x;if(!h)for(h=t._ptCache[e]=[],g=t._ptLookup,x=t._targets.length;x--;){if(f=g[x][e],f&&f.d&&f.d._pt)for(f=f.d._pt;f&&f.p!==e&&f.fp!==e;)f=f._next;if(!f)return Sx=1,t.vars[e]="+=0",Qy(t,l),Sx=0,u?ic(e+" not eligible for reset"):1;h.push(f)}for(x=h.length;x--;)p=h[x],f=p._pt||p,f.s=(s||s===0)&&!r?s:f.s+(s||0)+a*f.c,f.c=i-f.s,p.e&&(p.e=Ce(i)+$e(p.e)),p.b&&(p.b=f.s+$e(p.b))},_F=function(t,e){var i=t[0]?ra(t[0]).harness:0,s=i&&i.aliases,r,a,l,u;if(!s)return e;r=wo({},e);for(a in s)if(a in r)for(u=s[a].split(","),l=u.length;l--;)r[u[l]]=r[a];return r},bF=function(t,e,i,s){var r=e.ease||s||"power1.inOut",a,l;if(Qe(e))l=i[t]||(i[t]=[]),e.forEach(function(u,h){return l.push({t:h/(e.length-1)*100,v:u,e:r})});else for(a in e)l=i[a]||(i[a]=[]),a==="ease"||l.push({t:parseFloat(t),v:e[a],e:r})},Ul=function(t,e,i,s,r){return _e(t)?t.call(e,i,s,r):Fe(t)&&~t.indexOf("random(")?rc(t):t},aE=Yy+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",oE={};mn(aE+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return oE[n]=1});var Te=(function(n){MT(t,n);function t(i,s,r,a){var l;typeof s=="number"&&(r.duration=s,s=r,r=null),l=n.call(this,a?s:Fl(s))||this;var u=l.vars,h=u.duration,f=u.delay,p=u.immediateRender,g=u.stagger,x=u.overwrite,w=u.keyframes,_=u.defaults,b=u.scrollTrigger,C=u.yoyoEase,M=s.parent||le,P=(Qe(i)||AT(i)?ks(i[0]):"length"in s)?[i]:ci(i),T,E,R,N,O,k,B,I;if(l._targets=P.length?qy(P):ic("GSAP target "+i+" not found. https://gsap.com",!Ln.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=x,w||g||qu(h)||qu(f)){if(s=l.vars,T=l.timeline=new tn({data:"nested",defaults:_||{},targets:M&&M.data==="nested"?M.vars.targets:P}),T.kill(),T.parent=T._dp=bs(l),T._start=0,g||qu(h)||qu(f)){if(N=P.length,B=g&&WT(g),Zi(g))for(O in g)~aE.indexOf(O)&&(I||(I={}),I[O]=g[O]);for(E=0;E<N;E++)R=jh(s,oE),R.stagger=0,C&&(R.yoyoEase=C),I&&wo(R,I),k=P[E],R.duration=+Ul(h,bs(l),E,k,P),R.delay=(+Ul(f,bs(l),E,k,P)||0)-l._delay,!g&&N===1&&R.delay&&(l._delay=f=R.delay,l._start+=f,R.delay=0),T.to(k,R,B?B(E,k,P):0),T._ease=Et.none;T.duration()?h=f=0:l.timeline=0}else if(w){Fl(Vn(T.vars.defaults,{ease:"none"})),T._ease=oa(w.ease||s.ease||"none");var X=0,q,U,Y;if(Qe(w))w.forEach(function(D){return T.to(P,D,">")}),T.duration();else{R={};for(O in w)O==="ease"||O==="easeEach"||bF(O,w[O],R,w.easeEach);for(O in R)for(q=R[O].sort(function(D,H){return D.t-H.t}),X=0,E=0;E<q.length;E++)U=q[E],Y={ease:U.e,duration:(U.t-(E?q[E-1].t:0))/100*h},Y[O]=U.v,T.to(P,Y,X),X+=Y.duration;T.duration()<h&&T.to({},{duration:h-T.duration()})}}h||l.duration(h=T.duration())}else l.timeline=0;return x===!0&&!Fy&&(ar=bs(l),le.killTweensOf(P),ar=0),qi(M,bs(l),r),s.reversed&&l.reverse(),s.paused&&l.paused(!0),(p||!h&&!w&&l._start===Ee(M._time)&&pn(p)&&Z8(bs(l))&&M.data!=="nested")&&(l._tTime=-$t,l.render(Math.max(0,-f)||0)),b&&HT(bs(l),b),l}var e=t.prototype;return e.render=function(s,r,a){var l=this._time,u=this._tDur,h=this._dur,f=s<0,p=s>u-$t&&!f?u:s<$t?0:s,g,x,w,_,b,C,M,P,T;if(!h)tF(this,s,r,a);else if(p!==this._tTime||!s||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==f||this._lazy){if(g=p,P=this.timeline,this._repeat){if(_=h+this._rDelay,this._repeat<-1&&f)return this.totalTime(_*100+s,r,a);if(g=Ee(p%_),p===u?(w=this._repeat,g=h):(b=Ee(p/_),w=~~b,w&&w===b?(g=h,w--):g>h&&(g=h)),C=this._yoyo&&w&1,C&&(T=this._yEase,g=h-g),b=So(this._tTime,_),g===l&&!a&&this._initted&&w===b)return this._tTime=p,this;w!==b&&(P&&this._yEase&&nE(P,C),this.vars.repeatRefresh&&!C&&!this._lock&&g!==_&&this._initted&&(this._lock=a=1,this.render(Ee(_*w),!0).invalidate()._lock=0))}if(!this._initted){if(UT(this,f?s:g,a,r,p))return this._tTime=0,this;if(l!==this._time&&!(a&&this.vars.repeatRefresh&&w!==b))return this;if(h!==this._dur)return this.render(s,r,a)}if(this._tTime=p,this._time=g,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=M=(T||this._ease)(g/h),this._from&&(this.ratio=M=1-M),!l&&p&&!r&&!b&&(In(this,"onStart"),this._tTime!==p))return this;for(x=this._pt;x;)x.r(M,x.d),x=x._next;P&&P.render(s<0?s:P._dur*P._ease(g/this._dur),r,a)||this._startAt&&(this._zTime=s),this._onUpdate&&!r&&(f&&yx(this,s,r,a),In(this,"onUpdate")),this._repeat&&w!==b&&this.vars.onRepeat&&!r&&this.parent&&In(this,"onRepeat"),(p===this._tDur||!p)&&this._tTime===p&&(f&&!this._onUpdate&&yx(this,s,!0,!0),(s||!h)&&(p===this._tDur&&this._ts>0||!p&&this._ts<0)&&br(this,1),!r&&!(f&&!l)&&(p||l||C)&&(In(this,p===u?"onComplete":"onReverseComplete",!0),this._prom&&!(p<u&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(s){return(!s||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(s),n.prototype.invalidate.call(this,s)},e.resetTo=function(s,r,a,l,u){ac||zn.wake(),this._ts||this.play();var h=Math.min(this._dur,(this._dp._time-this._start)*this._ts),f;return this._initted||Qy(this,h),f=this._ease(h/this._dur),vF(this,s,r,a,l,f,h,u)?this.resetTo(s,r,a,l,1):(Pd(this,0),this.parent||LT(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(s,r){if(r===void 0&&(r="all"),!s&&(!r||r==="all"))return this._lazy=this._pt=0,this.parent?jl(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Ve),this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(s,r,ar&&ar.vars.overwrite!==!0)._first||jl(this),this.parent&&a!==this.timeline.totalDuration()&&Co(this,this._dur*this.timeline._tDur/a,0,1),this}var l=this._targets,u=s?ci(s):l,h=this._ptLookup,f=this._pt,p,g,x,w,_,b,C;if((!r||r==="all")&&Q8(l,u))return r==="all"&&(this._pt=0),jl(this);for(p=this._op=this._op||[],r!=="all"&&(Fe(r)&&(_={},mn(r,function(M){return _[M]=1}),r=_),r=_F(l,r)),C=l.length;C--;)if(~u.indexOf(l[C])){g=h[C],r==="all"?(p[C]=r,w=g,x={}):(x=p[C]=p[C]||{},w=r);for(_ in w)b=g&&g[_],b&&((!("kill"in b.d)||b.d.kill(_)===!0)&&Cd(this,b,"_pt"),delete g[_]),x!=="all"&&(x[_]=1)}return this._initted&&!this._pt&&f&&jl(this),this},t.to=function(s,r){return new t(s,r,arguments[2])},t.from=function(s,r){return Hl(1,arguments)},t.delayedCall=function(s,r,a,l){return new t(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:s,onComplete:r,onReverseComplete:r,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:l})},t.fromTo=function(s,r,a){return Hl(2,arguments)},t.set=function(s,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new t(s,r)},t.killTweensOf=function(s,r,a){return le.killTweensOf(s,r,a)},t})(oc);Vn(Te.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});mn("staggerTo,staggerFrom,staggerFromTo",function(n){Te[n]=function(){var t=new tn,e=_x.call(arguments,0);return e.splice(n==="staggerFromTo"?5:4,0,0),t[n].apply(t,e)}});var Ky=function(t,e,i){return t[e]=i},lE=function(t,e,i){return t[e](i)},wF=function(t,e,i,s){return t[e](s.fp,i)},SF=function(t,e,i){return t.setAttribute(e,i)},Zy=function(t,e){return _e(t[e])?lE:Hy(t[e])&&t.setAttribute?SF:Ky},cE=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},CF=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},uE=function(t,e){var i=e._pt,s="";if(!t&&e.b)s=e.b;else if(t===1&&e.e)s=e.e;else{for(;i;)s=i.p+(i.m?i.m(i.s+i.c*t):Math.round((i.s+i.c*t)*1e4)/1e4)+s,i=i._next;s+=e.c}e.set(e.t,e.p,s,e)},Jy=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},MF=function(t,e,i,s){for(var r=this._pt,a;r;)a=r._next,r.p===s&&r.modifier(t,e,i),r=a},PF=function(t){for(var e=this._pt,i,s;e;)s=e._next,e.p===t&&!e.op||e.op===t?Cd(this,e,"_pt"):e.dep||(i=1),e=s;return!i},AF=function(t,e,i,s){s.mSet(t,e,s.m.call(s.tween,i,s.mt),s)},hE=function(t){for(var e=t._pt,i,s,r,a;e;){for(i=e._next,s=r;s&&s.pr>e.pr;)s=s._next;(e._prev=s?s._prev:a)?e._prev._next=e:r=e,(e._next=s)?s._prev=e:a=e,e=i}t._pt=r},gn=(function(){function n(e,i,s,r,a,l,u,h,f){this.t=i,this.s=r,this.c=a,this.p=s,this.r=l||cE,this.d=u||this,this.set=h||Ky,this.pr=f||0,this._next=e,e&&(e._prev=this)}var t=n.prototype;return t.modifier=function(i,s,r){this.mSet=this.mSet||this.set,this.set=AF,this.m=i,this.mt=r,this.tween=s},n})();mn(Yy+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return Wy[n]=1});Gn.TweenMax=Gn.TweenLite=Te;Gn.TimelineLite=Gn.TimelineMax=tn;le=new tn({sortChildren:!1,defaults:bo,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Ln.stringFilter=tE;var la=[],uh={},TF=[],pw=0,EF=0,pm=function(t){return(uh[t]||TF).map(function(e){return e()})},Cx=function(){var t=Date.now(),e=[];t-pw>2&&(pm("matchMediaInit"),la.forEach(function(i){var s=i.queries,r=i.conditions,a,l,u,h;for(l in s)a=Gi.matchMedia(s[l]).matches,a&&(u=1),a!==r[l]&&(r[l]=a,h=1);h&&(i.revert(),u&&e.push(i))}),pm("matchMediaRevert"),e.forEach(function(i){return i.onMatch(i,function(s){return i.add(null,s)})}),pw=t,pm("matchMedia"))},dE=(function(){function n(e,i){this.selector=i&&bx(i),this.data=[],this._r=[],this.isReverted=!1,this.id=EF++,e&&this.add(e)}var t=n.prototype;return t.add=function(i,s,r){_e(i)&&(r=s,s=i,i=_e);var a=this,l=function(){var h=ae,f=a.selector,p;return h&&h!==a&&h.data.push(a),r&&(a.selector=bx(r)),ae=a,p=s.apply(a,arguments),_e(p)&&a._r.push(p),ae=h,a.selector=f,a.isReverted=!1,p};return a.last=l,i===_e?l(a,function(u){return a.add(null,u)}):i?a[i]=l:l},t.ignore=function(i){var s=ae;ae=null,i(this),ae=s},t.getTweens=function(){var i=[];return this.data.forEach(function(s){return s instanceof n?i.push.apply(i,s.getTweens()):s instanceof Te&&!(s.parent&&s.parent.data==="nested")&&i.push(s)}),i},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(i,s){var r=this;if(i?(function(){for(var l=r.getTweens(),u=r.data.length,h;u--;)h=r.data[u],h.data==="isFlip"&&(h.revert(),h.getChildren(!0,!0,!1).forEach(function(f){return l.splice(l.indexOf(f),1)}));for(l.map(function(f){return{g:f._dur||f._delay||f._sat&&!f._sat.vars.immediateRender?f.globalTime(0):-1/0,t:f}}).sort(function(f,p){return p.g-f.g||-1/0}).forEach(function(f){return f.t.revert(i)}),u=r.data.length;u--;)h=r.data[u],h instanceof tn?h.data!=="nested"&&(h.scrollTrigger&&h.scrollTrigger.revert(),h.kill()):!(h instanceof Te)&&h.revert&&h.revert(i);r._r.forEach(function(f){return f(i,r)}),r.isReverted=!0})():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),s)for(var a=la.length;a--;)la[a].id===this.id&&la.splice(a,1)},t.revert=function(i){this.kill(i||{})},n})(),RF=(function(){function n(e){this.contexts=[],this.scope=e,ae&&ae.data.push(this)}var t=n.prototype;return t.add=function(i,s,r){Zi(i)||(i={matches:i});var a=new dE(0,r||this.scope),l=a.conditions={},u,h,f;ae&&!a.selector&&(a.selector=ae.selector),this.contexts.push(a),s=a.add("onMatch",s),a.queries=i;for(h in i)h==="all"?f=1:(u=Gi.matchMedia(i[h]),u&&(la.indexOf(a)<0&&la.push(a),(l[h]=u.matches)&&(f=1),u.addListener?u.addListener(Cx):u.addEventListener("change",Cx)));return f&&s(a,function(p){return a.add(null,p)}),this},t.revert=function(i){this.kill(i||{})},t.kill=function(i){this.contexts.forEach(function(s){return s.kill(i,!0)})},n})(),Nh={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach(function(s){return KT(s)})},timeline:function(t){return new tn(t)},getTweensOf:function(t,e){return le.getTweensOf(t,e)},getProperty:function(t,e,i,s){Fe(t)&&(t=ci(t)[0]);var r=ra(t||{}).get,a=i?BT:IT;return i==="native"&&(i=""),t&&(e?a((On[e]&&On[e].get||r)(t,e,i,s)):function(l,u,h){return a((On[l]&&On[l].get||r)(t,l,u,h))})},quickSetter:function(t,e,i){if(t=ci(t),t.length>1){var s=t.map(function(f){return yn.quickSetter(f,e,i)}),r=s.length;return function(f){for(var p=r;p--;)s[p](f)}}t=t[0]||{};var a=On[e],l=ra(t),u=l.harness&&(l.harness.aliases||{})[e]||e,h=a?function(f){var p=new a;eo._pt=0,p.init(t,i?f+i:f,eo,0,[t]),p.render(1,p),eo._pt&&Jy(1,eo)}:l.set(t,u);return a?h:function(f){return h(t,u,i?f+i:f,l,1)}},quickTo:function(t,e,i){var s,r=yn.to(t,Vn((s={},s[e]="+=0.1",s.paused=!0,s.stagger=0,s),i||{})),a=function(u,h,f){return r.resetTo(e,u,h,f)};return a.tween=r,a},isTweening:function(t){return le.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=oa(t.ease,bo.ease)),cw(bo,t||{})},config:function(t){return cw(Ln,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,s=t.plugins,r=t.defaults,a=t.extendTimeline;(s||"").split(",").forEach(function(l){return l&&!On[l]&&!Gn[l]&&ic(e+" effect requires "+l+" plugin.")}),um[e]=function(l,u,h){return i(ci(l),Vn(u||{},r),h)},a&&(tn.prototype[e]=function(l,u,h){return this.add(um[e](l,Zi(u)?u:(h=u)&&{},this),h)})},registerEase:function(t,e){Et[t]=oa(e)},parseEase:function(t,e){return arguments.length?oa(t,e):Et},getById:function(t){return le.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var i=new tn(t),s,r;for(i.smoothChildTiming=pn(t.smoothChildTiming),le.remove(i),i._dp=0,i._time=i._tTime=le._time,s=le._first;s;)r=s._next,(e||!(!s._dur&&s instanceof Te&&s.vars.onComplete===s._targets[0]))&&qi(i,s,s._start-s._delay),s=r;return qi(le,i,0),i},context:function(t,e){return t?new dE(t,e):ae},matchMedia:function(t){return new RF(t)},matchMediaRefresh:function(){return la.forEach(function(t){var e=t.conditions,i,s;for(s in e)e[s]&&(e[s]=!1,i=1);i&&t.revert()})||Cx()},addEventListener:function(t,e){var i=uh[t]||(uh[t]=[]);~i.indexOf(e)||i.push(e)},removeEventListener:function(t,e){var i=uh[t],s=i&&i.indexOf(e);s>=0&&i.splice(s,1)},utils:{wrap:lF,wrapYoyo:cF,distribute:WT,random:qT,snap:YT,normalize:oF,getUnit:$e,clamp:iF,splitColor:ZT,toArray:ci,selector:bx,mapRange:$T,pipe:rF,unitize:aF,interpolate:uF,shuffle:VT},install:kT,effects:um,ticker:zn,updateRoot:tn.updateRoot,plugins:On,globalTimeline:le,core:{PropTween:gn,globals:NT,Tween:Te,Timeline:tn,Animation:oc,getCache:ra,_removeLinkedListItem:Cd,reverting:function(){return Ve},context:function(t){return t&&ae&&(ae.data.push(t),t._ctx=ae),ae},suppressOverwrites:function(t){return Fy=t}}};mn("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return Nh[n]=Te[n]});zn.add(tn.updateRoot);eo=Nh.to({},{duration:0});var jF=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},kF=function(t,e){var i=t._targets,s,r,a;for(s in e)for(r=i.length;r--;)a=t._ptLookup[r][s],a&&(a=a.d)&&(a._pt&&(a=jF(a,s)),a&&a.modifier&&a.modifier(e[s],t,i[r],s))},mm=function(t,e){return{name:t,headless:1,rawVars:1,init:function(s,r,a){a._onInit=function(l){var u,h;if(Fe(r)&&(u={},mn(r,function(f){return u[f]=1}),r=u),e){u={};for(h in r)u[h]=e(r[h]);r=u}kF(l,r)}}}},yn=Nh.registerPlugin({name:"attr",init:function(t,e,i,s,r){var a,l,u;this.tween=i;for(a in e)u=t.getAttribute(a)||"",l=this.add(t,"setAttribute",(u||0)+"",e[a],s,r,0,0,a),l.op=a,l.b=u,this._props.push(a)},render:function(t,e){for(var i=e._pt;i;)Ve?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",headless:1,init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i],0,0,0,0,0,1)}},mm("roundProps",wx),mm("modifiers"),mm("snap",YT))||Nh;Te.version=tn.version=yn.version="3.13.0";jT=1;Uy()&&Mo();Et.Power0;Et.Power1;Et.Power2;Et.Power3;Et.Power4;Et.Linear;Et.Quad;Et.Cubic;Et.Quart;Et.Quint;Et.Strong;Et.Elastic;Et.Back;Et.SteppedEase;Et.Bounce;Et.Sine;Et.Expo;Et.Circ;var mw,or,lo,t0,na,gw,e0,NF=function(){return typeof window<"u"},Ns={},Jr=180/Math.PI,co=Math.PI/180,Xa=Math.atan2,xw=1e8,n0=/([A-Z])/g,OF=/(left|right|width|margin|padding|x)/i,zF=/[\s,\(]\S/,Xi={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Mx=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},DF=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},IF=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},BF=function(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)},fE=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},pE=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},LF=function(t,e,i){return t.style[e]=i},FF=function(t,e,i){return t.style.setProperty(e,i)},HF=function(t,e,i){return t._gsap[e]=i},UF=function(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i},GF=function(t,e,i,s,r){var a=t._gsap;a.scaleX=a.scaleY=i,a.renderTransform(r,a)},VF=function(t,e,i,s,r){var a=t._gsap;a[e]=i,a.renderTransform(r,a)},de="transform",xn=de+"Origin",WF=function n(t,e){var i=this,s=this.target,r=s.style,a=s._gsap;if(t in Ns&&r){if(this.tfm=this.tfm||{},t!=="transform")t=Xi[t]||t,~t.indexOf(",")?t.split(",").forEach(function(l){return i.tfm[l]=Ms(s,l)}):this.tfm[t]=a.x?a[t]:Ms(s,t),t===xn&&(this.tfm.zOrigin=a.zOrigin);else return Xi.transform.split(",").forEach(function(l){return n.call(i,l,e)});if(this.props.indexOf(de)>=0)return;a.svg&&(this.svgo=s.getAttribute("data-svg-origin"),this.props.push(xn,e,"")),t=de}(r||e)&&this.props.push(t,e,r[t])},mE=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},YF=function(){var t=this.props,e=this.target,i=e.style,s=e._gsap,r,a;for(r=0;r<t.length;r+=3)t[r+1]?t[r+1]===2?e[t[r]](t[r+2]):e[t[r]]=t[r+2]:t[r+2]?i[t[r]]=t[r+2]:i.removeProperty(t[r].substr(0,2)==="--"?t[r]:t[r].replace(n0,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)s[a]=this.tfm[a];s.svg&&(s.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),r=e0(),(!r||!r.isStart)&&!i[de]&&(mE(i),s.zOrigin&&i[xn]&&(i[xn]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},gE=function(t,e){var i={target:t,props:[],revert:YF,save:WF};return t._gsap||yn.core.getCache(t),e&&t.style&&t.nodeType&&e.split(",").forEach(function(s){return i.save(s)}),i},xE,Px=function(t,e){var i=or.createElementNS?or.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):or.createElement(t);return i&&i.style?i:or.createElement(t)},ui=function n(t,e,i){var s=getComputedStyle(t);return s[e]||s.getPropertyValue(e.replace(n0,"-$1").toLowerCase())||s.getPropertyValue(e)||!i&&n(t,Po(e)||e,1)||""},yw="O,Moz,ms,Ms,Webkit".split(","),Po=function(t,e,i){var s=e||na,r=s.style,a=5;if(t in r&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);a--&&!(yw[a]+t in r););return a<0?null:(a===3?"ms":a>=0?yw[a]:"")+t},Ax=function(){NF()&&window.document&&(mw=window,or=mw.document,lo=or.documentElement,na=Px("div")||{style:{}},Px("div"),de=Po(de),xn=de+"Origin",na.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",xE=!!Po("perspective"),e0=yn.core.reverting,t0=1)},vw=function(t){var e=t.ownerSVGElement,i=Px("svg",e&&e.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),s=t.cloneNode(!0),r;s.style.display="block",i.appendChild(s),lo.appendChild(i);try{r=s.getBBox()}catch{}return i.removeChild(s),lo.removeChild(i),r},_w=function(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])},yE=function(t){var e,i;try{e=t.getBBox()}catch{e=vw(t),i=1}return e&&(e.width||e.height)||i||(e=vw(t)),e&&!e.width&&!e.x&&!e.y?{x:+_w(t,["x","cx","x1"])||0,y:+_w(t,["y","cy","y1"])||0,width:0,height:0}:e},vE=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&yE(t))},fa=function(t,e){if(e){var i=t.style,s;e in Ns&&e!==xn&&(e=de),i.removeProperty?(s=e.substr(0,2),(s==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),i.removeProperty(s==="--"?e:e.replace(n0,"-$1").toLowerCase())):i.removeAttribute(e)}},lr=function(t,e,i,s,r,a){var l=new gn(t._pt,e,i,0,1,a?pE:fE);return t._pt=l,l.b=s,l.e=r,t._props.push(i),l},bw={deg:1,rad:1,turn:1},qF={grid:1,flex:1},wr=function n(t,e,i,s){var r=parseFloat(i)||0,a=(i+"").trim().substr((r+"").length)||"px",l=na.style,u=OF.test(e),h=t.tagName.toLowerCase()==="svg",f=(h?"client":"offset")+(u?"Width":"Height"),p=100,g=s==="px",x=s==="%",w,_,b,C;if(s===a||!r||bw[s]||bw[a])return r;if(a!=="px"&&!g&&(r=n(t,e,i,"px")),C=t.getCTM&&vE(t),(x||a==="%")&&(Ns[e]||~e.indexOf("adius")))return w=C?t.getBBox()[u?"width":"height"]:t[f],Ce(x?r/w*p:r/100*w);if(l[u?"width":"height"]=p+(g?a:s),_=s!=="rem"&&~e.indexOf("adius")||s==="em"&&t.appendChild&&!h?t:t.parentNode,C&&(_=(t.ownerSVGElement||{}).parentNode),(!_||_===or||!_.appendChild)&&(_=or.body),b=_._gsap,b&&x&&b.width&&u&&b.time===zn.time&&!b.uncache)return Ce(r/b.width*p);if(x&&(e==="height"||e==="width")){var M=t.style[e];t.style[e]=p+s,w=t[f],M?t.style[e]=M:fa(t,e)}else(x||a==="%")&&!qF[ui(_,"display")]&&(l.position=ui(t,"position")),_===t&&(l.position="static"),_.appendChild(na),w=na[f],_.removeChild(na),l.position="absolute";return u&&x&&(b=ra(_),b.time=zn.time,b.width=_[f]),Ce(g?w*r/p:w&&r?p/w*r:0)},Ms=function(t,e,i,s){var r;return t0||Ax(),e in Xi&&e!=="transform"&&(e=Xi[e],~e.indexOf(",")&&(e=e.split(",")[0])),Ns[e]&&e!=="transform"?(r=cc(t,s),r=e!=="transformOrigin"?r[e]:r.svg?r.origin:zh(ui(t,xn))+" "+r.zOrigin+"px"):(r=t.style[e],(!r||r==="auto"||s||~(r+"").indexOf("calc("))&&(r=Oh[e]&&Oh[e](t,e,i)||ui(t,e)||zT(t,e)||(e==="opacity"?1:0))),i&&!~(r+"").trim().indexOf(" ")?wr(t,e,r,i)+i:r},XF=function(t,e,i,s){if(!i||i==="none"){var r=Po(e,t,1),a=r&&ui(t,r,1);a&&a!==i?(e=r,i=a):e==="borderColor"&&(i=ui(t,"borderTopColor"))}var l=new gn(this._pt,t.style,e,0,1,uE),u=0,h=0,f,p,g,x,w,_,b,C,M,P,T,E;if(l.b=i,l.e=s,i+="",s+="",s.substring(0,6)==="var(--"&&(s=ui(t,s.substring(4,s.indexOf(")")))),s==="auto"&&(_=t.style[e],t.style[e]=s,s=ui(t,e)||s,_?t.style[e]=_:fa(t,e)),f=[i,s],tE(f),i=f[0],s=f[1],g=i.match(to)||[],E=s.match(to)||[],E.length){for(;p=to.exec(s);)b=p[0],M=s.substring(u,p.index),w?w=(w+1)%5:(M.substr(-5)==="rgba("||M.substr(-5)==="hsla(")&&(w=1),b!==(_=g[h++]||"")&&(x=parseFloat(_)||0,T=_.substr((x+"").length),b.charAt(1)==="="&&(b=oo(x,b)+T),C=parseFloat(b),P=b.substr((C+"").length),u=to.lastIndex-P.length,P||(P=P||Ln.units[e]||T,u===s.length&&(s+=P,l.e+=P)),T!==P&&(x=wr(t,e,_,P)||0),l._pt={_next:l._pt,p:M||h===1?M:",",s:x,c:C-x,m:w&&w<4||e==="zIndex"?Math.round:0});l.c=u<s.length?s.substring(u,s.length):""}else l.r=e==="display"&&s==="none"?pE:fE;return ET.test(s)&&(l.e=0),this._pt=l,l},ww={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},$F=function(t){var e=t.split(" "),i=e[0],s=e[1]||"50%";return(i==="top"||i==="bottom"||s==="left"||s==="right")&&(t=i,i=s,s=t),e[0]=ww[i]||i,e[1]=ww[s]||s,e.join(" ")},QF=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i=e.t,s=i.style,r=e.u,a=i._gsap,l,u,h;if(r==="all"||r===!0)s.cssText="",u=1;else for(r=r.split(","),h=r.length;--h>-1;)l=r[h],Ns[l]&&(u=1,l=l==="transformOrigin"?xn:de),fa(i,l);u&&(fa(i,de),a&&(a.svg&&i.removeAttribute("transform"),s.scale=s.rotate=s.translate="none",cc(i,1),a.uncache=1,mE(s)))}},Oh={clearProps:function(t,e,i,s,r){if(r.data!=="isFromStart"){var a=t._pt=new gn(t._pt,e,i,0,0,QF);return a.u=s,a.pr=-10,a.tween=r,t._props.push(i),1}}},lc=[1,0,0,1,0,0],_E={},bE=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},Sw=function(t){var e=ui(t,de);return bE(e)?lc:e.substr(7).match(TT).map(Ce)},i0=function(t,e){var i=t._gsap||ra(t),s=t.style,r=Sw(t),a,l,u,h;return i.svg&&t.getAttribute("transform")?(u=t.transform.baseVal.consolidate().matrix,r=[u.a,u.b,u.c,u.d,u.e,u.f],r.join(",")==="1,0,0,1,0,0"?lc:r):(r===lc&&!t.offsetParent&&t!==lo&&!i.svg&&(u=s.display,s.display="block",a=t.parentNode,(!a||!t.offsetParent&&!t.getBoundingClientRect().width)&&(h=1,l=t.nextElementSibling,lo.appendChild(t)),r=Sw(t),u?s.display=u:fa(t,"display"),h&&(l?a.insertBefore(t,l):a?a.appendChild(t):lo.removeChild(t))),e&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r)},Tx=function(t,e,i,s,r,a){var l=t._gsap,u=r||i0(t,!0),h=l.xOrigin||0,f=l.yOrigin||0,p=l.xOffset||0,g=l.yOffset||0,x=u[0],w=u[1],_=u[2],b=u[3],C=u[4],M=u[5],P=e.split(" "),T=parseFloat(P[0])||0,E=parseFloat(P[1])||0,R,N,O,k;i?u!==lc&&(N=x*b-w*_)&&(O=T*(b/N)+E*(-_/N)+(_*M-b*C)/N,k=T*(-w/N)+E*(x/N)-(x*M-w*C)/N,T=O,E=k):(R=yE(t),T=R.x+(~P[0].indexOf("%")?T/100*R.width:T),E=R.y+(~(P[1]||P[0]).indexOf("%")?E/100*R.height:E)),s||s!==!1&&l.smooth?(C=T-h,M=E-f,l.xOffset=p+(C*x+M*_)-C,l.yOffset=g+(C*w+M*b)-M):l.xOffset=l.yOffset=0,l.xOrigin=T,l.yOrigin=E,l.smooth=!!s,l.origin=e,l.originIsAbsolute=!!i,t.style[xn]="0px 0px",a&&(lr(a,l,"xOrigin",h,T),lr(a,l,"yOrigin",f,E),lr(a,l,"xOffset",p,l.xOffset),lr(a,l,"yOffset",g,l.yOffset)),t.setAttribute("data-svg-origin",T+" "+E)},cc=function(t,e){var i=t._gsap||new sE(t);if("x"in i&&!e&&!i.uncache)return i;var s=t.style,r=i.scaleX<0,a="px",l="deg",u=getComputedStyle(t),h=ui(t,xn)||"0",f,p,g,x,w,_,b,C,M,P,T,E,R,N,O,k,B,I,X,q,U,Y,D,H,J,V,Z,gt,tt,ft,xt,pt;return f=p=g=_=b=C=M=P=T=0,x=w=1,i.svg=!!(t.getCTM&&vE(t)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(s[de]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[de]!=="none"?u[de]:"")),s.scale=s.rotate=s.translate="none"),N=i0(t,i.svg),i.svg&&(i.uncache?(J=t.getBBox(),h=i.xOrigin-J.x+"px "+(i.yOrigin-J.y)+"px",H=""):H=!e&&t.getAttribute("data-svg-origin"),Tx(t,H||h,!!H||i.originIsAbsolute,i.smooth!==!1,N)),E=i.xOrigin||0,R=i.yOrigin||0,N!==lc&&(I=N[0],X=N[1],q=N[2],U=N[3],f=Y=N[4],p=D=N[5],N.length===6?(x=Math.sqrt(I*I+X*X),w=Math.sqrt(U*U+q*q),_=I||X?Xa(X,I)*Jr:0,M=q||U?Xa(q,U)*Jr+_:0,M&&(w*=Math.abs(Math.cos(M*co))),i.svg&&(f-=E-(E*I+R*q),p-=R-(E*X+R*U))):(pt=N[6],ft=N[7],Z=N[8],gt=N[9],tt=N[10],xt=N[11],f=N[12],p=N[13],g=N[14],O=Xa(pt,tt),b=O*Jr,O&&(k=Math.cos(-O),B=Math.sin(-O),H=Y*k+Z*B,J=D*k+gt*B,V=pt*k+tt*B,Z=Y*-B+Z*k,gt=D*-B+gt*k,tt=pt*-B+tt*k,xt=ft*-B+xt*k,Y=H,D=J,pt=V),O=Xa(-q,tt),C=O*Jr,O&&(k=Math.cos(-O),B=Math.sin(-O),H=I*k-Z*B,J=X*k-gt*B,V=q*k-tt*B,xt=U*B+xt*k,I=H,X=J,q=V),O=Xa(X,I),_=O*Jr,O&&(k=Math.cos(O),B=Math.sin(O),H=I*k+X*B,J=Y*k+D*B,X=X*k-I*B,D=D*k-Y*B,I=H,Y=J),b&&Math.abs(b)+Math.abs(_)>359.9&&(b=_=0,C=180-C),x=Ce(Math.sqrt(I*I+X*X+q*q)),w=Ce(Math.sqrt(D*D+pt*pt)),O=Xa(Y,D),M=Math.abs(O)>2e-4?O*Jr:0,T=xt?1/(xt<0?-xt:xt):0),i.svg&&(H=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!bE(ui(t,de)),H&&t.setAttribute("transform",H))),Math.abs(M)>90&&Math.abs(M)<270&&(r?(x*=-1,M+=_<=0?180:-180,_+=_<=0?180:-180):(w*=-1,M+=M<=0?180:-180)),e=e||i.uncache,i.x=f-((i.xPercent=f&&(!e&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-f)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+a,i.y=p-((i.yPercent=p&&(!e&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-p)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+a,i.z=g+a,i.scaleX=Ce(x),i.scaleY=Ce(w),i.rotation=Ce(_)+l,i.rotationX=Ce(b)+l,i.rotationY=Ce(C)+l,i.skewX=M+l,i.skewY=P+l,i.transformPerspective=T+a,(i.zOrigin=parseFloat(h.split(" ")[2])||!e&&i.zOrigin||0)&&(s[xn]=zh(h)),i.xOffset=i.yOffset=0,i.force3D=Ln.force3D,i.renderTransform=i.svg?ZF:xE?wE:KF,i.uncache=0,i},zh=function(t){return(t=t.split(" "))[0]+" "+t[1]},gm=function(t,e,i){var s=$e(e);return Ce(parseFloat(e)+parseFloat(wr(t,"x",i+"px",s)))+s},KF=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,wE(t,e)},qr="0deg",_l="0px",Xr=") ",wE=function(t,e){var i=e||this,s=i.xPercent,r=i.yPercent,a=i.x,l=i.y,u=i.z,h=i.rotation,f=i.rotationY,p=i.rotationX,g=i.skewX,x=i.skewY,w=i.scaleX,_=i.scaleY,b=i.transformPerspective,C=i.force3D,M=i.target,P=i.zOrigin,T="",E=C==="auto"&&t&&t!==1||C===!0;if(P&&(p!==qr||f!==qr)){var R=parseFloat(f)*co,N=Math.sin(R),O=Math.cos(R),k;R=parseFloat(p)*co,k=Math.cos(R),a=gm(M,a,N*k*-P),l=gm(M,l,-Math.sin(R)*-P),u=gm(M,u,O*k*-P+P)}b!==_l&&(T+="perspective("+b+Xr),(s||r)&&(T+="translate("+s+"%, "+r+"%) "),(E||a!==_l||l!==_l||u!==_l)&&(T+=u!==_l||E?"translate3d("+a+", "+l+", "+u+") ":"translate("+a+", "+l+Xr),h!==qr&&(T+="rotate("+h+Xr),f!==qr&&(T+="rotateY("+f+Xr),p!==qr&&(T+="rotateX("+p+Xr),(g!==qr||x!==qr)&&(T+="skew("+g+", "+x+Xr),(w!==1||_!==1)&&(T+="scale("+w+", "+_+Xr),M.style[de]=T||"translate(0, 0)"},ZF=function(t,e){var i=e||this,s=i.xPercent,r=i.yPercent,a=i.x,l=i.y,u=i.rotation,h=i.skewX,f=i.skewY,p=i.scaleX,g=i.scaleY,x=i.target,w=i.xOrigin,_=i.yOrigin,b=i.xOffset,C=i.yOffset,M=i.forceCSS,P=parseFloat(a),T=parseFloat(l),E,R,N,O,k;u=parseFloat(u),h=parseFloat(h),f=parseFloat(f),f&&(f=parseFloat(f),h+=f,u+=f),u||h?(u*=co,h*=co,E=Math.cos(u)*p,R=Math.sin(u)*p,N=Math.sin(u-h)*-g,O=Math.cos(u-h)*g,h&&(f*=co,k=Math.tan(h-f),k=Math.sqrt(1+k*k),N*=k,O*=k,f&&(k=Math.tan(f),k=Math.sqrt(1+k*k),E*=k,R*=k)),E=Ce(E),R=Ce(R),N=Ce(N),O=Ce(O)):(E=p,O=g,R=N=0),(P&&!~(a+"").indexOf("px")||T&&!~(l+"").indexOf("px"))&&(P=wr(x,"x",a,"px"),T=wr(x,"y",l,"px")),(w||_||b||C)&&(P=Ce(P+w-(w*E+_*N)+b),T=Ce(T+_-(w*R+_*O)+C)),(s||r)&&(k=x.getBBox(),P=Ce(P+s/100*k.width),T=Ce(T+r/100*k.height)),k="matrix("+E+","+R+","+N+","+O+","+P+","+T+")",x.setAttribute("transform",k),M&&(x.style[de]=k)},JF=function(t,e,i,s,r){var a=360,l=Fe(r),u=parseFloat(r)*(l&&~r.indexOf("rad")?Jr:1),h=u-s,f=s+h+"deg",p,g;return l&&(p=r.split("_")[1],p==="short"&&(h%=a,h!==h%(a/2)&&(h+=h<0?a:-a)),p==="cw"&&h<0?h=(h+a*xw)%a-~~(h/a)*a:p==="ccw"&&h>0&&(h=(h-a*xw)%a-~~(h/a)*a)),t._pt=g=new gn(t._pt,e,i,s,h,DF),g.e=f,g.u="deg",t._props.push(i),g},Cw=function(t,e){for(var i in e)t[i]=e[i];return t},tH=function(t,e,i){var s=Cw({},i._gsap),r="perspective,force3D,transformOrigin,svgOrigin",a=i.style,l,u,h,f,p,g,x,w;s.svg?(h=i.getAttribute("transform"),i.setAttribute("transform",""),a[de]=e,l=cc(i,1),fa(i,de),i.setAttribute("transform",h)):(h=getComputedStyle(i)[de],a[de]=e,l=cc(i,1),a[de]=h);for(u in Ns)h=s[u],f=l[u],h!==f&&r.indexOf(u)<0&&(x=$e(h),w=$e(f),p=x!==w?wr(i,u,h,w):parseFloat(h),g=parseFloat(f),t._pt=new gn(t._pt,l,u,p,g-p,Mx),t._pt.u=w||0,t._props.push(u));Cw(l,s)};mn("padding,margin,Width,Radius",function(n,t){var e="Top",i="Right",s="Bottom",r="Left",a=(t<3?[e,i,s,r]:[e+r,e+i,s+i,s+r]).map(function(l){return t<2?n+l:"border"+l+n});Oh[t>1?"border"+n:n]=function(l,u,h,f,p){var g,x;if(arguments.length<4)return g=a.map(function(w){return Ms(l,w,h)}),x=g.join(" "),x.split(g[0]).length===5?g[0]:x;g=(f+"").split(" "),x={},a.forEach(function(w,_){return x[w]=g[_]=g[_]||g[(_-1)/2|0]}),l.init(u,x,p)}});var SE={name:"css",register:Ax,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,s,r){var a=this._props,l=t.style,u=i.vars.startAt,h,f,p,g,x,w,_,b,C,M,P,T,E,R,N,O;t0||Ax(),this.styles=this.styles||gE(t),O=this.styles.props,this.tween=i;for(_ in e)if(_!=="autoRound"&&(f=e[_],!(On[_]&&rE(_,e,i,s,t,r)))){if(x=typeof f,w=Oh[_],x==="function"&&(f=f.call(i,s,t,r),x=typeof f),x==="string"&&~f.indexOf("random(")&&(f=rc(f)),w)w(this,t,_,f,i)&&(N=1);else if(_.substr(0,2)==="--")h=(getComputedStyle(t).getPropertyValue(_)+"").trim(),f+="",fr.lastIndex=0,fr.test(h)||(b=$e(h),C=$e(f)),C?b!==C&&(h=wr(t,_,h,C)+C):b&&(f+=b),this.add(l,"setProperty",h,f,s,r,0,0,_),a.push(_),O.push(_,0,l[_]);else if(x!=="undefined"){if(u&&_ in u?(h=typeof u[_]=="function"?u[_].call(i,s,t,r):u[_],Fe(h)&&~h.indexOf("random(")&&(h=rc(h)),$e(h+"")||h==="auto"||(h+=Ln.units[_]||$e(Ms(t,_))||""),(h+"").charAt(1)==="="&&(h=Ms(t,_))):h=Ms(t,_),g=parseFloat(h),M=x==="string"&&f.charAt(1)==="="&&f.substr(0,2),M&&(f=f.substr(2)),p=parseFloat(f),_ in Xi&&(_==="autoAlpha"&&(g===1&&Ms(t,"visibility")==="hidden"&&p&&(g=0),O.push("visibility",0,l.visibility),lr(this,l,"visibility",g?"inherit":"hidden",p?"inherit":"hidden",!p)),_!=="scale"&&_!=="transform"&&(_=Xi[_],~_.indexOf(",")&&(_=_.split(",")[0]))),P=_ in Ns,P){if(this.styles.save(_),x==="string"&&f.substring(0,6)==="var(--"&&(f=ui(t,f.substring(4,f.indexOf(")"))),p=parseFloat(f)),T||(E=t._gsap,E.renderTransform&&!e.parseTransform||cc(t,e.parseTransform),R=e.smoothOrigin!==!1&&E.smooth,T=this._pt=new gn(this._pt,l,de,0,1,E.renderTransform,E,0,-1),T.dep=1),_==="scale")this._pt=new gn(this._pt,E,"scaleY",E.scaleY,(M?oo(E.scaleY,M+p):p)-E.scaleY||0,Mx),this._pt.u=0,a.push("scaleY",_),_+="X";else if(_==="transformOrigin"){O.push(xn,0,l[xn]),f=$F(f),E.svg?Tx(t,f,0,R,0,this):(C=parseFloat(f.split(" ")[2])||0,C!==E.zOrigin&&lr(this,E,"zOrigin",E.zOrigin,C),lr(this,l,_,zh(h),zh(f)));continue}else if(_==="svgOrigin"){Tx(t,f,1,R,0,this);continue}else if(_ in _E){JF(this,E,_,g,M?oo(g,M+f):f);continue}else if(_==="smoothOrigin"){lr(this,E,"smooth",E.smooth,f);continue}else if(_==="force3D"){E[_]=f;continue}else if(_==="transform"){tH(this,f,t);continue}}else _ in l||(_=Po(_)||_);if(P||(p||p===0)&&(g||g===0)&&!zF.test(f)&&_ in l)b=(h+"").substr((g+"").length),p||(p=0),C=$e(f)||(_ in Ln.units?Ln.units[_]:b),b!==C&&(g=wr(t,_,h,C)),this._pt=new gn(this._pt,P?E:l,_,g,(M?oo(g,M+p):p)-g,!P&&(C==="px"||_==="zIndex")&&e.autoRound!==!1?BF:Mx),this._pt.u=C||0,b!==C&&C!=="%"&&(this._pt.b=h,this._pt.r=IF);else if(_ in l)XF.call(this,t,_,h,M?M+f:f);else if(_ in t)this.add(t,_,h||t[_],M?M+f:f,s,r);else if(_!=="parseTransform"){Vy(_,f);continue}P||(_ in l?O.push(_,0,l[_]):typeof t[_]=="function"?O.push(_,2,t[_]()):O.push(_,1,h||t[_])),a.push(_)}}N&&hE(this)},render:function(t,e){if(e.tween._time||!e0())for(var i=e._pt;i;)i.r(t,i.d),i=i._next;else e.styles.revert()},get:Ms,aliases:Xi,getSetter:function(t,e,i){var s=Xi[e];return s&&s.indexOf(",")<0&&(e=s),e in Ns&&e!==xn&&(t._gsap.x||Ms(t,"x"))?i&&gw===i?e==="scale"?UF:HF:(gw=i||{})&&(e==="scale"?GF:VF):t.style&&!Hy(t.style[e])?LF:~e.indexOf("-")?FF:Zy(t,e)},core:{_removeProperty:fa,_getMatrix:i0}};yn.utils.checkPrefix=Po;yn.core.getStyleSaver=gE;(function(n,t,e,i){var s=mn(n+","+t+","+e,function(r){Ns[r]=1});mn(t,function(r){Ln.units[r]="deg",_E[r]=1}),Xi[s[13]]=n+","+t,mn(i,function(r){var a=r.split(":");Xi[a[1]]=s[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");mn("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Ln.units[n]="px"});yn.registerPlugin(SE);var CE=yn.registerPlugin(SE)||yn;CE.core.Tween;function s0(){const n=Ft(s=>s.setView),t=A.useRef(null);A.useEffect(()=>()=>{t.current&&t.current.kill()},[]);const e=A.useCallback((s,r,a)=>{t.current&&t.current.kill();const l=Ft.getState().view,u=(s-l.yawDeg)%360,h=2*u%360-u,f=l.yawDeg+h,p={yaw:l.yawDeg,pitch:l.pitchDeg,scale:l.scale},g=CE.timeline({onUpdate:()=>{n({yawDeg:p.yaw,pitchDeg:p.pitch,scale:p.scale})},onComplete:()=>{t.current=null}});t.current=g,l.scale>1&&a>1?(g.to(p,{yaw:f,pitch:r,duration:2,ease:"power2.inOut"},0),g.to(p,{scale:1,duration:1,ease:"power2.inOut"},0),g.to(p,{scale:a,duration:1,ease:"power2.inOut"},1)):g.to(p,{yaw:f,pitch:r,scale:a,duration:1.5,ease:"power3.inOut"},0)},[n]),i=A.useCallback(()=>{t.current&&(t.current.kill(),t.current=null)},[]);return{animateToView:e,stopAnimation:i}}rn({Container:pe});const Mw=.9,Pw=.01,eH=.1,nH=1e3,Xu=1;function iH({children:n}){const{app:t}=ya(),{view:e,setView:i}=Ft(ne(w=>({view:w.view,setView:w.setView}))),{stopAnimation:s}=s0(),r=A.useRef(e);A.useEffect(()=>Ft.subscribe(_=>{r.current=_.view}),[]);const a=A.useRef(!1),l=A.useRef(null),u=A.useRef({vx:0,vy:0});gd(w=>{if(a.current||Math.abs(u.current.vx)<Pw&&Math.abs(u.current.vy)<Pw)return;const _=w.deltaTime,b=r.current.scale,C=u.current.vx/b*_,M=u.current.vy/b*_,P=rx(r.current.yawDeg-C),T=Wt(r.current.pitchDeg-M,-89.5,89.5);i({yawDeg:P,pitchDeg:T}),u.current.vx*=Mw,u.current.vy*=Mw});const h=A.useCallback(w=>{w.stopPropagation(),s(),a.current=!0,l.current={x:w.global.x,y:w.global.y},u.current={vx:0,vy:0},t?.renderer&&(t.renderer.events.cursorStyles.default="grabbing",t.renderer.events.setCursor("grabbing"))},[t,s]),f=A.useCallback(()=>{a.current=!1,l.current=null,t?.renderer&&(t.renderer.events.cursorStyles.default="default",t.renderer.events.setCursor("default"))},[t]),p=A.useCallback(w=>{if(!a.current||!l.current)return;const _=w.global.x,b=w.global.y,C=_-l.current.x,M=b-l.current.y;l.current={x:_,y:b};const P=r.current.scale;i({yawDeg:rx(r.current.yawDeg+C*Xu/P),pitchDeg:Wt(r.current.pitchDeg+M*Xu/P,-89.5,89.5)}),u.current={vx:-C*Xu,vy:-M*Xu}},[i]),g=A.useCallback(w=>{s(),u.current={vx:0,vy:0};const _=Math.exp(-.0015*w.deltaY),b=Wt(r.current.scale*_,eH,nH);i({scale:b})},[i,s]),x=t===void 0||t.renderer===void 0?null:t.canvas;return A.useEffect(()=>{if(!t?.renderer||!x)return;const w=_=>_.preventDefault();return x.addEventListener("wheel",w,{passive:!1}),()=>{x.removeEventListener("wheel",w)}},[t,x]),!t||!t.renderer||!x?null:y.jsx("pixiContainer",{hitArea:t.screen,eventMode:"static",onPointerDown:h,onPointerUp:f,onPointerUpOutside:f,onGlobalPointerMove:p,onWheel:g,children:n})}rn({Container:pe,Text:sB});function sH(){const n=Ft(e=>e.hoveredFootprintId),t=Ft(e=>e.hoveredFootprintMousePosition);return!n||!t?null:y.jsx("pixiContainer",{eventMode:"passive",children:y.jsx("pixiText",{x:t.x+12,y:t.y+12,roundPixels:!0,text:`ID: ${n}`,style:{fontSize:12,fill:16777215,stroke:{color:0,width:3,alignment:.5},dropShadow:{color:0,blur:2,distance:2,alpha:.4}}})})}const $u={strokeNormal:6497874,hoveredFill:3355443,strokeSelected:11141120};class rH extends pe{footprints=[];graphicsMap=new Map;onFootprintHover;onFootprintSelect;hoveredFootprintId=null;selectedFootprintId=null;constructor(){super(),this.sortableChildren=!0}bindEvents(t,e){t.on("pointerover",i=>{this.onFootprintHover?.(e,{x:i.global.x,y:i.global.y})}),t.on("pointerout",()=>{this.onFootprintHover?.(null)}),t.on("pointermove",i=>{this.hoveredFootprintId===e&&this.onFootprintHover?.(e,{x:i.global.x,y:i.global.y})}),t.on("click",i=>{i.stopPropagation(),this.onFootprintSelect?.(e)})}setFootprints(t){this.footprints=t;const e=new Set(this.graphicsMap.keys());t.forEach(i=>{if(this.graphicsMap.has(i.id))e.delete(i.id);else{const s=new Hn;s.label=i.id,s.eventMode="dynamic",this.bindEvents(s,i.id),this.addChild(s),this.graphicsMap.set(i.id,s)}}),e.forEach(i=>{const s=this.graphicsMap.get(i);s&&(s.destroy(),this.graphicsMap.delete(i))})}updateInteractiveState(t,e){this.hoveredFootprintId=t,this.selectedFootprintId=e,this.sortChildren()}renderFrame(t,e){const{centerX:i,centerY:s,initialRadius:r}=e;this.footprints.forEach(a=>{const l=this.graphicsMap.get(a.id);if(!l)return;const u=a.vertices.map(x=>cT(x.ra,x.dec,t.yawDeg,t.pitchDeg));if(!u.every(x=>x.visible)){l.visible=!1;return}l.visible=!0;const f=u.map(x=>uT(x,i,s,t.scale,r)).flatMap(x=>[x.x,x.y]);l.hitArea=new so(f),l.clear(),l.poly(f);const p=this.selectedFootprintId===a.id,g=this.hoveredFootprintId===a.id;p?(l.stroke({color:$u.strokeSelected,width:2}),l.zIndex=3):g?(l.fill({color:$u.hoveredFill,alpha:.2}).stroke({color:$u.strokeNormal,width:1}),l.zIndex=2):(l.stroke({color:$u.strokeNormal,width:1}),l.zIndex=1)})}}rn({FootprintContainer:rH});function aH({layerRef:n}){const{app:t}=ya(),{footprints:e,globeBackground:i,hoveredFootprintId:s,selectedFootprintId:r,setHoveredFootprintId:a,setHoveredFootprintMousePosition:l,setSelectedFootprintId:u}=Ft(ne(p=>({footprints:p.footprints,globeBackground:p.globeBackground,hoveredFootprintId:p.hoveredFootprintId,selectedFootprintId:p.selectedFootprintId,setHoveredFootprintId:p.setHoveredFootprintId,setHoveredFootprintMousePosition:p.setHoveredFootprintMousePosition,setSelectedFootprintId:p.setSelectedFootprintId}))),h=A.useRef(null);A.useEffect(()=>{const p=n.current,g=h.current;if(!(!p||!g))return p.attach(g),()=>{p.detach(g)}},[n]),A.useEffect(()=>{h.current&&h.current.setFootprints(e)},[e]),A.useEffect(()=>{h.current&&(h.current.onFootprintHover=(p,g)=>{a(p),l(g||null)},h.current.onFootprintSelect=p=>{const g=Ft.getState().selectedFootprintId;u(g===p?null:p)})},[a,l,u]),A.useEffect(()=>{h.current&&h.current.updateInteractiveState(s,r)},[s,r]);const f=A.useRef(Ft.getState().view);return A.useEffect(()=>Ft.subscribe(p=>{f.current=p.view}),[]),gd(()=>{h.current&&t&&h.current.renderFrame(f.current,i)}),y.jsx("pixiFootprintContainer",{ref:h})}rn({Container:pe,RenderLayer:pd});function oH(){const n=A.useRef(null),t=A.useRef(null),e=A.useRef(null);Ft(a=>a.setGlobeBackground)({centerX:400,centerY:300,initialRadius:Math.min(800,600)/2*.9});const s=Ft(a=>a.setFootprints),r=va({queryKey:["grism_footprints"],path:"/overview/grism_footprints"});return A.useEffect(()=>{if(!r.isSuccess)return;const l=r.data.map(u=>({id:u.id,vertices:u.footprint.vertices.map(h=>({ra:h[0],dec:h[1]})),meta:{...u.meta,center:{ra:u.footprint.center[0],dec:u.footprint.center[1]}}}));s(l)},[r.data,r.isSuccess,s]),y.jsx(fe,{ref:n,width:"800px",height:"600px",border:"1px solid black",children:y.jsx(md,{resizeTo:n,backgroundColor:16777215,resolution:1,antialias:!0,autoDensity:!0,children:y.jsxs(iH,{children:[y.jsx("pixiRenderLayer",{ref:e,sortableChildren:!0}),y.jsx("pixiRenderLayer",{ref:t,sortableChildren:!0}),y.jsx(aH,{layerRef:t}),y.jsx(F8,{layerRef:e}),y.jsx(B8,{layerRef:e}),y.jsx(sH,{})]})})})}function lH(){const{animateToView:n}=s0(),{footprints:t,selectedFootprintId:e,setSelectedFootprintId:i,setFootprintMeta:s}=Ft(ne(l=>({footprints:l.footprints,selectedFootprintId:l.selectedFootprintId,setSelectedFootprintId:l.setSelectedFootprintId,setFootprintMeta:l.setFootprintMeta,setView:l.setView}))),r=A.useMemo(()=>t.map(l=>{const u=l.meta?.center,h=l.meta?.included_files||[],f=l.meta?.selected_file,p=(f&&h.includes(f)?f:void 0)??h[0]??"",g=nd({items:h.map(x=>({label:x,value:x}))});return{fp:l,center:u,included_files:h,current:p,collection:g}}),[t]),a=l=>{i(e===l?null:l)};return t.length===0?y.jsx(fe,{p:3,children:y.jsx(ut,{color:"fg.muted",children:"No footprints loaded."})}):y.jsx(kt,{gap:3,p:3,children:r.map(({fp:l,center:u,included_files:h,current:f,collection:p})=>{const g=e===l.id;return y.jsxs(fe,{rounded:"md",borderWidth:"1px",borderColor:g?"blue.400":"border.subtle",bg:g?"blue.subtle":"transparent",_hover:{bg:g?"blue.subtle":"bg.muted"},cursor:"pointer",onClick:()=>a(l.id),transition:"background 0.15s ease",children:[y.jsxs(ht,{justify:"space-between",p:2,pe:3,children:[y.jsx(ut,{fontWeight:"medium",children:l.id}),y.jsx(iN,{colorPalette:g?"blue":"gray",children:g?"Selected":"Select"})]}),y.jsxs(ht,{px:3,pb:2,wrap:"wrap",gap:3,children:[y.jsxs(ut,{fontSize:"sm",color:"fg.muted",children:["RA: ",Number.isFinite(u?.ra)?u.ra.toFixed(5):"--",""]}),y.jsxs(ut,{fontSize:"sm",color:"fg.muted",children:["Dec:"," ",Number.isFinite(u?.dec)?u.dec.toFixed(5):"--",""]})]}),y.jsx(fe,{px:3,pb:2,onClick:x=>x.stopPropagation(),children:h.length>0?y.jsxs(sy,{collection:p,size:"sm",width:"100%",value:f?[f]:[],disabled:!g,onValueChange:({value:x})=>s(l.id,"selected_file",x?.[0]??null),positioning:{sameWidth:!0},children:[y.jsx(fy,{}),y.jsx(qO,{children:"File to show"}),y.jsxs(dy,{children:[y.jsx(ry,{children:y.jsx(ly,{placeholder:"No items"})}),y.jsx(hP,{children:y.jsx(hy,{})})]}),y.jsx(ay,{children:y.jsx(oy,{children:p.items.map(x=>y.jsxs(cy,{item:x,children:[x.label,y.jsx(uy,{})]},x.value))})})]}):y.jsx(ut,{fontSize:"sm",color:"fg.muted",children:"No included files"})}),y.jsx(ht,{p:3,pt:1,gap:2,justify:"flex-end",children:y.jsx(Fn,{size:"sm",onClick:x=>{if(x.stopPropagation(),u){const{yawDeg:w,pitchDeg:_}=hT(u.ra,u.dec);n(w,_,200)}},children:"Goto"})})]},l.id)})})}function cH(){const n=Ft(_=>_.view),{animateToView:t}=s0(),e=A.useMemo(()=>e8(n.yawDeg,n.pitchDeg),[n.yawDeg,n.pitchDeg]),[i,s]=A.useState(e.ra),[r,a]=A.useState(e.dec),[l,u]=A.useState(!1),[h,f]=A.useState(!1),p=A.useCallback(()=>{const _=l?i:e.ra,b=h?r:e.dec,{yawDeg:C,pitchDeg:M}=hT(_,b);t(C,M,200),u(!1),f(!1)},[i,r,l,h,e.ra,e.dec,t]),g=A.useCallback(()=>{t(0,0,1),u(!1),f(!1)},[t]),x=l?i:e.ra,w=h?r:e.dec;return y.jsx(fe,{display:"inline-flex",flexDirection:"column",gap:"8px",children:y.jsxs(ht,{gap:2,p:"6px 10px",rounded:"md",boxShadow:"sm",children:[y.jsxs(ht,{gap:1,children:[y.jsx(ut,{children:"RA"}),y.jsx(ce,{size:"sm",maxW:"120px",value:String(x),onValueChange:({valueAsNumber:_})=>{s(Number.isNaN(_)?0:_),u(!0)},children:y.jsx(ue,{placeholder:Number.isFinite(e.ra)?e.ra.toFixed(4):""})})]}),y.jsxs(ht,{gap:1,children:[y.jsx(ut,{children:"Dec"}),y.jsx(ce,{size:"sm",maxW:"120px",value:String(w),onValueChange:({valueAsNumber:_})=>{a(Number.isNaN(_)?0:_),f(!0)},children:y.jsx(ue,{placeholder:Number.isFinite(e.dec)?e.dec.toFixed(4):""})})]}),y.jsx(Fn,{size:"sm",onClick:p,children:"Go To"}),y.jsx(Fn,{size:"sm",onClick:g,children:"Reset View"})]})})}function uH(){return y.jsxs(ht,{align:"start",gap:10,width:"max-content",height:"100%",wrap:"nowrap",children:[y.jsxs(fe,{position:"relative",children:[y.jsx(oH,{}),y.jsx(Og,{position:"absolute",top:"8px",left:"8px",children:y.jsx(cH,{})})]}),y.jsx(fe,{minW:"400px",h:"600px",flexShrink:0,overflowY:"auto",borderWidth:"1px",borderColor:"border.subtle",borderRadius:"md",bg:"bg",overscrollBehavior:"contain",children:y.jsx(lH,{})})]})}var xm={exports:{}};var Aw;function hH(){return Aw||(Aw=1,(function(n){(function(){var t={}.hasOwnProperty;function e(){for(var r="",a=0;a<arguments.length;a++){var l=arguments[a];l&&(r=s(r,i(l)))}return r}function i(r){if(typeof r=="string"||typeof r=="number")return r;if(typeof r!="object")return"";if(Array.isArray(r))return e.apply(null,r);if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]"))return r.toString();var a="";for(var l in r)t.call(r,l)&&r[l]&&(a=s(a,l));return a}function s(r,a){return a?r?r+" "+a:r+a:r}n.exports?(e.default=e,n.exports=e):window.classNames=e})()})(xm)),xm.exports}var dH=hH();const Ri=Eo(dH);function zo(n){let{top:t=0,left:e=0,transform:i,className:s,children:r,innerRef:a,...l}=n;return y.jsx("g",{ref:a,className:Ri("visx-group",s),transform:i||`translate(${e}, ${t})`,...l,children:r})}class Ps{x=0;y=0;constructor(t){let{x:e=0,y:i=0}=t;this.x=e,this.y=i}value(){return{x:this.x,y:this.y}}toArray(){return[this.x,this.y]}}function fH(n,t){return new Ps({x:n.x+t.x,y:n.y+t.y})}function pH(n,t){return new Ps({x:n.x-t.x,y:n.y-t.y})}function mH(n){return!!n&&n instanceof Element}function gH(n){return!!n&&(n instanceof SVGElement||"ownerSVGElement"in n)}function xH(n){return!!n&&"createSVGPoint"in n}function yH(n){return!!n&&"getScreenCTM"in n}function vH(n){return!!n&&"changedTouches"in n}function _H(n){return!!n&&"clientX"in n}function bH(n){return!!n&&(n instanceof Event||"nativeEvent"in n&&n.nativeEvent instanceof Event)}const ym={x:0,y:0};function wH(n){if(!n)return{...ym};if(vH(n))return n.changedTouches.length>0?{x:n.changedTouches[0].clientX,y:n.changedTouches[0].clientY}:{...ym};if(_H(n))return{x:n.clientX,y:n.clientY};const t=n?.target,e=t&&"getBoundingClientRect"in t?t.getBoundingClientRect():null;return e?{x:e.x+e.width/2,y:e.y+e.height/2}:{...ym}}function Tw(n,t){if(!n||!t)return null;const e=wH(t),i=gH(n)?n.ownerSVGElement:n,s=yH(i)?i.getScreenCTM():null;if(xH(i)&&s){let a=i.createSVGPoint();return a.x=e.x,a.y=e.y,a=a.matrixTransform(s.inverse()),new Ps({x:a.x,y:a.y})}const r=n.getBoundingClientRect();return new Ps({x:e.x-r.left-n.clientLeft,y:e.y-r.top-n.clientTop})}function Ew(n,t){if(mH(n)&&t)return Tw(n,t);if(bH(n)){const e=n,i=e.target;if(i)return Tw(i,e)}return null}function SH(n){const[t,e]=A.useState(n),i=A.useRef(null),s=A.useCallback((r,a)=>{i.current=a||null,e(r)},[e]);return A.useLayoutEffect(()=>{i.current&&(i.current(t),i.current=null)},[t]),[t,s]}function Rw(n,t,e){return Math.min(Math.max(n,t),e)}function CH(n,t){let e=n,i=1/0;for(const s of t){const r=Math.sqrt((s.x-n.x)**2+(s.y-n.y)**2);r<i&&(i=r,e={x:s.x,y:s.y})}return e}function jw(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t.length>0?CH(n,t):{x:Rw(n.x,e.xMin??-1/0,e.xMax??1/0),y:Rw(n.y,e.yMin??-1/0,e.yMax??1/0)}}function MH(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;if(!n)return[];const i=[],s=n.getTotalLength();for(let r=0;r<=s;r+=e){const l=n.getPointAtLength(r).matrixTransform(t);i.push(l)}return i}function PH(n){return A.useMemo(()=>{if(!n)return[];const e=n.getCTM()||new DOMMatrix;return MH(n,e)},[n?.getTotalLength()])}function AH(){let{resetOnStart:n=!1,snapToPointer:t=!0,onDragEnd:e,onDragMove:i,onDragStart:s,x:r,y:a,dx:l,dy:u,isDragging:h,restrict:f={},restrictToPath:p}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const g=A.useRef({x:r,y:a,dx:l,dy:u}),[x,w]=SH({x:r,y:a,dx:l??0,dy:u??0,isDragging:!1}),[_,b]=A.useState(new Ps({x:0,y:0}));A.useEffect(()=>{(g.current.x!==r||g.current.y!==a||g.current.dx!==l||g.current.dy!==u)&&(g.current={x:r,y:a,dx:l,dy:u},w(E=>({...E,x:r,y:a,dx:l??0,dy:u??0})))}),A.useEffect(()=>{h!==void 0&&x.isDragging!==h&&w(E=>({...E,isDragging:h}))},[x.isDragging,h,w]);const C=PH(p),M=A.useCallback(E=>{E.persist(),w(R=>{const{x:N=0,y:O=0,dx:k,dy:B}=R,I=new Ps({x:(N||0)+k,y:(O||0)+B}),X=Ew(E)||new Ps({x:0,y:0}),U=jw(t?X:I,C,f);return b(pH(I,X)),{isDragging:!0,dx:n?0:R.dx,dy:n?0:R.dy,x:n?U.x:U.x-R.dx,y:n?U.y:U.y-R.dy}},s&&(R=>{s({...R,event:E})}))},[s,n,f,C,w,t]),P=A.useCallback(E=>{E.persist(),w(R=>{if(!R.isDragging)return R;const{x:N=0,y:O=0}=R,k=Ew(E)||new Ps({x:0,y:0}),B=t?k:fH(k,_),I=jw(B,C,f);return{...R,dx:I.x-N,dy:I.y-O}},i&&(R=>{R.isDragging&&i({...R,event:E})}))},[w,i,t,_,C,f]),T=A.useCallback(E=>{E.persist(),w(R=>({...R,isDragging:!1}),e&&(R=>{e({...R,event:E})}))},[e,w]);return{...x,dragEnd:T,dragMove:P,dragStart:M}}function Ad(n){let{captureDragArea:t=!0,snapToPointer:e=!0,children:i,dx:s,dy:r,height:a,onDragEnd:l,onDragMove:u,onDragStart:h,resetOnStart:f,width:p,x:g,y:x,isDragging:w,restrict:_,restrictToPath:b}=n;const C=AH({resetOnStart:f,snapToPointer:e,onDragEnd:l,onDragMove:u,onDragStart:h,x:g,y:x,dx:s,dy:r,isDragging:w,restrict:_,restrictToPath:b});return y.jsxs(y.Fragment,{children:[C.isDragging&&t&&y.jsx("rect",{width:p,height:a,onPointerDown:C.dragStart,onPointerMove:C.dragMove,onPointerUp:C.dragEnd,fill:"transparent"}),i(C)]})}function Dh(n,t){if("invert"in n&&typeof n.invert<"u")return n.invert(t).valueOf();const[e,i]=n.range();let s=0;const a=("step"in n&&typeof n.step<"u"?n.step():1)*(i-e)/Math.abs(i-e);if(a>0)for(;t>e+a*(s+1);)s+=1;else for(;t<e+a*(s+1);)s+=1;return s}function kw(n,t,e,i){let s;const r=Dh(n,t+(t<e?-i:i)),a=Dh(n,e+(e<t?-i:i)),l=Math.min(r,a),u=Math.max(r,a);if("invert"in n&&typeof n.invert<"u")s={start:l,end:u};else{const h=[],f=n.domain();for(let p=l;p<=u;p+=1)h.push(f[p]);s={values:h}}return s}function r0(n){if(typeof window<"u"&&window.TouchEvent&&n instanceof TouchEvent)return{pageX:n.touches[0].pageX,pageY:n.touches[0].pageY};const t=n;return{pageX:t.pageX,pageY:t.pageY}}function TH(n,t){let e;return function(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];clearTimeout(e),e=setTimeout(()=>{n.apply(this,r)},t)}}let EH=class extends A.Component{handleDragStart=t=>{const{onBrushHandleChange:e,type:i,onBrushStart:s}=this.props;e&&e(i,r0(t.event)),s&&s(t)};handleDragMove=t=>{const{updateBrush:e,type:i,isControlled:s}=this.props;!t.isDragging||s||e(r=>{const{start:a,end:l}=r;let u=0;const h=Math.max(a.x,l.x),f=Math.min(a.x,l.x),p=Math.max(a.y,l.y),g=Math.min(a.y,l.y);switch(i){case"right":return u=h+t.dx,{...r,activeHandle:i,extent:{...r.extent,x0:Math.max(Math.min(u,a.x),r.bounds.x0),x1:Math.min(Math.max(u,a.x),r.bounds.x1)}};case"left":return u=f+t.dx,{...r,activeHandle:i,extent:{...r.extent,x0:Math.min(u,l.x),x1:Math.max(u,l.x)}};case"bottom":return u=p+t.dy,{...r,activeHandle:i,extent:{...r.extent,y0:Math.min(u,a.y),y1:Math.max(u,a.y)}};case"top":return u=g+t.dy,{...r,activeHandle:i,extent:{...r.extent,y0:Math.min(u,l.y),y1:Math.max(u,l.y)}};case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":default:return r}})};handleDragEnd=()=>{const{updateBrush:t,onBrushEnd:e,onBrushHandleChange:i,isControlled:s}=this.props;s||t(r=>{const{start:a,end:l,extent:u}=r;a.x=Math.min(u.x0,u.x1),a.y=Math.min(u.y0,u.y0),l.x=Math.max(u.x0,u.x1),l.y=Math.max(u.y0,u.y1);const h={...r,start:a,end:l,activeHandle:null,isBrushing:!1,extent:{x0:Math.min(a.x,l.x),x1:Math.max(a.x,l.x),y0:Math.min(a.y,l.y),y1:Math.max(a.y,l.y)}};return e&&e(h),h}),i&&i()};render(){const{stageWidth:t,stageHeight:e,brush:i,type:s,handle:r,isControlled:a,isDragInProgress:l,renderBrushHandle:u}=this.props,{x:h,y:f,width:p,height:g}=r,x=s==="right"||s==="left"?"ew-resize":"ns-resize";return y.jsx(Ad,{width:t,height:e,onDragStart:this.handleDragStart,onDragMove:this.handleDragMove,onDragEnd:this.handleDragEnd,resetOnStart:!0,isDragging:a?l:void 0,children:w=>{let{dragStart:_,dragEnd:b,dragMove:C,isDragging:M}=w;return y.jsxs("g",{children:[M&&y.jsx("rect",{fill:"transparent",width:t,height:e,style:{cursor:x},onPointerMove:C,onPointerUp:a?void 0:b,onPointerLeave:a?void 0:b}),!u&&y.jsx("rect",{x:h,y:f,width:p,height:g,fill:"transparent",className:`visx-brush-handle-${s}`,onPointerDown:_,onPointerMove:C,onPointerUp:a?void 0:b,style:{cursor:x,pointerEvents:i.activeHandle||i.isBrushing?"none":"all"}}),u&&y.jsx("g",{onPointerDown:_,onPointerMove:C,onPointerUp:a?void 0:b,children:u({...this.props.handle,height:e,className:`visx-brush-handle-${s}`,isBrushActive:i.extent.x0!==-1&&i.extent.x1!==-1})})]})}})}};class RH extends A.Component{static defaultProps={style:{}};cornerDragMove=t=>{const{updateBrush:e,type:i}=this.props;t.isDragging&&e(s=>{const{start:r,end:a}=s,l=Math.max(r.x,a.x),u=Math.min(r.x,a.x),h=Math.max(r.y,a.y),f=Math.min(r.y,a.y);let p=0,g=0;switch(i){case"topRight":return p=l+t.dx,g=f+t.dy,{...s,activeHandle:i,extent:{...s.extent,x0:Math.max(Math.min(p,r.x),s.bounds.x0),x1:Math.min(Math.max(p,r.x),s.bounds.x1),y0:Math.max(Math.min(g,a.y),s.bounds.y0),y1:Math.min(Math.max(g,a.y),s.bounds.y1)}};case"topLeft":return p=u+t.dx,g=f+t.dy,{...s,activeHandle:i,extent:{...s.extent,x0:Math.max(Math.min(p,a.x),s.bounds.x0),x1:Math.min(Math.max(p,a.x),s.bounds.x1),y0:Math.max(Math.min(g,a.y),s.bounds.y0),y1:Math.min(Math.max(g,a.y),s.bounds.y1)}};case"bottomLeft":return p=u+t.dx,g=h+t.dy,{...s,activeHandle:i,extent:{...s.extent,x0:Math.max(Math.min(p,a.x),s.bounds.x0),x1:Math.min(Math.max(p,a.x),s.bounds.x1),y0:Math.max(Math.min(g,r.y),s.bounds.y0),y1:Math.min(Math.max(g,r.y),s.bounds.y1)}};case"bottomRight":return p=l+t.dx,g=h+t.dy,{...s,activeHandle:i,extent:{...s.extent,x0:Math.max(Math.min(p,r.x),s.bounds.x0),x1:Math.min(Math.max(p,r.x),s.bounds.x1),y0:Math.max(Math.min(g,r.y),s.bounds.y0),y1:Math.min(Math.max(g,r.y),s.bounds.y1)}};case"top":case"right":case"bottom":case"left":default:return s}})};cornerDragEnd=()=>{const{updateBrush:t,onBrushEnd:e}=this.props;t(i=>{const{start:s,end:r,extent:a}=i;s.x=Math.min(a.x0,a.x1),s.y=Math.min(a.y0,a.y0),r.x=Math.max(a.x0,a.x1),r.y=Math.max(a.y0,a.y1);const l={...i,start:s,end:r,activeHandle:null,domain:{x0:Math.min(s.x,r.x),x1:Math.max(s.x,r.x),y0:Math.min(s.y,r.y),y1:Math.max(s.y,r.y)}};return e&&e(l),l})};render(){const{type:t,brush:e,stageWidth:i,stageHeight:s,style:r,corner:a}=this.props,l=r?.cursor||(t==="topLeft"||t==="bottomRight"?"nwse-resize":"nesw-resize"),u=e.activeHandle||e.isBrushing?"none":"all";return y.jsx(Ad,{width:i,height:s,onDragMove:this.cornerDragMove,onDragEnd:this.cornerDragEnd,resetOnStart:!0,children:h=>{let{dragMove:f,dragEnd:p,dragStart:g,isDragging:x}=h;return y.jsxs("g",{children:[x&&y.jsx("rect",{fill:"transparent",width:i,height:s,style:{cursor:l},onPointerMove:f,onPointerUp:p}),y.jsx("rect",{fill:"transparent",onPointerDown:g,onPointerMove:f,onPointerUp:p,className:`visx-brush-corner-${t}`,style:{cursor:l,pointerEvents:u,...r},...a})]})}})}}const jH={cursor:"move"};class kH extends A.Component{static defaultProps={onMouseLeave:null,onMouseUp:null,onMouseMove:null,onClick:null};selectionDragStart=t=>{const{onMoveSelectionChange:e,onBrushStart:i}=this.props;e&&e("move",r0(t.event)),i&&i(t)};selectionDragMove=t=>{const{updateBrush:e,isControlled:i}=this.props;i||e(s=>{const{x:r,y:a}=s.start,{x:l,y:u}=s.end,h=t.dx>0?Math.min(t.dx,s.bounds.x1-l):Math.max(t.dx,s.bounds.x0-r),f=t.dy>0?Math.min(t.dy,s.bounds.y1-u):Math.max(t.dy,s.bounds.y0-a);return{...s,isBrushing:!0,extent:{...s.extent,x0:r+h,x1:l+h,y0:a+f,y1:u+f}}})};selectionDragEnd=()=>{const{updateBrush:t,onBrushEnd:e,onMoveSelectionChange:i,isControlled:s}=this.props;s||t(r=>{const a={...r,isBrushing:!1,start:{...r.start,x:Math.min(r.extent.x0,r.extent.x1),y:Math.min(r.extent.y0,r.extent.y1)},end:{...r.end,x:Math.max(r.extent.x0,r.extent.x1),y:Math.max(r.extent.y0,r.extent.y1)}};return e&&e(a),a}),i&&i()};render(){const{width:t,height:e,stageWidth:i,stageHeight:s,brush:r,disableDraggingSelection:a,onMouseLeave:l,onMouseMove:u,onMouseUp:h,onClick:f,selectedBoxStyle:p,isControlled:g,isDragInProgress:x}=this.props;return y.jsx(Ad,{width:t,height:e,resetOnStart:!0,onDragStart:this.selectionDragStart,onDragMove:this.selectionDragMove,onDragEnd:this.selectionDragEnd,isDragging:g?x:void 0,children:w=>{let{isDragging:_,dragStart:b,dragEnd:C,dragMove:M}=w;return y.jsxs("g",{children:[_&&y.jsx("rect",{width:i,height:s,fill:"transparent",onPointerUp:g?void 0:C,onPointerMove:M,onPointerLeave:g?void 0:C,style:jH}),y.jsx("rect",{x:Math.min(r.extent.x0,r.extent.x1),y:Math.min(r.extent.y0,r.extent.y1),width:t,height:e,className:"visx-brush-selection",onPointerDown:a?void 0:b,onPointerLeave:P=>{l&&l(P)},onPointerMove:P=>{M(P),u&&u(P)},onPointerUp:P=>{g||C(P),h&&h(P)},onClick:P=>{f&&f(P)},style:{pointerEvents:r.isBrushing||r.activeHandle?"none":"all",cursor:a?void 0:"move"},...p})]})}})}}function Be(n){return function(){return n}}const Ex=Math.PI,Rx=2*Ex,ta=1e-6,NH=Rx-ta;function ME(n){this._+=n[0];for(let t=1,e=n.length;t<e;++t)this._+=arguments[t]+n[t]}function OH(n){let t=Math.floor(n);if(!(t>=0))throw new Error(`invalid digits: ${n}`);if(t>15)return ME;const e=10**t;return function(i){this._+=i[0];for(let s=1,r=i.length;s<r;++s)this._+=Math.round(arguments[s]*e)/e+i[s]}}class zH{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?ME:OH(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,i,s){this._append`Q${+t},${+e},${this._x1=+i},${this._y1=+s}`}bezierCurveTo(t,e,i,s,r,a){this._append`C${+t},${+e},${+i},${+s},${this._x1=+r},${this._y1=+a}`}arcTo(t,e,i,s,r){if(t=+t,e=+e,i=+i,s=+s,r=+r,r<0)throw new Error(`negative radius: ${r}`);let a=this._x1,l=this._y1,u=i-t,h=s-e,f=a-t,p=l-e,g=f*f+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=e}`;else if(g>ta)if(!(Math.abs(p*u-h*f)>ta)||!r)this._append`L${this._x1=t},${this._y1=e}`;else{let x=i-a,w=s-l,_=u*u+h*h,b=x*x+w*w,C=Math.sqrt(_),M=Math.sqrt(g),P=r*Math.tan((Ex-Math.acos((_+g-b)/(2*C*M)))/2),T=P/M,E=P/C;Math.abs(T-1)>ta&&this._append`L${t+T*f},${e+T*p}`,this._append`A${r},${r},0,0,${+(p*x>f*w)},${this._x1=t+E*u},${this._y1=e+E*h}`}}arc(t,e,i,s,r,a){if(t=+t,e=+e,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(s),u=i*Math.sin(s),h=t+l,f=e+u,p=1^a,g=a?s-r:r-s;this._x1===null?this._append`M${h},${f}`:(Math.abs(this._x1-h)>ta||Math.abs(this._y1-f)>ta)&&this._append`L${h},${f}`,i&&(g<0&&(g=g%Rx+Rx),g>NH?this._append`A${i},${i},0,1,${p},${t-l},${e-u}A${i},${i},0,1,${p},${this._x1=h},${this._y1=f}`:g>ta&&this._append`A${i},${i},0,${+(g>=Ex)},${p},${this._x1=t+i*Math.cos(r)},${this._y1=e+i*Math.sin(r)}`)}rect(t,e,i,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${i=+i}v${+s}h${-i}Z`}toString(){return this._}}function PE(n){let t=3;return n.digits=function(e){if(!arguments.length)return t;if(e==null)t=null;else{const i=Math.floor(e);if(!(i>=0))throw new RangeError(`invalid digits: ${e}`);t=i}return n},()=>new zH(t)}function AE(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function TE(n){this._context=n}TE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,t){switch(n=+n,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,t):this._context.moveTo(n,t);break;case 1:this._point=2;default:this._context.lineTo(n,t);break}}};function Ih(n){return new TE(n)}function EE(n){return n[0]}function RE(n){return n[1]}function jE(n,t){var e=Be(!0),i=null,s=Ih,r=null,a=PE(l);n=typeof n=="function"?n:n===void 0?EE:Be(n),t=typeof t=="function"?t:t===void 0?RE:Be(t);function l(u){var h,f=(u=AE(u)).length,p,g=!1,x;for(i==null&&(r=s(x=a())),h=0;h<=f;++h)!(h<f&&e(p=u[h],h,u))===g&&((g=!g)?r.lineStart():r.lineEnd()),g&&r.point(+n(p,h,u),+t(p,h,u));if(x)return r=null,x+""||null}return l.x=function(u){return arguments.length?(n=typeof u=="function"?u:Be(+u),l):n},l.y=function(u){return arguments.length?(t=typeof u=="function"?u:Be(+u),l):t},l.defined=function(u){return arguments.length?(e=typeof u=="function"?u:Be(!!u),l):e},l.curve=function(u){return arguments.length?(s=u,i!=null&&(r=s(i)),l):s},l.context=function(u){return arguments.length?(u==null?i=r=null:r=s(i=u),l):i},l}function DH(n,t,e){var i=null,s=Be(!0),r=null,a=Ih,l=null,u=PE(h);n=typeof n=="function"?n:n===void 0?EE:Be(+n),t=typeof t=="function"?t:Be(t===void 0?0:+t),e=typeof e=="function"?e:e===void 0?RE:Be(+e);function h(p){var g,x,w,_=(p=AE(p)).length,b,C=!1,M,P=new Array(_),T=new Array(_);for(r==null&&(l=a(M=u())),g=0;g<=_;++g){if(!(g<_&&s(b=p[g],g,p))===C)if(C=!C)x=g,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),w=g-1;w>=x;--w)l.point(P[w],T[w]);l.lineEnd(),l.areaEnd()}C&&(P[g]=+n(b,g,p),T[g]=+t(b,g,p),l.point(i?+i(b,g,p):P[g],e?+e(b,g,p):T[g]))}if(M)return l=null,M+""||null}function f(){return jE().defined(s).curve(a).context(r)}return h.x=function(p){return arguments.length?(n=typeof p=="function"?p:Be(+p),i=null,h):n},h.x0=function(p){return arguments.length?(n=typeof p=="function"?p:Be(+p),h):n},h.x1=function(p){return arguments.length?(i=p==null?null:typeof p=="function"?p:Be(+p),h):i},h.y=function(p){return arguments.length?(t=typeof p=="function"?p:Be(+p),e=null,h):t},h.y0=function(p){return arguments.length?(t=typeof p=="function"?p:Be(+p),h):t},h.y1=function(p){return arguments.length?(e=p==null?null:typeof p=="function"?p:Be(+p),h):e},h.lineX0=h.lineY0=function(){return f().x(n).y(t)},h.lineY1=function(){return f().x(n).y(e)},h.lineX1=function(){return f().x(i).y(t)},h.defined=function(p){return arguments.length?(s=typeof p=="function"?p:Be(!!p),h):s},h.curve=function(p){return arguments.length?(a=p,r!=null&&(l=a(r)),h):a},h.context=function(p){return arguments.length?(p==null?r=l=null:l=a(r=p),h):r},h}function kE(n,t){this._context=n,this._t=t}kE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(n,t){switch(n=+n,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,t):this._context.moveTo(n,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(n,t);else{var e=this._x*(1-this._t)+n*this._t;this._context.lineTo(e,this._y),this._context.lineTo(e,t)}break}}this._x=n,this._y=t}};function jx(n){return new kE(n,.5)}function wi(n,t){n(t)}function IH(){let{x:n,x0:t,x1:e,y:i,y0:s,y1:r,defined:a,curve:l}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const u=DH();return n&&wi(u.x,n),t&&wi(u.x0,t),e&&wi(u.x1,e),i&&wi(u.y,i),s&&wi(u.y0,s),r&&wi(u.y1,r),a&&u.defined(a),l&&u.curve(l),u}function BH(){let{x:n,y:t,defined:e,curve:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const s=jE();return n&&wi(s.x,n),t&&wi(s.y,t),e&&s.defined(e),i&&s.curve(i),s}function NE(n){let{from:t={x:0,y:0},to:e={x:1,y:1},fill:i="transparent",className:s,innerRef:r,...a}=n;const l=t.x===e.x||t.y===e.y;return y.jsx("line",{ref:r,className:Ri("visx-line",s),x1:t.x,y1:t.y,x2:e.x,y2:e.y,fill:i,shapeRendering:l?"crispEdges":"auto",...a})}function Bh(n){let{children:t,data:e=[],x:i,y:s,fill:r="transparent",className:a,curve:l,innerRef:u,defined:h=()=>!0,...f}=n;const p=BH({x:i,y:s,defined:h,curve:l});return t?y.jsx(y.Fragment,{children:t({path:p})}):y.jsx("path",{ref:u,className:Ri("visx-linepath",a),d:p(e)||"",fill:r,strokeLinecap:"round",...f})}function LH(n){let{x:t,x0:e,x1:i,y:s,y1:r,y0:a,yScale:l,data:u=[],defined:h=()=>!0,className:f,curve:p,innerRef:g,children:x,...w}=n;const _=IH({x:t,x0:e,x1:i,defined:h,curve:p});return a==null?_.y0(l.range()[0]):wi(_.y0,a),s&&!r&&wi(_.y1,s),r&&!s&&wi(_.y1,r),x?y.jsx(y.Fragment,{children:x({path:_})}):y.jsx("path",{ref:g,className:Ri("visx-area-closed",f),d:_(u)||"",...w})}function FH(n){let{className:t,innerRef:e,...i}=n;return y.jsx("rect",{ref:e,className:Ri("visx-bar",t),...i})}function Nw(n){return y.jsx(FH,{className:"visx-brush-overlay",fill:"transparent",x:0,y:0,...n})}class HH extends A.Component{constructor(t){super(t);const{initialBrushPosition:e}=t,i=e?this.getExtent(e.start,e.end):{x0:-1,x1:-1,y0:-1,y1:-1};this.state={start:{x:Math.max(0,i.x0),y:Math.max(0,i.y0)},end:{x:Math.max(0,i.x1),y:Math.max(0,i.y1)},extent:i,bounds:{x0:0,x1:this.props.width,y0:0,y1:this.props.height},isBrushing:!1,brushingType:void 0,activeHandle:null}}mouseUpTime=0;mouseDownTime=0;static defaultProps={brushDirection:"both",inheritedMargin:{left:0,top:0,right:0,bottom:0},onChange:null,handleSize:4,resizeTriggerAreas:["left","right"],onBrushStart:null,onBrushEnd:null,onMouseLeave:null,onMouseUp:null,onMouseMove:null,onClick:null,disableDraggingSelection:!1,disableDraggingOverlay:!1,clickSensitivity:200,resetOnEnd:!1,initialBrushPosition:null,useWindowMoveEvents:!1,renderBrushHandles:null};getIdleState=()=>{const{width:t,height:e}=this.props;return{start:{x:0,y:0},end:{x:0,y:0},extent:{x0:-1,x1:-1,y0:-1,y1:-1},bounds:{x0:0,x1:t,y0:0,y1:e},isBrushing:!1,brushPageOffset:void 0,activeHandle:null,brushingType:void 0}};componentDidUpdate(t){(this.props.width!==t.width||this.props.height!==t.height)&&this.setState(e=>{let{start:i,end:s,extent:r}=e;if(!(r.x0===-1&&r.x1===-1&&r.y0===-1&&r.y1===-1)){const a=this.props.width/t.width,l=this.props.height/t.height;i={x:a*r.x0,y:l*r.y0},s={x:a*r.x1,y:l*r.y1},r=this.getExtent(i,s)}return{start:i,end:s,extent:r,bounds:{x0:0,x1:this.props.width,y0:0,y1:this.props.height}}})}componentDidMount(){this.props.useWindowMoveEvents&&(window.addEventListener("mouseup",this.handleWindowPointerUp),window.addEventListener("mousemove",this.debouncedHandleWindowPointerMove))}componentWillUnmount(){this.props.useWindowMoveEvents&&(window.removeEventListener("mouseup",this.handleWindowPointerUp),window.removeEventListener("mousemove",this.debouncedHandleWindowPointerMove))}handleWindowPointerUp=()=>{const{useWindowMoveEvents:t,onBrushEnd:e,resetOnEnd:i}=this.props,{brushingType:s}=this.state;t&&s&&this.updateBrush(r=>{const{start:a,end:l,extent:u}=r;a.x=Math.min(u.x0,u.x1),a.y=Math.min(u.y0,u.y0),l.x=Math.max(u.x0,u.x1),l.y=Math.max(u.y0,u.y1);let h={...r,activeHandle:null,isBrushing:!1,brushingType:void 0};return e&&e(h),i&&(h={...h,...this.getIdleState()}),h})};handleWindowPointerMove=t=>{const{useWindowMoveEvents:e}=this.props,{brushingType:i,isBrushing:s,brushPageOffset:r,start:a}=this.state;if(!e||!s)return;const l=t.pageX-(r?.pageX||0),u=t.pageY-(r?.pageY||0);["left","right","top","bottom"].includes(i??"")&&this.updateBrush(h=>{const{x:f,y:p}=h.start,{x:g,y:x}=h.end;return{...h,isBrushing:!0,extent:{...h.extent,...this.getExtent({x:i==="left"?Math.min(Math.max(f+l,h.bounds.x0),h.bounds.x1):f,y:i==="top"?Math.min(Math.max(p+u,h.bounds.y0),h.bounds.y1):p},{x:i==="right"?Math.min(Math.max(g+l,h.bounds.x0),h.bounds.x1):g,y:i==="bottom"?Math.min(Math.max(x+u,h.bounds.y0),h.bounds.y1):x})}}}),i==="move"&&this.updateBrush(h=>{const{x:f,y:p}=h.start,{x:g,y:x}=h.end,w=l>0?Math.min(l,h.bounds.x1-g):Math.max(l,h.bounds.x0-f),_=u>0?Math.min(u,h.bounds.y1-x):Math.max(u,h.bounds.y0-p);return{...h,isBrushing:!0,extent:{...h.extent,x0:f+w,y0:p+_,x1:g+w,y1:x+_}}}),i==="select"&&this.updateBrush(h=>{const{x:f,y:p}=h.start,g={x:Math.min(Math.max(f+l,h.bounds.x0),h.bounds.x1),y:Math.min(Math.max(p+u,h.bounds.y0),h.bounds.y1)},x=this.getExtent(a,g);return{...h,end:g,extent:x}})};debouncedHandleWindowPointerMove=TH(this.handleWindowPointerMove,1);getExtent=(t,e)=>{const{brushDirection:i,width:s,height:r}=this.props,a=i==="vertical"?0:Math.min(t.x||0,e.x||0),l=i==="vertical"?s:Math.max(t.x||0,e.x||0),u=i==="horizontal"?0:Math.min(t.y||0,e.y||0),h=i==="horizontal"?r:Math.max(t.y||0,e.y||0);return{x0:a,x1:l,y0:u,y1:h}};handleDragStart=t=>{const{onBrushStart:e,left:i,top:s,inheritedMargin:r,useWindowMoveEvents:a}=this.props,l=r?.left?r.left:0,u=r?.top?r.top:0,h={x:(t.x||0)+t.dx-i-l,y:(t.y||0)+t.dy-s-u},f={...h};e&&e(h),this.updateBrush(p=>({...p,start:h,end:f,extent:{x0:-1,x1:-1,y0:-1,y1:-1},isBrushing:!0,brushingType:"select",brushPageOffset:a?r0(t.event):void 0}))};handleBrushStart=t=>{const{onBrushStart:e,left:i,top:s,inheritedMargin:r}=this.props;if(e){const a=r?.left?r.left:0,l=r?.top?r.top:0,u={x:(t.x||0)+t.dx-i-a,y:(t.y||0)+t.dy-s-l};e(u)}};handleDragMove=t=>{const{left:e,top:i,inheritedMargin:s,useWindowMoveEvents:r}=this.props;if(!t.isDragging||r)return;const a=s?.left||0,l=s?.top||0,u={x:(t.x||0)+t.dx-e-a,y:(t.y||0)+t.dy-i-l};this.updateBrush(h=>{const{start:f}=h,p=this.getExtent(f,u);return{...h,end:u,extent:p}})};handleDragEnd=()=>{const{onBrushEnd:t,resetOnEnd:e,useWindowMoveEvents:i}=this.props;i||this.updateBrush(s=>{const{extent:r}=s;let a={...s,start:{x:r.x0,y:r.y0},end:{x:r.x1,y:r.y1},isBrushing:!1,brushingType:void 0,activeHandle:null};return t&&t(a),e&&(a={...a,...this.getIdleState()}),a})};getBrushWidth=()=>{const{extent:t}=this.state,{x0:e,x1:i}=t;return Math.max(Math.max(e,i)-Math.min(e,i),0)};getBrushHeight=()=>{const{extent:t}=this.state,{y1:e,y0:i}=t;return Math.max(Math.max(i,e)-Math.min(i,e),0)};handles=()=>{const{handleSize:t}=this.props,{extent:e}=this.state,{x0:i,x1:s,y0:r,y1:a}=e,l=t/2,u=this.getBrushWidth(),h=this.getBrushHeight();return{top:{x:i-l,y:r-l,height:t,width:u+t},bottom:{x:i-l,y:a-l,height:t,width:u+t},right:{x:s-l,y:r-l,height:h+t,width:t},left:{x:i-l,y:r-l,height:h+t,width:t}}};corners=()=>{const{handleSize:t}=this.props,{extent:e}=this.state,{x0:i,x1:s,y0:r,y1:a}=e,l=t/2,u=t,h=t;return{topLeft:{x:Math.min(i,s)-l,y:Math.min(r,a)-l,width:u,height:h},topRight:{x:Math.max(i,s)-l,y:Math.min(r,a)-l,width:u,height:h},bottomLeft:{x:Math.min(i,s)-l,y:Math.max(r,a)-l,width:u,height:h},bottomRight:{x:Math.max(i,s)-l,y:Math.max(r,a)-l,width:u,height:h}}};updateBrush=t=>{const{onChange:e}=this.props;this.setState(t,()=>{e&&e(this.state)})};reset=()=>this.updateBrush(()=>this.getIdleState());handleBrushingTypeChange=(t,e)=>{this.updateBrush(i=>{const s={...i,brushingType:t,isBrushing:t!==void 0};return(e||t===void 0)&&(s.brushPageOffset=e),s})};render(){const{start:t,end:e}=this.state,{top:i,left:s,width:r,height:a,onMouseLeave:l,onMouseUp:u,onMouseMove:h,onBrushEnd:f,onClick:p,resizeTriggerAreas:g,selectedBoxStyle:x,disableDraggingSelection:w,disableDraggingOverlay:_,clickSensitivity:b,useWindowMoveEvents:C,renderBrushHandle:M}=this.props,{brushingType:P}=this.state,T=this.handles(),E=this.corners(),R=this.getBrushWidth(),N=this.getBrushHeight(),O=new Set(g);return y.jsxs(zo,{className:"visx-brush",top:i,left:s,children:[_?y.jsx(Nw,{width:r,height:a,onClick:k=>{const B=this.mouseUpTime-this.mouseDownTime;p&&B<b&&p(k)},style:{cursor:"default"}}):y.jsx(Ad,{width:r,height:a,resetOnStart:!0,onDragStart:this.handleDragStart,onDragMove:this.handleDragMove,onDragEnd:this.handleDragEnd,isDragging:C?P==="select":void 0,children:k=>{let{dragStart:B,isDragging:I,dragMove:X,dragEnd:q}=k;return y.jsx(Nw,{width:r,height:a,onDoubleClick:()=>this.reset(),onClick:U=>{const Y=this.mouseUpTime-this.mouseDownTime;p&&Y<b&&p(U)},onPointerDown:U=>{this.mouseDownTime=Date.now(),B(U)},onPointerLeave:U=>{l&&l(U)},onPointerMove:U=>{!I&&h&&h(U),I&&X(U)},onPointerUp:U=>{this.mouseUpTime=Date.now(),u&&u(U),q(U)},style:{cursor:"crosshair"}})}}),t&&e&&y.jsx(kH,{updateBrush:this.updateBrush,width:R,height:N,stageWidth:r,stageHeight:a,brush:this.state,disableDraggingSelection:w,onBrushEnd:f,onBrushStart:this.handleBrushStart,onMouseLeave:l,onMouseMove:h,onMouseUp:u,onMoveSelectionChange:this.handleBrushingTypeChange,onClick:p,selectedBoxStyle:x,isControlled:C,isDragInProgress:C?P==="move":void 0}),t&&e&&Object.keys(T).filter(k=>O.has(k)).map(k=>{const B=T[k];return B&&y.jsx(EH,{type:k,handle:B,stageWidth:r,stageHeight:a,updateBrush:this.updateBrush,brush:this.state,onBrushStart:this.handleBrushStart,onBrushEnd:f,isControlled:C,isDragInProgress:C?P===k:void 0,onBrushHandleChange:this.handleBrushingTypeChange,renderBrushHandle:M},`handle-${k}`)}),t&&e&&Object.keys(E).filter(k=>O.has(k)).map(k=>{const B=E[k];return B&&y.jsx(RH,{type:k,brush:this.state,updateBrush:this.updateBrush,stageWidth:r,stageHeight:a,corner:B,onBrushEnd:f},`corner-${k}`)})]})}}const Ow=2,zw="steelblue";class UH extends A.Component{static defaultProps={xScale:null,yScale:null,onChange:null,height:0,width:0,selectedBoxStyle:{fill:zw,fillOpacity:.2,stroke:zw,strokeWidth:1,strokeOpacity:.8},margin:{top:0,left:0,right:0,bottom:0},handleSize:4,brushDirection:"horizontal",initialBrushPosition:null,resizeTriggerAreas:["left","right"],brushRegion:"chart",yAxisOrientation:"right",xAxisOrientation:"bottom",onBrushStart:null,onBrushEnd:null,disableDraggingSelection:!1,resetOnEnd:!1,onMouseMove:null,onMouseLeave:null,onClick:null,useWindowMoveEvents:!1,renderBrushHandles:null};handleChange=t=>{const{onChange:e}=this.props;if(!e)return;const{x0:i}=t.extent;if(typeof i>"u"||i<0){e(null);return}const s=this.convertRangeToDomain(t);e(s)};convertRangeToDomain(t){const{xScale:e,yScale:i}=this.props,{x0:s,x1:r,y0:a,y1:l}=t.extent,u=kw(e,s||0,r||0,Ow),h=kw(i,a||0,l||0,Ow);return{x0:u.start||0,x1:u.end||0,xValues:u.values,y0:h.start||0,y1:h.end||0,yValues:h.values}}handleBrushStart=t=>{const{onBrushStart:e}=this.props;if(!e)return;const{x:i,y:s}=t,{xScale:r,yScale:a}=this.props,l=Dh(r,i),u=Dh(a,s);e({x:"invert"in r&&typeof r.invert<"u"?l:r.domain()[l],y:"invert"in a&&typeof a.invert<"u"?u:a.domain()[u]})};handleBrushEnd=t=>{const{onBrushEnd:e}=this.props;if(!e)return;const{x0:i}=t.extent;if(typeof i>"u"||i<0){e(null);return}const s=this.convertRangeToDomain(t);e(s)};render(){const{xScale:t,yScale:e,height:i,width:s,margin:r,brushDirection:a,initialBrushPosition:l,innerRef:u,resizeTriggerAreas:h,brushRegion:f,yAxisOrientation:p,xAxisOrientation:g,selectedBoxStyle:x,disableDraggingSelection:w,disableDraggingOverlay:_,resetOnEnd:b,onMouseLeave:C,onMouseMove:M,onClick:P,handleSize:T,useWindowMoveEvents:E,renderBrushHandle:R}=this.props;if(!t||!e)return null;let N,O,k,B;const I=r?.left?r.left:0,X=r?.top?r.top:0,q=r?.right?r.right:0,U=r?.bottom?r.bottom:0;return f==="chart"?(k=0,B=0,N=s,O=i):f==="yAxis"?(B=0,O=i,p==="right"?(k=s,N=q):(k=-I,N=I)):(k=0,N=s,g==="bottom"?(B=i,O=U):(B=-X,O=X)),y.jsx(HH,{width:N,height:O,left:k,top:B,brushDirection:a,disableDraggingSelection:w,disableDraggingOverlay:_,handleSize:T,inheritedMargin:r,initialBrushPosition:l,ref:u,resetOnEnd:b,resizeTriggerAreas:h,selectedBoxStyle:x,onBrushEnd:this.handleBrushEnd,onBrushStart:this.handleBrushStart,onChange:this.handleChange,onClick:P,onMouseLeave:C,onMouseMove:M,useWindowMoveEvents:E,renderBrushHandle:R})}}var a0=Ic(),vt=n=>Dc(n,a0),o0=Ic();vt.write=n=>Dc(n,o0);var Td=Ic();vt.onStart=n=>Dc(n,Td);var l0=Ic();vt.onFrame=n=>Dc(n,l0);var c0=Ic();vt.onFinish=n=>Dc(n,c0);var uo=[];vt.setTimeout=(n,t)=>{const e=vt.now()+t,i=()=>{const r=uo.findIndex(a=>a.cancel==i);~r&&uo.splice(r,1),ur-=~r?1:0},s={time:e,handler:n,cancel:i};return uo.splice(OE(e),0,s),ur+=1,zE(),s};var OE=n=>~(~uo.findIndex(t=>t.time>n)||~uo.length);vt.cancel=n=>{Td.delete(n),l0.delete(n),c0.delete(n),a0.delete(n),o0.delete(n)};vt.sync=n=>{kx=!0,vt.batchedUpdates(n),kx=!1};vt.throttle=n=>{let t;function e(){try{n(...t)}finally{t=null}}function i(...s){t=s,vt.onStart(e)}return i.handler=n,i.cancel=()=>{Td.delete(e),t=null},i};var u0=typeof window<"u"?window.requestAnimationFrame:(()=>{});vt.use=n=>u0=n;vt.now=typeof performance<"u"?()=>performance.now():Date.now;vt.batchedUpdates=n=>n();vt.catch=console.error;vt.frameLoop="always";vt.advance=()=>{vt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):IE()};var cr=-1,ur=0,kx=!1;function Dc(n,t){kx?(t.delete(n),n(0)):(t.add(n),zE())}function zE(){cr<0&&(cr=0,vt.frameLoop!=="demand"&&u0(DE))}function GH(){cr=-1}function DE(){~cr&&(u0(DE),vt.batchedUpdates(IE))}function IE(){const n=cr;cr=vt.now();const t=OE(cr);if(t&&(BE(uo.splice(0,t),e=>e.handler()),ur-=t),!ur){GH();return}Td.flush(),a0.flush(n?Math.min(64,cr-n):16.667),l0.flush(),o0.flush(),c0.flush()}function Ic(){let n=new Set,t=n;return{add(e){ur+=t==n&&!n.has(e)?1:0,n.add(e)},delete(e){return ur-=t==n&&n.has(e)?1:0,n.delete(e)},flush(e){t.size&&(n=new Set,ur-=t.size,BE(t,i=>i(e)&&n.add(i)),ur+=n.size,t=n)}}}function BE(n,t){n.forEach(e=>{try{t(e)}catch(i){vt.catch(i)}})}var VH=Object.defineProperty,WH=(n,t)=>{for(var e in t)VH(n,e,{get:t[e],enumerable:!0})},ji={};WH(ji,{assign:()=>qH,colors:()=>pr,createStringInterpolator:()=>d0,skipAnimation:()=>FE,to:()=>LE,willAdvance:()=>f0});function Nx(){}var YH=(n,t,e)=>Object.defineProperty(n,t,{value:e,writable:!0,configurable:!0}),nt={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function ws(n,t){if(nt.arr(n)){if(!nt.arr(t)||n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}return n===t}var bt=(n,t)=>n.forEach(t);function Ji(n,t,e){if(nt.arr(n)){for(let i=0;i<n.length;i++)t.call(e,n[i],`${i}`);return}for(const i in n)n.hasOwnProperty(i)&&t.call(e,n[i],i)}var nn=n=>nt.und(n)?[]:nt.arr(n)?n:[n];function Gl(n,t){if(n.size){const e=Array.from(n);n.clear(),bt(e,t)}}var Nl=(n,...t)=>Gl(n,e=>e(...t)),h0=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),d0,LE,pr=null,FE=!1,f0=Nx,qH=n=>{n.to&&(LE=n.to),n.now&&(vt.now=n.now),n.colors!==void 0&&(pr=n.colors),n.skipAnimation!=null&&(FE=n.skipAnimation),n.createStringInterpolator&&(d0=n.createStringInterpolator),n.requestAnimationFrame&&vt.use(n.requestAnimationFrame),n.batchedUpdates&&(vt.batchedUpdates=n.batchedUpdates),n.willAdvance&&(f0=n.willAdvance),n.frameLoop&&(vt.frameLoop=n.frameLoop)},Vl=new Set,ri=[],vm=[],Lh=0,Ed={get idle(){return!Vl.size&&!ri.length},start(n){Lh>n.priority?(Vl.add(n),vt.onStart(XH)):(HE(n),vt(Ox))},advance:Ox,sort(n){if(Lh)vt.onFrame(()=>Ed.sort(n));else{const t=ri.indexOf(n);~t&&(ri.splice(t,1),UE(n))}},clear(){ri=[],Vl.clear()}};function XH(){Vl.forEach(HE),Vl.clear(),vt(Ox)}function HE(n){ri.includes(n)||UE(n)}function UE(n){ri.splice($H(ri,t=>t.priority>n.priority),0,n)}function Ox(n){const t=vm;for(let e=0;e<ri.length;e++){const i=ri[e];Lh=i.priority,i.idle||(f0(i),i.advance(n),i.idle||t.push(i))}return Lh=0,vm=ri,vm.length=0,ri=t,ri.length>0}function $H(n,t){const e=n.findIndex(t);return e<0?n.length:e}var QH={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Ti="[-+]?\\d*\\.?\\d+",Fh=Ti+"%";function Rd(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}var KH=new RegExp("rgb"+Rd(Ti,Ti,Ti)),ZH=new RegExp("rgba"+Rd(Ti,Ti,Ti,Ti)),JH=new RegExp("hsl"+Rd(Ti,Fh,Fh)),tU=new RegExp("hsla"+Rd(Ti,Fh,Fh,Ti)),eU=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,nU=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,iU=/^#([0-9a-fA-F]{6})$/,sU=/^#([0-9a-fA-F]{8})$/;function rU(n){let t;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(t=iU.exec(n))?parseInt(t[1]+"ff",16)>>>0:pr&&pr[n]!==void 0?pr[n]:(t=KH.exec(n))?($a(t[1])<<24|$a(t[2])<<16|$a(t[3])<<8|255)>>>0:(t=ZH.exec(n))?($a(t[1])<<24|$a(t[2])<<16|$a(t[3])<<8|Bw(t[4]))>>>0:(t=eU.exec(n))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=sU.exec(n))?parseInt(t[1],16)>>>0:(t=nU.exec(n))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=JH.exec(n))?(Dw(Iw(t[1]),Qu(t[2]),Qu(t[3]))|255)>>>0:(t=tU.exec(n))?(Dw(Iw(t[1]),Qu(t[2]),Qu(t[3]))|Bw(t[4]))>>>0:null}function _m(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function Dw(n,t,e){const i=e<.5?e*(1+t):e+t-e*t,s=2*e-i,r=_m(s,i,n+1/3),a=_m(s,i,n),l=_m(s,i,n-1/3);return Math.round(r*255)<<24|Math.round(a*255)<<16|Math.round(l*255)<<8}function $a(n){const t=parseInt(n,10);return t<0?0:t>255?255:t}function Iw(n){return(parseFloat(n)%360+360)%360/360}function Bw(n){const t=parseFloat(n);return t<0?0:t>1?255:Math.round(t*255)}function Qu(n){const t=parseFloat(n);return t<0?0:t>100?1:t/100}function Lw(n){let t=rU(n);if(t===null)return n;t=t||0;const e=(t&4278190080)>>>24,i=(t&16711680)>>>16,s=(t&65280)>>>8,r=(t&255)/255;return`rgba(${e}, ${i}, ${s}, ${r})`}var uc=(n,t,e)=>{if(nt.fun(n))return n;if(nt.arr(n))return uc({range:n,output:t,extrapolate:e});if(nt.str(n.output[0]))return d0(n);const i=n,s=i.output,r=i.range||[0,1],a=i.extrapolateLeft||i.extrapolate||"extend",l=i.extrapolateRight||i.extrapolate||"extend",u=i.easing||(h=>h);return h=>{const f=oU(h,r);return aU(h,r[f],r[f+1],s[f],s[f+1],u,a,l,i.map)}};function aU(n,t,e,i,s,r,a,l,u){let h=u?u(n):n;if(h<t){if(a==="identity")return h;a==="clamp"&&(h=t)}if(h>e){if(l==="identity")return h;l==="clamp"&&(h=e)}return i===s?i:t===e?n<=t?i:s:(t===-1/0?h=-h:e===1/0?h=h-t:h=(h-t)/(e-t),h=r(h),i===-1/0?h=-h:s===1/0?h=h+i:h=h*(s-i)+i,h)}function oU(n,t){for(var e=1;e<t.length-1&&!(t[e]>=n);++e);return e-1}var lU={linear:n=>n},hc=Symbol.for("FluidValue.get"),Ao=Symbol.for("FluidValue.observers"),si=n=>!!(n&&n[hc]),un=n=>n&&n[hc]?n[hc]():n,Fw=n=>n[Ao]||null;function cU(n,t){n.eventObserved?n.eventObserved(t):n(t)}function dc(n,t){const e=n[Ao];e&&e.forEach(i=>{cU(i,t)})}var GE=class{constructor(n){if(!n&&!(n=this.get))throw Error("Unknown getter");uU(this,n)}},uU=(n,t)=>VE(n,hc,t);function Do(n,t){if(n[hc]){let e=n[Ao];e||VE(n,Ao,e=new Set),e.has(t)||(e.add(t),n.observerAdded&&n.observerAdded(e.size,t))}return t}function fc(n,t){const e=n[Ao];if(e&&e.has(t)){const i=e.size-1;i?e.delete(t):n[Ao]=null,n.observerRemoved&&n.observerRemoved(i,t)}}var VE=(n,t,e)=>Object.defineProperty(n,t,{value:e,writable:!0,configurable:!0}),hh=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,hU=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Hw=new RegExp(`(${hh.source})(%|[a-z]+)`,"i"),dU=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,jd=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,WE=n=>{const[t,e]=fU(n);if(!t||h0())return n;const i=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(i)return i.trim();if(e&&e.startsWith("--")){const s=window.getComputedStyle(document.documentElement).getPropertyValue(e);return s||n}else{if(e&&jd.test(e))return WE(e);if(e)return e}return n},fU=n=>{const t=jd.exec(n);if(!t)return[,];const[,e,i]=t;return[e,i]},bm,pU=(n,t,e,i,s)=>`rgba(${Math.round(t)}, ${Math.round(e)}, ${Math.round(i)}, ${s})`,YE=n=>{bm||(bm=pr?new RegExp(`(${Object.keys(pr).join("|")})(?!\\w)`,"g"):/^\b$/);const t=n.output.map(r=>un(r).replace(jd,WE).replace(hU,Lw).replace(bm,Lw)),e=t.map(r=>r.match(hh).map(Number)),s=e[0].map((r,a)=>e.map(l=>{if(!(a in l))throw Error('The arity of each "output" value must be equal');return l[a]})).map(r=>uc({...n,output:r}));return r=>{const a=!Hw.test(t[0])&&t.find(u=>Hw.test(u))?.replace(hh,"");let l=0;return t[0].replace(hh,()=>`${s[l++](r)}${a||""}`).replace(dU,pU)}},p0="react-spring: ",qE=n=>{const t=n;let e=!1;if(typeof t!="function")throw new TypeError(`${p0}once requires a function parameter`);return(...i)=>{e||(t(...i),e=!0)}},mU=qE(console.warn);function gU(){mU(`${p0}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var xU=qE(console.warn);function yU(){xU(`${p0}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function kd(n){return nt.str(n)&&(n[0]=="#"||/\d/.test(n)||!h0()&&jd.test(n)||n in(pr||{}))}var no=h0()?A.useEffect:A.useLayoutEffect,vU=()=>{const n=A.useRef(!1);return no(()=>(n.current=!0,()=>{n.current=!1}),[]),n};function XE(){const n=A.useState()[1],t=vU();return()=>{t.current&&n(Math.random())}}var $E=n=>A.useEffect(n,_U),_U=[];function bU(n){const t=A.useRef(void 0);return A.useEffect(()=>{t.current=n}),t.current}var pc=Symbol.for("Animated:node"),wU=n=>!!n&&n[pc]===n,Vi=n=>n&&n[pc],m0=(n,t)=>YH(n,pc,t),Nd=n=>n&&n[pc]&&n[pc].getPayload(),QE=class{constructor(){m0(this,this)}getPayload(){return this.payload||[]}},Od=class KE extends QE{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,nt.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new KE(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return nt.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,nt.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Hh=class ZE extends Od{constructor(t){super(0),this._string=null,this._toString=uc({output:[t,t]})}static create(t){return new ZE(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(nt.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=uc({output:[this.getValue(),t]})),this._value=0,super.reset()}},Uh={dependencies:null},zd=class extends QE{constructor(n){super(),this.source=n,this.setValue(n)}getValue(n){const t={};return Ji(this.source,(e,i)=>{wU(e)?t[i]=e.getValue(n):si(e)?t[i]=un(e):n||(t[i]=e)}),t}setValue(n){this.source=n,this.payload=this._makePayload(n)}reset(){this.payload&&bt(this.payload,n=>n.reset())}_makePayload(n){if(n){const t=new Set;return Ji(n,this._addToPayload,t),Array.from(t)}}_addToPayload(n){Uh.dependencies&&si(n)&&Uh.dependencies.add(n);const t=Nd(n);t&&bt(t,e=>this.add(e))}},SU=class JE extends zd{constructor(t){super(t)}static create(t){return new JE(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((i,s)=>i.setValue(t[s])).some(Boolean):(super.setValue(t.map(CU)),!0)}};function CU(n){return(kd(n)?Hh:Od).create(n)}function zx(n){const t=Vi(n);return t?t.constructor:nt.arr(n)?SU:kd(n)?Hh:Od}var Uw=(n,t)=>{const e=!nt.fun(n)||n.prototype&&n.prototype.isReactComponent;return A.forwardRef((i,s)=>{const r=A.useRef(null),a=e&&A.useCallback(w=>{r.current=AU(s,w)},[s]),[l,u]=PU(i,t),h=XE(),f=()=>{const w=r.current;if(e&&!w)return;(w?t.applyAnimatedValues(w,l.getValue(!0)):!1)===!1&&h()},p=new MU(f,u),g=A.useRef(void 0);no(()=>(g.current=p,bt(u,w=>Do(w,p)),()=>{g.current&&(bt(g.current.deps,w=>fc(w,g.current)),vt.cancel(g.current.update))})),A.useEffect(f,[]),$E(()=>()=>{const w=g.current;bt(w.deps,_=>fc(_,w))});const x=t.getComponentProps(l.getValue());return A.createElement(n,{...x,ref:a})})},MU=class{constructor(n,t){this.update=n,this.deps=t}eventObserved(n){n.type=="change"&&vt.write(this.update)}};function PU(n,t){const e=new Set;return Uh.dependencies=e,n.style&&(n={...n,style:t.createAnimatedStyle(n.style)}),n=new zd(n),Uh.dependencies=null,[n,e]}function AU(n,t){return n&&(nt.fun(n)?n(t):n.current=t),t}var Gw=Symbol.for("AnimatedComponent"),TU=(n,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:e=s=>new zd(s),getComponentProps:i=s=>s}={})=>{const s={applyAnimatedValues:t,createAnimatedStyle:e,getComponentProps:i},r=a=>{const l=Vw(a)||"Anonymous";return nt.str(a)?a=r[a]||(r[a]=Uw(a,s)):a=a[Gw]||(a[Gw]=Uw(a,s)),a.displayName=`Animated(${l})`,a};return Ji(n,(a,l)=>{nt.arr(n)&&(l=Vw(a)),r[l]=r(a)}),{animated:r}},Vw=n=>nt.str(n)?n:n&&nt.str(n.displayName)?n.displayName:nt.fun(n)&&n.name||null;function hn(n,...t){return nt.fun(n)?n(...t):n}var Wl=(n,t)=>n===!0||!!(t&&n&&(nt.fun(n)?n(t):nn(n).includes(t))),tR=(n,t)=>nt.obj(n)?t&&n[t]:n,eR=(n,t)=>n.default===!0?n[t]:n.default?n.default[t]:void 0,EU=n=>n,g0=(n,t=EU)=>{let e=RU;n.default&&n.default!==!0&&(n=n.default,e=Object.keys(n));const i={};for(const s of e){const r=t(n[s],s);nt.und(r)||(i[s]=r)}return i},RU=["config","onProps","onStart","onChange","onPause","onResume","onRest"],jU={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function kU(n){const t={};let e=0;if(Ji(n,(i,s)=>{jU[s]||(t[s]=i,e++)}),e)return t}function x0(n){const t=kU(n);if(t){const e={to:t};return Ji(n,(i,s)=>s in t||(e[s]=i)),e}return{...n}}function mc(n){return n=un(n),nt.arr(n)?n.map(mc):kd(n)?ji.createStringInterpolator({range:[0,1],output:[n,n]})(1):n}function NU(n){for(const t in n)return!0;return!1}function Dx(n){return nt.fun(n)||nt.arr(n)&&nt.obj(n[0])}function Ww(n,t){n.ref?.delete(n),t?.delete(n)}function OU(n,t){t&&n.ref!==t&&(n.ref?.delete(n),t.add(n),n.ref=t)}var zU={default:{tension:170,friction:26}},Ix={...zU.default,mass:1,damping:1,easing:lU.linear,clamp:!1},DU=class{constructor(){this.velocity=0,Object.assign(this,Ix)}};function IU(n,t,e){e&&(e={...e},Yw(e,t),t={...e,...t}),Yw(n,t),Object.assign(n,t);for(const a in Ix)n[a]==null&&(n[a]=Ix[a]);let{frequency:i,damping:s}=n;const{mass:r}=n;return nt.und(i)||(i<.01&&(i=.01),s<0&&(s=0),n.tension=Math.pow(2*Math.PI/i,2)*r,n.friction=4*Math.PI*s*r/i),n}function Yw(n,t){if(!nt.und(t.decay))n.duration=void 0;else{const e=!nt.und(t.tension)||!nt.und(t.friction);(e||!nt.und(t.frequency)||!nt.und(t.damping)||!nt.und(t.mass))&&(n.duration=void 0,n.decay=void 0),e&&(n.frequency=void 0)}}var qw=[],BU=class{constructor(){this.changed=!1,this.values=qw,this.toValues=null,this.fromValues=qw,this.config=new DU,this.immediate=!1}};function nR(n,{key:t,props:e,defaultProps:i,state:s,actions:r}){return new Promise((a,l)=>{let u,h,f=Wl(e.cancel??i?.cancel,t);if(f)x();else{nt.und(e.pause)||(s.paused=Wl(e.pause,t));let w=i?.pause;w!==!0&&(w=s.paused||Wl(w,t)),u=hn(e.delay||0,t),w?(s.resumeQueue.add(g),r.pause()):(r.resume(),g())}function p(){s.resumeQueue.add(g),s.timeouts.delete(h),h.cancel(),u=h.time-vt.now()}function g(){u>0&&!ji.skipAnimation?(s.delayed=!0,h=vt.setTimeout(x,u),s.pauseQueue.add(p),s.timeouts.add(h)):x()}function x(){s.delayed&&(s.delayed=!1),s.pauseQueue.delete(p),s.timeouts.delete(h),n<=(s.cancelId||0)&&(f=!0);try{r.start({...e,callId:n,cancel:f},a)}catch(w){l(w)}}})}var y0=(n,t)=>t.length==1?t[0]:t.some(e=>e.cancelled)?ho(n.get()):t.every(e=>e.noop)?iR(n.get()):Si(n.get(),t.every(e=>e.finished)),iR=n=>({value:n,noop:!0,finished:!0,cancelled:!1}),Si=(n,t,e=!1)=>({value:n,finished:t,cancelled:e}),ho=n=>({value:n,cancelled:!0,finished:!1});function sR(n,t,e,i){const{callId:s,parentId:r,onRest:a}=t,{asyncTo:l,promise:u}=e;return!r&&n===l&&!t.reset?u:e.promise=(async()=>{e.asyncId=s,e.asyncTo=n;const h=g0(t,(b,C)=>C==="onRest"?void 0:b);let f,p;const g=new Promise((b,C)=>(f=b,p=C)),x=b=>{const C=s<=(e.cancelId||0)&&ho(i)||s!==e.asyncId&&Si(i,!1);if(C)throw b.result=C,p(b),b},w=(b,C)=>{const M=new Xw,P=new $w;return(async()=>{if(ji.skipAnimation)throw gc(e),P.result=Si(i,!1),p(P),P;x(M);const T=nt.obj(b)?{...b}:{...C,to:b};T.parentId=s,Ji(h,(R,N)=>{nt.und(T[N])&&(T[N]=R)});const E=await i.start(T);return x(M),e.paused&&await new Promise(R=>{e.resumeQueue.add(R)}),E})()};let _;if(ji.skipAnimation)return gc(e),Si(i,!1);try{let b;nt.arr(n)?b=(async C=>{for(const M of C)await w(M)})(n):b=Promise.resolve(n(w,i.stop.bind(i))),await Promise.all([b.then(f),g]),_=Si(i.get(),!0,!1)}catch(b){if(b instanceof Xw)_=b.result;else if(b instanceof $w)_=b.result;else throw b}finally{s==e.asyncId&&(e.asyncId=r,e.asyncTo=r?l:void 0,e.promise=r?u:void 0)}return nt.fun(a)&&vt.batchedUpdates(()=>{a(_,i,i.item)}),_})()}function gc(n,t){Gl(n.timeouts,e=>e.cancel()),n.pauseQueue.clear(),n.resumeQueue.clear(),n.asyncId=n.asyncTo=n.promise=void 0,t&&(n.cancelId=t)}var Xw=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},$w=class extends Error{constructor(){super("SkipAnimationSignal")}},Bx=n=>n instanceof v0,LU=1,v0=class extends GE{constructor(){super(...arguments),this.id=LU++,this._priority=0}get priority(){return this._priority}set priority(n){this._priority!=n&&(this._priority=n,this._onPriorityChange(n))}get(){const n=Vi(this);return n&&n.getValue()}to(...n){return ji.to(this,n)}interpolate(...n){return gU(),ji.to(this,n)}toJSON(){return this.get()}observerAdded(n){n==1&&this._attach()}observerRemoved(n){n==0&&this._detach()}_attach(){}_detach(){}_onChange(n,t=!1){dc(this,{type:"change",parent:this,value:n,idle:t})}_onPriorityChange(n){this.idle||Ed.sort(this),dc(this,{type:"priority",parent:this,priority:n})}},pa=Symbol.for("SpringPhase"),rR=1,Lx=2,Fx=4,wm=n=>(n[pa]&rR)>0,ir=n=>(n[pa]&Lx)>0,bl=n=>(n[pa]&Fx)>0,Qw=(n,t)=>t?n[pa]|=Lx|rR:n[pa]&=~Lx,Kw=(n,t)=>t?n[pa]|=Fx:n[pa]&=~Fx,FU=class extends v0{constructor(n,t){if(super(),this.animation=new BU,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!nt.und(n)||!nt.und(t)){const e=nt.obj(n)?{...n}:{...t,from:n};nt.und(e.default)&&(e.default=!0),this.start(e)}}get idle(){return!(ir(this)||this._state.asyncTo)||bl(this)}get goal(){return un(this.animation.to)}get velocity(){const n=Vi(this);return n instanceof Od?n.lastVelocity||0:n.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return wm(this)}get isAnimating(){return ir(this)}get isPaused(){return bl(this)}get isDelayed(){return this._state.delayed}advance(n){let t=!0,e=!1;const i=this.animation;let{toValues:s}=i;const{config:r}=i,a=Nd(i.to);!a&&si(i.to)&&(s=nn(un(i.to))),i.values.forEach((h,f)=>{if(h.done)return;const p=h.constructor==Hh?1:a?a[f].lastPosition:s[f];let g=i.immediate,x=p;if(!g){if(x=h.lastPosition,r.tension<=0){h.done=!0;return}let w=h.elapsedTime+=n;const _=i.fromValues[f],b=h.v0!=null?h.v0:h.v0=nt.arr(r.velocity)?r.velocity[f]:r.velocity;let C;const M=r.precision||(_==p?.005:Math.min(1,Math.abs(p-_)*.001));if(nt.und(r.duration))if(r.decay){const P=r.decay===!0?.998:r.decay,T=Math.exp(-(1-P)*w);x=_+b/(1-P)*(1-T),g=Math.abs(h.lastPosition-x)<=M,C=b*T}else{C=h.lastVelocity==null?b:h.lastVelocity;const P=r.restVelocity||M/10,T=r.clamp?0:r.bounce,E=!nt.und(T),R=_==p?h.v0>0:_<p;let N,O=!1;const k=1,B=Math.ceil(n/k);for(let I=0;I<B&&(N=Math.abs(C)>P,!(!N&&(g=Math.abs(p-x)<=M,g)));++I){E&&(O=x==p||x>p==R,O&&(C=-C*T,x=p));const X=-r.tension*1e-6*(x-p),q=-r.friction*.001*C,U=(X+q)/r.mass;C=C+U*k,x=x+C*k}}else{let P=1;r.duration>0&&(this._memoizedDuration!==r.duration&&(this._memoizedDuration=r.duration,h.durationProgress>0&&(h.elapsedTime=r.duration*h.durationProgress,w=h.elapsedTime+=n)),P=(r.progress||0)+w/this._memoizedDuration,P=P>1?1:P<0?0:P,h.durationProgress=P),x=_+r.easing(P)*(p-_),C=(x-h.lastPosition)/n,g=P==1}h.lastVelocity=C,Number.isNaN(x)&&(console.warn("Got NaN while animating:",this),g=!0)}a&&!a[f].done&&(g=!1),g?h.done=!0:t=!1,h.setValue(x,r.round)&&(e=!0)});const l=Vi(this),u=l.getValue();if(t){const h=un(i.to);(u!==h||e)&&!r.decay?(l.setValue(h),this._onChange(h)):e&&r.decay&&this._onChange(u),this._stop()}else e&&this._onChange(u)}set(n){return vt.batchedUpdates(()=>{this._stop(),this._focus(n),this._set(n)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(ir(this)){const{to:n,config:t}=this.animation;vt.batchedUpdates(()=>{this._onStart(),t.decay||this._set(n,!1),this._stop()})}return this}update(n){return(this.queue||(this.queue=[])).push(n),this}start(n,t){let e;return nt.und(n)?(e=this.queue||[],this.queue=[]):e=[nt.obj(n)?n:{...t,to:n}],Promise.all(e.map(i=>this._update(i))).then(i=>y0(this,i))}stop(n){const{to:t}=this.animation;return this._focus(this.get()),gc(this._state,n&&this._lastCallId),vt.batchedUpdates(()=>this._stop(t,n)),this}reset(){this._update({reset:!0})}eventObserved(n){n.type=="change"?this._start():n.type=="priority"&&(this.priority=n.priority+1)}_prepareNode(n){const t=this.key||"";let{to:e,from:i}=n;e=nt.obj(e)?e[t]:e,(e==null||Dx(e))&&(e=void 0),i=nt.obj(i)?i[t]:i,i==null&&(i=void 0);const s={to:e,from:i};return wm(this)||(n.reverse&&([e,i]=[i,e]),i=un(i),nt.und(i)?Vi(this)||this._set(e):this._set(i)),s}_update({...n},t){const{key:e,defaultProps:i}=this;n.default&&Object.assign(i,g0(n,(a,l)=>/^on/.test(l)?tR(a,e):a)),Jw(this,n,"onProps"),Sl(this,"onProps",n,this);const s=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const r=this._state;return nR(++this._lastCallId,{key:e,props:n,defaultProps:i,state:r,actions:{pause:()=>{bl(this)||(Kw(this,!0),Nl(r.pauseQueue),Sl(this,"onPause",Si(this,wl(this,this.animation.to)),this))},resume:()=>{bl(this)&&(Kw(this,!1),ir(this)&&this._resume(),Nl(r.resumeQueue),Sl(this,"onResume",Si(this,wl(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then(a=>{if(n.loop&&a.finished&&!(t&&a.noop)){const l=aR(n);if(l)return this._update(l,!0)}return a})}_merge(n,t,e){if(t.cancel)return this.stop(!0),e(ho(this));const i=!nt.und(n.to),s=!nt.und(n.from);if(i||s)if(t.callId>this._lastToId)this._lastToId=t.callId;else return e(ho(this));const{key:r,defaultProps:a,animation:l}=this,{to:u,from:h}=l;let{to:f=u,from:p=h}=n;s&&!i&&(!t.default||nt.und(f))&&(f=p),t.reverse&&([f,p]=[p,f]);const g=!ws(p,h);g&&(l.from=p),p=un(p);const x=!ws(f,u);x&&this._focus(f);const w=Dx(t.to),{config:_}=l,{decay:b,velocity:C}=_;(i||s)&&(_.velocity=0),t.config&&!w&&IU(_,hn(t.config,r),t.config!==a.config?hn(a.config,r):void 0);let M=Vi(this);if(!M||nt.und(f))return e(Si(this,!0));const P=nt.und(t.reset)?s&&!t.default:!nt.und(p)&&Wl(t.reset,r),T=P?p:this.get(),E=mc(f),R=nt.num(E)||nt.arr(E)||kd(E),N=!w&&(!R||Wl(a.immediate||t.immediate,r));if(x){const I=zx(f);if(I!==M.constructor)if(N)M=this._set(E);else throw Error(`Cannot animate between ${M.constructor.name} and ${I.name}, as the "to" prop suggests`)}const O=M.constructor;let k=si(f),B=!1;if(!k){const I=P||!wm(this)&&g;(x||I)&&(B=ws(mc(T),E),k=!B),(!ws(l.immediate,N)&&!N||!ws(_.decay,b)||!ws(_.velocity,C))&&(k=!0)}if(B&&ir(this)&&(l.changed&&!P?k=!0:k||this._stop(u)),!w&&((k||si(u))&&(l.values=M.getPayload(),l.toValues=si(f)?null:O==Hh?[1]:nn(E)),l.immediate!=N&&(l.immediate=N,!N&&!P&&this._set(u)),k)){const{onRest:I}=l;bt(HU,q=>Jw(this,t,q));const X=Si(this,wl(this,u));Nl(this._pendingCalls,X),this._pendingCalls.add(e),l.changed&&vt.batchedUpdates(()=>{l.changed=!P,I?.(X,this),P?hn(a.onRest,X):l.onStart?.(X,this)})}P&&this._set(T),w?e(sR(t.to,t,this._state,this)):k?this._start():ir(this)&&!x?this._pendingCalls.add(e):e(iR(T))}_focus(n){const t=this.animation;n!==t.to&&(Fw(this)&&this._detach(),t.to=n,Fw(this)&&this._attach())}_attach(){let n=0;const{to:t}=this.animation;si(t)&&(Do(t,this),Bx(t)&&(n=t.priority+1)),this.priority=n}_detach(){const{to:n}=this.animation;si(n)&&fc(n,this)}_set(n,t=!0){const e=un(n);if(!nt.und(e)){const i=Vi(this);if(!i||!ws(e,i.getValue())){const s=zx(e);!i||i.constructor!=s?m0(this,s.create(e)):i.setValue(e),i&&vt.batchedUpdates(()=>{this._onChange(e,t)})}}return Vi(this)}_onStart(){const n=this.animation;n.changed||(n.changed=!0,Sl(this,"onStart",Si(this,wl(this,n.to)),this))}_onChange(n,t){t||(this._onStart(),hn(this.animation.onChange,n,this)),hn(this.defaultProps.onChange,n,this),super._onChange(n,t)}_start(){const n=this.animation;Vi(this).reset(un(n.to)),n.immediate||(n.fromValues=n.values.map(t=>t.lastPosition)),ir(this)||(Qw(this,!0),bl(this)||this._resume())}_resume(){ji.skipAnimation?this.finish():Ed.start(this)}_stop(n,t){if(ir(this)){Qw(this,!1);const e=this.animation;bt(e.values,s=>{s.done=!0}),e.toValues&&(e.onChange=e.onPause=e.onResume=void 0),dc(this,{type:"idle",parent:this});const i=t?ho(this.get()):Si(this.get(),wl(this,n??e.to));Nl(this._pendingCalls,i),e.changed&&(e.changed=!1,Sl(this,"onRest",i,this))}}};function wl(n,t){const e=mc(t),i=mc(n.get());return ws(i,e)}function aR(n,t=n.loop,e=n.to){const i=hn(t);if(i){const s=i!==!0&&x0(i),r=(s||n).reverse,a=!s||s.reset;return Gh({...n,loop:t,default:!1,pause:void 0,to:!r||Dx(e)?e:void 0,from:a?n.from:void 0,reset:a,...s})}}function Gh(n){const{to:t,from:e}=n=x0(n),i=new Set;return nt.obj(t)&&Zw(t,i),nt.obj(e)&&Zw(e,i),n.keys=i.size?Array.from(i):null,n}function Zw(n,t){Ji(n,(e,i)=>e!=null&&t.add(i))}var HU=["onStart","onRest","onChange","onPause","onResume"];function Jw(n,t,e){n.animation[e]=t[e]!==eR(t,e)?tR(t[e],n.key):void 0}function Sl(n,t,...e){n.animation[t]?.(...e),n.defaultProps[t]?.(...e)}var UU=["onStart","onChange","onRest"],GU=1,VU=class{constructor(n,t){this.id=GU++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),n&&this.start({default:!0,...n})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(n=>n.idle&&!n.isDelayed&&!n.isPaused)}get item(){return this._item}set item(n){this._item=n}get(){const n={};return this.each((t,e)=>n[e]=t.get()),n}set(n){for(const t in n){const e=n[t];nt.und(e)||this.springs[t].set(e)}}update(n){return n&&this.queue.push(Gh(n)),this}start(n){let{queue:t}=this;return n?t=nn(n).map(Gh):this.queue=[],this._flush?this._flush(this,t):(uR(this,t),WU(this,t))}stop(n,t){if(n!==!!n&&(t=n),t){const e=this.springs;bt(nn(t),i=>e[i].stop(!!n))}else gc(this._state,this._lastAsyncId),this.each(e=>e.stop(!!n));return this}pause(n){if(nt.und(n))this.start({pause:!0});else{const t=this.springs;bt(nn(n),e=>t[e].pause())}return this}resume(n){if(nt.und(n))this.start({pause:!1});else{const t=this.springs;bt(nn(n),e=>t[e].resume())}return this}each(n){Ji(this.springs,n)}_onFrame(){const{onStart:n,onChange:t,onRest:e}=this._events,i=this._active.size>0,s=this._changed.size>0;(i&&!this._started||s&&!this._started)&&(this._started=!0,Gl(n,([l,u])=>{u.value=this.get(),l(u,this,this._item)}));const r=!i&&this._started,a=s||r&&e.size?this.get():null;s&&t.size&&Gl(t,([l,u])=>{u.value=a,l(u,this,this._item)}),r&&(this._started=!1,Gl(e,([l,u])=>{u.value=a,l(u,this,this._item)}))}eventObserved(n){if(n.type=="change")this._changed.add(n.parent),n.idle||this._active.add(n.parent);else if(n.type=="idle")this._active.delete(n.parent);else return;vt.onFrame(this._onFrame)}};function WU(n,t){return Promise.all(t.map(e=>oR(n,e))).then(e=>y0(n,e))}async function oR(n,t,e){const{keys:i,to:s,from:r,loop:a,onRest:l,onResolve:u}=t,h=nt.obj(t.default)&&t.default;a&&(t.loop=!1),s===!1&&(t.to=null),r===!1&&(t.from=null);const f=nt.arr(s)||nt.fun(s)?s:void 0;f?(t.to=void 0,t.onRest=void 0,h&&(h.onRest=void 0)):bt(UU,_=>{const b=t[_];if(nt.fun(b)){const C=n._events[_];t[_]=({finished:M,cancelled:P})=>{const T=C.get(b);T?(M||(T.finished=!1),P&&(T.cancelled=!0)):C.set(b,{value:null,finished:M||!1,cancelled:P||!1})},h&&(h[_]=t[_])}});const p=n._state;t.pause===!p.paused?(p.paused=t.pause,Nl(t.pause?p.pauseQueue:p.resumeQueue)):p.paused&&(t.pause=!0);const g=(i||Object.keys(n.springs)).map(_=>n.springs[_].start(t)),x=t.cancel===!0||eR(t,"cancel")===!0;(f||x&&p.asyncId)&&g.push(nR(++n._lastAsyncId,{props:t,state:p,actions:{pause:Nx,resume:Nx,start(_,b){x?(gc(p,n._lastAsyncId),b(ho(n))):(_.onRest=l,b(sR(f,_,p,n)))}}})),p.paused&&await new Promise(_=>{p.resumeQueue.add(_)});const w=y0(n,await Promise.all(g));if(a&&w.finished&&!(e&&w.noop)){const _=aR(t,a,s);if(_)return uR(n,[_]),oR(n,_,!0)}return u&&vt.batchedUpdates(()=>u(w,n,n.item)),w}function YU(n,t){const e={...n.springs};return t&&bt(nn(t),i=>{nt.und(i.keys)&&(i=Gh(i)),nt.obj(i.to)||(i={...i,to:void 0}),cR(e,i,s=>lR(s))}),qU(n,e),e}function qU(n,t){Ji(t,(e,i)=>{n.springs[i]||(n.springs[i]=e,Do(e,n))})}function lR(n,t){const e=new FU;return e.key=n,t&&Do(e,t),e}function cR(n,t,e){t.keys&&bt(t.keys,i=>{(n[i]||(n[i]=e(i)))._prepareNode(t)})}function uR(n,t){bt(t,e=>{cR(n.springs,e,i=>lR(i,n))})}var XU=A.createContext({pause:!1,immediate:!1}),$U=()=>{const n=[],t=function(i){yU();const s=[];return bt(n,(r,a)=>{if(nt.und(i))s.push(r.start());else{const l=e(i,r,a);l&&s.push(r.start(l))}}),s};t.current=n,t.add=function(i){n.includes(i)||n.push(i)},t.delete=function(i){const s=n.indexOf(i);~s&&n.splice(s,1)},t.pause=function(){return bt(n,i=>i.pause(...arguments)),this},t.resume=function(){return bt(n,i=>i.resume(...arguments)),this},t.set=function(i){bt(n,(s,r)=>{const a=nt.fun(i)?i(r,s):i;a&&s.set(a)})},t.start=function(i){const s=[];return bt(n,(r,a)=>{if(nt.und(i))s.push(r.start());else{const l=this._getProps(i,r,a);l&&s.push(r.start(l))}}),s},t.stop=function(){return bt(n,i=>i.stop(...arguments)),this},t.update=function(i){return bt(n,(s,r)=>s.update(this._getProps(i,s,r))),this};const e=function(i,s,r){return nt.fun(i)?i(r,s):i};return t._getProps=e,t};function QU(n,t,e){const i=nt.fun(t)&&t,{reset:s,sort:r,trail:a=0,expires:l=!0,exitBeforeEnter:u=!1,onDestroyed:h,ref:f,config:p}=i?i():t,g=A.useMemo(()=>i||arguments.length==3?$U():void 0,[]),x=nn(n),w=[],_=A.useRef(null),b=s?null:_.current;no(()=>{_.current=w}),$E(()=>(bt(w,U=>{g?.add(U.ctrl),U.ctrl.ref=g}),()=>{bt(_.current,U=>{U.expired&&clearTimeout(U.expirationId),Ww(U.ctrl,g),U.ctrl.stop(!0)})}));const C=ZU(x,i?i():t,b),M=s&&_.current||[];no(()=>bt(M,({ctrl:U,item:Y,key:D})=>{Ww(U,g),hn(h,Y,D)}));const P=[];if(b&&bt(b,(U,Y)=>{U.expired?(clearTimeout(U.expirationId),M.push(U)):(Y=P[Y]=C.indexOf(U.key),~Y&&(w[Y]=U))}),bt(x,(U,Y)=>{w[Y]||(w[Y]={key:C[Y],item:U,phase:"mount",ctrl:new VU},w[Y].ctrl.item=U)}),P.length){let U=-1;const{leave:Y}=i?i():t;bt(P,(D,H)=>{const J=b[H];~D?(U=w.indexOf(J),w[U]={...J,item:x[D]}):Y&&w.splice(++U,0,J)})}nt.fun(r)&&w.sort((U,Y)=>r(U.item,Y.item));let T=-a;const E=XE(),R=g0(t),N=new Map,O=A.useRef(new Map),k=A.useRef(!1);bt(w,(U,Y)=>{const D=U.key,H=U.phase,J=i?i():t;let V,Z;const gt=hn(J.delay||0,D);if(H=="mount")V=J.enter,Z="enter";else{const pt=C.indexOf(D)<0;if(H!="leave")if(pt)V=J.leave,Z="leave";else if(V=J.update)Z="update";else return;else if(!pt)V=J.enter,Z="enter";else return}if(V=hn(V,U.item,Y),V=nt.obj(V)?x0(V):{to:V},!V.config){const pt=p||R.config;V.config=hn(pt,U.item,Y,Z)}T+=a;const tt={...R,delay:gt+T,ref:f,immediate:J.immediate,reset:!1,...V};if(Z=="enter"&&nt.und(tt.from)){const pt=i?i():t,Kt=nt.und(pt.initial)||b?pt.from:pt.initial;tt.from=hn(Kt,U.item,Y)}const{onResolve:ft}=tt;tt.onResolve=pt=>{hn(ft,pt);const Kt=_.current,Rt=Kt.find(be=>be.key===D);if(Rt&&!(pt.cancelled&&Rt.phase!="update")&&Rt.ctrl.idle){const be=Kt.every(we=>we.ctrl.idle);if(Rt.phase=="leave"){const we=hn(l,Rt.item);if(we!==!1){const wn=we===!0?0:we;if(Rt.expired=!0,!be&&wn>0){wn<=2147483647&&(Rt.expirationId=setTimeout(E,wn));return}}}be&&Kt.some(we=>we.expired)&&(O.current.delete(Rt),u&&(k.current=!0),E())}};const xt=YU(U.ctrl,tt);Z==="leave"&&u?O.current.set(U,{phase:Z,springs:xt,payload:tt}):N.set(U,{phase:Z,springs:xt,payload:tt})});const B=A.useContext(XU),I=bU(B),X=B!==I&&NU(B);no(()=>{X&&bt(w,U=>{U.ctrl.start({default:B})})},[B]),bt(N,(U,Y)=>{if(O.current.size){const D=w.findIndex(H=>H.key===Y.key);w.splice(D,1)}}),no(()=>{bt(O.current.size?O.current:N,({phase:U,payload:Y},D)=>{const{ctrl:H}=D;D.phase=U,g?.add(H),X&&U=="enter"&&H.start({default:B}),Y&&(OU(H,Y.ref),(H.ref||g)&&!k.current?H.update(Y):(H.start(Y),k.current&&(k.current=!1)))})},s?void 0:e);const q=U=>A.createElement(A.Fragment,null,w.map((Y,D)=>{const{springs:H}=N.get(Y)||Y.ctrl,J=U({...H},Y.item,Y,D),V=nt.str(Y.key)||nt.num(Y.key)?Y.key:Y.ctrl.id,Z=A.version<"19.0.0",gt=J?.props??{},tt=Z?J?.ref:gt?.ref;return J&&J.type?A.createElement(J.type,{...gt,key:V,ref:tt}):J}));return g?[q,g]:q}var KU=1;function ZU(n,{key:t,keys:e=t},i){if(e===null){const s=new Set;return n.map(r=>{const a=i&&i.find(l=>l.item===r&&l.phase!=="leave"&&!s.has(l));return a?(s.add(a),a.key):KU++})}return nt.und(e)?n:nt.fun(e)?n.map(e):nn(e)}var hR=class extends v0{constructor(n,t){super(),this.source=n,this.idle=!0,this._active=new Set,this.calc=uc(...t);const e=this._get(),i=zx(e);m0(this,i.create(e))}advance(n){const t=this._get(),e=this.get();ws(t,e)||(Vi(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&tS(this._active)&&Sm(this)}_get(){const n=nt.arr(this.source)?this.source.map(un):nn(un(this.source));return this.calc(...n)}_start(){this.idle&&!tS(this._active)&&(this.idle=!1,bt(Nd(this),n=>{n.done=!1}),ji.skipAnimation?(vt.batchedUpdates(()=>this.advance()),Sm(this)):Ed.start(this))}_attach(){let n=1;bt(nn(this.source),t=>{si(t)&&Do(t,this),Bx(t)&&(t.idle||this._active.add(t),n=Math.max(n,t.priority+1))}),this.priority=n,this._start()}_detach(){bt(nn(this.source),n=>{si(n)&&fc(n,this)}),this._active.clear(),Sm(this)}eventObserved(n){n.type=="change"?n.idle?this.advance():(this._active.add(n.parent),this._start()):n.type=="idle"?this._active.delete(n.parent):n.type=="priority"&&(this.priority=nn(this.source).reduce((t,e)=>Math.max(t,(Bx(e)?e.priority:0)+1),0))}};function JU(n){return n.idle!==!1}function tS(n){return!n.size||Array.from(n).every(JU)}function Sm(n){n.idle||(n.idle=!0,bt(Nd(n),t=>{t.done=!0}),dc(n,{type:"idle",parent:n}))}var tG=(n,...t)=>new hR(n,t);ji.assign({createStringInterpolator:YE,to:(n,t)=>new hR(n,t)});var dR=/^--/;function eG(n,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!dR.test(n)&&!(Yl.hasOwnProperty(n)&&Yl[n])?t+"px":(""+t).trim()}var eS={};function nG(n,t){if(!n.nodeType||!n.setAttribute)return!1;const e=n.nodeName==="filter"||n.parentNode&&n.parentNode.nodeName==="filter",{className:i,style:s,children:r,scrollTop:a,scrollLeft:l,viewBox:u,...h}=t,f=Object.values(h),p=Object.keys(h).map(g=>e||n.hasAttribute(g)?g:eS[g]||(eS[g]=g.replace(/([A-Z])/g,x=>"-"+x.toLowerCase())));r!==void 0&&(n.textContent=r);for(const g in s)if(s.hasOwnProperty(g)){const x=eG(g,s[g]);dR.test(g)?n.style.setProperty(g,x):n.style[g]=x}p.forEach((g,x)=>{n.setAttribute(g,f[x])}),i!==void 0&&(n.className=i),a!==void 0&&(n.scrollTop=a),l!==void 0&&(n.scrollLeft=l),u!==void 0&&n.setAttribute("viewBox",u)}var Yl={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iG=(n,t)=>n+t.charAt(0).toUpperCase()+t.substring(1),sG=["Webkit","Ms","Moz","O"];Yl=Object.keys(Yl).reduce((n,t)=>(sG.forEach(e=>n[iG(e,t)]=n[t]),n),Yl);var rG=/^(matrix|translate|scale|rotate|skew)/,aG=/^(translate)/,oG=/^(rotate|skew)/,Cm=(n,t)=>nt.num(n)&&n!==0?n+t:n,dh=(n,t)=>nt.arr(n)?n.every(e=>dh(e,t)):nt.num(n)?n===t:parseFloat(n)===t,lG=class extends zd{constructor({x:n,y:t,z:e,...i}){const s=[],r=[];(n||t||e)&&(s.push([n||0,t||0,e||0]),r.push(a=>[`translate3d(${a.map(l=>Cm(l,"px")).join(",")})`,dh(a,0)])),Ji(i,(a,l)=>{if(l==="transform")s.push([a||""]),r.push(u=>[u,u===""]);else if(rG.test(l)){if(delete i[l],nt.und(a))return;const u=aG.test(l)?"px":oG.test(l)?"deg":"";s.push(nn(a)),r.push(l==="rotate3d"?([h,f,p,g])=>[`rotate3d(${h},${f},${p},${Cm(g,u)})`,dh(g,0)]:h=>[`${l}(${h.map(f=>Cm(f,u)).join(",")})`,dh(h,l.startsWith("scale")?1:0)])}}),s.length&&(i.transform=new cG(s,r)),super(i)}},cG=class extends GE{constructor(n,t){super(),this.inputs=n,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let n="",t=!0;return bt(this.inputs,(e,i)=>{const s=un(e[0]),[r,a]=this.transforms[i](nt.arr(s)?s:e.map(un));n+=" "+r,t=t&&a}),t?"none":n}observerAdded(n){n==1&&bt(this.inputs,t=>bt(t,e=>si(e)&&Do(e,this)))}observerRemoved(n){n==0&&bt(this.inputs,t=>bt(t,e=>si(e)&&fc(e,this)))}eventObserved(n){n.type=="change"&&(this._value=null),dc(this,n)}},uG=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];ji.assign({batchedUpdates:Vk.unstable_batchedUpdates,createStringInterpolator:YE,colors:QH});var hG=TU(uG,{applyAnimatedValues:nG,createAnimatedStyle:n=>new lG(n),getComponentProps:({scrollTop:n,scrollLeft:t,...e})=>e}),Mm=hG.animated;function fh(n,t){return n==null||t==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function dG(n,t){return n==null||t==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function fR(n){let t,e,i;n.length!==2?(t=fh,e=(l,u)=>fh(n(l),u),i=(l,u)=>n(l)-u):(t=n===fh||n===dG?n:fG,e=n,i=n);function s(l,u,h=0,f=l.length){if(h<f){if(t(u,u)!==0)return f;do{const p=h+f>>>1;e(l[p],u)<0?h=p+1:f=p}while(h<f)}return h}function r(l,u,h=0,f=l.length){if(h<f){if(t(u,u)!==0)return f;do{const p=h+f>>>1;e(l[p],u)<=0?h=p+1:f=p}while(h<f)}return h}function a(l,u,h=0,f=l.length){const p=s(l,u,h,f-1);return p>h&&i(l[p-1],u)>-i(l[p],u)?p-1:p}return{left:s,center:a,right:r}}function fG(){return 0}function pG(n){return n===null?NaN:+n}const mG=fR(fh),gG=mG.right;fR(pG).center;var Hx=Math.sqrt(50),Ux=Math.sqrt(10),Gx=Math.sqrt(2);function xG(n,t,e){var i,s=-1,r,a,l;if(t=+t,n=+n,e=+e,n===t&&e>0)return[n];if((i=t<n)&&(r=n,n=t,t=r),(l=pR(n,t,e))===0||!isFinite(l))return[];if(l>0){let u=Math.round(n/l),h=Math.round(t/l);for(u*l<n&&++u,h*l>t&&--h,a=new Array(r=h-u+1);++s<r;)a[s]=(u+s)*l}else{l=-l;let u=Math.round(n*l),h=Math.round(t*l);for(u/l<n&&++u,h/l>t&&--h,a=new Array(r=h-u+1);++s<r;)a[s]=(u+s)/l}return i&&a.reverse(),a}function pR(n,t,e){var i=(t-n)/Math.max(0,e),s=Math.floor(Math.log(i)/Math.LN10),r=i/Math.pow(10,s);return s>=0?(r>=Hx?10:r>=Ux?5:r>=Gx?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(r>=Hx?10:r>=Ux?5:r>=Gx?2:1)}function yG(n,t,e){var i=Math.abs(t-n)/Math.max(0,e),s=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),r=i/s;return r>=Hx?s*=10:r>=Ux?s*=5:r>=Gx&&(s*=2),t<n?-s:s}function vG(n,t){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(t).domain(n);break}return this}function _0(n,t,e){n.prototype=t.prototype=e,e.constructor=n}function mR(n,t){var e=Object.create(n.prototype);for(var i in t)e[i]=t[i];return e}function Bc(){}var xc=.7,Vh=1/xc,fo="\\s*([+-]?\\d+)\\s*",yc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$i="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_G=/^#([0-9a-f]{3,8})$/,bG=new RegExp(`^rgb\\(${fo},${fo},${fo}\\)$`),wG=new RegExp(`^rgb\\(${$i},${$i},${$i}\\)$`),SG=new RegExp(`^rgba\\(${fo},${fo},${fo},${yc}\\)$`),CG=new RegExp(`^rgba\\(${$i},${$i},${$i},${yc}\\)$`),MG=new RegExp(`^hsl\\(${yc},${$i},${$i}\\)$`),PG=new RegExp(`^hsla\\(${yc},${$i},${$i},${yc}\\)$`),nS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};_0(Bc,vc,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:iS,formatHex:iS,formatHex8:AG,formatHsl:TG,formatRgb:sS,toString:sS});function iS(){return this.rgb().formatHex()}function AG(){return this.rgb().formatHex8()}function TG(){return gR(this).formatHsl()}function sS(){return this.rgb().formatRgb()}function vc(n){var t,e;return n=(n+"").trim().toLowerCase(),(t=_G.exec(n))?(e=t[1].length,t=parseInt(t[1],16),e===6?rS(t):e===3?new fn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?Ku(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?Ku(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=bG.exec(n))?new fn(t[1],t[2],t[3],1):(t=wG.exec(n))?new fn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=SG.exec(n))?Ku(t[1],t[2],t[3],t[4]):(t=CG.exec(n))?Ku(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=MG.exec(n))?lS(t[1],t[2]/100,t[3]/100,1):(t=PG.exec(n))?lS(t[1],t[2]/100,t[3]/100,t[4]):nS.hasOwnProperty(n)?rS(nS[n]):n==="transparent"?new fn(NaN,NaN,NaN,0):null}function rS(n){return new fn(n>>16&255,n>>8&255,n&255,1)}function Ku(n,t,e,i){return i<=0&&(n=t=e=NaN),new fn(n,t,e,i)}function EG(n){return n instanceof Bc||(n=vc(n)),n?(n=n.rgb(),new fn(n.r,n.g,n.b,n.opacity)):new fn}function Vx(n,t,e,i){return arguments.length===1?EG(n):new fn(n,t,e,i??1)}function fn(n,t,e,i){this.r=+n,this.g=+t,this.b=+e,this.opacity=+i}_0(fn,Vx,mR(Bc,{brighter(n){return n=n==null?Vh:Math.pow(Vh,n),new fn(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?xc:Math.pow(xc,n),new fn(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new fn(ca(this.r),ca(this.g),ca(this.b),Wh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:aS,formatHex:aS,formatHex8:RG,formatRgb:oS,toString:oS}));function aS(){return`#${ia(this.r)}${ia(this.g)}${ia(this.b)}`}function RG(){return`#${ia(this.r)}${ia(this.g)}${ia(this.b)}${ia((isNaN(this.opacity)?1:this.opacity)*255)}`}function oS(){const n=Wh(this.opacity);return`${n===1?"rgb(":"rgba("}${ca(this.r)}, ${ca(this.g)}, ${ca(this.b)}${n===1?")":`, ${n})`}`}function Wh(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function ca(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function ia(n){return n=ca(n),(n<16?"0":"")+n.toString(16)}function lS(n,t,e,i){return i<=0?n=t=e=NaN:e<=0||e>=1?n=t=NaN:t<=0&&(n=NaN),new Ai(n,t,e,i)}function gR(n){if(n instanceof Ai)return new Ai(n.h,n.s,n.l,n.opacity);if(n instanceof Bc||(n=vc(n)),!n)return new Ai;if(n instanceof Ai)return n;n=n.rgb();var t=n.r/255,e=n.g/255,i=n.b/255,s=Math.min(t,e,i),r=Math.max(t,e,i),a=NaN,l=r-s,u=(r+s)/2;return l?(t===r?a=(e-i)/l+(e<i)*6:e===r?a=(i-t)/l+2:a=(t-e)/l+4,l/=u<.5?r+s:2-r-s,a*=60):l=u>0&&u<1?0:a,new Ai(a,l,u,n.opacity)}function jG(n,t,e,i){return arguments.length===1?gR(n):new Ai(n,t,e,i??1)}function Ai(n,t,e,i){this.h=+n,this.s=+t,this.l=+e,this.opacity=+i}_0(Ai,jG,mR(Bc,{brighter(n){return n=n==null?Vh:Math.pow(Vh,n),new Ai(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?xc:Math.pow(xc,n),new Ai(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,t=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,i=e+(e<.5?e:1-e)*t,s=2*e-i;return new fn(Pm(n>=240?n-240:n+120,s,i),Pm(n,s,i),Pm(n<120?n+240:n-120,s,i),this.opacity)},clamp(){return new Ai(cS(this.h),Zu(this.s),Zu(this.l),Wh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Wh(this.opacity);return`${n===1?"hsl(":"hsla("}${cS(this.h)}, ${Zu(this.s)*100}%, ${Zu(this.l)*100}%${n===1?")":`, ${n})`}`}}));function cS(n){return n=(n||0)%360,n<0?n+360:n}function Zu(n){return Math.max(0,Math.min(1,n||0))}function Pm(n,t,e){return(n<60?t+(e-t)*n/60:n<180?e:n<240?t+(e-t)*(240-n)/60:t)*255}const b0=n=>()=>n;function kG(n,t){return function(e){return n+e*t}}function NG(n,t,e){return n=Math.pow(n,e),t=Math.pow(t,e)-n,e=1/e,function(i){return Math.pow(n+i*t,e)}}function OG(n){return(n=+n)==1?xR:function(t,e){return e-t?NG(t,e,n):b0(isNaN(t)?e:t)}}function xR(n,t){var e=t-n;return e?kG(n,e):b0(isNaN(n)?t:n)}const uS=(function n(t){var e=OG(t);function i(s,r){var a=e((s=Vx(s)).r,(r=Vx(r)).r),l=e(s.g,r.g),u=e(s.b,r.b),h=xR(s.opacity,r.opacity);return function(f){return s.r=a(f),s.g=l(f),s.b=u(f),s.opacity=h(f),s+""}}return i.gamma=n,i})(1);function zG(n,t){t||(t=[]);var e=n?Math.min(t.length,n.length):0,i=t.slice(),s;return function(r){for(s=0;s<e;++s)i[s]=n[s]*(1-r)+t[s]*r;return i}}function DG(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function IG(n,t){var e=t?t.length:0,i=n?Math.min(e,n.length):0,s=new Array(i),r=new Array(e),a;for(a=0;a<i;++a)s[a]=w0(n[a],t[a]);for(;a<e;++a)r[a]=t[a];return function(l){for(a=0;a<i;++a)r[a]=s[a](l);return r}}function BG(n,t){var e=new Date;return n=+n,t=+t,function(i){return e.setTime(n*(1-i)+t*i),e}}function Yh(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function LG(n,t){var e={},i={},s;(n===null||typeof n!="object")&&(n={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in n?e[s]=w0(n[s],t[s]):i[s]=t[s];return function(r){for(s in e)i[s]=e[s](r);return i}}var Wx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Am=new RegExp(Wx.source,"g");function FG(n){return function(){return n}}function HG(n){return function(t){return n(t)+""}}function UG(n,t){var e=Wx.lastIndex=Am.lastIndex=0,i,s,r,a=-1,l=[],u=[];for(n=n+"",t=t+"";(i=Wx.exec(n))&&(s=Am.exec(t));)(r=s.index)>e&&(r=t.slice(e,r),l[a]?l[a]+=r:l[++a]=r),(i=i[0])===(s=s[0])?l[a]?l[a]+=s:l[++a]=s:(l[++a]=null,u.push({i:a,x:Yh(i,s)})),e=Am.lastIndex;return e<t.length&&(r=t.slice(e),l[a]?l[a]+=r:l[++a]=r),l.length<2?u[0]?HG(u[0].x):FG(t):(t=u.length,function(h){for(var f=0,p;f<t;++f)l[(p=u[f]).i]=p.x(h);return l.join("")})}function w0(n,t){var e=typeof t,i;return t==null||e==="boolean"?b0(t):(e==="number"?Yh:e==="string"?(i=vc(t))?(t=i,uS):UG:t instanceof vc?uS:t instanceof Date?BG:DG(t)?zG:Array.isArray(t)?IG:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?LG:Yh)(n,t)}function GG(n,t){return n=+n,t=+t,function(e){return Math.round(n*(1-e)+t*e)}}function VG(n){return function(){return n}}function WG(n){return+n}var hS=[0,1];function io(n){return n}function Yx(n,t){return(t-=n=+n)?function(e){return(e-n)/t}:VG(isNaN(t)?NaN:.5)}function YG(n,t){var e;return n>t&&(e=n,n=t,t=e),function(i){return Math.max(n,Math.min(t,i))}}function qG(n,t,e){var i=n[0],s=n[1],r=t[0],a=t[1];return s<i?(i=Yx(s,i),r=e(a,r)):(i=Yx(i,s),r=e(r,a)),function(l){return r(i(l))}}function XG(n,t,e){var i=Math.min(n.length,t.length)-1,s=new Array(i),r=new Array(i),a=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++a<i;)s[a]=Yx(n[a],n[a+1]),r[a]=e(t[a],t[a+1]);return function(l){var u=gG(n,l,1,i)-1;return r[u](s[u](l))}}function $G(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function QG(){var n=hS,t=hS,e=w0,i,s,r,a=io,l,u,h;function f(){var g=Math.min(n.length,t.length);return a!==io&&(a=YG(n[0],n[g-1])),l=g>2?XG:qG,u=h=null,p}function p(g){return g==null||isNaN(g=+g)?r:(u||(u=l(n.map(i),t,e)))(i(a(g)))}return p.invert=function(g){return a(s((h||(h=l(t,n.map(i),Yh)))(g)))},p.domain=function(g){return arguments.length?(n=Array.from(g,WG),f()):n.slice()},p.range=function(g){return arguments.length?(t=Array.from(g),f()):t.slice()},p.rangeRound=function(g){return t=Array.from(g),e=GG,f()},p.clamp=function(g){return arguments.length?(a=g?!0:io,f()):a!==io},p.interpolate=function(g){return arguments.length?(e=g,f()):e},p.unknown=function(g){return arguments.length?(r=g,p):r},function(g,x){return i=g,s=x,f()}}function KG(){return QG()(io,io)}function ZG(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function qh(n,t){if((e=(n=t?n.toExponential(t-1):n.toExponential()).indexOf("e"))<0)return null;var e,i=n.slice(0,e);return[i.length>1?i[0]+i.slice(2):i,+n.slice(e+1)]}function To(n){return n=qh(Math.abs(n)),n?n[1]:NaN}function JG(n,t){return function(e,i){for(var s=e.length,r=[],a=0,l=n[0],u=0;s>0&&l>0&&(u+l+1>i&&(l=Math.max(1,i-u)),r.push(e.substring(s-=l,s+l)),!((u+=l+1)>i));)l=n[a=(a+1)%n.length];return r.reverse().join(t)}}function tV(n){return function(t){return t.replace(/[0-9]/g,function(e){return n[+e]})}}var eV=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xh(n){if(!(t=eV.exec(n)))throw new Error("invalid format: "+n);var t;return new S0({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Xh.prototype=S0.prototype;function S0(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}S0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function nV(n){t:for(var t=n.length,e=1,i=-1,s;e<t;++e)switch(n[e]){case".":i=s=e;break;case"0":i===0&&(i=e),s=e;break;default:if(!+n[e])break t;i>0&&(i=0);break}return i>0?n.slice(0,i)+n.slice(s+1):n}var yR;function iV(n,t){var e=qh(n,t);if(!e)return n+"";var i=e[0],s=e[1],r=s-(yR=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,a=i.length;return r===a?i:r>a?i+new Array(r-a+1).join("0"):r>0?i.slice(0,r)+"."+i.slice(r):"0."+new Array(1-r).join("0")+qh(n,Math.max(0,t+r-1))[0]}function dS(n,t){var e=qh(n,t);if(!e)return n+"";var i=e[0],s=e[1];return s<0?"0."+new Array(-s).join("0")+i:i.length>s+1?i.slice(0,s+1)+"."+i.slice(s+1):i+new Array(s-i.length+2).join("0")}const fS={"%":(n,t)=>(n*100).toFixed(t),b:n=>Math.round(n).toString(2),c:n=>n+"",d:ZG,e:(n,t)=>n.toExponential(t),f:(n,t)=>n.toFixed(t),g:(n,t)=>n.toPrecision(t),o:n=>Math.round(n).toString(8),p:(n,t)=>dS(n*100,t),r:dS,s:iV,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function pS(n){return n}var mS=Array.prototype.map,gS=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function sV(n){var t=n.grouping===void 0||n.thousands===void 0?pS:JG(mS.call(n.grouping,Number),n.thousands+""),e=n.currency===void 0?"":n.currency[0]+"",i=n.currency===void 0?"":n.currency[1]+"",s=n.decimal===void 0?".":n.decimal+"",r=n.numerals===void 0?pS:tV(mS.call(n.numerals,String)),a=n.percent===void 0?"%":n.percent+"",l=n.minus===void 0?"":n.minus+"",u=n.nan===void 0?"NaN":n.nan+"";function h(p){p=Xh(p);var g=p.fill,x=p.align,w=p.sign,_=p.symbol,b=p.zero,C=p.width,M=p.comma,P=p.precision,T=p.trim,E=p.type;E==="n"?(M=!0,E="g"):fS[E]||(P===void 0&&(P=12),T=!0,E="g"),(b||g==="0"&&x==="=")&&(b=!0,g="0",x="=");var R=_==="$"?e:_==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",N=_==="$"?i:/[%p]/.test(E)?a:"",O=fS[E],k=/[defgprs%]/.test(E);P=P===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,P)):Math.max(0,Math.min(20,P));function B(I){var X=R,q=N,U,Y,D;if(E==="c")q=O(I)+q,I="";else{I=+I;var H=I<0||1/I<0;if(I=isNaN(I)?u:O(Math.abs(I),P),T&&(I=nV(I)),H&&+I==0&&w!=="+"&&(H=!1),X=(H?w==="("?w:l:w==="-"||w==="("?"":w)+X,q=(E==="s"?gS[8+yR/3]:"")+q+(H&&w==="("?")":""),k){for(U=-1,Y=I.length;++U<Y;)if(D=I.charCodeAt(U),48>D||D>57){q=(D===46?s+I.slice(U+1):I.slice(U))+q,I=I.slice(0,U);break}}}M&&!b&&(I=t(I,1/0));var J=X.length+I.length+q.length,V=J<C?new Array(C-J+1).join(g):"";switch(M&&b&&(I=t(V+I,V.length?C-q.length:1/0),V=""),x){case"<":I=X+I+q+V;break;case"=":I=X+V+I+q;break;case"^":I=V.slice(0,J=V.length>>1)+X+I+q+V.slice(J);break;default:I=V+X+I+q;break}return r(I)}return B.toString=function(){return p+""},B}function f(p,g){var x=h((p=Xh(p),p.type="f",p)),w=Math.max(-8,Math.min(8,Math.floor(To(g)/3)))*3,_=Math.pow(10,-w),b=gS[8+w/3];return function(C){return x(_*C)+b}}return{format:h,formatPrefix:f}}var Ju,vR,_R;rV({thousands:",",grouping:[3],currency:["$",""]});function rV(n){return Ju=sV(n),vR=Ju.format,_R=Ju.formatPrefix,Ju}function aV(n){return Math.max(0,-To(Math.abs(n)))}function oV(n,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(To(t)/3)))*3-To(Math.abs(n)))}function lV(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,To(t)-To(n))+1}function cV(n,t,e,i){var s=yG(n,t,e),r;switch(i=Xh(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(n),Math.abs(t));return i.precision==null&&!isNaN(r=oV(s,a))&&(i.precision=r),_R(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(r=lV(s,Math.max(Math.abs(n),Math.abs(t))))&&(i.precision=r-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(r=aV(s))&&(i.precision=r-(i.type==="%")*2);break}}return vR(i)}function uV(n){var t=n.domain;return n.ticks=function(e){var i=t();return xG(i[0],i[i.length-1],e??10)},n.tickFormat=function(e,i){var s=t();return cV(s[0],s[s.length-1],e??10,i)},n.nice=function(e){e==null&&(e=10);var i=t(),s=0,r=i.length-1,a=i[s],l=i[r],u,h,f=10;for(l<a&&(h=a,a=l,l=h,h=s,s=r,r=h);f-- >0;){if(h=pR(a,l,e),h===u)return i[s]=a,i[r]=l,t(i);if(h>0)a=Math.floor(a/h)*h,l=Math.ceil(l/h)*h;else if(h<0)a=Math.ceil(a*h)/h,l=Math.floor(l*h)/h;else break;u=h}return n},n}function Ol(){var n=KG();return n.copy=function(){return $G(n,Ol())},vG.apply(n,arguments),uV(n)}function bR(n){if((typeof n=="function"||typeof n=="object"&&n)&&"valueOf"in n){const t=n.valueOf();if(typeof t=="number")return t}return n}function hV(n,t){const e=n;return"ticks"in e?e.ticks(t):e.domain().filter((i,s,r)=>t==null||r.length<=t||s%Math.round((r.length-1)/t)===0)}function dV(n){return n?.toString()}var Tm,xS;function fV(){if(xS)return Tm;xS=1,Tm=n;function n(i,s,r){i instanceof RegExp&&(i=t(i,r)),s instanceof RegExp&&(s=t(s,r));var a=e(i,s,r);return a&&{start:a[0],end:a[1],pre:r.slice(0,a[0]),body:r.slice(a[0]+i.length,a[1]),post:r.slice(a[1]+s.length)}}function t(i,s){var r=s.match(i);return r?r[0]:null}n.range=e;function e(i,s,r){var a,l,u,h,f,p=r.indexOf(i),g=r.indexOf(s,p+1),x=p;if(p>=0&&g>0){for(a=[],u=r.length;x>=0&&!f;)x==p?(a.push(x),p=r.indexOf(i,x+1)):a.length==1?f=[a.pop(),g]:(l=a.pop(),l<u&&(u=l,h=g),g=r.indexOf(s,x+1)),x=p<g&&p>=0?p:g;a.length&&(f=[u,h])}return f}return Tm}var Em,yS;function pV(){if(yS)return Em;yS=1,Em=n;function n(i,s,r){i instanceof RegExp&&(i=t(i,r)),s instanceof RegExp&&(s=t(s,r));var a=e(i,s,r);return a&&{start:a[0],end:a[1],pre:r.slice(0,a[0]),body:r.slice(a[0]+i.length,a[1]),post:r.slice(a[1]+s.length)}}function t(i,s){var r=s.match(i);return r?r[0]:null}n.range=e;function e(i,s,r){var a,l,u,h,f,p=r.indexOf(i),g=r.indexOf(s,p+1),x=p;if(p>=0&&g>0){if(i===s)return[p,g];for(a=[],u=r.length;x>=0&&!f;)x==p?(a.push(x),p=r.indexOf(i,x+1)):a.length==1?f=[a.pop(),g]:(l=a.pop(),l<u&&(u=l,h=g),g=r.indexOf(s,x+1)),x=p<g&&p>=0?p:g;a.length&&(f=[u,h])}return f}return Em}var Rm,vS;function mV(){if(vS)return Rm;vS=1;var n=pV();Rm=t;function t(s,r,a){var l=s;return e(s,r).reduce(function(u,h){return u.replace(h.functionIdentifier+"("+h.matches.body+")",i(h.matches.body,h.functionIdentifier,a,l,r))},s)}function e(s,r){var a=[],l=typeof r=="string"?new RegExp("\\b("+r+")\\("):r;do{var u=l.exec(s);if(!u)return a;if(u[1]===void 0)throw new Error("Missing the first couple of parenthesis to get the function identifier in "+r);var h=u[1],f=u.index,p=n("(",")",s.substring(f));if(!p||p.start!==u[0].length-1)throw new SyntaxError(h+"(): missing closing ')' in the value '"+s+"'");a.push({matches:p,functionIdentifier:h}),s=p.post}while(l.test(s));return a}function i(s,r,a,l,u){return a(t(s,u,a),r,l)}return Rm}var jm,_S;function gV(){if(_S)return jm;_S=1;var n=function(t){this.value=t};return n.math={isDegree:!0,acos:function(t){return n.math.isDegree?180/Math.PI*Math.acos(t):Math.acos(t)},add:function(t,e){return t+e},asin:function(t){return n.math.isDegree?180/Math.PI*Math.asin(t):Math.asin(t)},atan:function(t){return n.math.isDegree?180/Math.PI*Math.atan(t):Math.atan(t)},acosh:function(t){return Math.log(t+Math.sqrt(t*t-1))},asinh:function(t){return Math.log(t+Math.sqrt(t*t+1))},atanh:function(t){return Math.log((1+t)/(1-t))},C:function(t,e){var i=1,s=t-e,r=e;r<s&&(r=s,s=e);for(var a=r+1;a<=t;a++)i*=a;return i/n.math.fact(s)},changeSign:function(t){return-t},cos:function(t){return n.math.isDegree&&(t=n.math.toRadian(t)),Math.cos(t)},cosh:function(t){return(Math.pow(Math.E,t)+Math.pow(Math.E,-1*t))/2},div:function(t,e){return t/e},fact:function(t){if(t%1!==0)return"NaN";for(var e=1,i=2;i<=t;i++)e*=i;return e},inverse:function(t){return 1/t},log:function(t){return Math.log(t)/Math.log(10)},mod:function(t,e){return t%e},mul:function(t,e){return t*e},P:function(t,e){for(var i=1,s=Math.floor(t)-Math.floor(e)+1;s<=Math.floor(t);s++)i*=s;return i},Pi:function(t,e,i){for(var s=1,r=t;r<=e;r++)s*=Number(i.postfixEval({n:r}));return s},pow10x:function(t){for(var e=1;t--;)e*=10;return e},sigma:function(t,e,i){for(var s=0,r=t;r<=e;r++)s+=Number(i.postfixEval({n:r}));return s},sin:function(t){return n.math.isDegree&&(t=n.math.toRadian(t)),Math.sin(t)},sinh:function(t){return(Math.pow(Math.E,t)-Math.pow(Math.E,-1*t))/2},sub:function(t,e){return t-e},tan:function(t){return n.math.isDegree&&(t=n.math.toRadian(t)),Math.tan(t)},tanh:function(t){return n.sinha(t)/n.cosha(t)},toRadian:function(t){return t*Math.PI/180},and:function(t,e){return t&e}},n.Exception=function(t){this.message=t},jm=n,jm}var km,bS;function xV(){if(bS)return km;bS=1;var n=gV();function t(M,P){for(var T=0;T<M.length;T++)M[T]+=P;return M}for(var e=[{token:"sin",show:"sin",type:0,value:n.math.sin},{token:"cos",show:"cos",type:0,value:n.math.cos},{token:"tan",show:"tan",type:0,value:n.math.tan},{token:"pi",show:"&pi;",type:3,value:"PI"},{token:"(",show:"(",type:4,value:"("},{token:")",show:")",type:5,value:")"},{token:"P",show:"P",type:10,value:n.math.P},{token:"C",show:"C",type:10,value:n.math.C},{token:" ",show:" ",type:14,value:" ".anchor},{token:"asin",show:"asin",type:0,value:n.math.asin},{token:"acos",show:"acos",type:0,value:n.math.acos},{token:"atan",show:"atan",type:0,value:n.math.atan},{token:"7",show:"7",type:1,value:"7"},{token:"8",show:"8",type:1,value:"8"},{token:"9",show:"9",type:1,value:"9"},{token:"int",show:"Int",type:0,value:Math.floor},{token:"cosh",show:"cosh",type:0,value:n.math.cosh},{token:"acosh",show:"acosh",type:0,value:n.math.acosh},{token:"ln",show:" ln",type:0,value:Math.log},{token:"^",show:"^",type:10,value:Math.pow},{token:"root",show:"root",type:0,value:Math.sqrt},{token:"4",show:"4",type:1,value:"4"},{token:"5",show:"5",type:1,value:"5"},{token:"6",show:"6",type:1,value:"6"},{token:"/",show:"&divide;",type:2,value:n.math.div},{token:"!",show:"!",type:7,value:n.math.fact},{token:"tanh",show:"tanh",type:0,value:n.math.tanh},{token:"atanh",show:"atanh",type:0,value:n.math.atanh},{token:"Mod",show:" Mod ",type:2,value:n.math.mod},{token:"1",show:"1",type:1,value:"1"},{token:"2",show:"2",type:1,value:"2"},{token:"3",show:"3",type:1,value:"3"},{token:"*",show:"&times;",type:2,value:n.math.mul},{token:"sinh",show:"sinh",type:0,value:n.math.sinh},{token:"asinh",show:"asinh",type:0,value:n.math.asinh},{token:"e",show:"e",type:3,value:"E"},{token:"log",show:" log",type:0,value:n.math.log},{token:"0",show:"0",type:1,value:"0"},{token:".",show:".",type:6,value:"."},{token:"+",show:"+",type:9,value:n.math.add},{token:"-",show:"-",type:9,value:n.math.sub},{token:",",show:",",type:11,value:","},{token:"Sigma",show:"&Sigma;",type:12,value:n.math.sigma},{token:"n",show:"n",type:13,value:"n"},{token:"Pi",show:"&Pi;",type:12,value:n.math.Pi},{token:"pow",show:"pow",type:8,value:Math.pow,numberOfArguments:2},{token:"&",show:"&",type:9,value:n.math.and}],i={0:11,1:0,2:3,3:0,4:0,5:0,6:0,7:11,8:11,9:1,10:10,11:0,12:11,13:0,14:-1,15:11},s=0;s<e.length;s++)e[s].precedence=i[e[s].type];var r={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,9:!0,12:!0,13:!0,14:!0,15:!0},a={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,10:!0,11:!0,12:!0,13:!0,15:!0},l={0:!0,3:!0,4:!0,8:!0,12:!0,13:!0,15:!0},u={},h={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,12:!0,13:!0,15:!0},f={1:!0},p=[[],["1","2","3","7","8","9","4","5","6","+","-","*","/","(",")","^","!","P","C","e","0",".",",","n"," ","&"],["pi","ln","Pi"],["sin","cos","tan","Del","int","Mod","log","pow"],["asin","acos","atan","cosh","root","tanh","sinh"],["acosh","atanh","asinh","Sigma"]];function g(M,P,T,E){for(var R=0;R<E;R++)if(M[T+R]!==P[R])return!1;return!0}n.tokenTypes={FUNCTION_WITH_ONE_ARG:0,NUMBER:1,BINARY_OPERATOR_HIGH_PRECENDENCE:2,CONSTANT:3,OPENING_PARENTHESIS:4,CLOSING_PARENTHESIS:5,DECIMAL:6,POSTFIX_FUNCTION_WITH_ONE_ARG:7,FUNCTION_WITH_N_ARGS:8,BINARY_OPERATOR_LOW_PRECENDENCE:9,BINARY_OPERATOR_PERMUTATION:10,COMMA:11,EVALUATED_FUNCTION:12,EVALUATED_FUNCTION_PARAMETER:13,SPACE:14},n.addToken=function(M){for(var P=0;P<M.length;P++){var T=M[P].token.length,E=-1;M[P].type===n.tokenTypes.FUNCTION_WITH_N_ARGS&&M[P].numberOfArguments===void 0&&(M[P].numberOfArguments=2),p[T]=p[T]||[];for(var R=0;R<p[T].length;R++)if(M[P].token===p[T][R]){E=x(p[T][R],e);break}E===-1?(e.push(M[P]),M[P].precedence=i[M[P].type],p.length<=M[P].token.length&&(p[M[P].token.length]=[]),p[M[P].token.length].push(M[P].token)):(e[E]=M[P],M[P].precedence=i[M[P].type])}};function x(M,P){for(var T=0;T<P.length;T++)if(P[T].token===M)return T;return-1}function w(M){for(var P=[],T=M.length,E,R,N,O=0;O<T;O++)if(!(O<T-1&&M[O]===" "&&M[O+1]===" ")){for(E="",R=M.length-O>p.length-2?p.length-1:M.length-O;R>0;R--)if(p[R]!==void 0)for(N=0;N<p[R].length;N++)g(M,p[R][N],O,R)&&(E=p[R][N],N=p[R].length,R=0);if(O+=E.length-1,E==="")throw new n.Exception("Can't understand after "+M.slice(O));P.push(e[x(E,e)])}return P}var _={value:n.math.changeSign,type:0,pre:21,show:"-"},b={value:")",show:")",type:5,pre:0},C={value:"(",type:4,pre:0,show:"("};return n.lex=function(M,P){var T=[C],E=[],R=M,N=r,O=0,k=u,B="",I;typeof P<"u"&&n.addToken(P);var X={},q=w(R);for(I=0;I<q.length;I++){var U=q[I];if(U.type===14){if(I>0&&I<q.length-1&&q[I+1].type===1&&(q[I-1].type===1||q[I-1].type===6))throw new n.Exception("Unexpected Space");continue}var Y=U.token,D=U.type,H=U.value,J=U.precedence,V=U.show,Z=T[T.length-1],gt;for(gt=E.length;gt--&&E[gt]===0;)if([0,2,3,4,5,9,11,12,13].indexOf(D)!==-1){if(N[D]!==!0)throw new n.Exception(Y+" is not allowed after "+B);T.push(b),N=a,k=h,E.pop()}if(N[D]!==!0)throw new n.Exception(Y+" is not allowed after "+B);if(k[D]===!0&&(D=2,H=n.math.mul,V="&times;",J=3,I=I-1),X={value:H,type:D,pre:J,show:V,numberOfArguments:U.numberOfArguments},D===0)N=r,k=u,t(E,2),T.push(X),q[I+1].type!==4&&(T.push(C),E.push(2));else if(D===1)Z.type===1?(Z.value+=H,t(E,1)):T.push(X),N=a,k=l;else if(D===2)N=r,k=u,t(E,2),T.push(X);else if(D===3)T.push(X),N=a,k=h;else if(D===4)t(E,1),O++,N=r,k=u,T.push(X);else if(D===5){if(!O)throw new n.Exception("Closing parenthesis are more than opening one, wait What!!!");O--,N=a,k=h,T.push(X),t(E,1)}else if(D===6){if(Z.hasDec)throw new n.Exception("Two decimals are not allowed in one number");Z.type!==1&&(Z={value:0,type:1,pre:0},T.push(Z)),N=f,t(E,1),k=u,Z.value+=H,Z.hasDec=!0}else D===7&&(N=a,k=h,t(E,1),T.push(X));D===8?(N=r,k=u,t(E,U.numberOfArguments+2),T.push(X),q[I+1].type!==4&&(T.push(C),E.push(U.numberOfArguments+2))):D===9?(Z.type===9?Z.value===n.math.add?(Z.value=H,Z.show=V,t(E,1)):Z.value===n.math.sub&&V==="-"&&(Z.value=n.math.add,Z.show="+",t(E,1)):Z.type!==5&&Z.type!==7&&Z.type!==1&&Z.type!==3&&Z.type!==13?Y==="-"&&(N=r,k=u,t(E,2).push(2),T.push(_),T.push(C)):(T.push(X),t(E,2)),N=r,k=u):D===10?(N=r,k=u,t(E,2),T.push(X)):D===11?(N=r,k=u,T.push(X)):D===12?(N=r,k=u,t(E,6),T.push(X),q[I+1].type!==4&&(T.push(C),E.push(6))):D===13&&(N=a,k=h,T.push(X)),t(E,-1),B=Y}for(gt=E.length;gt--;)T.push(b);if(N[5]!==!0)throw new n.Exception("complete the expression");for(;O--;)T.push(b);return T.push(b),new n(T)},km=n,km}var Nm,wS;function yV(){if(wS)return Nm;wS=1;var n=xV();return n.prototype.toPostfix=function(){for(var t=[],e,i,s,r,a,l=[{value:"(",type:4,pre:0}],u=this.value,h=1;h<u.length;h++)if(u[h].type===1||u[h].type===3||u[h].type===13)u[h].type===1&&(u[h].value=Number(u[h].value)),t.push(u[h]);else if(u[h].type===4)l.push(u[h]);else if(u[h].type===5)for(;(i=l.pop()).type!==4;)t.push(i);else if(u[h].type===11){for(;(i=l.pop()).type!==4;)t.push(i);l.push(i)}else{e=u[h],r=e.pre,a=l[l.length-1],s=a.pre;var f=a.value=="Math.pow"&&e.value=="Math.pow";if(r>s)l.push(e);else{for(;s>=r&&!f||f&&r<s;)i=l.pop(),a=l[l.length-1],t.push(i),s=a.pre,f=e.value=="Math.pow"&&a.value=="Math.pow";l.push(e)}}return new n(t)},Nm=n,Nm}var Om,SS;function vV(){if(SS)return Om;SS=1;var n=yV();return n.prototype.postfixEval=function(t){t=t||{},t.PI=Math.PI,t.E=Math.E;for(var e=[],i,s,r,a=this.value,l=typeof t.n<"u",u=0;u<a.length;u++)if(a[u].type===1)e.push({value:a[u].value,type:1});else if(a[u].type===3)e.push({value:t[a[u].value],type:1});else if(a[u].type===0)typeof e[e.length-1].type>"u"?e[e.length-1].value.push(a[u]):e[e.length-1].value=a[u].value(e[e.length-1].value);else if(a[u].type===7)typeof e[e.length-1].type>"u"?e[e.length-1].value.push(a[u]):e[e.length-1].value=a[u].value(e[e.length-1].value);else if(a[u].type===8){for(var h=[],f=0;f<a[u].numberOfArguments;f++)h.push(e.pop().value);e.push({type:1,value:a[u].value.apply(a[u],h.reverse())})}else a[u].type===10?(i=e.pop(),s=e.pop(),typeof s.type>"u"?(s.value=s.concat(i),s.value.push(a[u]),e.push(s)):typeof i.type>"u"?(i.unshift(s),i.push(a[u]),e.push(i)):e.push({type:1,value:a[u].value(s.value,i.value)})):a[u].type===2||a[u].type===9?(i=e.pop(),s=e.pop(),typeof s.type>"u"?(s=s.concat(i),s.push(a[u]),e.push(s)):typeof i.type>"u"?(i.unshift(s),i.push(a[u]),e.push(i)):e.push({type:1,value:a[u].value(s.value,i.value)})):a[u].type===12?(i=e.pop(),typeof i.type<"u"&&(i=[i]),s=e.pop(),r=e.pop(),e.push({type:1,value:a[u].value(r.value,s.value,new n(i))})):a[u].type===13&&(l?e.push({value:t[a[u].value],type:3}):e.push([a[u]]));if(e.length>1)throw new n.Exception("Uncaught Syntax error");return e[0].value>1e15?"Infinity":parseFloat(e[0].value.toFixed(15))},n.eval=function(t,e,i){return typeof e>"u"?this.lex(t).toPostfix().postfixEval():typeof i>"u"?typeof e.length<"u"?this.lex(t,e).toPostfix().postfixEval():this.lex(t).toPostfix().postfixEval(e):this.lex(t,e).toPostfix().postfixEval(i)},Om=n,Om}var zm,CS;function _V(){if(CS)return zm;CS=1;var n=vV();return n.prototype.formulaEval=function(){for(var t,e,i,s=[],r=this.value,a=0;a<r.length;a++)r[a].type===1||r[a].type===3?s.push({value:r[a].type===3?r[a].show:r[a].value,type:1}):r[a].type===13?s.push({value:r[a].show,type:1}):r[a].type===0?s[s.length-1]={value:r[a].show+(r[a].show!="-"?"(":"")+s[s.length-1].value+(r[a].show!="-"?")":""),type:0}:r[a].type===7?s[s.length-1]={value:(s[s.length-1].type!=1?"(":"")+s[s.length-1].value+(s[s.length-1].type!=1?")":"")+r[a].show,type:7}:r[a].type===10?(t=s.pop(),e=s.pop(),r[a].show==="P"||r[a].show==="C"?s.push({value:"<sup>"+e.value+"</sup>"+r[a].show+"<sub>"+t.value+"</sub>",type:10}):s.push({value:(e.type!=1?"(":"")+e.value+(e.type!=1?")":"")+"<sup>"+t.value+"</sup>",type:1})):r[a].type===2||r[a].type===9?(t=s.pop(),e=s.pop(),s.push({value:(e.type!=1?"(":"")+e.value+(e.type!=1?")":"")+r[a].show+(t.type!=1?"(":"")+t.value+(t.type!=1?")":""),type:r[a].type})):r[a].type===12&&(t=s.pop(),e=s.pop(),i=s.pop(),s.push({value:r[a].show+"("+i.value+","+e.value+","+t.value+")",type:12}));return s[0].value},zm=n,zm}var Dm,MS;function bV(){if(MS)return Dm;MS=1;var n=fV(),t=mV(),e=_V(),i=100,s=/(\+|\-|\*|\\|[^a-z]|)(\s*)(\()/g,r;Dm=a;function a(u,h){r=0,h=Math.pow(10,h===void 0?5:h),u=u.replace(/\n+/g," ");function f(g,x,w){if(r++>i)throw r=0,new Error("Call stack overflow for "+w);if(g==="")throw new Error(x+"(): '"+w+"' must contain a non-whitespace string");g=p(g,w);var _=l(g);if(_.length>1||g.indexOf("var(")>-1)return x+"("+g+")";var b=_[0]||"";b==="%"&&(g=g.replace(/\b[0-9\.]+%/g,function(P){return parseFloat(P.slice(0,-1))*.01}));var C=g.replace(new RegExp(b,"gi"),""),M;try{M=e.eval(C)}catch{return x+"("+g+")"}return b==="%"&&(M*=100),(x.length||b==="%")&&(M=Math.round(M*h)/h),M+=b,M}function p(g,x){g=g.replace(/((?:\-[a-z]+\-)?calc)/g,"");for(var w="",_=g,b;b=s.exec(_);){b[0].index>0&&(w+=_.substring(0,b[0].index));var C=n("(",")",_.substring([0].index));if(C.body==="")throw new Error("'"+g+"' must contain a non-whitespace string");var M=f(C.body,"",x);w+=C.pre+M,_=C.post}return w+_}return t(u,/((?:\-[a-z]+\-)?calc)\(/,f)}function l(u){for(var h=[],f=[],p=/[\.0-9]([%a-z]+)/gi,g=p.exec(u);g;)!g||!g[1]||(f.indexOf(g[1].toLowerCase())===-1&&(h.push(g[1]),f.push(g[1].toLowerCase())),g=p.exec(u));return h}return Dm}var wV=bV();const Im=Eo(wV);var Bm,PS;function SV(){if(PS)return Bm;PS=1;var n=typeof Tu=="object"&&Tu&&Tu.Object===Object&&Tu;return Bm=n,Bm}var Lm,AS;function C0(){if(AS)return Lm;AS=1;var n=SV(),t=typeof self=="object"&&self&&self.Object===Object&&self,e=n||t||Function("return this")();return Lm=e,Lm}var Fm,TS;function wR(){if(TS)return Fm;TS=1;var n=C0(),t=n.Symbol;return Fm=t,Fm}var Hm,ES;function CV(){if(ES)return Hm;ES=1;var n=wR(),t=Object.prototype,e=t.hasOwnProperty,i=t.toString,s=n?n.toStringTag:void 0;function r(a){var l=e.call(a,s),u=a[s];try{a[s]=void 0;var h=!0}catch{}var f=i.call(a);return h&&(l?a[s]=u:delete a[s]),f}return Hm=r,Hm}var Um,RS;function MV(){if(RS)return Um;RS=1;var n=Object.prototype,t=n.toString;function e(i){return t.call(i)}return Um=e,Um}var Gm,jS;function PV(){if(jS)return Gm;jS=1;var n=wR(),t=CV(),e=MV(),i="[object Null]",s="[object Undefined]",r=n?n.toStringTag:void 0;function a(l){return l==null?l===void 0?s:i:r&&r in Object(l)?t(l):e(l)}return Gm=a,Gm}var Vm,kS;function SR(){if(kS)return Vm;kS=1;function n(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}return Vm=n,Vm}var Wm,NS;function AV(){if(NS)return Wm;NS=1;var n=PV(),t=SR(),e="[object AsyncFunction]",i="[object Function]",s="[object GeneratorFunction]",r="[object Proxy]";function a(l){if(!t(l))return!1;var u=n(l);return u==i||u==s||u==e||u==r}return Wm=a,Wm}var Ym,OS;function TV(){if(OS)return Ym;OS=1;var n=C0(),t=n["__core-js_shared__"];return Ym=t,Ym}var qm,zS;function EV(){if(zS)return qm;zS=1;var n=TV(),t=(function(){var i=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})();function e(i){return!!t&&t in i}return qm=e,qm}var Xm,DS;function RV(){if(DS)return Xm;DS=1;var n=Function.prototype,t=n.toString;function e(i){if(i!=null){try{return t.call(i)}catch{}try{return i+""}catch{}}return""}return Xm=e,Xm}var $m,IS;function jV(){if(IS)return $m;IS=1;var n=AV(),t=EV(),e=SR(),i=RV(),s=/[\\^$.*+?()[\]{}|]/g,r=/^\[object .+?Constructor\]$/,a=Function.prototype,l=Object.prototype,u=a.toString,h=l.hasOwnProperty,f=RegExp("^"+u.call(h).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(g){if(!e(g)||t(g))return!1;var x=n(g)?f:r;return x.test(i(g))}return $m=p,$m}var Qm,BS;function kV(){if(BS)return Qm;BS=1;function n(t,e){return t?.[e]}return Qm=n,Qm}var Km,LS;function CR(){if(LS)return Km;LS=1;var n=jV(),t=kV();function e(i,s){var r=t(i,s);return n(r)?r:void 0}return Km=e,Km}var Zm,FS;function Dd(){if(FS)return Zm;FS=1;var n=CR(),t=n(Object,"create");return Zm=t,Zm}var Jm,HS;function NV(){if(HS)return Jm;HS=1;var n=Dd();function t(){this.__data__=n?n(null):{},this.size=0}return Jm=t,Jm}var tg,US;function OV(){if(US)return tg;US=1;function n(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}return tg=n,tg}var eg,GS;function zV(){if(GS)return eg;GS=1;var n=Dd(),t="__lodash_hash_undefined__",e=Object.prototype,i=e.hasOwnProperty;function s(r){var a=this.__data__;if(n){var l=a[r];return l===t?void 0:l}return i.call(a,r)?a[r]:void 0}return eg=s,eg}var ng,VS;function DV(){if(VS)return ng;VS=1;var n=Dd(),t=Object.prototype,e=t.hasOwnProperty;function i(s){var r=this.__data__;return n?r[s]!==void 0:e.call(r,s)}return ng=i,ng}var ig,WS;function IV(){if(WS)return ig;WS=1;var n=Dd(),t="__lodash_hash_undefined__";function e(i,s){var r=this.__data__;return this.size+=this.has(i)?0:1,r[i]=n&&s===void 0?t:s,this}return ig=e,ig}var sg,YS;function BV(){if(YS)return sg;YS=1;var n=NV(),t=OV(),e=zV(),i=DV(),s=IV();function r(a){var l=-1,u=a==null?0:a.length;for(this.clear();++l<u;){var h=a[l];this.set(h[0],h[1])}}return r.prototype.clear=n,r.prototype.delete=t,r.prototype.get=e,r.prototype.has=i,r.prototype.set=s,sg=r,sg}var rg,qS;function LV(){if(qS)return rg;qS=1;function n(){this.__data__=[],this.size=0}return rg=n,rg}var ag,XS;function FV(){if(XS)return ag;XS=1;function n(t,e){return t===e||t!==t&&e!==e}return ag=n,ag}var og,$S;function Id(){if($S)return og;$S=1;var n=FV();function t(e,i){for(var s=e.length;s--;)if(n(e[s][0],i))return s;return-1}return og=t,og}var lg,QS;function HV(){if(QS)return lg;QS=1;var n=Id(),t=Array.prototype,e=t.splice;function i(s){var r=this.__data__,a=n(r,s);if(a<0)return!1;var l=r.length-1;return a==l?r.pop():e.call(r,a,1),--this.size,!0}return lg=i,lg}var cg,KS;function UV(){if(KS)return cg;KS=1;var n=Id();function t(e){var i=this.__data__,s=n(i,e);return s<0?void 0:i[s][1]}return cg=t,cg}var ug,ZS;function GV(){if(ZS)return ug;ZS=1;var n=Id();function t(e){return n(this.__data__,e)>-1}return ug=t,ug}var hg,JS;function VV(){if(JS)return hg;JS=1;var n=Id();function t(e,i){var s=this.__data__,r=n(s,e);return r<0?(++this.size,s.push([e,i])):s[r][1]=i,this}return hg=t,hg}var dg,tC;function WV(){if(tC)return dg;tC=1;var n=LV(),t=HV(),e=UV(),i=GV(),s=VV();function r(a){var l=-1,u=a==null?0:a.length;for(this.clear();++l<u;){var h=a[l];this.set(h[0],h[1])}}return r.prototype.clear=n,r.prototype.delete=t,r.prototype.get=e,r.prototype.has=i,r.prototype.set=s,dg=r,dg}var fg,eC;function YV(){if(eC)return fg;eC=1;var n=CR(),t=C0(),e=n(t,"Map");return fg=e,fg}var pg,nC;function qV(){if(nC)return pg;nC=1;var n=BV(),t=WV(),e=YV();function i(){this.size=0,this.__data__={hash:new n,map:new(e||t),string:new n}}return pg=i,pg}var mg,iC;function XV(){if(iC)return mg;iC=1;function n(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}return mg=n,mg}var gg,sC;function Bd(){if(sC)return gg;sC=1;var n=XV();function t(e,i){var s=e.__data__;return n(i)?s[typeof i=="string"?"string":"hash"]:s.map}return gg=t,gg}var xg,rC;function $V(){if(rC)return xg;rC=1;var n=Bd();function t(e){var i=n(this,e).delete(e);return this.size-=i?1:0,i}return xg=t,xg}var yg,aC;function QV(){if(aC)return yg;aC=1;var n=Bd();function t(e){return n(this,e).get(e)}return yg=t,yg}var vg,oC;function KV(){if(oC)return vg;oC=1;var n=Bd();function t(e){return n(this,e).has(e)}return vg=t,vg}var _g,lC;function ZV(){if(lC)return _g;lC=1;var n=Bd();function t(e,i){var s=n(this,e),r=s.size;return s.set(e,i),this.size+=s.size==r?0:1,this}return _g=t,_g}var bg,cC;function JV(){if(cC)return bg;cC=1;var n=qV(),t=$V(),e=QV(),i=KV(),s=ZV();function r(a){var l=-1,u=a==null?0:a.length;for(this.clear();++l<u;){var h=a[l];this.set(h[0],h[1])}}return r.prototype.clear=n,r.prototype.delete=t,r.prototype.get=e,r.prototype.has=i,r.prototype.set=s,bg=r,bg}var wg,uC;function t7(){if(uC)return wg;uC=1;var n=JV(),t="Expected a function";function e(i,s){if(typeof i!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var r=function(){var a=arguments,l=s?s.apply(this,a):a[0],u=r.cache;if(u.has(l))return u.get(l);var h=i.apply(this,a);return r.cache=u.set(l,h)||u,h};return r.cache=new(e.Cache||n),r}return e.Cache=n,wg=e,wg}var e7=t7();const n7=Eo(e7),hC="__react_svg_text_measurement_id";function i7(n,t){try{let e=document.getElementById(hC);if(!e){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("aria-hidden","true"),i.style.width="0",i.style.height="0",i.style.position="absolute",i.style.top="-100%",i.style.left="-100%",e=document.createElementNS("http://www.w3.org/2000/svg","text"),e.setAttribute("id",hC),i.appendChild(e),document.body.appendChild(i)}return Object.assign(e.style,t),e.textContent=n,e.getComputedTextLength()}catch(e){return console.warn(e),null}}const dC=n7(i7,(n,t)=>`${n}_${JSON.stringify(t)}`);function Sg(n){return typeof n=="number"}function fC(n){return typeof n=="number"&&Number.isFinite(n)||typeof n=="string"}function s7(n){const{verticalAnchor:t="end",scaleToFit:e=!1,angle:i,width:s,lineHeight:r="1em",capHeight:a="0.71em",children:l,style:u,...h}=n,{x:f=0,y:p=0}=h,g=!fC(f)||!fC(p),{wordsWithWidth:x,spaceWidth:w}=A.useMemo(()=>({wordsWithWidth:(l==null?[]:l.toString().split(/(?:(?!\u00A0+)\s+)/)).map(P=>({word:P,wordWidth:dC(P,u)||0})),spaceWidth:dC("",u)||0}),[l,u]),_=A.useMemo(()=>g?[]:s||e?x.reduce((M,P)=>{let{word:T,wordWidth:E}=P;const R=M[M.length-1];if(R&&(s==null||e||(R.width||0)+E+w<s))R.words.push(T),R.width=R.width||0,R.width+=E+w;else{const N={words:[T],width:E};M.push(N)}return M},[]):[{words:l==null?[]:l.toString().split(/(?:(?!\u00A0+)\s+)/)}],[g,s,e,l,x,w]),b=A.useMemo(()=>g?"":Im(t==="start"?`calc(${a})`:t==="middle"?`calc(${(_.length-1)/2} * -${r} + (${a} / 2))`:`calc(${_.length-1} * -${r})`),[g,t,a,_.length,r]),C=A.useMemo(()=>{const M=[];if(g)return"";if(Sg(f)&&Sg(p)&&Sg(s)&&e&&_.length>0){const P=_[0].width||1,T=e==="shrink-only"?Math.min(s/P,1):s/P,E=T,R=f-T*f,N=p-E*p;M.push(`matrix(${T}, 0, 0, ${E}, ${R}, ${N})`)}return i&&M.push(`rotate(${i}, ${f}, ${p})`),M.length>0?M.join(" "):""},[g,f,p,s,e,_,i]);return{wordsByLines:_,startDy:b,transform:C}}const r7={overflow:"visible"};function M0(n){const{dx:t=0,dy:e=0,textAnchor:i="start",innerRef:s,innerTextRef:r,verticalAnchor:a,angle:l,lineHeight:u="1em",scaleToFit:h=!1,capHeight:f,width:p,...g}=n,{x=0,fontSize:w}=g,{wordsByLines:_,startDy:b,transform:C}=s7(n);return y.jsx("svg",{ref:s,x:t,y:e,fontSize:w,style:r7,children:_.length>0?y.jsx("text",{ref:r,transform:C,...g,textAnchor:i,children:_.map((M,P)=>y.jsx("tspan",{x,dy:P===0?b:u,children:M.words.join(" ")},P))}):null})}const ai={top:"top",left:"left",bottom:"bottom"};function a7(n){let{labelOffset:t,labelProps:e,orientation:i,range:s,tickLabelFontSize:r,tickLength:a}=n;const l=i===ai.left||i===ai.top?-1:1;let u,h,f;if(i===ai.top||i===ai.bottom){const p=i===ai.bottom&&typeof e.fontSize=="number"?e.fontSize:0;u=(Number(s[0])+Number(s[s.length-1]))/2,h=l*(a+t+r+p)}else u=l*((Number(s[0])+Number(s[s.length-1]))/2),h=-(a+t),f=`rotate(${l*90})`;return{x:u,y:h,transform:f}}function o7(n){let{hideTicks:t,horizontal:e,orientation:i,tickClassName:s,tickComponent:r,tickLabelProps:a,tickStroke:l="#222",tickTransform:u,ticks:h,strokeWidth:f,tickLineProps:p}=n;return h.map(g=>{let{value:x,index:w,from:_,to:b,formattedValue:C}=g;const M=a[w]??{},P=Math.max(10,typeof M.fontSize=="number"&&M.fontSize||0),T=b.y+(e&&i!==ai.top?P:0);return y.jsxs(zo,{className:Ri("visx-axis-tick",s),transform:u,children:[!t&&y.jsx(NE,{from:_,to:b,stroke:l,strokeWidth:f,strokeLinecap:"square",...p}),r?r({...M,x:b.x,y:T,formattedValue:C}):y.jsx(M0,{x:b.x,y:T,...M,children:C})]},`visx-tick-${x}-${w}`)})}const pC={textAnchor:"middle",fontFamily:"Arial",fontSize:10,fill:"#222"};function l7(n){let{axisFromPoint:t,axisLineClassName:e,axisToPoint:i,hideAxisLine:s,hideTicks:r,horizontal:a,label:l="",labelClassName:u,labelOffset:h=14,labelProps:f,orientation:p=ai.bottom,scale:g,stroke:x="#222",strokeDasharray:w,strokeWidth:_=1,tickClassName:b,tickComponent:C,tickLineProps:M,tickLabelProps:P,tickLength:T=8,tickStroke:E="#222",tickTransform:R,ticks:N,ticksComponent:O=o7}=n;const k={...pC,...f},B={...pC,...typeof P=="object"?P:null},I=N.map(q=>{let{value:U,index:Y}=q;return typeof P=="function"?P(U,Y,N):B}),X=Math.max(10,...I.map(q=>typeof q.fontSize=="number"?q.fontSize:0));return y.jsxs(y.Fragment,{children:[O({hideTicks:r,horizontal:a,orientation:p,scale:g,tickClassName:b,tickComponent:C,tickLabelProps:I,tickStroke:E,tickTransform:R,ticks:N,strokeWidth:_,tickLineProps:M}),!s&&y.jsx(NE,{className:Ri("visx-axis-line",e),from:t,to:i,stroke:x,strokeWidth:_,strokeDasharray:w}),l&&y.jsx(M0,{className:Ri("visx-axis-label",u),...a7({labelOffset:h,labelProps:k,orientation:p,range:g.range(),tickLabelFontSize:X,tickLength:T}),...k,children:l})]})}function c7(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"center";const e=n;if(t!=="start"&&"bandwidth"in e){let i=e.bandwidth();return t==="center"&&(i/=2),e.round()&&(i=Math.round(i)),s=>{const r=e(s);return typeof r=="number"?r+i:r}}return n}function u7(n){const t=n;return"tickFormat"in t?t.tickFormat():dV}function th(n,t){let{x:e,y:i}=n;return new Ps(t?{x:e,y:i}:{x:i,y:e})}const Cg=0;function h7(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Cg;return typeof n=="number"?{start:n,end:n}:{start:Cg,end:Cg,...n}}function d7(n){let{children:t=l7,axisClassName:e,hideAxisLine:i=!1,hideTicks:s=!1,hideZero:r=!1,innerRef:a,left:l=0,numTicks:u=10,orientation:h=ai.bottom,rangePadding:f=0,scale:p,tickFormat:g,tickLength:x=8,tickValues:w,top:_=0,...b}=n;const C=g??u7(p),M=h===ai.left,P=h===ai.top,T=P||h===ai.bottom,E=c7(p),R=M||P?-1:1,N=p.range(),O=h7(f),k=th({x:Number(N[0])+.5-O.start,y:0},T),B=th({x:Number(N[N.length-1])+.5+O.end,y:0},T),I=(w??hV(p,u)).filter(q=>!r||q!==0&&q!=="0").map((q,U)=>({value:q,index:U})),X=I.map(q=>{let{value:U,index:Y}=q;const D=bR(E(U));return{value:U,index:Y,from:th({x:D,y:0},T),to:th({x:D,y:x*R},T),formattedValue:C(U,Y,I)}});return y.jsx(zo,{className:Ri("visx-axis",e),innerRef:a,top:_,left:l,children:t({...b,axisFromPoint:k,axisToPoint:B,hideAxisLine:i,hideTicks:s,hideZero:r,horizontal:T,numTicks:u,orientation:h,rangePadding:f,scale:p,tickFormat:C,tickLength:x,tickPosition:E,tickSign:R,ticks:X})})}function eh(n,t,e,i,s){switch(n){case"center":return s;case"min":return e??0;case"max":return i??0;case"outside":default:return((t??0)<s?e:i)??0}}function mC(n){let{from:t,to:e}=n;return{fromX:t.x,toX:e.x,fromY:t.y,toY:e.y,opacity:1}}function f7(n){let{scale:t,animateXOrY:e,animationTrajectory:i="outside"}=n;const s=e==="x";return A.useMemo(()=>{const[r,a]=t.range().map(bR),l=a!=null&&r!=null&&a<r,[u,h]=l?[a,r]:[r,a],f=a!=null&&r!=null?Math.abs(a-r):0,p=(u??0)+f/2;let g=i;!s&&i==="min"&&(g="max"),!s&&i==="max"&&(g="min");const x=w=>{let{from:_,to:b}=w;return{fromX:s?eh(g,_.x,u,h,p):_.x,toX:s?eh(g,_.x,u,h,p):b.x,fromY:s?_.y:eh(g,_.y,u,h,p),toY:s?b.y:eh(g,_.y,u,h,p),opacity:0}};return{from:x,leave:x,enter:mC,update:mC}},[t,s,i])}function p7(n){let{hideTicks:t,horizontal:e,orientation:i,scale:s,tickClassName:r,tickComponent:a,tickLabelProps:l,tickStroke:u="#222",tickTransform:h,ticks:f,tickLineProps:p,animationTrajectory:g}=n;const x=QU(f,{...f7({scale:s,animateXOrY:e?"x":"y",animationTrajectory:g}),keys:w=>`tick-${w.value}-${w.index}`});return y.jsx(y.Fragment,{children:x((w,_,b,C)=>{let{fromX:M,toX:P,fromY:T,toY:E,opacity:R}=w,{key:N}=b;const O=l[C]??l[0]??{};return _==null||N==null?null:y.jsxs(Mm.g,{className:Ri("visx-axis-tick",r),transform:h,children:[!t&&y.jsx(Mm.line,{x1:M,x2:P,y1:T,y2:E,stroke:u,strokeLinecap:"square",strokeOpacity:R,...p}),y.jsx(Mm.g,{transform:tG([P,E],(k,B)=>`translate(${k},${B+(i===ai.bottom&&typeof O.fontSize=="number"?O.fontSize??10:0)})`),opacity:R,children:a?a({...O,x:P,y:E,formattedValue:_?.formattedValue}):y.jsx(M0,{...O,children:_?.formattedValue})},C)]},N)})})}function gC(n){let{animationTrajectory:t,tickComponent:e,...i}=n;const s=A.useMemo(()=>function(a){return y.jsx(p7,{...a,tickComponent:e,animationTrajectory:t})},[t,e]);return y.jsx(d7,{...i,ticksComponent:s})}function m7(n){const[t,e]=A.useState({tooltipOpen:!1,...n}),i=A.useCallback(r=>e(typeof r=="function"?a=>{let{tooltipOpen:l,...u}=a;return{...r(u),tooltipOpen:!0}}:{tooltipOpen:!0,tooltipLeft:r.tooltipLeft,tooltipTop:r.tooltipTop,tooltipData:r.tooltipData}),[e]),s=A.useCallback(()=>e({tooltipOpen:!1,tooltipLeft:void 0,tooltipTop:void 0,tooltipData:void 0}),[e]);return{tooltipOpen:t.tooltipOpen,tooltipLeft:t.tooltipLeft,tooltipTop:t.tooltipTop,tooltipData:t.tooltipData,updateTooltip:e,showTooltip:i,hideTooltip:s}}function xC(n,t){let e;return(...i)=>{window.clearTimeout(e),e=window.setTimeout(()=>n(...i),t)}}function g7({debounce:n,scroll:t,polyfill:e,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const s=e||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[r,a]=A.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=A.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:r,orientationHandler:null}),u=n?typeof n=="number"?n:n.scroll:null,h=n?typeof n=="number"?n:n.resize:null,f=A.useRef(!1);A.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[p,g,x]=A.useMemo(()=>{const C=()=>{if(!l.current.element)return;const{left:M,top:P,width:T,height:E,bottom:R,right:N,x:O,y:k}=l.current.element.getBoundingClientRect(),B={left:M,top:P,width:T,height:E,bottom:R,right:N,x:O,y:k};l.current.element instanceof HTMLElement&&i&&(B.height=l.current.element.offsetHeight,B.width=l.current.element.offsetWidth),Object.freeze(B),f.current&&!_7(l.current.lastBounds,B)&&a(l.current.lastBounds=B)};return[C,h?xC(C,h):C,u?xC(C,u):C]},[a,i,u,h]);function w(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(C=>C.removeEventListener("scroll",x,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function _(){l.current.element&&(l.current.resizeObserver=new s(x),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(C=>C.addEventListener("scroll",x,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{x()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const b=C=>{!C||C===l.current.element||(w(),l.current.element=C,l.current.scrollContainers=MR(C),_())};return y7(x,!!t),x7(g),A.useEffect(()=>{w(),_()},[t,x,g]),A.useEffect(()=>w,[]),[b,r,p]}function x7(n){A.useEffect(()=>{const t=n;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[n])}function y7(n,t){A.useEffect(()=>{if(t){const e=n;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",e,!0)}},[n,t])}function MR(n){const t=[];if(!n||n===document.body)return t;const{overflow:e,overflowX:i,overflowY:s}=window.getComputedStyle(n);return[e,i,s].some(r=>r==="auto"||r==="scroll")&&t.push(n),[...t,...MR(n.parentElement)]}const v7=["x","y","top","bottom","left","right","width","height"],_7=(n,t)=>v7.every(e=>n[e]===t[e]);class b7 extends A.PureComponent{componentWillUnmount(){this.node&&document.body&&(document.body.removeChild(this.node),delete this.node)}render(){return!this.node&&typeof document<"u"&&(this.node=document.createElement("div"),this.props.zIndex!=null&&(this.node.style.zIndex=`${this.props.zIndex}`),document.body.append(this.node)),this.node?Wk.createPortal(this.props.children,this.node):null}}const P0={position:"absolute",backgroundColor:"white",color:"#666666",padding:"0.3rem 0.5rem",borderRadius:"3px",fontSize:"14px",boxShadow:"0 1px 2px rgba(33,33,33,0.2)",lineHeight:"1em",pointerEvents:"none"},A0=A.forwardRef((n,t)=>{let{className:e,top:i,left:s,offsetLeft:r=10,offsetTop:a=10,style:l=P0,children:u,unstyled:h=!1,applyPositionStyle:f=!1,...p}=n;return y.jsx("div",{ref:t,className:Ri("visx-tooltip",e),style:{top:i==null||a==null?i:i+a,left:s==null||r==null?s:s+r,...f&&{position:"absolute"},...!h&&l},...p,children:u})});A0.displayName="Tooltip";const yC={top:0,right:0,bottom:0,left:0,width:0,height:0};function w7(n){return class extends A.PureComponent{static displayName=`withBoundingRects(${n.displayName||""})`;constructor(e){super(e),this.state={rect:void 0,parentRect:void 0},this.nodeRef=A.createRef(),this.getRects=this.getRects.bind(this)}componentDidMount(){this.node=this.nodeRef?.current||null,this.setState(()=>this.getRects())}getRects(){if(!this.node)return this.state;const{node:e}=this,i=e.parentNode,s=e.getBoundingClientRect?e.getBoundingClientRect():yC,r=i?.getBoundingClientRect?i.getBoundingClientRect():yC;return{rect:s,parentRect:r}}render(){return y.jsx(n,{nodeRef:this.nodeRef,getRects:this.getRects,...this.state,...this.props})}}}const PR=A.createContext({isFlippedVertically:!1,isFlippedHorizontally:!1}),S7=PR.Provider;PR.Consumer;function C7(n){let{children:t,getRects:e,left:i=0,offsetLeft:s=10,offsetTop:r=10,parentRect:a,rect:l,style:u=P0,top:h=0,unstyled:f=!1,nodeRef:p,...g}=n,x,w=!1,_=!1;if(l&&a){let b=i,C=h;if(a.width){const M=b+s+l.width-a.width,P=l.width-b-s;w=M>0&&M>P}else{const M=b+s+l.width-window.innerWidth,P=l.width-b-s;w=M>0&&M>P}if(a.height){const M=C+r+l.height-a.height,P=l.height-C-r;_=M>0&&M>P}else _=C+r+l.height>window.innerHeight;b=w?b-l.width-s:b+s,C=_?C-l.height-r:C+r,b=Math.round(b),C=Math.round(C),x=`translate(${b}px, ${C}px)`}return y.jsx(A0,{ref:p,style:{left:0,top:0,transform:x,...!f&&u},...g,children:y.jsx(S7,{value:{isFlippedVertically:!_,isFlippedHorizontally:!w},children:t})})}const M7=w7(C7);function P7(){let{detectBounds:n=!0,zIndex:t,...e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const[i,s,r]=g7(e),[a,l]=A.useState(!1);A.useEffect(()=>{l(!1)},[]);const u=A.useMemo(()=>function(h){let{left:f=0,top:p=0,detectBounds:g,zIndex:x,...w}=h;const _=g??n,b=x??t,C=_?M7:A0,M=a?0:window.scrollX,P=a?0:window.scrollY,T=f+(s.left||0)+M,E=p+(s.top||0)+P;return y.jsx(b7,{zIndex:b,children:y.jsx(C,{left:T,top:E,...w})})},[n,t,s.left,s.top,a]);return{containerRef:i,containerBounds:s,forceRefreshBounds:r,TooltipInPortal:u}}const qx="#eb5e41",Mg=n=>{const t=RO(n.format);return y.jsx(CO,{format:n.format,children:y.jsx(ty,{each:t,children:e=>y.jsxs(kt,{gap:"1",children:[y.jsx(TO,{minW:"5ch",children:e}),y.jsx(Ng,{channel:e})]},e)})})},AR=n=>{const{onValueChange:t}=n;return y.jsxs(lO,{defaultValue:Yk(qx),onValueChange:e=>{t(e.value.toString("hex"))},maxW:"200px",children:[y.jsx(AO,{}),y.jsx(cO,{children:y.jsx(uO,{"data-fit-content":!0,px:"1.5",py:"1",children:y.jsx(K2,{boxSize:"6",rounded:"inherit"})})}),y.jsx(Cc,{children:y.jsx(hO,{children:y.jsxs(dO,{children:[y.jsxs(mP,{defaultValue:"picker",size:"sm",variant:"line",children:[y.jsxs(gP,{mb:"3",children:[y.jsx(mh,{value:"picker",children:"picker"}),y.jsx(mh,{value:"channels",children:"channels"})]}),y.jsx(gh,{value:"picker",children:y.jsxs(kt,{gap:"3",children:[y.jsx(mO,{}),y.jsxs(ht,{children:[y.jsx(PO,{size:"xs",variant:"outline"}),y.jsx(vO,{})]})]})}),y.jsx(gh,{value:"channels",children:y.jsxs(kt,{gap:"3",children:[y.jsx(MO,{}),y.jsx(Mg,{format:"hsla"}),y.jsx(Mg,{format:"hsba"}),y.jsx(Mg,{format:"rgba"})]})})]}),y.jsxs(py,{mt:"4",align:"stretch",gap:"3",children:[y.jsx(_O,{children:A7.map(e=>y.jsx(bO,{value:e,children:y.jsx(wO,{boxSize:"4.5",value:e,children:y.jsx(SO,{children:y.jsx(qk,{})})})},e))}),y.jsx(Z2,{channel:"hex","aria-label":"Hex color"})]})]})})})]})},A7=["#000000","#4A5568","#F56565","#ED64A6","#9F7AEA","#6B46C1","#4299E1","#0BC5EA","#00B5D8","#38B2AC","#48BB78","#68D391","#ECC94B","#DD6B20"];function $h(n){const t=Math.min(n.min,n.max),e=Math.max(n.min,n.max);return{min:t,max:e}}function vC(n,t){return new RegExp(`^${t} \\d+$`).test(n)}function Pg(n){const t=n.filter(l=>l.kind==="linear"),e=n.filter(l=>l.kind==="gaussian");let i=1,s=1,r=1;const a=[];for(const l of t){const u=i++,h=s++,f=vC(l.name,"Linear")?`Linear ${h}`:l.name;a.push({...l,id:u,name:f,kind:"linear",range:$h(l.range)})}for(const l of e){const u=i++,h=r++,f=vC(l.name,"Gaussian")?`Gaussian ${h}`:l.name;a.push({...l,id:u,name:f,kind:"gaussian",range:$h(l.range)})}return a}const ts=Kh()((n,t)=>({waveFrame:"observe",models:[],setWaveFrame:e=>n({waveFrame:e}),ensureInitialModels:e=>{const i=t();i.models.length>0||(i.addLinearModel(e),i.addGaussianModel(e))},addLinearModel:e=>n(i=>{const s=$h(e),a={id:0,kind:"linear",name:"Linear 1",active:!0,subtracted:!1,k:0,b:0,x0:.5*(s.min+s.max),range:s,color:qx},l=[...i.models,a];return{models:Pg(l)}}),addGaussianModel:e=>n(i=>{const s=$h(e),a={id:0,kind:"gaussian",name:"Gaussian 1",active:!0,subtracted:!1,amplitude:0,mu:.5*(s.min+s.max),sigma:1e-4,range:s,color:qx},l=[...i.models,a];return{models:Pg(l)}}),addModel:(e,i)=>{e==="linear"?t().addLinearModel(i):t().addGaussianModel(i)},updateModel:(e,i)=>n(s=>({models:s.models.map(r=>r.id!==e?r:r.kind==="linear"?{...r,...i,kind:"linear"}:{...r,...i,kind:"gaussian"})})),removeModel:e=>n(i=>{const s=i.models.filter(r=>r.id!==e);return{models:Pg(s)}}),renameModel:(e,i)=>n(s=>({models:s.models.map(r=>r.id===e?{...r,name:i}:r)})),toggleActive:(e,i)=>n(s=>({models:s.models.map(r=>r.id===e?{...r,active:i}:r)})),filterModel:e=>t().models.filter(e),filterGaussianModel:()=>t().models.filter(e=>e.kind==="gaussian"),filterLinearModel:()=>t().models.filter(e=>e.kind==="linear"),filterActivatedModel:()=>t().models.filter(e=>e.active)})),ua=1e4,T7=299792.458;function cn(n,t=6){if(!Number.isFinite(n))return"";const e=10**t,i=Math.round(n*e)/e;return String(i)}function _c(n,t,e){const i=1+(Number.isFinite(e)?e:0);let s=1;return n===""&&(s*=ua),t==="rest"&&(s/=i||1),s}function hi(n,t,e,i){const s=1+(Number.isFinite(i)?i:0),r=e==="observe"?n:n/(s||1);return t==="m"?r:r*ua}function As(n,t,e,i){const s=1+(Number.isFinite(i)?i:0);let r;return t==="m"?r=n:r=n/ua,e==="observe"?r:r*(s||1)}function Ts(n,t,e,i,s=4){const r=hi(n,t,e,i);return t==="m"?`${r.toFixed(s)} m`:`${Math.round(r)} `}function E7(n,t){const e=n.length;if(e===0)return null;let i=0,s=e-1;for(;i<s;){const l=i+s>>1;n[l]<t?i=l+1:s=l}let r=i,a=n[r];if(r>0){const l=n[r-1];Math.abs(l-t)<=Math.abs(a-t)&&(r=r-1,a=l)}return{index:r,wavelength:a}}function TR(){const{waveUnit:n,zRedshift:t}=bn(ne(u=>({waveUnit:u.waveUnit,zRedshift:u.zRedshift}))),{waveFrame:e}=ts(ne(u=>({waveFrame:u.waveFrame}))),i=_c(n,e,t),s=u=>hi(u,n,e,t),r=u=>Ts(u,n,e,t),a=u=>{const h=hi(u,n,e,t),f=n==="m"?4:0;return h.toFixed(f)},l=`_${e==="observe"?"obs":"rest"} (${n})`;return{waveUnit:n,waveFrame:e,factor:i,converter:s,formatter:a,formatterWithUnit:r,label:l}}function T0(n,t,e){const i=n.length;if(i===0)return{startIdx:0,endIdx:-1};const{waveLow:s,waveHigh:r}=t<=e?{waveLow:t,waveHigh:e}:{waveLow:e,waveHigh:t},a=Wt(s,n[0],n[i-1]),l=Wt(r,n[0],n[i-1]),u=n.findIndex(f=>f>=a);let h=n.findIndex(f=>f>l)-1;return h<0&&(h=i-1),{startIdx:u,endIdx:h}}function _C(n,t,e){return n.slice(t.startIdx,t.endIdx+1).map(s=>s.slice(e.startIdx,e.endIdx+1))}function R7(n,t,e="row"){const i=n.length,s=n[0]?.length||0;if(i===0||s===0)throw new Error("Input 2D arrays must not be empty");if(e==="row"){const r=new Array(s),a=new Array(s);for(let l=0;l<s;l++){let u=0,h=0;for(let f=0;f<i;f++){const p=n[f][l],g=t[f][l];u+=p,h+=g*g}r[l]=u,a[l]=Math.sqrt(h)}return{flux1D:r,error1D:a}}else{const r=new Array(i),a=new Array(i);for(let l=0;l<i;l++){let u=0,h=0;for(let f=0;f<s;f++){const p=n[l][f],g=t[l][f];u+=p,h+=g*g}r[l]=u,a[l]=Math.sqrt(h)}return{flux1D:r,error1D:a}}}function j7(n,t,e="row"){if(!n.covered)return;const{startIdx:i,endIdx:s}=T0(n.wavelength,t.waveMin,t.waveMax),r=Math.floor(t.spatialMin),a=Math.ceil(t.spatialMax),l=_C(n.spectrum_2d,{startIdx:r,endIdx:a},{startIdx:i,endIdx:s}),u=_C(n.error_2d,{startIdx:r,endIdx:a},{startIdx:i,endIdx:s}),h=n.wavelength.slice(i,s+1),{flux1D:f,error1D:p}=R7(l,u,e);return{wavelength:h,flux1D:f,error1D:p}}function k7(n,t,e){const i=Math.min(n.length,t.length,e.length),s=new Array(i);for(let r=0;r<i;r++)s[r]={wavelength:n[r],flux:t[r],error:e[r],fluxPlusErr:t[r]+e[r],fluxMinusErr:t[r]-e[r]};return s}function N7(n,t,e="row"){const i=j7(n,t,e);if(i)return k7(i.wavelength,i.flux1D,i.error1D)}const O7=A.memo(function(t){const{spectrum1D:e,xScale:i,yScale:s,height:r,anchor:a,label:l,children:u}=t,{label:h,formatter:f}=TR();return y.jsxs(zo,{left:a.left,top:a.top,children:[y.jsx(gC,{orientation:"left",scale:s,numTicks:5,label:l?.left??"flux",labelOffset:35,tickLabelProps:{dx:-10,dy:-5},animationTrajectory:"outside"}),y.jsx(gC,{orientation:"bottom",animationTrajectory:"outside",left:0,top:r,scale:i,numTicks:8,label:h,tickFormat:p=>{const g=typeof p=="number"?p:Number(p.valueOf());return f(g)}}),y.jsx(LH,{yScale:s,data:e,x:p=>i(p.wavelength)??0,y:p=>s(p.fluxPlusErr)??0,y0:p=>s(p.fluxMinusErr)??0,curve:jx,fill:"#999",fillOpacity:.25,stroke:"none"}),y.jsx(Bh,{data:e,x:p=>i(p.wavelength)??0,y:p=>s(p.flux)??0,stroke:"#000",strokeWidth:2,curve:jx}),u]})}),z7=A.memo(function(t){const{xScale:e,yScale:i,samplePoints:s=201}=t,r=ts(p=>p.models),a=r.filter(p=>p.kind==="gaussian"&&p.active&&p.subtracted===!1),l=r.filter(p=>p.kind==="linear"&&p.active&&p.subtracted===!1),u=bn(p=>p.slice1DWaveRange),h=A.useMemo(()=>a.map(p=>Jb(p,u,s).filter(w=>w.wavelength>=u.min&&w.wavelength<=u.max&&i(w.flux)!==void 0&&i(w.flux)>=0&&i(w.flux)<=i.range()[0])),[a,u,s,i]),f=A.useMemo(()=>l.map(p=>Jb(p,u)),[l,u]);return y.jsxs("g",{pointerEvents:"none",children:[f.map((p,g)=>p.length<2?null:y.jsx(Bh,{data:p,x:x=>e(x.wavelength)??0,y:x=>i(x.flux)??0,stroke:l[g].color,strokeWidth:1,curve:Ih},`fit-linear-${l[g].id}`)),h.map((p,g)=>p.length<2?null:y.jsx(Bh,{data:p,x:x=>e(x.wavelength)??0,y:x=>i(x.flux)??0,stroke:a[g].color,strokeWidth:1,curve:Ih},`fit-gaussian-${a[g].id}`))]})}),Ag=Math.sqrt(2*Math.log(2)),D7=A.memo(function(t){const{xScale:e,yScale:i,chartHeight:s,sliceRange:r}=t,a=ts(p=>p.models),l=ts(p=>p.updateModel),u=a.filter(p=>p.active&&p.subtracted===!1),[h,f]=A.useState(null);return u.length===0?null:y.jsx("g",{children:u.map(p=>p.kind==="gaussian"?y.jsx(I7,{model:p,xScale:e,yScale:i,sliceRange:r,chartHeight:s,drag:h,setDrag:f,updateModel:l},`handle-gaussian-${p.id}`):y.jsx(B7,{model:p,xScale:e,yScale:i,sliceRange:r,drag:h,setDrag:f,updateModel:l},`handle-linear-${p.id}`))})});function I7(n){const{model:t,xScale:e,yScale:i,sliceRange:s,chartHeight:r,drag:a,setDrag:l,updateModel:u,cricleSize:h=7}=n,f=t.mu,p=t.amplitude,g=e(f),x=i(p),w=f>=s.min&&f<=s.max&&x!==void 0&&x>=0&&x<=r,_=p/2,b=t.sigma*Ag,C=t.mu-b,M=t.mu+b,P=e(C),T=e(M),E=i(_),R=i(_),N=C>=s.min&&C<=s.max&&E!==void 0&&E>=0&&E<=r,O=M>=s.min&&M<=s.max&&R!==void 0&&R>=0&&R<=r;return y.jsxs("g",{pointerEvents:"visiblePainted",children:[w&&y.jsx("circle",{cx:g,cy:x,r:h,fill:t.color,stroke:"#000",strokeWidth:1,style:{cursor:"move"},onPointerDown:k=>{k.stopPropagation(),k.currentTarget.setPointerCapture(k.pointerId),l({type:"gauss-peak",id:t.id,lastX:k.clientX,lastY:k.clientY})},onPointerMove:k=>{if(!a||a.type!=="gauss-peak"||a.id!==t.id)return;const B=k.clientX-a.lastX,I=k.clientY-a.lastY;if(B===0&&I===0)return;const X=g+B,q=x+I,U=e.invert(X),Y=i.invert(q);u(t.id,{mu:U,amplitude:Y}),l({...a,lastX:k.clientX,lastY:k.clientY})},onPointerUp:k=>{!a||a.type!=="gauss-peak"||a.id!==t.id||(k.currentTarget.releasePointerCapture(k.pointerId),l(null))}}),N&&y.jsx("circle",{cx:P,cy:E,r:h,fill:t.color,stroke:"#000",strokeWidth:1,style:{cursor:"ew-resize"},onPointerDown:k=>{k.stopPropagation(),k.currentTarget.setPointerCapture(k.pointerId),l({type:"gauss-sigma",id:t.id,lastX:k.clientX})},onPointerMove:k=>{if(!a||a.type!=="gauss-sigma"||a.id!==t.id)return;const B=k.clientX-a.lastX;if(B===0)return;const X=(b+e.invert(B)-e.invert(0))/Ag;u(t.id,{sigma:X}),l({...a,lastX:k.clientX})},onPointerUp:k=>{!a||a.type!=="gauss-sigma"||a.id!==t.id||(k.currentTarget.releasePointerCapture(k.pointerId),l(null))}}),O&&y.jsx("circle",{cx:T,cy:R,r:h,fill:t.color,stroke:"#000",strokeWidth:1,style:{cursor:"ew-resize"},onPointerDown:k=>{k.stopPropagation(),k.currentTarget.setPointerCapture(k.pointerId),l({type:"gauss-sigma",id:t.id,lastX:k.clientX})},onPointerMove:k=>{if(!a||a.type!=="gauss-sigma"||a.id!==t.id)return;const B=k.clientX-a.lastX;if(B===0)return;const X=(b+e.invert(B)-e.invert(0))/Ag;u(t.id,{sigma:X}),l({...a,lastX:k.clientX})},onPointerUp:k=>{!a||a.type!=="gauss-sigma"||a.id!==t.id||(k.currentTarget.releasePointerCapture(k.pointerId),l(null))}})]})}function B7(n){const{model:t,xScale:e,yScale:i,drag:s,setDrag:r,updateModel:a,cricleSize:l=7}=n,u=e(t.x0),h=i(t.b);return y.jsx("g",{pointerEvents:"visiblePainted",children:u!==void 0&&h!==void 0&&y.jsx("circle",{cx:u,cy:h,r:l,fill:t.color,stroke:"#000",strokeWidth:1,style:{cursor:"move"},onPointerDown:f=>{f.stopPropagation(),f.currentTarget.setPointerCapture(f.pointerId),r({type:"linear-x0",id:t.id,lastX:f.clientX,lastY:f.clientY})},onPointerMove:f=>{if(!s||s.type!=="linear-x0"||s.id!==t.id)return;const p=f.clientX-s.lastX,g=f.clientY-s.lastY;if(p===0&&g===0)return;const x=t.x0+e.invert(p)-e.invert(0),w=t.b+i.invert(g)-i.invert(0);a(t.id,{x0:x,b:w}),r({...s,lastX:f.clientX,lastY:f.clientY})},onPointerUp:f=>{!s||s.type!=="linear-x0"||s.id!==t.id||(f.currentTarget.releasePointerCapture(f.pointerId),r(null))}})})}function L7(n){const{spectrum1D:t,width:e,height:i,xScale:s,yScale:r,onHover:a}=n,l=A.useMemo(()=>t.map(g=>g.wavelength),[t]),[u,h]=A.useState(null),f=g=>{if(t.length===0){h(null),a(null);return}const x=g.currentTarget.getBoundingClientRect(),w=g.clientX-x.left,_=g.clientY-x.top;if(w<0||w>e||_<0||_>i){h(null),a(null);return}const b=s.invert(w),C=E7(l,b);if(C===null){h(null),a(null);return}const M=t[C.index],P=s(M.wavelength)??0,T=r(M.flux)??0,E={wavelength:M.wavelength,flux:M.flux,error:M.error,axisX:P,axisY:T,pointerX:w,pointerY:_};h(E),a(E)},p=()=>{h(null),a(null)};return y.jsxs(y.Fragment,{children:[y.jsx("rect",{x:0,y:0,width:e,height:i,fill:"transparent",pointerEvents:"all",onMouseMove:f,onMouseLeave:p}),u&&y.jsxs("g",{pointerEvents:"none",children:[y.jsx("circle",{cx:u.axisX,cy:u.axisY,r:4,fill:"#ff0000",stroke:"#ffffff",strokeWidth:2}),y.jsx("line",{x1:u.pointerX,x2:u.pointerX,y1:0,y2:i,stroke:"#666",strokeWidth:1,strokeDasharray:"4 4"}),y.jsx("line",{x1:0,x2:e,y1:u.pointerY,y2:u.pointerY,stroke:"#666",strokeWidth:1,strokeDasharray:"4 4"})]})]})}const F7=A.memo(function(t){const{spectrum1D:e,xScale:i,yScale:s,anchor:r,children:a}=t;return y.jsxs(zo,{left:r.left,top:r.top,children:[y.jsx(Bh,{data:e,x:l=>i(l.wavelength)??0,y:l=>s(l.flux)??0,stroke:"#111",strokeWidth:2,curve:jx}),a]})}),H7=A.memo(function({x:t,height:e,isBrushActive:i=!0}){return i?y.jsx(zo,{left:t+8/2,top:(e-15)/2,children:y.jsx("path",{fill:"#f2f2f2",d:"M -4.5 0.5 L 3.5 0.5 L 3.5 15.5 L -4.5 15.5 L -4.5 0.5 M -1.5 4 L -1.5 12 M 0.5 4 L 0.5 12",stroke:"#999999",strokeWidth:1,style:{cursor:"ew-resize"}})}):null}),U7=A.memo(function(t){const{xScale:e,chartHeight:i}=t,{selectedEmissionLines:s,zRedshift:r}=bn(ne(u=>({selectedEmissionLines:u.selectedEmissionLines,zRedshift:u.zRedshift}))),[a,l]=e.domain();return y.jsx("g",{pointerEvents:"none",children:Object.entries(s).map(([u,h])=>{const f=h*(1+r);if(f<a||f>l)return null;const p=e(f);return y.jsxs("g",{children:[y.jsx("line",{x1:p,x2:p,y1:0,y2:i,stroke:"#e53e3e",strokeWidth:1}),y.jsx("text",{x:p,y:i+20,textAnchor:"middle",fontSize:12,fill:"#e53e3e",children:u})]},u)})})}),G7={top:.15,bottom:.8,gap:.05},V7={top:20,bottom:50,left:100,right:30};function W7(n){const{spectrum1D:t,width:e,height:i,hRatio:s,margin:r}=n,{waveArray:a,waveMin:l,waveMax:u,fluxMin:h,fluxMax:f}=A.useMemo(()=>{const ct=t.length,It=new Array(ct);let Mt=1/0,qt=-1/0,je=1/0,Oe=-1/0;for(let rs=0;rs<ct;rs++){const Ke=t[rs];It[rs]=Ke.wavelength,Ke.wavelength<Mt&&(Mt=Ke.wavelength),Ke.wavelength>qt&&(qt=Ke.wavelength),Ke.fluxMinusErr<je&&(je=Ke.fluxMinusErr),Ke.fluxPlusErr>Oe&&(Oe=Ke.fluxPlusErr)}return Number.isFinite(Mt)||(Mt=0,qt=1,je=0,Oe=1),{waveArray:It,waveMin:Mt,waveMax:qt,fluxMin:je,fluxMax:Oe}},[t]),p=A.useMemo(()=>{const ct=s??G7,It=ct.top+ct.bottom+ct.gap;return It!==1?{top:ct.top/It,bottom:ct.bottom/It,gap:ct.gap/It}:ct},[s]),g=r??V7,x=i-g.top-g.bottom,w=e-g.left-g.right,_=x*p.top,b=x*p.bottom,C=x*p.gap,M={left:g.left,top:g.top},P={left:g.left,top:g.top+_+C},T=_,E=A.useMemo(()=>Ol().domain([l,u]).range([0,w]),[l,u,w]),R=A.useMemo(()=>Ol().domain([h,f]).range([T,0]),[h,f,T]),{tooltipOpen:N,tooltipData:O,tooltipLeft:k,tooltipTop:B,showTooltip:I,hideTooltip:X}=m7(),{containerRef:q,TooltipInPortal:U}=P7({detectBounds:!0,scroll:!0}),Y=5,D=A.useCallback(ct=>{if(!ct){X();return}I({tooltipData:ct,tooltipLeft:ct.pointerX+P.left+Y,tooltipTop:ct.pointerY+P.top+Y})},[P.left,P.top,X,I]),{slice1DWaveRange:H,setSlice1DWaveRange:J}=bn(ne(ct=>({slice1DWaveRange:ct.slice1DWaveRange,setSlice1DWaveRange:ct.setSlice1DWaveRange}))),V=A.useRef(null),Z=A.useRef(!1),gt=A.useCallback(ct=>{if(!ct)return;Z.current=!0;const{x0:It,x1:Mt}=ct,[qt,je]=It<Mt?[It,Mt]:[Mt,It];qt!==je&&J({min:qt,max:je})},[J]),{startIdx:tt,endIdx:ft}=A.useMemo(()=>T0(a,H.min,H.max),[a,H]);A.useEffect(()=>{if(!V?.current)return;if(Z.current){Z.current=!1;return}const ct=It=>{const Mt=V.current.getExtent({x:E(tt>=0?a[tt]:a[0])},{x:E(ft>=0?a[ft]:a[a.length-1])});return{...It,start:{y:Mt.y0,x:Mt.x0},end:{y:Mt.y1,x:Mt.x1},extent:Mt}};V.current.updateBrush(ct)},[tt,ft,a,E]);const xt=b,Kt=ts(ct=>ct.models).filter(ct=>ct.subtracted&&ct.active),Rt=A.useMemo(()=>t.slice(tt,ft+1).map(Mt=>{let qt=0;for(const je of Kt){const Oe=d8(je,Mt.wavelength).flux;qt+=Oe}return{...Mt,flux:Mt.flux-qt,fluxMinusErr:Mt.fluxMinusErr-qt,fluxPlusErr:Mt.fluxPlusErr-qt}}),[t,tt,ft,Kt]),be=A.useMemo(()=>Ol().domain([H.min,H.max]).range([0,w]),[H,w]),we=A.useMemo(()=>{const ct=Math.min(...Rt.map(je=>je.fluxMinusErr)),It=Math.max(...Rt.map(je=>je.fluxPlusErr)),Mt=(It-ct)*.05;return Ol().domain([ct-Mt,It+Mt]).range([xt,0])},[Rt,xt]),{formatterWithUnit:wn,formatter:gi}=TR();return y.jsxs(fe,{position:"relative",ref:q,children:[y.jsxs("svg",{width:e,height:i,children:[y.jsxs(F7,{spectrum1D:t,xScale:E,yScale:R,anchor:M,children:[y.jsx(U7,{xScale:E,chartHeight:T}),y.jsx(UH,{xScale:E,yScale:R,width:w,height:_,innerRef:V,margin:{top:0,bottom:0,left:0,right:0},handleSize:8,resizeTriggerAreas:["left","right"],brushDirection:"horizontal",useWindowMoveEvents:!0,renderBrushHandle:ct=>y.jsx(H7,{...ct}),onChange:gt,selectedBoxStyle:{fill:"url(#brush-pattern)",stroke:"#057283"}})]}),y.jsxs(O7,{spectrum1D:Rt,width:w,height:b,xScale:be,yScale:we,anchor:P,label:{left:"Flux",bottom:"Wavelength"},children:[y.jsx(z7,{xScale:be,yScale:we}),y.jsx(L7,{spectrum1D:Rt,width:w,height:b,xScale:be,yScale:we,onHover:D}),y.jsx(D7,{xScale:be,yScale:we,chartHeight:b,sliceRange:H})]})]}),N&&O&&y.jsxs(U,{top:B,left:k,style:{...P0,zIndex:100},children:[y.jsx("div",{children:`(${gi(be.invert(O.axisX))}, ${we.invert(O.axisY).toFixed(4)})`}),y.jsxs("div",{children:[y.jsx("strong",{children:"Wave:"})," ",wn(O.wavelength)]}),y.jsxs("div",{children:[y.jsx("strong",{children:"Flux:"})," ",O.flux.toFixed(4)]}),y.jsxs("div",{children:[y.jsx("strong",{children:"Error:"})," ",O.error.toFixed(4)]})]})]})}function Y7(){const n=Ft(l=>l.selectedFootprintId),t=Un(l=>l.cutoutParams),{forwardWaveRange:e,apertureSize:i,collapseWindow:s}=bn(ne(l=>({forwardWaveRange:l.forwardWaveRange,apertureSize:l.apertureSize,collapseWindow:l.collapseWindow}))),{data:r}=kc({selectedFootprintId:n,waveMin:e.min,waveMax:e.max,cutoutParams:t,apertureSize:i,enabled:!1}),a=A.useMemo(()=>!r||!r.covered?[]:N7(r,s,"row")??[],[r,s]);return a.length===0?null:y.jsx(W7,{spectrum1D:a,width:900,height:700,margin:{top:20,right:30,bottom:50,left:60}})}rn({Graphics:Hn,Container:pe,Sprite:Ki});function q7({layerRef:n}){const t=Ft(R=>R.selectedFootprintId),e=Un(R=>R.cutoutParams),{forwardWaveRange:i,apertureSize:s,collapseWindow:r,showTraceOnSpectrum2D:a,setCollapseWindow:l}=bn(ne(R=>({forwardWaveRange:R.forwardWaveRange,apertureSize:R.apertureSize,collapseWindow:R.collapseWindow,showTraceOnSpectrum2D:R.showTraceOnSpectrum2D,setCollapseWindow:R.setCollapseWindow}))),{app:u}=ya(),h=A.useRef(null);A.useEffect(()=>{const R=n.current,N=h.current;if(!(!R||!N))return R.attach(N),()=>{R.detach(N)}},[n]);const{data:f}=kc({selectedFootprintId:t,waveMin:i.min,waveMax:i.max,cutoutParams:e,apertureSize:s,enabled:!1}),p=f?.wavelength||[];A.useEffect(()=>{f&&l({waveMin:p[0],waveMax:p[p.length-1],spatialMin:0,spatialMax:f.spectrum_2d.length-1})},[f,l,p.length,p[0]]);const{waveMin:g,waveMax:x,spatialMin:w,spatialMax:_}=r,{startIdx:b,endIdx:C}=T0(p,g,x),[M,P]=A.useState(dt.EMPTY);A.useEffect(()=>{if(p.length===0)return;const R=new Hn,N=C-b,O=_-w;R.rect(0,0,N,O).stroke({color:15597568,width:1});const k=u.renderer.generateTexture(R);P(B=>(B&&!B.destroyed&&B.destroy(!0),k))},[C,b,w,_,p,u.renderer.generateTexture]);const[T,E]=A.useState(dt.EMPTY);return A.useEffect(()=>{if(p.length===0)return;const R=new Hn,N=15,O=15,k=p.length;let B=0,I=!0;for(;B<k;){const q=Math.min(I?N:O,k-B);I&&(R.moveTo(B,0),R.lineTo(B+q,0).stroke({color:15597568,width:1})),B+=q,I=!I}const X=u.renderer.generateTexture(R);E(q=>(q&&!q.destroyed&&q.destroy(!0),X))},[p,u.renderer.generateTexture]),A.useEffect(()=>()=>{P(R=>(R&&!R.destroyed&&R.destroy(!0),dt.EMPTY)),E(R=>(R&&!R.destroyed&&R.destroy(!0),dt.EMPTY))},[]),f?y.jsxs("pixiContainer",{ref:h,children:[y.jsx("pixiSprite",{texture:M,x:b,y:w,anchor:0}),a&&y.jsx("pixiSprite",{texture:T,x:0,y:(s-1)/2,anchor:{x:0,y:.5}})]}):null}rn({Sprite:Ki});function X7({layerRef:n}){const t=A.useRef(null);A.useEffect(()=>{if(!n)return;const g=n.current,x=t.current;if(!(!g||!x))return console.log("Attaching node to layer",x,g),g.attach(x),()=>{g.detach(x)}},[n]);const e=Ft(g=>g.selectedFootprintId),i=Un(g=>g.cutoutParams),{forwardWaveRange:s,apertureSize:r,grismNorm:a}=bn(ne(g=>({apertureSize:g.apertureSize,forwardWaveRange:g.forwardWaveRange,grismNorm:g.grismNorm}))),{data:l}=kc({selectedFootprintId:e,waveMin:s.min,waveMax:s.max,cutoutParams:i,apertureSize:r,enabled:!1}),[u,h]=A.useState(null);A.useEffect(()=>{if(!l){h(null);return}if(!l.covered){h(null);return}const g=zy(l.spectrum_2d);h(g)},[l]);const[f,p]=A.useState(dt.EMPTY);return A.useEffect(()=>{if(!l||!u)return;const g=mT({data:l.spectrum_2d,pmin:a.pmin,pmax:a.pmax,sortedArray:u,excludeZero:!0});p(x=>(x&&!x.destroyed&&x.destroy(!0),g))},[l,u,a.pmin,a.pmax]),A.useEffect(()=>()=>{p(g=>(g&&!g.destroyed&&g.destroy(!0),dt.EMPTY))},[]),f!==dt.EMPTY&&y.jsx("pixiSprite",{ref:t,texture:f,anchor:0,x:0,y:0})}rn({RenderLayer:pd});function $7(){const n=A.useRef(null),t=A.useRef(null),e=A.useRef(null);return y.jsx(fe,{ref:n,height:"120px",w:900,border:"1px solid black",children:y.jsx(md,{resizeTo:n,backgroundColor:15921906,resolution:1,antialias:!0,autoDensity:!0,children:y.jsxs(oT,{passiveWheel:!1,children:[y.jsx("pixiRenderLayer",{ref:t}),y.jsx("pixiRenderLayer",{ref:e}),y.jsx(X7,{layerRef:t}),y.jsx(q7,{layerRef:e})]})})})}function ER(){const{waveFrame:n,setWaveFrame:t}=ts(ne(s=>({waveFrame:s.waveFrame,setWaveFrame:s.setWaveFrame}))),{waveUnit:e,setWaveUnit:i}=bn(ne(s=>({waveUnit:s.waveUnit,setWaveUnit:s.setWaveUnit})));return y.jsxs(ht,{gap:1,align:"flex-start",children:[y.jsxs(kt,{gap:1,children:[y.jsx(ut,{textStyle:"xs",color:"fg.muted",children:"Frame"}),y.jsxs(v1,{size:"xs",value:n,onValueChange:s=>{const r=s.value;(r==="observe"||r==="rest")&&t(r)},children:[y.jsx(_1,{}),y.jsx(b1,{items:[{value:"observe",label:"Obs"},{value:"rest",label:"Rest"}]})]})]}),y.jsxs(kt,{gap:1,children:[y.jsx(ut,{textStyle:"xs",color:"fg.muted",children:" unit"}),y.jsxs(v1,{size:"xs",value:e,onValueChange:s=>{const r=s.value;(r==="m"||r==="")&&i(r)},children:[y.jsx(_1,{}),y.jsx(b1,{items:[{value:"m",label:"m"},{value:"",label:""}]})]})]})]})}const Tg=nd({items:[{label:"Linear",value:"linear"},{label:"Gaussian",value:"gaussian"}]});function Q7(){return y.jsx(fe,{display:"inline-flex",flexDirection:"column",gap:4,p:4,border:"1px solid black",borderRadius:"md",children:y.jsxs(kt,{gap:3,w:"full",h:"full",children:[y.jsx(K7,{}),y.jsx(ER,{}),y.jsx(e9,{}),y.jsx(Z7,{})]})})}function K7(){const n=A.useId(),{addModel:t,models:e,updateModel:i}=ts(ne(h=>({addModel:h.addModel,models:h.models,updateModel:h.updateModel}))),{slice1DWaveRange:s}=bn(ne(h=>({slice1DWaveRange:h.slice1DWaveRange}))),[r,a]=A.useState([Tg.items[0]?.value??"linear"]),l=()=>{const h=r[0]??"linear";t(h,s)},u=()=>{e.forEach(h=>{if(h.kind==="gaussian"){const f=(s.min+s.max)/2;i(h.id,{range:s,mu:f})}else if(h.kind==="linear"){const f=(s.min+s.max)/2;i(h.id,{range:s,x0:f})}})};return y.jsxs(ht,{justify:"space-between",align:"center",children:[y.jsx(Qi,{size:"sm",as:"h3",children:"Model Fitting"}),y.jsxs(ht,{gap:2,align:"center",children:[y.jsxs(sy,{collection:Tg,size:"xs",value:r,onValueChange:({value:h})=>a(h),width:"120px",children:[y.jsx(fy,{}),y.jsx(dy,{children:y.jsxs(ry,{children:[y.jsx(ly,{placeholder:"Model type"}),y.jsx(hy,{})]})}),y.jsx(Cc,{children:y.jsx(ay,{children:y.jsx(oy,{children:Tg.items.map(h=>y.jsxs(cy,{item:h,children:[y.jsx(YO,{children:h.label}),y.jsx(uy,{})]},h.value))})})})]}),y.jsx(Fn,{size:"xs",variant:"solid",onClick:l,children:"Add"}),y.jsx(hr,{ids:{trigger:n},content:"Update parameters of all models to match current slice wavelength range",children:y.jsx(Fn,{size:"xs",variant:"outline",onClick:u,children:"Sync"})})]})]})}function Z7(){const{models:n,ensureInitialModels:t,updateModel:e,removeModel:i,renameModel:s,toggleActive:r,waveFrame:a}=ts(ne(f=>({models:f.models,ensureInitialModels:f.ensureInitialModels,updateModel:f.updateModel,removeModel:f.removeModel,renameModel:f.renameModel,toggleActive:f.toggleActive,waveFrame:f.waveFrame}))),{slice1DWaveRange:l,waveUnit:u,zRedshift:h}=bn(ne(f=>({slice1DWaveRange:f.slice1DWaveRange,waveUnit:f.waveUnit,zRedshift:f.zRedshift})));return A.useEffect(()=>{t(l)},[t,l.min,l.max,l]),n.length===0?y.jsx(ut,{textStyle:"sm",color:"fg.muted",children:'No models yet. Use the "Add" button to create a model.'}):y.jsx(fe,{h:"635px",overflowY:"auto",borderWidth:"1px",borderRadius:"md",borderColor:"border.subtle",bg:"bg",p:2,children:y.jsx(kt,{gap:3,children:n.map(f=>f.kind==="linear"?y.jsx(J7,{model:f,waveFrame:a,waveUnit:u,zRedshift:h,slice1DWaveRange:l,onUpdate:(p,g)=>e(p,g),onRemove:i,onRename:s,onToggleActive:r},f.id):y.jsx(t9,{model:f,waveFrame:a,waveUnit:u,zRedshift:h,slice1DWaveRange:l,onUpdate:(p,g)=>e(p,g),onRemove:i,onRename:s,onToggleActive:r},f.id))})})}function RR(n){const{controls:t,disabled:e}=n;return t.length?e?y.jsxs(Fn,{size:"xs",variant:"ghost",disabled:!0,children:[y.jsx(m1,{}),y.jsx(ut,{as:"span",ml:"1",textStyle:"xs",children:"step set"})]}):y.jsxs(sP,{positioning:{placement:"bottom-end"},children:[y.jsx(rP,{asChild:!0,children:y.jsxs(Fn,{size:"xs",variant:"ghost",children:[y.jsx(m1,{}),y.jsx(ut,{as:"span",ml:"1",textStyle:"xs",children:"step set"})]})}),y.jsx(Cc,{children:y.jsx(aP,{children:y.jsx(oP,{children:y.jsx(HO,{children:y.jsx(kt,{gap:2,children:t.map(i=>y.jsxs(ht,{justify:"space-between",align:"center",gap:3,children:[y.jsx(ut,{textStyle:"xs",children:i.label}),y.jsx(ce,{size:"xs",maxW:"80px",value:cn(i.value,6),step:i.value||.1,onValueChange:({valueAsNumber:s})=>{const r=Number.isFinite(s)?s:i.value;i.onChange(r)},children:y.jsx(ue,{})})]},i.key))})})})})})]}):null}function J7(n){const{model:t,waveFrame:e,waveUnit:i,zRedshift:s,slice1DWaveRange:r}=n,a=!t.active,l=hi(t.x0,i,e,s),u=hi(t.range.min,i,e,s),h=hi(t.range.max,i,e,s),[f,p]=A.useState(.1),[g,x]=A.useState(.1),[w,_]=A.useState(i==="m"?.001:1),[b,C]=A.useState(i==="m"?.001:1),M=A.useRef(i),P=A.useRef(e),T=A.useId();A.useEffect(()=>{const Y=M.current,D=P.current;if(Y===i&&D===e)return;const H=_c(Y,D,s),J=_c(i,e,s);if(!Number.isFinite(H)||H===0||!Number.isFinite(J)){M.current=i,P.current=e;return}const V=J/H;_(Z=>Z*V),C(Z=>Z*V),M.current=i,P.current=e},[i,e,s]);const E=Y=>{Number.isFinite(Y)&&n.onUpdate(t.id,{k:Y})},R=Y=>{Number.isFinite(Y)&&n.onUpdate(t.id,{b:Y})},N=Y=>{if(!Number.isFinite(Y))return;const D=As(Y,i,e,s);n.onUpdate(t.id,{x0:D})},O=Y=>{if(!Number.isFinite(Y))return;const D=As(Y,i,e,s);n.onUpdate(t.id,{range:{...t.range,min:D}})},k=Y=>{if(!Number.isFinite(Y))return;const D=As(Y,i,e,s);n.onUpdate(t.id,{range:{...t.range,max:D}})},B=()=>{const{min:Y,max:D}=t.range,H=r.min,J=r.max;if(!Number.isFinite(Y))return;const V=Number.isFinite(D)?D:J,Z=Math.min(Math.max(Y,H),Math.min(V,J));Z!==Y&&n.onUpdate(t.id,{range:{min:Z,max:D}})},I=()=>{const{min:Y,max:D}=t.range,H=r.min,J=r.max;if(!Number.isFinite(D))return;const V=Number.isFinite(Y)?Y:H,Z=Math.max(Math.min(D,J),Math.max(V,H));Z!==D&&n.onUpdate(t.id,{range:{min:Y,max:Z}})},X=[{key:"k",label:"k step",value:f,onChange:p},{key:"b",label:"b step",value:g,onChange:x},{key:"x0",label:"x0 step",value:w,onChange:_},{key:"range",label:"range step",value:b,onChange:C}],q=t.active?"Deactivate this model":"Activate this model",U=Y=>{n.onUpdate(t.id,{color:Y})};return y.jsxs(kt,{gap:2,borderWidth:"1px",borderRadius:"md",p:3,bg:"bg.subtle",opacity:t.active?1:.6,children:[y.jsxs(ht,{justify:"space-between",align:"center",children:[y.jsx(Jx,{size:"sm",fontWeight:"semibold",value:t.name,onChange:Y=>n.onRename(t.id,Y.target.value),placeholder:"Linear model name",disabled:a}),y.jsxs(ht,{gap:1,align:"center",children:[y.jsx(AR,{onValueChange:U}),y.jsx(hr,{ids:{trigger:T},content:q,children:y.jsxs(ad,{size:"sm",ids:{root:T},checked:t.active,onCheckedChange:Y=>n.onToggleActive(t.id,Y.checked),children:[y.jsx(ld,{}),y.jsx(od,{}),y.jsx(gy,{srOnly:!0,children:"Active"})]})}),y.jsx(RR,{controls:X,disabled:a}),y.jsx(mr,{"aria-label":"Delete model",size:"xs",variant:"ghost",onClick:()=>n.onRemove(t.id),disabled:a,children:y.jsx(Qx,{})})]})]}),y.jsxs(ut,{textStyle:"xs",color:"fg.muted",children:["y = k  (x  x0) + b  (",Ts(t.range.min,i,e,s)," < x <"," ",Ts(t.range.max,i,e,s),")"]}),y.jsxs(kt,{gap:2,opacity:a?.8:1,pointerEvents:a?"none":"auto",children:[y.jsxs(ht,{gap:3,align:"center",children:[y.jsx(ut,{textStyle:"sm",minW:"36px",children:"k"}),y.jsxs(ce,{size:"xs",maxW:"120px",value:cn(t.k,6),step:f,onValueChange:({valueAsNumber:Y})=>E(Y),children:[y.jsx(Ci,{}),y.jsx(ue,{})]}),y.jsx(ut,{textStyle:"sm",minW:"36px",children:"b"}),y.jsxs(ce,{size:"xs",maxW:"120px",value:cn(t.b,6),step:g,onValueChange:({valueAsNumber:Y})=>R(Y),children:[y.jsx(Ci,{}),y.jsx(ue,{})]})]}),y.jsxs(ht,{gap:3,align:"center",children:[y.jsx(ut,{textStyle:"sm",minW:"36px",children:"x0"}),y.jsxs(ce,{size:"xs",maxW:"120px",value:cn(l,i==="m"?6:1),step:w,onValueChange:({valueAsNumber:Y})=>N(Y),children:[y.jsx(Ci,{}),y.jsx(ue,{})]})]}),y.jsxs(ht,{gap:3,align:"center",children:[y.jsx(ut,{textStyle:"sm",minW:"36px",children:"x1"}),y.jsxs(ce,{size:"xs",maxW:"120px",value:cn(u,i==="m"?6:1),step:b,onValueChange:({valueAsNumber:Y})=>O(Y),children:[y.jsx(Ci,{}),y.jsx(ue,{onBlur:B})]}),y.jsx(ut,{textStyle:"sm",minW:"36px",children:"x2"}),y.jsxs(ce,{size:"xs",maxW:"120px",value:cn(h,i==="m"?6:1),step:b,onValueChange:({valueAsNumber:Y})=>k(Y),children:[y.jsx(Ci,{}),y.jsx(ue,{onBlur:I})]})]})]})]})}function t9(n){const{model:t,waveFrame:e,waveUnit:i,zRedshift:s,slice1DWaveRange:r}=n,a=!t.active,l=hi(t.mu,i,e,s),u=hi(t.sigma,i,e,s),h=hi(t.range.min,i,e,s),f=hi(t.range.max,i,e,s),[p,g]=A.useState(.1),[x,w]=A.useState(i==="m"?.001:1),[_,b]=A.useState(i==="m"?.001:1),[C,M]=A.useState(i==="m"?.001:1),P=A.useRef(i),T=A.useRef(e),E=A.useId();A.useEffect(()=>{const tt=P.current,ft=T.current;if(tt===i&&ft===e)return;const xt=_c(tt,ft,s),pt=_c(i,e,s);if(!Number.isFinite(xt)||xt===0||!Number.isFinite(pt)){P.current=i,T.current=e;return}const Kt=pt/xt;w(Rt=>Rt*Kt),b(Rt=>Rt*Kt),M(Rt=>Rt*Kt),P.current=i,T.current=e},[i,e,s]);const R=tt=>{Number.isFinite(tt)&&n.onUpdate(t.id,{amplitude:tt})},N=tt=>{if(!Number.isFinite(tt))return;const ft=As(tt,i,e,s);n.onUpdate(t.id,{mu:ft})},O=tt=>{if(!Number.isFinite(tt))return;const ft=Math.abs(tt),xt=As(ft,i,e,s);n.onUpdate(t.id,{sigma:xt})},k=tt=>{if(!Number.isFinite(tt))return;const ft=As(tt,i,e,s);n.onUpdate(t.id,{range:{...t.range,min:ft}})},B=tt=>{if(!Number.isFinite(tt))return;const ft=As(tt,i,e,s);n.onUpdate(t.id,{range:{...t.range,max:ft}})},I=()=>{const{min:tt,max:ft}=t.range,xt=r.min,pt=r.max;if(!Number.isFinite(tt))return;const Kt=Number.isFinite(ft)?ft:pt,Rt=Math.min(Math.max(tt,xt),Math.min(Kt,pt));Rt!==tt&&n.onUpdate(t.id,{range:{min:Rt,max:ft}})},X=()=>{const{min:tt,max:ft}=t.range,xt=r.min,pt=r.max;if(!Number.isFinite(ft))return;const Kt=Number.isFinite(tt)?tt:xt,Rt=Math.max(Math.min(ft,pt),Math.max(Kt,xt));Rt!==ft&&n.onUpdate(t.id,{range:{min:tt,max:Rt}})},q=[{key:"A",label:"Amplitude step",value:p,onChange:g},{key:"mu",label:" step",value:x,onChange:w},{key:"sigma",label:" step",value:_,onChange:b},{key:"range",label:"range step",value:C,onChange:M}],U=1+(Number.isFinite(s)?s:0),Y=e==="observe"?t.sigma:t.sigma/(U||1),D=e==="observe"?t.mu:t.mu/(U||1),H=2.354820045*Y,J=i==="m"?H:H*ua,V=D>0?H/D*T7:0,Z=t.active?"Deactivate this model":"Activate this model",gt=tt=>{n.onUpdate(t.id,{color:tt})};return y.jsxs(kt,{gap:2,borderWidth:"1px",borderRadius:"md",p:3,bg:"bg.subtle",opacity:t.active?1:.6,children:[y.jsxs(ht,{justify:"space-between",align:"center",children:[y.jsx(Jx,{size:"sm",fontWeight:"semibold",value:t.name,onChange:tt=>n.onRename(t.id,tt.target.value),placeholder:"Gaussian model name",disabled:a}),y.jsxs(ht,{gap:1,align:"center",children:[y.jsx(AR,{onValueChange:gt}),y.jsx(hr,{ids:{trigger:E},content:Z,children:y.jsxs(ad,{size:"sm",ids:{root:E},checked:t.active,onCheckedChange:tt=>n.onToggleActive(t.id,tt.checked),children:[y.jsx(ld,{}),y.jsx(od,{}),y.jsx(gy,{srOnly:!0,children:"Active"})]})}),y.jsx(RR,{controls:q,disabled:a}),y.jsx(mr,{"aria-label":"Delete model",size:"xs",variant:"ghost",onClick:()=>n.onRemove(t.id),disabled:a,children:y.jsx(Qx,{})})]})]}),y.jsxs(ut,{textStyle:"xs",color:"fg.muted",children:["y = A  exp((x  ) / (2))  (",Ts(t.range.min,i,e,s)," < x <"," ",Ts(t.range.max,i,e,s),")"]}),y.jsxs(kt,{gap:2,opacity:a?.8:1,pointerEvents:a?"none":"auto",children:[y.jsxs(ht,{gap:3,align:"center",children:[y.jsx(ut,{textStyle:"sm",minW:"36px",children:"A"}),y.jsxs(ce,{size:"xs",maxW:"120px",value:cn(t.amplitude,6),step:p,onValueChange:({valueAsNumber:tt})=>R(tt),children:[y.jsx(Ci,{}),y.jsx(ue,{})]})]}),y.jsxs(ht,{gap:3,align:"center",children:[y.jsx(ut,{textStyle:"sm",minW:"36px",children:""}),y.jsxs(ce,{size:"xs",maxW:"120px",value:cn(l,i==="m"?6:1),step:x,onValueChange:({valueAsNumber:tt})=>N(tt),children:[y.jsx(Ci,{}),y.jsx(ue,{})]}),y.jsx(ut,{textStyle:"sm",minW:"36px",children:""}),y.jsxs(ce,{size:"xs",maxW:"120px",value:cn(u,i==="m"?6:1),step:_,onValueChange:({valueAsNumber:tt})=>O(tt),children:[y.jsx(Ci,{}),y.jsx(ue,{})]})]}),y.jsxs(ht,{gap:3,align:"center",children:[y.jsx(ut,{textStyle:"sm",minW:"36px",children:"x1"}),y.jsxs(ce,{size:"xs",maxW:"120px",value:cn(h,i==="m"?6:1),step:C,onValueChange:({valueAsNumber:tt})=>k(tt),children:[y.jsx(Ci,{}),y.jsx(ue,{onBlur:I})]}),y.jsx(ut,{textStyle:"sm",minW:"36px",children:"x2"}),y.jsxs(ce,{size:"xs",maxW:"120px",value:cn(f,i==="m"?6:1),step:C,onValueChange:({valueAsNumber:tt})=>B(tt),children:[y.jsx(Ci,{}),y.jsx(ue,{onBlur:X})]})]}),y.jsxs(ut,{textStyle:"xs",color:"fg.muted",children:["FWHM "," ",i==="m"?cn(J,4):cn(J,1)," ",i," (",cn(V,1)," km/s)"]})]})]})}function bC(n){const{title:t,models:e,selectedValues:i,onSelectedValuesChange:s,contentRef:r}=n,a=A.useMemo(()=>nd({items:e.map(l=>({id:l.id,label:l.name,value:l.id.toString(),kind:l.kind})),itemToString:l=>l.label,itemToValue:l=>l.value,groupBy:l=>l.kind==="linear"?"Linear Models":"Gaussian Models"}),[e]);return y.jsxs(kO,{collection:a,selectionMode:"multiple",value:i,onValueChange:l=>s(l.value),children:[y.jsx(LO,{children:t}),y.jsx(NO,{ref:r,h:"150px",overflowY:"auto",borderWidth:"1px",borderColor:"border.subtle",borderRadius:"md",bg:"bg",children:a.items.length>0?a.group().map(([l,u])=>y.jsxs(OO,{children:[y.jsx(zO,{p:"1",fontSize:"xs",color:"fg.muted",children:l}),u.map(h=>y.jsxs(DO,{item:h,children:[y.jsx(IO,{children:h.label}),y.jsx(BO,{})]},h.value))]},l)):null})]})}function e9(){const{models:n,updateModel:t}=ts(ne(g=>({models:g.models,updateModel:g.updateModel}))),[e,i]=A.useState([]),[s,r]=A.useState([]),a=A.useRef(null),l=A.useRef(null),u=A.useMemo(()=>n.filter(g=>!g.subtracted),[n]),h=A.useMemo(()=>n.filter(g=>g.subtracted),[n]),f=()=>{if(e.length===0)return;u.filter(x=>e.includes(x.id.toString())).forEach(x=>{t(x.id,{subtracted:!0})}),i([])},p=()=>{if(s.length===0)return;h.filter(x=>s.includes(x.id.toString())).forEach(x=>{t(x.id,{subtracted:!1})}),r([])};return y.jsxs(ht,{gap:4,align:"center",justify:"center",children:[y.jsx(bC,{title:"Model to draw",models:u,selectedValues:e,onSelectedValuesChange:i,contentRef:a}),y.jsxs(kt,{gap:2,align:"center",justify:"center",py:8,children:[y.jsx(mr,{"aria-label":"Move selected to right",size:"xs",variant:"subtle",disabled:e.length===0,onClick:f,children:y.jsx(Xk,{})}),y.jsx(mr,{"aria-label":"Move selected to left",size:"xs",variant:"subtle",disabled:s.length===0,onClick:p,children:y.jsx($k,{})})]}),y.jsx(bC,{title:"Model to subtract",models:h,selectedValues:s,onSelectedValuesChange:r,contentRef:l})]})}function n9(n){return Qk({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},child:[]}]})(n)}const i9=A.forwardRef(function(t,e){const{showArrow:i,children:s,portalled:r=!0,content:a,contentProps:l,portalRef:u,...h}=t;return y.jsxs(sP,{...h,positioning:{...h.positioning,gutter:4},children:[y.jsx(rP,{asChild:!0,children:s}),y.jsx(Cc,{disabled:!r,container:u,children:y.jsx(aP,{children:y.jsxs(oP,{width:"auto",px:"2",py:"1",textStyle:"xs",rounded:"sm",ref:e,...l,children:[i&&y.jsx(FO,{children:y.jsx(lP,{})}),a]})})})]})}),s9=A.forwardRef(function(t,e){const{children:i,buttonProps:s,...r}=t;return y.jsx(i9,{content:i,...r,ref:e,children:y.jsx(mr,{variant:"ghost","aria-label":"info",size:"2xs",colorPalette:"gray",...s,children:y.jsx(n9,{})})})});function r9(){return y.jsx(fe,{display:"inline-flex",flexDirection:"column",gap:4,p:4,width:"450px",border:"1px solid",borderRadius:"md",bg:"bg.surface",children:y.jsxs(kt,{gap:3,children:[y.jsx(a9,{}),y.jsx(gr,{}),y.jsx(o9,{}),y.jsx(gr,{}),y.jsx(l9,{})]})})}function a9(){const{zRedshift:n,setZRedshift:t}=bn(ne(h=>({zRedshift:h.zRedshift,setZRedshift:h.setZRedshift}))),[e,i]=A.useState(12),[s,r]=A.useState(.001),a=Math.max(e,0),l=Wt(n,0,a),u=[l];return y.jsxs(kt,{gap:3,children:[y.jsx(Qi,{size:"sm",as:"h3",children:"Redshift"}),y.jsx(Rg,{label:"z",showValue:!0,min:0,max:a,step:s,value:u,thumbAlignment:"center",onValueChange:({value:h})=>{const f=Wt(h[0]??0,0,a);t(f)}}),y.jsxs(ht,{gap:2,align:"center",justify:"space-between",children:[y.jsxs(ut,{textStyle:"sm",color:"fg.muted",children:["z = ",l.toFixed(3)]}),y.jsxs(ht,{gap:2,align:"center",children:[y.jsx(ut,{textStyle:"sm",fontWeight:"semibold",children:"step"}),y.jsx(ce,{size:"sm",maxW:"80px",value:s.toString(),step:.001,onValueChange:({valueAsNumber:h})=>{const f=Number.isFinite(h)&&h>0?h:s;r(f)},children:y.jsx(ue,{})})]}),y.jsxs(ht,{gap:2,align:"center",children:[y.jsx(ut,{textStyle:"sm",fontWeight:"semibold",children:"z max"}),y.jsx(ce,{size:"sm",maxW:"80px",value:a.toString(),step:.1,onValueChange:({valueAsNumber:h})=>{const f=Number.isFinite(h)?h:a,p=Math.max(f,0);i(p)},children:y.jsx(ue,{})})]})]})]})}function o9(){const n=A.useId(),{waveUnit:t,collapseWindow:e,setCollapseWindow:i,forwardWaveRange:s,apertureSize:r,slice1DWaveRange:a,setSlice1DWaveRange:l,zRedshift:u,showTraceOnSpectrum2D:h,switchShowTraceOnSpectrum2D:f}=bn(ne(V=>({waveUnit:V.waveUnit,collapseWindow:V.collapseWindow,setCollapseWindow:V.setCollapseWindow,forwardWaveRange:V.forwardWaveRange,apertureSize:V.apertureSize,slice1DWaveRange:V.slice1DWaveRange,setSlice1DWaveRange:V.setSlice1DWaveRange,zRedshift:V.zRedshift,showTraceOnSpectrum2D:V.showTraceOnSpectrum2D,switchShowTraceOnSpectrum2D:V.switchShowTraceOnSpectrum2D}))),{waveFrame:p}=ts(ne(V=>({waveFrame:V.waveFrame}))),g=Un(V=>V.cutoutParams),x=Ft(V=>V.selectedFootprintId),{data:w}=kc({selectedFootprintId:x,waveMin:s.min,waveMax:s.max,cutoutParams:g,apertureSize:r,enabled:!1}),_=w?.wavelength??[],b=_.length>0,C=b?_[0]:e.waveMin??0,M=b?_[_.length-1]:e.waveMax??0,P=Math.min(C,M),T=Math.max(C,M),E=Wt(e.waveMin,P,T),R=Wt(e.waveMax,E,T),N=[E,R],O=w?.spectrum_2d?.length??0,k=O>0?O-1:Math.max(e.spatialMax,0),B=Wt(e.spatialMin,0,k),I=Wt(e.spatialMax,B,k),X=[B,I],[q,U]=A.useState({min:"",max:""});A.useEffect(()=>{const V=hi(a.min,t,p,u),Z=hi(a.max,t,p,u);U({min:Number.isFinite(V)?String(V):"",max:Number.isFinite(Z)?String(Z):""})},[a.min,a.max,t,p,u]);const Y=t==="m"?1e-4:1,D=t==="m"?"3.8000":"38000",H=t==="m"?"5.0000":"50000",J=()=>{const V=parseFloat(q.min),Z=parseFloat(q.max);if(!Number.isFinite(V)||!Number.isFinite(Z))return;let gt=As(V,t,p,u),tt=As(Z,t,p,u);if(gt>tt){const pt=gt;gt=tt,tt=pt}const ft=Math.min(e.waveMin,e.waveMax),xt=Math.max(e.waveMin,e.waveMax);gt=Wt(gt,ft,xt),tt=Wt(tt,gt,xt),l({min:gt,max:tt})};return y.jsxs(kt,{gap:3,children:[y.jsx(ht,{justify:"space-between",align:"center",children:y.jsxs(ht,{gap:2,align:"center",children:[y.jsx(Qi,{size:"sm",as:"h3",children:"Extraction Settings"}),y.jsx(s9,{content:"Run spectrum extraction first so that wavelength and spectrum_2d are available. The controls will be enabled after data is loaded."}),y.jsx(hr,{ids:{trigger:n},content:h?"Hide trace on 2D spectrum":"Show trace on 2D spectrum",children:y.jsxs(ad,{ids:{root:n},size:"sm",checked:h,onCheckedChange:f,colorPalette:"red",children:[y.jsx(ld,{}),y.jsx(od,{children:y.jsx(fP,{})})]})})]})}),y.jsx(ER,{}),y.jsxs(kt,{gap:2,children:[y.jsx(ut,{textStyle:"sm",color:"fg.muted",children:"Wavelength window"}),y.jsx(Rg,{min:P,max:T,step:1e-4,value:N,disabled:!b,minStepsBetweenThumbs:1,onValueChange:({value:V})=>{if(!b)return;const[Z,gt]=V,tt=Wt(Z??C,P,T),ft=Wt(gt??M,tt,T);i({waveMin:tt,waveMax:ft})}}),y.jsxs(ht,{justify:"space-between",children:[y.jsx(ut,{textStyle:"xs",children:Ts(E,t,p,u)}),y.jsx(ut,{textStyle:"xs",children:Ts(R,t,p,u)})]})]}),y.jsxs(kt,{gap:2,children:[y.jsx(ut,{textStyle:"sm",color:"fg.muted",children:"Spatial window (rows, px)"}),y.jsx(Rg,{min:0,max:k,step:1,value:X,disabled:!b,minStepsBetweenThumbs:1,onValueChange:({value:V})=>{const[Z,gt]=V,tt=Wt(Z??0,0,k),ft=Wt(gt??k,tt,k);i({spatialMin:tt,spatialMax:ft})}}),y.jsxs(ht,{justify:"space-between",children:[y.jsxs(ut,{textStyle:"xs",children:["min row: ",B]}),y.jsxs(ut,{textStyle:"xs",children:["max row: ",I]})]})]}),y.jsxs(kt,{gap:2,children:[y.jsxs(ht,{justify:"space-between",align:"center",children:[y.jsx(ut,{textStyle:"sm",color:"fg.muted",children:"1D slice wavelength range"}),y.jsxs(ut,{textStyle:"xs",color:"fg.muted",children:["current:"," ",Ts(a.min,t,p,u)," ",""," ",Ts(a.max,t,p,u)]})]}),y.jsxs(ht,{gap:2,align:"center",children:[y.jsx(ce,{size:"sm",maxW:"90px",value:q.min,step:Y,onValueChange:({value:V})=>U(Z=>({...Z,min:V})),children:y.jsx(ue,{placeholder:D})}),y.jsx(ut,{textStyle:"sm",children:"~"}),y.jsx(ce,{size:"sm",maxW:"90px",value:q.max,step:Y,onValueChange:({value:V})=>U(Z=>({...Z,max:V})),children:y.jsx(ue,{placeholder:H})}),y.jsx(Fn,{size:"xs",variant:"outline",onClick:J,children:"Apply"})]})]})]})}function l9(){const{waveUnit:n,zRedshift:t,emissionLines:e,selectedEmissionLines:i,addEmissionLine:s,removeEmissionLine:r,setSelectedEmissionLines:a}=bn(ne(O=>({waveUnit:O.waveUnit,zRedshift:O.zRedshift,emissionLines:O.emissionLines,selectedEmissionLines:O.selectedEmissionLines,addEmissionLine:O.addEmissionLine,removeEmissionLine:O.removeEmissionLine,setSelectedEmissionLines:O.setSelectedEmissionLines}))),[l,u]=A.useState(""),[h,f]=A.useState(""),p=A.useMemo(()=>Object.entries(e).sort(([,O],[,k])=>O-k),[e]),[g,x]=A.useState(()=>Object.keys(i));A.useEffect(()=>{x(Object.keys(i))},[i]);const w=n==="m"?1e-4:1,_=n==="m"?"0.6563":"6563",b=n==="m"?" (m)":" ()",C=l.trim().length>0&&!Number.isNaN(parseFloat(h)),M=()=>{if(!C)return;const O=parseFloat(h);if(!Number.isFinite(O))return;const k=n==="m"?O:O/ua;s(l.trim(),k),u(""),f("")},P=(O,k)=>{x(B=>{const I=k?Array.from(new Set([...B,O])):B.filter(q=>q!==O),X={};return I.forEach(q=>{const U=e[q];typeof U=="number"&&(X[q]=U)}),a(X),I})},T=O=>{r(O)},E=1+(Number.isFinite(t)?t:0),R=O=>n==="m"?`${O.toFixed(4)} m`:`${(O*ua).toFixed(1)} `,N=O=>{const k=O*E;return n==="m"?`${k.toFixed(4)} m`:`${(k*ua).toFixed(1)} `};return y.jsxs(kt,{gap:3,children:[y.jsx(Qi,{size:"sm",as:"h3",children:"Emission Lines"}),y.jsxs(ht,{gap:4,align:"center",justify:"space-between",children:[y.jsxs(ht,{gap:2,align:"center",children:[y.jsx(ut,{textStyle:"sm",fontWeight:"semibold",children:"Name"}),y.jsx(Jx,{size:"sm",value:l,onChange:O=>u(O.target.value),placeholder:"e.g. H",maxW:"110px"})]}),y.jsxs(ht,{gap:2,align:"center",children:[y.jsx(ut,{textStyle:"sm",fontWeight:"semibold",children:b}),y.jsx(ce,{size:"sm",maxW:"90px",value:h,step:w,onValueChange:({value:O})=>f(O),children:y.jsx(ue,{placeholder:_})})]}),y.jsx(Fn,{size:"sm",variant:"outline",onClick:M,disabled:!C,children:"Add"})]}),y.jsx(kt,{gap:1,maxH:"180px",overflowY:"auto",borderWidth:"1px",borderRadius:"md",borderColor:"border.subtle",p:2,bg:"bg.subtle",children:p.length===0?y.jsx(ut,{textStyle:"sm",color:"fg.muted",children:"No emission lines yet."}):p.map(([O,k])=>{const B=g.includes(O);return y.jsxs(ht,{align:"center",gap:2,w:"full",children:[y.jsxs(eO,{size:"sm",value:O,flex:"1",checked:B,colorPalette:"teal",onCheckedChange:({checked:I})=>{P(O,I===!0)},children:[y.jsx(oO,{}),y.jsxs(sO,{children:[y.jsxs(rO,{children:[y.jsx(nO,{children:O}),y.jsx(iO,{children:y.jsxs(ut,{textStyle:"xs",children:["rest: ",R(k),"  obs: ",N(k)]})})]}),y.jsx(aO,{})]})]}),y.jsx(mr,{"aria-label":"Remove emission line",size:"xs",variant:"ghost",onClick:()=>T(O),children:y.jsx(Qx,{})})]},O)})})]})}function c9(){return y.jsx(fe,{w:"425px",children:y.jsxs(mP,{defaultValue:"panel",size:"sm",lazyMount:!0,children:[y.jsxs(gP,{children:[y.jsx(mh,{value:"panel",children:y.jsxs(ht,{gap:1,align:"center",children:[y.jsx(Kk,{}),y.jsx(ut,{as:"span",children:"Extract"})]})}),y.jsx(mh,{value:"fit",children:y.jsxs(ht,{gap:1,align:"center",children:[y.jsx(Zk,{}),y.jsx(ut,{as:"span",children:"Fit"})]})}),y.jsx(QO,{})]}),y.jsx(gh,{value:"panel",children:y.jsx(r9,{})}),y.jsx(gh,{value:"fit",children:y.jsx(Q7,{})})]})})}function u9(){return y.jsxs(ht,{alignItems:"stretch",height:"100%",children:[y.jsxs(kt,{gap:2,children:[y.jsx($7,{}),y.jsx(Y7,{})]}),y.jsx(c9,{})]})}function h9(){const n=[{value:"forward",title:"Grism Forward",item:y.jsx(u9,{})},{value:"backward",title:"Grism Backward",item:y.jsx("div",{children:"Backward Placeholder"})}];return y.jsx($5,{multiple:!0,defaultValue:["forward","backward"],children:n.map(t=>y.jsxs(Q5,{value:t.value,children:[y.jsxs(J5,{children:[y.jsx(Jk,{fontSize:"large",children:t.title}),y.jsx(tO,{})]}),y.jsx(K5,{children:y.jsx(Z5,{children:t.item})})]},`item-${t.value}`))})}function d9(){return y.jsxs(py,{align:"start",p:4,gap:4,gapY:20,height:"100%",overflow:"auto",children:[y.jsx(nz,{}),y.jsx(uH,{}),y.jsx(D8,{}),y.jsx(h9,{})]})}const A9=Object.freeze(Object.defineProperty({__proto__:null,component:d9},Symbol.toStringTag,{value:"Module"}));export{mo as $,gA as A,dn as B,pe as C,ee as D,lt as E,xa as F,jc as G,Ei as H,FP as I,D1 as J,Ki as K,bD as L,Tt as M,kD as N,Rc as O,Dt as P,ve as Q,Vg as R,RD as S,Ml as T,Fg as U,Yt as V,QD as W,B1 as X,kp as Y,L1 as Z,tD as _,Ni as a,Re as a0,Zz as a1,DP as a2,xA as a3,Ct as a4,Lt as a5,e4 as a6,M4 as a7,y4 as a8,V4 as a9,Y4 as aa,K4 as ab,J4 as ac,tI as ad,jA as ae,tb as af,Z1 as ag,Pb as ah,Yi as ai,e6 as aj,re as ak,Hn as al,bz as am,xr as an,Db as ao,OA as ap,A9 as aq,m4 as b,Ql as c,sh as d,Ne as e,J1 as f,d4 as g,by as h,fA as i,qP as j,Oi as k,aA as l,Zl as m,G4 as n,W4 as o,$4 as p,Z4 as q,zz as r,ud as s,dt as t,_z as u,wy as v,te as w,eI as x,di as y,NP as z};
