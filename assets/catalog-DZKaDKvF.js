import{e as te,r as p,m as S,j as a,d as _,n as ae,o as O,f as G,q as re,s as V,u as oe,v as ne,w as se,x as ie,y as M,c as le,k as ge,l as de,B as b,S as j,b as ce,I as k,L as pe,z as ue}from"./index-DTfHgk7v.js";import{u as Pe,H as xe,B as me,T as x,I as y}from"./connection-Dy1eGPll.js";import{T as fe,a as he,b as E,c as z,u as be,G as ve}from"./connection-hook-gjio2_H-.js";import{c as A}from"./create-split-props-u5h9OPvL.js";import"./for-C-OR-lR2.js";const[H,T]=te({name:"PaginationContext",hookName:"usePaginationContext",providerName:"<PaginationProvider />"}),je=e=>e.children(T()),Ce=A(),W=p.forwardRef((e,t)=>{const[r,o]=Ce(e,["index"]),n=T(),s=S(n.getEllipsisProps(r),o);return a.jsx(_.div,{...s,ref:t})});W.displayName="PaginationEllipsis";const Se=A(),X=p.forwardRef((e,t)=>{const[r,o]=Se(e,["value","type"]),n=T(),s=S(n.getItemProps(r),o);return a.jsx(_.button,{...s,ref:t})});X.displayName="PaginationItem";const Y=p.forwardRef((e,t)=>{const r=T(),o=S(r.getNextTriggerProps(),e);return a.jsx(_.button,{...o,ref:t})});Y.displayName="PaginationNextTrigger";const Z=p.forwardRef((e,t)=>{const r=T(),o=S(r.getPrevTriggerProps(),e);return a.jsx(_.button,{...o,ref:t})});Z.displayName="PaginationPrevTrigger";var _e=re("pagination").parts("root","item","ellipsis","prevTrigger","nextTrigger"),R=_e.build(),Te=e=>e.ids?.root??`pagination:${e.id}`,Re=e=>e.ids?.prevTrigger??`pagination:${e.id}:prev`,ye=e=>e.ids?.nextTrigger??`pagination:${e.id}:next`,Ee=(e,t)=>e.ids?.ellipsis?.(t)??`pagination:${e.id}:ellipsis:${t}`,ze=(e,t)=>e.ids?.item?.(t)??`pagination:${e.id}:item:${t}`,$=(e,t)=>{let r=t-e+1;return Array.from({length:r},(o,n)=>n+e)},$e=e=>e.map(t=>typeof t=="number"?{type:"page",value:t}:{type:"ellipsis"}),w="ellipsis",we=e=>{const{page:t,totalPages:r,siblingCount:o}=e,n=Math.min(2*o+5,r),s=1,l=r,c=Math.max(t-o,s),u=Math.min(t+o,l),i=c>s+1,d=u<l-1,m=n-2;if(!i&&d)return[...$(1,m),w,l];if(i&&!d){const g=$(l-m+1,l);return[s,w,...g]}if(i&&d){const g=$(c,u);return[s,w,...g,w,l]}return $(s,l)},Ie=e=>$e(we(e));function Ae(e,t){const{send:r,scope:o,prop:n,computed:s,context:l}=e,c=s("totalPages"),u=l.get("page"),i=l.get("pageSize"),d=n("translations"),m=n("count"),P=n("getPageUrl"),g=n("type"),v=s("previousPage"),f=s("nextPage"),L=s("pageRange"),B=u===1,U=u===c,ee=Ie({page:u,totalPages:c,siblingCount:n("siblingCount")});return{count:m,page:u,pageSize:i,totalPages:c,pages:ee,previousPage:v,nextPage:f,pageRange:L,slice(h){return h.slice(L.start,L.end)},setPageSize(h){r({type:"SET_PAGE_SIZE",size:h})},setPage(h){r({type:"SET_PAGE",page:h})},goToNextPage(){r({type:"NEXT_PAGE"})},goToPrevPage(){r({type:"PREVIOUS_PAGE"})},goToFirstPage(){r({type:"FIRST_PAGE"})},goToLastPage(){r({type:"LAST_PAGE"})},getRootProps(){return t.element({id:Te(o),...R.root.attrs,dir:n("dir"),"aria-label":d.rootLabel})},getEllipsisProps(h){return t.element({id:Ee(o,h.index),...R.ellipsis.attrs,dir:n("dir")})},getItemProps(h){const C=h.value,D=C===u;return t.element({id:ze(o,C),...R.item.attrs,dir:n("dir"),"data-index":C,"data-selected":G(D),"aria-current":D?"page":void 0,"aria-label":d.itemLabel?.({page:C,totalPages:c}),onClick(){r({type:"SET_PAGE",page:C})},...g==="button"&&{type:"button"},...g==="link"&&P&&{href:P({page:C,pageSize:i})}})},getPrevTriggerProps(){return t.element({id:Re(o),...R.prevTrigger.attrs,dir:n("dir"),"data-disabled":G(B),"aria-label":d.prevTriggerLabel,onClick(){r({type:"PREVIOUS_PAGE"})},...g==="button"&&{disabled:B,type:"button"},...g==="link"&&P&&v&&{href:P({page:v,pageSize:i})}})},getNextTriggerProps(){return t.element({id:ye(o),...R.nextTrigger.attrs,dir:n("dir"),"data-disabled":G(U),"aria-label":d.nextTriggerLabel,onClick(){r({type:"NEXT_PAGE"})},...g==="button"&&{disabled:U,type:"button"},...g==="link"&&P&&f&&{href:P({page:f,pageSize:i})}})}}}var Ne=ae({props({props:e}){return{defaultPageSize:10,siblingCount:1,defaultPage:1,type:"button",count:1,...e,translations:{rootLabel:"pagination",prevTriggerLabel:"previous page",nextTriggerLabel:"next page",itemLabel({page:t,totalPages:r}){return`${r>1&&t===r?"last page, ":""}page ${t}`},...e.translations}}},initialState(){return"idle"},context({prop:e,bindable:t,getContext:r}){return{page:t(()=>({value:e("page"),defaultValue:e("defaultPage"),onChange(o){const n=r();e("onPageChange")?.({page:o,pageSize:n.get("pageSize")})}})),pageSize:t(()=>({value:e("pageSize"),defaultValue:e("defaultPageSize"),onChange(o){e("onPageSizeChange")?.({pageSize:o})}}))}},watch({track:e,context:t,action:r}){e([()=>t.get("pageSize")],()=>{r(["setPageIfNeeded"])})},computed:{totalPages:O(({prop:e,context:t})=>[t.get("pageSize"),e("count")],([e,t])=>Math.ceil(t/e)),pageRange:O(({context:e,prop:t})=>[e.get("page"),e.get("pageSize"),t("count")],([e,t,r])=>{const o=(e-1)*t;return{start:o,end:Math.min(o+t,r)}}),previousPage:({context:e})=>e.get("page")===1?null:e.get("page")-1,nextPage:({context:e,computed:t})=>e.get("page")===t("totalPages")?null:e.get("page")+1,isValidPage:({context:e,computed:t})=>e.get("page")>=1&&e.get("page")<=t("totalPages")},on:{SET_PAGE:{guard:"isValidPage",actions:["setPage"]},SET_PAGE_SIZE:{actions:["setPageSize"]},FIRST_PAGE:{actions:["goToFirstPage"]},LAST_PAGE:{actions:["goToLastPage"]},PREVIOUS_PAGE:{guard:"canGoToPrevPage",actions:["goToPrevPage"]},NEXT_PAGE:{guard:"canGoToNextPage",actions:["goToNextPage"]}},states:{idle:{}},implementations:{guards:{isValidPage:({event:e,computed:t})=>e.page>=1&&e.page<=t("totalPages"),isValidCount:({context:e,event:t})=>e.get("page")>t.count,canGoToNextPage:({context:e,computed:t})=>e.get("page")<t("totalPages"),canGoToPrevPage:({context:e})=>e.get("page")>1},actions:{setPage({context:e,event:t,computed:r}){const o=F(t.page,r("totalPages"));e.set("page",o)},setPageSize({context:e,event:t}){e.set("pageSize",t.size)},goToFirstPage({context:e}){e.set("page",1)},goToLastPage({context:e,computed:t}){e.set("page",t("totalPages"))},goToPrevPage({context:e,computed:t}){e.set("page",r=>F(r-1,t("totalPages")))},goToNextPage({context:e,computed:t}){e.set("page",r=>F(r+1,t("totalPages")))},setPageIfNeeded({context:e,computed:t}){t("isValidPage")||e.set("page",1)}}}}),F=(e,t)=>Math.min(Math.max(e,1),t);V()(["count","dir","getRootNode","id","ids","onPageChange","onPageSizeChange","page","defaultPage","pageSize","defaultPageSize","siblingCount","translations","type","getPageUrl"]);V()(["value","type"]);V()(["index"]);const Le=e=>{const t=p.useId(),{getRootNode:r}=oe(),{dir:o}=ne(),n={id:t,dir:o,getRootNode:r,...e},s=se(Ne,n);return Ae(s,ie)},Ge=A(),q=p.forwardRef((e,t)=>{const[r,o]=Ge(e,["count","defaultPage","defaultPageSize","getPageUrl","id","ids","onPageChange","onPageSizeChange","page","pageSize","siblingCount","translations","type"]),n=Le(r),s=S(n.getRootProps(),o);return a.jsx(H,{value:n,children:a.jsx(_.nav,{...s,ref:t})})});q.displayName="PaginationRoot";const Me=A(),Q=p.forwardRef((e,t)=>{const[{value:r},o]=Me(e,["value"]),n=S(r.getRootProps(),o);return a.jsx(H,{value:r,children:a.jsx(_.nav,{...n,ref:t})})});Q.displayName="PaginationRootProvider";const ke=le("div",{base:{display:"inline-flex",gap:"var(--group-gap, 0.5rem)",isolation:"isolate",position:"relative","& [data-group-item]":{_focusVisible:{zIndex:1}}},variants:{orientation:{horizontal:{flexDirection:"row"},vertical:{flexDirection:"column"}},attached:{true:{gap:"0!"}},grow:{true:{display:"flex","& > *":{flex:1}}},stacking:{"first-on-top":{"& > [data-group-item]":{zIndex:"calc(var(--group-count) - var(--group-index))"}},"last-on-top":{"& > [data-group-item]":{zIndex:"var(--group-index)"}}}},compoundVariants:[{orientation:"horizontal",attached:!0,css:{"& > *[data-first]":{borderEndRadius:"0!",marginEnd:"-1px"},"& > *[data-between]":{borderRadius:"0!",marginEnd:"-1px"},"& > *[data-last]":{borderStartRadius:"0!"}}},{orientation:"vertical",attached:!0,css:{"& > *[data-first]":{borderBottomRadius:"0!",marginBottom:"-1px"},"& > *[data-between]":{borderRadius:"0!",marginBottom:"-1px"},"& > *[data-last]":{borderTopRadius:"0!"}}}],defaultVariants:{orientation:"horizontal"}}),J=p.memo(p.forwardRef(function(t,r){const{align:o="center",justify:n="flex-start",children:s,wrap:l,skip:c,...u}=t,i=p.useMemo(()=>{let d=p.Children.toArray(s).filter(p.isValidElement);if(d.length===1)return d;const m=d.filter(g=>!c?.(g)),P=m.length;return m.length===1?d:d.map(g=>{const v=g.props;if(c?.(g))return g;const f=m.indexOf(g);return p.cloneElement(g,{...v,"data-group-item":"","data-first":M(f===0),"data-last":M(f===P-1),"data-between":M(f>0&&f<P-1),style:{"--group-count":P,"--group-index":f,...v?.style??{}}})})},[s,c]);return a.jsx(ke,{ref:r,alignItems:o,justifyContent:n,flexWrap:l,...u,className:ge("chakra-group",t.className),children:i})}));J.displayName="Group";const{withProvider:K,withContext:N}=de({key:"pagination"});K(Q,"root",{forwardAsChild:!0,forwardProps:["page"]});const Fe=K(q,"root",{forwardAsChild:!0,forwardProps:["page"]}),Ve=N(W,"ellipsis",{forwardAsChild:!0}),Be=N(X,"item",{forwardAsChild:!0}),Ue=N(Y,"nextTrigger",{forwardAsChild:!0}),De=N(Z,"prevTrigger",{forwardAsChild:!0}),Oe=je;p.forwardRef(function(t,r){const{format:o="compact",...n}=t,{page:s,totalPages:l,pageRange:c,count:u}=T(),i=p.useMemo(()=>o==="short"?`${s} / ${l}`:o==="compact"?`${s} of ${l}`:`${c.start+1} - ${Math.min(c.end,u)} of ${u}`,[o,s,l,c,u]);return a.jsx(b,{fontWeight:"medium",ref:r,...n,children:i})});function I(e){return String(e).padStart(2,"0")}function He(e){const r=(e%360+360)%360/15,o=Math.floor(r),n=(r-o)*60,s=Math.floor(n),l=(n-s)*60;return`${I(o)}:${I(s)}:${l.toFixed(2).padStart(5,"0")}`}function We(e){const t=e<0?"-":"+",r=Math.abs(e),o=Math.floor(r),n=(r-o)*60,s=Math.floor(n),l=(n-s)*60;return`${t}${I(o)}:${I(s)}:${l.toFixed(2).padStart(5,"0")}`}function Xe({item:e}){const t=Pe(o=>o.backendUrl),r=`https://grizli-cutout.herokuapp.com/thumb?ra=${e.ra}&dec=${e.dec}&size=2&output=png&filters=f182m-clear,f210m-clear,f444w-clear`;return a.jsxs(j,{gap:4,p:4,children:[a.jsxs(b,{children:[a.jsx(xe,{size:"lg",children:e.id}),a.jsxs(j,{direction:"row",gap:4,mt:2,children:[a.jsxs(me,{variant:"surface",children:["z=",e.z?.toFixed(4)??"N/A"]}),a.jsxs(x,{fontSize:"sm",color:"fg.muted",children:["RA: ",e.ra.toFixed(5),", Dec: ",e.dec.toFixed(5)]}),a.jsxs(x,{fontSize:"sm",color:"fg.muted",children:["RA: ",He(e.ra),", Dec: ",We(e.dec)]})]}),a.jsx(x,{fontSize:"xs",fontFamily:"mono",color:"fg.muted",mt:1,children:e.ref_basename})]}),a.jsxs(fe,{defaultValue:"model_comparison",variant:"enclosed",children:[a.jsxs(he,{children:[a.jsx(E,{value:"model_comparison",children:"Model Comparison"}),a.jsx(E,{value:"best_model",disabled:!e.best_model_plot_url,children:"Best Model"}),a.jsx(E,{value:"posterior",disabled:!e.best_model_posterior_url,children:"Posterior"}),a.jsx(E,{value:"cutout",children:"Cutout"})]}),a.jsx(z,{value:"model_comparison",p:4,children:e.model_comparison_plot_url?a.jsxs(j,{gap:2,align:"center",children:[a.jsx(y,{src:`${t}${e.model_comparison_plot_url}`,alt:"Model Comparison",objectFit:"contain",maxH:"80vh",w:"full"}),a.jsx(x,{asChild:!0,fontSize:"sm",color:"blue.500",textDecoration:"underline",children:a.jsx("a",{href:`${t}${e.model_comparison_plot_url}`,target:"_blank",rel:"noopener noreferrer",children:"Open in new tab"})})]}):a.jsx(x,{color:"fg.muted",children:"No model comparison plot available"})}),a.jsx(z,{value:"best_model",p:4,children:e.best_model_plot_url?a.jsxs(j,{gap:2,align:"center",children:[a.jsx(y,{src:`${t}${e.best_model_plot_url}`,alt:"Best Model Fit",objectFit:"contain",maxH:"80vh",w:"full"}),a.jsx(x,{asChild:!0,fontSize:"sm",color:"blue.500",textDecoration:"underline",children:a.jsx("a",{href:`${t}${e.best_model_plot_url}`,target:"_blank",rel:"noopener noreferrer",children:"Open in new tab"})})]}):a.jsx(x,{color:"fg.muted",children:"No best model plot available"})}),a.jsx(z,{value:"posterior",p:4,children:e.best_model_posterior_url?a.jsxs(j,{gap:2,align:"center",children:[a.jsx(y,{src:`${t}${e.best_model_posterior_url}`,alt:"Best Model Posterior",objectFit:"contain",maxH:"80vh",w:"full"}),a.jsx(x,{asChild:!0,fontSize:"sm",color:"blue.500",textDecoration:"underline",children:a.jsx("a",{href:`${t}${e.best_model_posterior_url}`,target:"_blank",rel:"noopener noreferrer",children:"Open in new tab"})})]}):a.jsx(x,{color:"fg.muted",children:"No posterior plot available"})}),a.jsx(z,{value:"cutout",p:4,children:a.jsxs(j,{gap:2,align:"center",children:[a.jsx(y,{src:r,alt:"Cutout",objectFit:"contain",maxH:"80vh",w:"full"}),a.jsx(x,{asChild:!0,fontSize:"sm",color:"blue.500",textDecoration:"underline",children:a.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",children:"Open in new tab"})})]})})]})]})}function Ye({selectedId:e,onSelect:t}){const[r,o]=p.useState(1),n=20,{data:s,isLoading:l,isError:c,error:u}=be({page:r,pageSize:n,sortDesc:!0});return l?a.jsx(b,{p:4,display:"flex",justifyContent:"center",children:a.jsx(ce,{})}):c?a.jsxs(b,{p:4,color:"red.500",children:["Error loading catalog: ",u?.message]}):s?a.jsxs(j,{gap:4,h:"full",children:[a.jsx(j,{gap:0,flex:1,overflowY:"auto",children:s.items.map(i=>a.jsxs(b,{p:3,cursor:"pointer",bg:e===i.id?"bg.subtle":"transparent",_hover:{bg:"bg.subtle"},onClick:()=>t(i),borderBottomWidth:"1px",borderColor:"border.muted",children:[a.jsx(x,{fontWeight:"medium",truncate:!0,children:i.id}),a.jsxs(x,{fontSize:"sm",color:"fg.muted",children:["z: ",i.z?.toFixed(3)??"N/A"]}),a.jsx(x,{fontSize:"xs",color:"fg.muted",truncate:!0,children:i.ref_basename})]},i.id))}),a.jsx(b,{p:2,borderTopWidth:"1px",borderColor:"border.muted",children:a.jsx(Fe,{count:s.total,pageSize:n,page:r,onPageChange:i=>o(i.page),siblingCount:1,children:a.jsxs(J,{gap:2,justify:"center",w:"full",children:[a.jsx(De,{asChild:!0,children:a.jsx(k,{variant:"ghost",size:"sm",children:a.jsx(pe,{})})}),a.jsx(Oe,{children:({pages:i})=>i.map((d,m)=>{if(d.type==="page")return a.jsx(Be,{...d,asChild:!0,children:a.jsx(k,{variant:d.value===s.page?"outline":"ghost",size:"sm",children:d.value})},d.value);const P=i[m-1],g=i[m+1],v=P?.type==="page"?P.value:"start",f=g?.type==="page"?g.value:"end";return a.jsx(Ve,{index:m},`ellipsis-${v}-${f}`)})}),a.jsx(Ue,{asChild:!0,children:a.jsx(k,{variant:"ghost",size:"sm",children:a.jsx(ue,{})})})]})})})]}):null}function Ze(){const[e,t]=p.useState(null);return a.jsxs(ve,{templateColumns:"350px 1fr",h:"100vh",gap:4,p:4,children:[a.jsx(b,{overflowY:"auto",borderRightWidth:"1px",borderColor:"border.muted",pr:2,children:a.jsx(Ye,{selectedId:e?.id??null,onSelect:t})}),a.jsx(b,{overflowY:"auto",h:"full",children:e?a.jsx(Xe,{item:e}):a.jsx(b,{p:4,color:"fg.muted",children:"Select an item to view details"})})]})}function tt(){return a.jsx(Ze,{})}export{tt as component};
