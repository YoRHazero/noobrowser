import{r as i,j as e,D as w,B as j,S as l,H as o,a as m,b as U,t as T}from"./index-Do8gBRn6.js";import{u as H,a as N,T as g,B as r,b as E}from"./connection-D3M_8NiJ.js";import{G as F,C as I,l as R,a as W,S as P}from"./logo-D-y9jw4-.js";import{I as q,H as z}from"./image-BGJo3Kbq.js";import{F as f,a as b,I as S,b as A}from"./input-hxfNrpHI.js";function Q(){const{backendUrl:t,username:c,setIsConnected:n,setBackendUrl:v,setUsername:y,reset:k}=H(),[d,u]=i.useState(t),[x,h]=i.useState(c),C=()=>{let s=d.trim();!s.startsWith("http://")&&!s.startsWith("https://")&&(s=`http://${s}`),v(s),y(x.trim()),T.success({title:"Settings saved",description:"Configuration updated successfully."})},B=()=>{k(),u(""),h("")},a=N({queryKey:["backend-status",t],enabled:!!t,retry:0,queryFn:({signal:s})=>E.get(t,{signal:s,timeout:3e3,validateStatus:()=>!0}).then(p=>({status:p.status,data:p.data}))});return i.useEffect(()=>{a.isSuccess?n(!0):n(!1)},[a.isSuccess,n]),e.jsx(w,{children:e.jsxs("div",{style:{position:"relative",width:"100%",height:"100vh"},children:[e.jsx(F,{transparent:!1}),e.jsx(j,{minH:"100vh",bg:"transparent",color:"fg",children:e.jsx(I,{py:"12",children:e.jsxs(l,{gap:"8",w:"full",maxW:"lg",px:{base:4,md:6},children:[e.jsxs(l,{align:"center",gap:"3",children:[e.jsx(q,{src:R,alt:"Noobrowser logo",boxSize:"40",css:{animation:"spin 20s linear infinite"}}),e.jsx(W,{children:e.jsx(z,{size:"3xl",children:"NooBrowser"})}),e.jsx(P,{text:"A web tool for wfss built with React",disabled:!1,speed:5,className:"text-fg-muted"})]}),e.jsx(j,{bg:"bg.panel",borderWidth:"1px",rounded:"l3",p:"6",shadow:"sm",children:e.jsxs(l,{gap:"5",children:[e.jsxs(f,{children:[e.jsx(b,{children:"Backend URL"}),e.jsx(S,{id:"backendUrl",placeholder:"http://127.0.0.1:8000",value:d,onChange:s=>u(s.currentTarget.value)}),e.jsx(A,{children:"Example: http://localhost:8000, the address of noobackend"})]}),e.jsxs(f,{children:[e.jsx(b,{children:"Username"}),e.jsx(S,{id:"username",placeholder:"Your username",value:x,onChange:s=>h(s.currentTarget.value)})]}),e.jsxs(o,{justify:"flex-end",children:[e.jsx(m,{variant:"outline",onClick:B,children:"Reset"}),e.jsx(m,{colorPalette:"teal",onClick:C,children:"Save"})]})]})}),e.jsxs(g,{textStyle:"sm",color:"fg.muted",children:["Current configuration: ",c||"Anonymous","@",t||"Not set"]}),e.jsxs(o,{children:[e.jsx(g,{fontWeight:"semibold",children:"Backend status:"}),!t&&e.jsx(r,{variant:"subtle",children:"Not configured"}),t&&a.isPending&&e.jsxs(o,{gap:"2",children:[e.jsx(U,{boxSize:"4"})," ",e.jsx(r,{variant:"subtle",children:"Checkingâ€¦"})]}),t&&a.isError&&e.jsx(r,{colorPalette:"red",children:"Disconnected"}),t&&a.isSuccess&&e.jsx(r,{colorPalette:"green",children:"Connected"})]})]})})})]})})}export{Q as component};
